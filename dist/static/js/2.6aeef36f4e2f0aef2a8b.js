webpackJsonp([2],{"3Opd":function(e,a){},"6JRZ":function(e,a){},cJyk:function(e,a){},dxqf:function(e,a){},jdf7:function(e,a){},lDxA:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=t("o32f"),n={data:function(){return{baseInfoItem:{groupName:"",groupShortName:"",depFunction:"",status:"",comment:""}}},methods:{updateCompanyData:function(){var e=this,a=this.baseInfoItem,t={groupName:a.groupName,groupShortName:a.groupShortName,depFunction:a.depFunction,status:a.status,comment:a.comment,groupCode:this.guid()};Object(o.R)(t).then(function(a){"add"==e.$route.name?e.$route.name:e.$route.params.groupId;a.success?e.$Message.info("保存成功"):e.$Message.error(a.message)})},getCompanyInfo:function(e){var a=this;Object(o.x)(e).then(function(e){a.baseInfoItem=e.tableContent[0],a.baseInfoItem.status=String(a.baseInfoItem.status)})},guid:function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},goCompanyList:function(){}},mounted:function(){var e="add"==this.$route.name?this.$route.name:this.$route.params.groupId;"add"!=e&&this.getCompanyInfo(e)}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"baseInfo"},[t("div",{staticClass:"baseInfo-warp"},[t("div",{staticClass:"baseInfo-body"},[t("div",{staticClass:"baseInfo-body-content"},[t("Form",{attrs:{model:e.baseInfoItem,"label-width":80}},[t("FormItem",{attrs:{label:"公司名称"}},[t("Input",{model:{value:e.baseInfoItem.groupName,callback:function(a){e.$set(e.baseInfoItem,"groupName",a)},expression:"baseInfoItem.groupName"}})],1),e._v(" "),t("FormItem",{attrs:{label:"公司简称"}},[t("Input",{model:{value:e.baseInfoItem.groupShortName,callback:function(a){e.$set(e.baseInfoItem,"groupShortName",a)},expression:"baseInfoItem.groupShortName"}})],1),e._v(" "),t("FormItem",{attrs:{label:"公司类型"}},[t("RadioGroup",{model:{value:e.baseInfoItem.depFunction,callback:function(a){e.$set(e.baseInfoItem,"depFunction",a)},expression:"baseInfoItem.depFunction"}},[t("Radio",{attrs:{label:"有限责任公司"}}),e._v(" "),t("Radio",{attrs:{label:"股份有限公司"}}),e._v(" "),t("Radio",{attrs:{label:"集团公司"}}),e._v(" "),t("Radio",{attrs:{label:"有限合伙"}}),e._v(" "),t("Radio",{attrs:{label:"普通合伙"}}),e._v(" "),t("Radio",{attrs:{label:"个人独资"}}),e._v(" "),t("Radio",{attrs:{label:"子公司"}})],1)],1),e._v(" "),t("FormItem",{attrs:{label:"公司状态"}},[t("Select",{model:{value:e.baseInfoItem.status,callback:function(a){e.$set(e.baseInfoItem,"status",a)},expression:"baseInfoItem.status"}},[t("Option",{attrs:{value:"3"}},[e._v("草稿")]),e._v(" "),t("Option",{attrs:{value:"2"}},[e._v("未使用")]),e._v(" "),t("Option",{attrs:{value:"1"}},[e._v("使用中")]),e._v(" "),t("Option",{attrs:{value:"0"}},[e._v("停用")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"公司说明"}},[t("Input",{attrs:{type:"textarea",rows:3},model:{value:e.baseInfoItem.comment,callback:function(a){e.$set(e.baseInfoItem,"comment",a)},expression:"baseInfoItem.comment"}})],1)],1)],1)])]),e._v(" "),t("Row",{staticClass:"info-btn"},[t("Button",{staticClass:"radius0",staticStyle:{"background-color":"rgb(0, 150, 136) !important",color:"#fff"},on:{click:e.updateCompanyData}},[e._v("保存")]),e._v(" "),t("Button",{staticClass:"radius0",staticStyle:{"background-color":"rgb(0, 150, 136) !important",color:"#fff"},on:{click:e.goCompanyList}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var s=t("VU/8")(n,i,!1,function(e){t("dxqf")},"data-v-5e9ffbb7",null).exports,r=t("fZjL"),l=t.n(r),m={data:function(){return{columns1:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"工号",width:100,key:"userCode"},{title:"姓名",width:100,key:"nickname"},{title:"性别",width:100,key:"gender"},{title:"手机",width:150,key:"mobile"},{title:"邮箱",width:150,key:"email"},{title:"创建时间",width:150,key:"crtTime"}],groupId:this.$route.params.groupId,memberData:[],pageTotal:0,memberLoading:!1,memberCurrentPage:1,pageSize:10,showModal:!1,allMemberLoading:!1,allMemberTotal:0,allMemberCurrentPage:1,allMemberPageSize:10,allMemberData:[],target:4,memberSelectionData:[]}},methods:{getAllUser:function(){var e=this;this.allMemberLoading=!0,Object(o.v)(this.allMemberCurrentPage,this.allMemberPageSize).then(function(a){a.tableContent[0]&&(e.allMemberData=a.tableContent,e.allMemberTotal=a.summary.total,e.allMemberLoading=!1)})},getCompanyMember:function(){var e=this;this.memberLoading=!0,Object(o.y)(this.groupId,this.target,this.allMemberCurrentPage,this.allMemberPageSize).then(function(a){a.length>0&&(e.memberData=a[0].userList,e.pageTotal=a.length,e.memberLoading=!1)})},pageChange:function(e){this.getCompanyMember(e,this.pageSize)},showAllMember:function(){this.showModal=!0,this.getAllUser()},onSelectionChange:function(e){this.memberSelectionData=e},onMemberPageChange:function(e){this.allMemberCurrentPage=e,this.getAllUser()},onAllMemberPageSizeChange:function(e){this.allMemberPageSize=e,this.getAllUser()},addCompanyMember:function(){var e=this,a=[];l()(this.memberSelectionData.length>0)?(this.memberSelectionData.forEach(function(e){a.push({groupId:this.groupId,userId:e.userId})}),Object(o.a)(a).then(function(a){a.success&&(e.$Message.success(a.message),e.getCompanyMember())})):this.$Message.warning("请选择至少一个公司！")}},mounted:function(){this.getCompanyMember()}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"member-wrap"},[t("div",{staticClass:"member-wrap-table"},[t("Button",{attrs:{icon:"md-add",type:"primary"},on:{click:e.showAllMember}},[e._v("添加")]),e._v(" "),t("br"),e._v(" "),t("Table",{attrs:{loading:e.memberLoading,columns:e.columns1,data:e.memberData}}),e._v(" "),t("div",{staticClass:"member-wrap-page"},[t("Page",{attrs:{total:e.pageTotal,current:e.memberCurrentPage,"page-size":e.pageSize,size:"small","show-sizer":"","show-elevator":""},on:{"on-change":e.pageChange}})],1),e._v(" "),t("Modal",{attrs:{title:"选择用户",width:"950"},on:{"on-ok":e.addCompanyMember},model:{value:e.showModal,callback:function(a){e.showModal=a},expression:"showModal"}},[t("Table",{ref:"selection",attrs:{"highlight-row":!0,height:"400",loading:e.allMemberLoading,columns:e.columns1,data:e.allMemberData},on:{"on-row-click":e.onSelectionChange}}),e._v(" "),t("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[t("div",{staticClass:"fr"},[t("Page",{attrs:{total:e.allMemberTotal,"show-elevator":"","show-sizer":"",current:e.allMemberCurrentPage,"page-size":e.allMemberPageSize,size:"small","show-total":""},on:{"on-page-size-change":e.onAllMemberPageSizeChange,"on-change":e.onMemberPageChange}})],1)])],1)],1)])},staticRenderFns:[]};var h={data:function(){return{groupId:this.$route.params.groupId,higherLoading:!1,higherCompanyData:[],higherCompanyTotal:0,higherCompanyCurrentPage:1,higherCompanyPageSize:10,companyLoading:!1,companyTotal:0,companyCurrentPage:1,companyPageSize:10,companyData:[],columns:[{title:"公司ID",key:"groupId"},{title:"公司名称",key:"groupName"},{title:"公司简称",key:"groupShortName"},{title:"公司类型",key:"depFunction"},{title:"公司简称",key:"groupShortName"},{title:"修改时间",key:"modTime"},{title:"创建时间",key:"crtTime"},{title:"创建者",key:"creator"},{title:"状态",key:"status",render:function(e,a){return e("span",{style:{color:"#39f"}},1===a.row.status?"使用中":0===a.row.status?"停用":"未使用")}}],selectCompanyData:{},showModal:!1}},methods:{getAllCompanyList:function(){var e=this;this.companyLoading=!0,Object(o.y)(this.groupId,3,this.companyCurrentPage,this.companyPageSize).then(function(a){e.companyData=a,e.companyTotal=a.length,e.companyLoading=!1})},getHigherCompanyData:function(){var e=this;this.higherLoading=!0,Object(o.y)(this.groupId,1,this.higherCompanyCurrentPage,this.higherCompanyPageSize).then(function(a){e.higherCompanyData=a,e.higherCompanyTotal=a.length,e.higherLoading=!1})},onSelectionChange:function(e){this.selectCompanyData=e},showCompanyModal:function(){this.showModal=!0,this.getAllCompanyList()},onPageSizeChange:function(e){this.highCompanyPageSize=e,this.getHigherCompanyData()},onPageChange:function(e){this.highCompanyCurrentPage=e,this.getHigherCompanyData()},onAllCompanyPageSizeChange:function(e){this.companyPageSize=e,this.getAllCompanyList()},onCompanyPageChange:function(e){this.companyCurrentPage=e},addHigherCompany:function(){var e=this,a=void 0;l()(this.selectCompanyData).length>0?a=this.selectCompanyData.groupId:this.$Message.warning("请选择至少一个公司！"),a&&this.groupId?Object(o.b)(Number(this.groupId),Number(a)).then(function(a){a.success&&(e.$Message.success(a.message),e.getHigherCompanyData())}):this.$Message.warning("无公司ID，请先保存公司再进行编辑！")}},mounted:function(){this.getHigherCompanyData()}},g={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"higher-company"},[t("div",{staticClass:"higher-company-detail",attrs:{id:"cliHeight"}},[t("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"info"},on:{click:e.showCompanyModal}},[e._v("选择上级用户")]),e._v(" "),t("Table",{ref:"selection",attrs:{columns:e.columns,loading:e.higherLoading,data:e.higherCompanyData}}),e._v(" "),t("div",[t("div",{staticStyle:{float:"right"}},[t("Page",{attrs:{total:e.higherCompanyTotal,"show-elevator":"","show-sizer":"",current:e.higherCompanyCurrentPage,"page-size":e.higherCompanyPageSize,size:"small","show-total":""},on:{"on-page-size-change":e.onPageSizeChange,"on-change":e.onPageChange}})],1)])],1),e._v(" "),t("Modal",{attrs:{title:"选择用户",width:"1000"},on:{"on-ok":e.addHigherCompany},model:{value:e.showModal,callback:function(a){e.showModal=a},expression:"showModal"}},[t("Table",{ref:"selection",attrs:{"highlight-row":!0,height:"400",loading:e.companyLoading,columns:e.columns,data:e.companyData},on:{"on-row-click":e.onSelectionChange}}),e._v(" "),t("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[t("div",{staticClass:"fr"},[t("Page",{attrs:{total:e.companyTotal,"show-elevator":"","show-sizer":"",current:e.companyCurrentPage,"page-size":e.companyPageSize,size:"small","show-total":""},on:{"on-page-size-change":e.onAllCompanyPageSizeChange,"on-change":e.onCompanyPageChange}})],1)])],1)],1)},staticRenderFns:[]};var u={data:function(){return{groupId:this.$route.params.groupId,lowerLoading:!1,lowerCompanyData:[],lowerCompanyTotal:0,lowerCompanyCurrentPage:1,lowerCompanyPageSize:10,companyLoading:!1,companyTotal:0,companyCurrentPage:1,companyPageSize:10,companyData:[],columns:[{title:"公司ID",key:"groupId"},{title:"公司名称",key:"groupName"},{title:"公司简称",key:"groupShortName"},{title:"公司类型",key:"depFunction"},{title:"公司简称",key:"groupShortName"},{title:"修改时间",key:"modTime"},{title:"创建时间",key:"crtTime"},{title:"创建者",key:"principalInfo.nikeName"},{title:"状态",key:"status",render:function(e,a){return e("span",{style:{color:"#39f"}},1===a.row.status?"使用中":0===a.row.status?"停用":"未使用")}}],selectCompanyData:{},showModal:!1}},methods:{getAllCompanyList:function(){var e=this;this.companyLoading=!0,Object(o.y)(this.groupId,3,this.companyCurrentPage,this.companyPageSize).then(function(a){e.companyData=a,e.companyTotal=a.length,e.companyLoading=!1})},getlowerCompanyData:function(){var e=this;this.lowerLoading=!0,Object(o.y)(this.groupId,2,this.lowerCompanyCurrentPage,this.lowerCompanyPageSize).then(function(a){e.lowerCompanyData=a,e.lowerCompanyTotal=a.length,e.lowerLoading=!1})},onSelectionChange:function(e){this.selectCompanyData=e},showCompanyModal:function(){this.showModal=!0,this.getAllCompanyList()},onPageSizeChange:function(e){this.highCompanyPageSize=e,this.getlowerCompanyData()},onPageChange:function(e){this.highCompanyCurrentPage=e,this.getlowerCompanyData()},onAllCompanyPageSizeChange:function(e){this.companyPageSize=e,this.getAllCompanyList()},onCompanyPageChange:function(e){this.companyCurrentPage=e},addlowerCompany:function(){var e=this,a=void 0;l()(this.selectCompanyData).length>0?a=this.selectCompanyData.groupId:this.$Message.warning("请选择至少一个公司！"),a&&this.groupId?Object(o.d)(Number(a),Number(this.groupId)).then(function(a){a.success&&(e.$Message.success(a.message),e.getlowerCompanyData())}):this.$Message.warning("无公司ID，请先保存公司再进行编辑！")}},mounted:function(){this.getlowerCompanyData()}},p={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"lower-company"},[t("div",{staticClass:"lower-company-detail",attrs:{id:"cliHeight"}},[t("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"info"},on:{click:e.showCompanyModal}},[e._v("选择下级用户")]),e._v(" "),t("Table",{ref:"selection",attrs:{columns:e.columns,loading:e.lowerLoading,data:e.lowerCompanyData}}),e._v(" "),t("div",[t("div",{staticStyle:{float:"right"}},[t("Page",{attrs:{total:e.lowerCompanyTotal,"show-elevator":"","show-sizer":"",current:e.lowerCompanyCurrentPage,"page-size":e.lowerCompanyPageSize,size:"small","show-total":""},on:{"on-page-size-change":e.onPageSizeChange,"on-change":e.onPageChange}})],1)])],1),e._v(" "),t("Modal",{attrs:{title:"选择用户",width:"1000"},on:{"on-ok":e.addlowerCompany},model:{value:e.showModal,callback:function(a){e.showModal=a},expression:"showModal"}},[t("Table",{ref:"selection",attrs:{"highlight-row":!0,height:"400",loading:e.companyLoading,columns:e.columns,data:e.companyData},on:{"on-row-click":e.onSelectionChange}}),e._v(" "),t("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[t("div",{staticClass:"fr"},[t("Page",{attrs:{total:e.companyTotal,"show-elevator":"","show-sizer":"",current:e.companyCurrentPage,"page-size":e.companyPageSize,size:"small","show-total":""},on:{"on-page-size-change":e.onAllCompanyPageSizeChange,"on-change":e.onCompanyPageChange}})],1)])],1)],1)},staticRenderFns:[]};var d={components:{BaseInfo:s,MemberInfo:t("VU/8")(m,c,!1,function(e){t("cJyk")},"data-v-259a7f68",null).exports,HigherCompany:t("VU/8")(h,g,!1,function(e){t("jdf7")},null,null).exports,LowerCompany:t("VU/8")(u,p,!1,function(e){t("ohHw")},null,null).exports},data:function(){return{groupId:this.$route.params.groupId,whichShow:{baseInfo:!0,higherCompany:!1,lowerCompany:!1,member:!1},companyInformation:{nickname:"测试",userCode:"1234",status:1},relativeInstance:[{name:"下级公司",showName:"lowerCompany",isShow:!0,isShowAcive:!1,relativeNum:1,imgUrl:"resources/images/icon/company.png"},{name:"上级公司",showName:"higherCompany",isShow:!0,isShowAcive:!1,relativeNum:1,imgUrl:"resources/images/icon/company.png"},{name:"公司成员",showName:"member",isShow:!0,isShowAcive:!1,relativeNum:1,imgUrl:"resources/images/icon/user.png"},{name:"公司信息",showName:"baseInfo",isShow:!0,isShowAcive:!0,relativeNum:1,imgUrl:"resources/images/icon/company.png"}]}},methods:{onClickTab:function(e){var a=this;this.relativeInstance.forEach(function(t,o){e===o?(t.isShowAcive=!0,a.whichShow[t.showName]=!0):(t.isShowAcive=!1,a.whichShow[t.showName]=!1)})}}},y={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"content-wrap"},[t("Row",{staticClass:"detail-header"},[t("Breadcrumb",{staticClass:"detail-header-bread"},[t("BreadcrumbItem",[e._v(e._s(e.companyInformation.nickname?e.companyInformation.nickname:"用户"))]),e._v(" "),t("BreadcrumbItem",[e._v(e._s(e.companyInformation.userCode?e.companyInformation.userCode:"创建"))])],1),e._v(" "),t("Tag",{directives:[{name:"show",rawName:"v-show",value:e.companyInformation.status,expression:"companyInformation.status"},{name:"instanceStateDirective",rawName:"v-instanceStateDirective",value:{status:e.companyInformation.status,color:"#eb2f96"},expression:"{status:companyInformation.status,color:'#eb2f96'}"}],staticClass:"radius10 marlr10 color_fff"})],1),e._v(" "),t("Row",{staticClass:"detail-tabs"},e._l(e.relativeInstance,function(a,o){return(e.groupId?a.isShow:a.isShowAcive)?t("div",{key:o,class:{"detail-tabs-child":!0,active:a.isShowAcive},on:{click:function(a){e.onClickTab(o)}}},[t("img",{attrs:{src:a.imgUrl}}),e._v(" "),t("div",{staticClass:"detail-tabs-child-right"},[t("span",[e._v(e._s(a.relativeNum))]),e._v(" "),t("p",[e._v(e._s(a.name))])])]):e._e()})),e._v(" "),t("Row",{staticClass:"detail-content"},[e.whichShow.baseInfo?t("base-info"):e._e(),e._v(" "),e.whichShow.member?t("member-info"):e._e(),e._v(" "),e.whichShow.higherCompany?t("higher-company"):e._e(),e._v(" "),e.whichShow.lowerCompany?t("lower-company"):e._e()],1)],1)},staticRenderFns:[]};var f=t("VU/8")(d,y,!1,function(e){t("6JRZ"),t("3Opd")},"data-v-1eb7ec20",null);a.default=f.exports},ohHw:function(e,a){}});
//# sourceMappingURL=2.6aeef36f4e2f0aef2a8b.js.map