webpackJsonp([13],{CwxW:function(t,e,a){"use strict";var s={name:"ProgressRing",props:{radius:Number,progress:Number,strokeWidth:Number,bottomColor:{default:function(){return"#f0f0f0"}},progressColor:{default:function(t){return"green"}}},computed:{strokeDashoffset:function(){return this.circumference-this.percent/100*this.circumference}},watch:{progress:function(){var t=this;this.percent=0;var e=setInterval(function(){t.percent+=1,t.progress===t.percent?clearInterval(e):0===t.progress&&clearInterval(e)},10)}},data:function(){var t=this.radius-2*this.strokeWidth;return{normalizedRadius:t,circumference:2*t*Math.PI,percent:0}},mounted:function(){var t=this;this.percent=0;var e=setInterval(function(){t.percent+=1,t.progress===t.percent?clearInterval(e):0===t.progress&&clearInterval(e)},10)}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{attrs:{height:2*t.radius,width:2*t.radius}},[a("circle",{attrs:{stroke:t.bottomColor,fill:"transparent","stroke-width":t.strokeWidth,r:t.normalizedRadius,cx:t.radius,cy:t.radius}}),t._v(" "),a("circle",{style:{strokeDashoffset:t.strokeDashoffset},attrs:{stroke:t.progressColor,fill:"transparent","stroke-dasharray":t.circumference+" "+t.circumference,"stroke-width":t.strokeWidth+1,r:t.normalizedRadius,cx:t.radius,cy:t.radius}}),t._v(" "),a("text",{staticStyle:{fill:"gray","font-weight":"600","text-anchor":"middle","baseline-shift":"sub","font-family":"sans-serif"},attrs:{x:t.radius,dy:t.radius-3}},[t._v(t._s(t.progress)+"%")])])},staticRenderFns:[]},n=a("VU/8")(s,i,!1,null,null,null).exports;e.a=n},Ny0i:function(t,e){},YFG3:function(t,e){},"jN7+":function(t,e){},rLxg:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("UzZq"),i=a("CwxW"),n={name:"TaskStatistics",data:function(){return{todo:0,done:0,all:0,pageInfo:{limit:30,page:1,total:0},completionratio:0}},methods:{getData:function(){var t=this;Object(s.e)(this.pageInfo).then(function(e){t.todo=e.dataCount,Object(s.c)(t.pageInfo).then(function(e){t.done=e.dataCount,t.all=t.todo+t.done,0!==t.done&&0!==t.all?t.completionratio=parseInt(t.done/t.all*100):t.completionratio=0})})}},mounted:function(){this.getData()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"statistics shadow"},[a("div",{staticClass:"statistics-item"},[a("div",{staticClass:"statistics-item-txt"},[t._v("待办任务")]),t._v(" "),a("router-link",{attrs:{to:{name:"todo"}}},[a("div",{staticClass:"statistics-item-count todotask"},[t._v(t._s(t.todo))])])],1),t._v(" "),a("div",{staticClass:"statistics-item"},[a("div",{staticClass:"statistics-item-txt"},[t._v("已办任务")]),t._v(" "),a("router-link",{attrs:{to:{name:"done"}}},[a("div",{staticClass:"statistics-item-count donetask"},[t._v(t._s(t.done))])])],1),t._v(" "),a("div",{staticClass:"statistics-item"},[a("div",{staticClass:"statistics-item-txt"},[t._v("所有任务")]),t._v(" "),a("router-link",{attrs:{to:{name:"all"}}},[a("div",{staticClass:"statistics-item-count"},[t._v(t._s(t.all))])])],1),t._v(" "),a("Divider",{staticStyle:{height:"7em"},attrs:{type:"vertical"}}),t._v(" "),a("div",{staticClass:"statistics-item"},[a("i-circle",{attrs:{percent:t.completionratio,size:100,"trail-width":4,"stroke-width":8,"stroke-linecap":"square","stroke-color":"#1fe5bd"}},[a("div",{staticClass:"demo-Circle-custom"},[a("p",{staticStyle:{"font-size":"1rem!important",color:"#aaa"}},[t._v("完成率")]),t._v(" "),a("p",{staticStyle:{"font-size":"2.5em","font-family":"lcletter",color:"#1fe5bd"}},[t._v(t._s(t.completionratio)+"%")])])])],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(t){a("jN7+")},"data-v-e0bc4f92",null).exports,c=a("oAV5"),l=a("XLwt"),d={name:"TaskIncrementalAnalysis",data:function(){return{periodicType:"week",month:new Date}},watch:{month:function(t){this.renderReport()},periodicType:function(t){this.renderReport()}},methods:{handleChangePeriodicType:function(t){this.periodicType=t},getFlowTaskStatisticsData:function(){return Object(s.d)({date:Object(c.b)(this.month,"yyyy/MM/dd"),type:this.periodicType}).then(function(t){var e=[],a={name:"待办任务",type:"line",stack:"总量",areaStyle:{},data:[]},s={name:"已办任务",type:"line",stack:"总量",areaStyle:{},data:[]},i={name:"所有任务",type:"line",stack:"总量",areaStyle:{},data:[]};return t.map(function(t){e.push(t.xAxis),a.data.push(t.todo),s.data.push(t.done),i.data.push(t.todo+t.done)}),{xAxis:e,series:[a,s,i]}})},initOption:function(t,e){return{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},title:{text:"任务增量分析"},legend:{data:["待办任务","已办任务","所有任务"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:t}],yAxis:[{type:"value"}],series:e}},renderReport:function(){var t=this;this.getFlowTaskStatisticsData().then(function(e){var a=l.init(document.getElementById("data_source_con"));a.setOption(t.initOption(e.xAxis,e.series)),window.addEventListener("resize",function(){a.resize()})})}},mounted:function(){this.renderReport()}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"incrementalanalysis shadow"},[a("div",{staticClass:"incrementalanalysis-header"},[a("strong",[t._v("\n            查看范围:\n        ")]),t._v(" "),a("DatePicker",{staticStyle:{width:"100px"},attrs:{type:"month",placeholder:"选择月份",format:"yyyy-MM",clearable:!1},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}}),t._v(" "),a("div",{staticClass:"incrementalanalysis-header-daterange"},[a("span",{staticClass:"customs-tag",class:{"customs-tag-active":"week"===t.periodicType},on:{click:function(e){t.handleChangePeriodicType("week")}}},[t._v("周")]),t._v(" "),a("span",{staticClass:"customs-tag",class:{"customs-tag-active":"day"===t.periodicType},on:{click:function(e){t.handleChangePeriodicType("day")}}},[t._v("天")])])],1),t._v(" "),a("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"data_source_con"}})])},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(t){a("Ny0i")},"data-v-3de42a9c",null).exports,m={name:"Reports",components:{ProgressRing:i.a,TaskStatistics:o,TaskIncrementalAnalysis:p},data:function(){return{active:!1,month:""}},methods:{handleSelectDataRange:function(t){}},mounted:function(){this.$nextTick(function(){var t=echarts.init(document.getElementById("data_source_con"));t.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{selectedMode:!1,x:30,y:8,data:["待办任务","已办任务","所有任务"]},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"待办任务",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"已办任务",type:"line",stack:"总量",areaStyle:{},data:[220,182,191,234,290,330,310]},{name:"所有任务",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]}]}),window.addEventListener("resize",function(){t.resize()})})}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"reports"},[e("div",{staticClass:"reports-header"},[this._v("\n        统计报表\n    ")]),this._v(" "),e("div",{staticClass:"reports-content"},[e("task-statistics"),this._v(" "),e("task-incremental-analysis")],1)])},staticRenderFns:[]};var f=a("VU/8")(m,h,!1,function(t){a("YFG3")},"data-v-29c55375",null);e.default=f.exports}});