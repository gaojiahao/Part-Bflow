webpackJsonp([20],{"3nRU":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=a("p1MO"),n={name:"checkSheet",components:{},data:function(){return{checkSheetId:this.$route.params.id,total:0,currentPage:1,pageSize:20,checkSheetName:"",checkSheetDesc:"",showModal:!1,columns:[{type:"index",width:80},{title:"检查项目",key:"title"},{title:"检查内容",key:"content"},{title:"操作",key:"action",render:function(e,t){return e("div",[e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){}}},"删除")])}}],data:[],formValidate:{name:"",content:""},ruleValidate:{name:[{required:!0,message:"请输入检查项目名称",trigger:"blur"}],content:[{required:!0,message:"请输入检查内容",trigger:"blur"}]}}},methods:{onPageChange:function(e){this.currentPage=e,this.getCheckSheetItemData()},onPageSizeChange:function(e){this.pageSize=e,this.getCheckSheetItemData()},goCheckSheet:function(){this.$router.push({path:"/checkSheet/list"})},addCheckItem:function(){this.showModal=!0},cancelAdd:function(){this.showModal=!1},confirmAdd:function(){var e=this;this.$refs.formValidate.validate(function(t){t&&(e.data.push({title:e.formValidate.name,content:e.formValidate.content}),e.showModal=!1)})},saveCheckSheet:function(){var e=this;if(this.checkSheetName&&this.data.length>0){var t=void 0;this.checkSheetId?(t={id:this.checkSheetId,name:this.checkSheetName,comment:this.checkSheetDesc,jopCheckContentList:this.data},Object(c.e)(t).then(function(t){t.success&&e.$Message.success(t.message)}).catch(function(t){e.$Message.error(t.data.message)})):(t={name:this.checkSheetName,comment:this.checkSheetDesc,jopCheckContentList:this.data},Object(c.d)(t).then(function(t){t.message&&(e.$Message.success(t.message),e.checkSheetName="",e.checkSheetDesc="",e.data=[])}).catch(function(t){e.$Message.error(t.data.message)}))}},getCheckSheetItemData:function(){var e=this;Object(c.b)(this.checkSheetId,this.currentPage,this.pageSize).then(function(t){e.data=t.tableContent,e.total=t.dataCount,e.checkSheetDesc=t.checkKeyTableComment,e.checkSheetName=t.checkKeyTableName})}},mounted:function(){var e;this.checkSheetId&&((e=this.columns).push.apply(e,[{title:"创建者",key:"creator"},{title:"创建时间",key:"crtTime"},{title:"修改者",key:"modifer"},{title:"修改时间",key:"modTime"}]),this.getCheckSheetItemData())}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"check-detail"},[a("Row",{staticClass:"check-detail-bread"},[a("h3",[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return t.stopPropagation(),e.goCheckSheet(t)}}},[e._v("点检表")]),e._v("\n            / "+e._s(e.checkSheetName))])]),e._v(" "),a("Row",{staticClass:"check-detail-title"},[a("span",[e._v("点检表名称：")]),e._v(" "),a("Input",{staticStyle:{width:"200px"},attrs:{autofocus:!0,placeholder:"请输入点检表名称"},model:{value:e.checkSheetName,callback:function(t){e.checkSheetName=t},expression:"checkSheetName"}})],1),e._v(" "),a("Row",{staticClass:"check-detail-title"},[a("span",[e._v("点检表描述：")]),e._v(" "),a("Input",{attrs:{type:"textarea"},model:{value:e.checkSheetDesc,callback:function(t){e.checkSheetDesc=t},expression:"checkSheetDesc"}})],1),e._v(" "),a("Row",{staticClass:"check-detail-table"},[a("Button",{staticClass:"check-detail-btn",attrs:{type:"primary"},on:{click:e.addCheckItem}},[e._v("新增")]),e._v(" "),a("Table",{attrs:{columns:e.columns,data:e.data,size:"small"}}),e._v(" "),a("div",{staticClass:"user-page"},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.total,current:e.currentPage,"page-size":e.pageSize,size:"small","show-elevator":"","show-sizer":""},on:{"on-page-size-change":e.onPageSizeChange,"on-change":e.onPageChange}})],1)])],1),e._v(" "),a("Row",{staticClass:"check-detail-save"},[a("Button",{staticClass:"check-detail-save-btn",attrs:{type:"primary"},on:{click:e.saveCheckSheet}},[e._v("保存")])],1),e._v(" "),a("Modal",{attrs:{title:"新增检查项目"},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"检查项目",prop:"name"}},[a("Input",{model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"检查内容",prop:"content"}},[a("Input",{attrs:{type:"textarea"},model:{value:e.formValidate.content,callback:function(t){e.$set(e.formValidate,"content",t)},expression:"formValidate.content"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.confirmAdd}},[e._v("确定")]),e._v(" "),a("Button",{attrs:{type:"default"},on:{click:e.cancelAdd}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(n,s,!1,function(e){a("wP3E")},"data-v-6872654c",null);t.default=i.exports},p1MO:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"b",function(){return s}),a.d(t,"d",function(){return i}),a.d(t,"e",function(){return o}),a.d(t,"a",function(){return h});var c=a("7B+g"),n=function(e,t){return Object(c.a)("/H_roleplay-si/check/listCheckKeyTable",{page:e,limit:t})},s=function(e,t,a){return Object(c.a)("/H_roleplay-si/check/listCheckContent",{checkKeyId:e,page:t,limit:a})},i=function(e){return Object(c.a)("/H_roleplay-si/check/saveCheckKeyTableAndCheckContent",{},"POST",e)},o=function(e){return Object(c.a)("/H_roleplay-si/check/updateCheckKeyTableAndCheckContent",{},"POST",e)},h=function(e){return Object(c.a)("/H_roleplay-si/check/deleteCheckKeyTable",{checkKeyTableId:e},"POST")}},wP3E:function(e,t){}});