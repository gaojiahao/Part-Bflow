webpackJsonp([7],{"10Zn":function(t,e){},"112B":function(t,e){},"2quZ":function(t,e){},"5cif":function(t,e){},GynB:function(t,e){},JrnK:function(t,e){},TQvf:function(t,e,a){
/*!
 * clipboard.js v2.0.1
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT Â© Zeno Rocha
 */
var i;i=function(){return function(t){var e={};function a(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=t,a.c=e,a.i=function(t){return t},a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=3)}([function(t,e,a){var i,n,s,o;o=function(t,e){"use strict";var a,i=(a=e)&&a.__esModule?a:{default:a};var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolveOptions(e),this.initSelection()}return s(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var a=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=a+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":n(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=o},n=[t,a(7)],void 0===(s="function"==typeof(i=o)?i.apply(e,n):i)||(t.exports=s)},function(t,e,a){var i=a(6),n=a(5);t.exports=function(t,e,a){if(!t&&!e&&!a)throw new Error("Missing required arguments");if(!i.string(e))throw new TypeError("Second argument must be a String");if(!i.fn(a))throw new TypeError("Third argument must be a Function");if(i.node(t))return function(t,e,a){return t.addEventListener(e,a),{destroy:function(){t.removeEventListener(e,a)}}}(t,e,a);if(i.nodeList(t))return function(t,e,a){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,a)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,a)})}}}(t,e,a);if(i.string(t))return function(t,e,a){return n(document.body,t,e,a)}(t,e,a);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(t,e){function a(){}a.prototype={on:function(t,e,a){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:a}),this},once:function(t,e,a){var i=this;function n(){i.off(t,n),e.apply(a,arguments)}return n._=e,this.on(t,n,a)},emit:function(t){for(var e=[].slice.call(arguments,1),a=((this.e||(this.e={}))[t]||[]).slice(),i=0,n=a.length;i<n;i++)a[i].fn.apply(a[i].ctx,e);return this},off:function(t,e){var a=this.e||(this.e={}),i=a[t],n=[];if(i&&e)for(var s=0,o=i.length;s<o;s++)i[s].fn!==e&&i[s].fn._!==e&&n.push(i[s]);return n.length?a[t]=n:delete a[t],this}},t.exports=a},function(t,e,a){var i,n,s,o;o=function(t,e,a,i){"use strict";var n=r(e),s=r(a),o=r(i);function r(t){return t&&t.__esModule?t:{default:t}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var c=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}();var u=function(t){function e(t,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.resolveOptions(a),i.listenClick(t),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),c(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===l(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,o.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new n.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return d("action",t)}},{key:"defaultTarget",value:function(t){var e=d("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return d("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,a=!!document.queryCommandSupported;return e.forEach(function(t){a=a&&!!document.queryCommandSupported(t)}),a}}]),e}();function d(t,e){var a="data-clipboard-"+t;if(e.hasAttribute(a))return e.getAttribute(a)}t.exports=u},n=[t,a(0),a(2),a(1)],void 0===(s="function"==typeof(i=o)?i.apply(e,n):i)||(t.exports=s)},function(t,e){var a=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}t.exports=function(t,e){for(;t&&t.nodeType!==a;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},function(t,e,a){var i=a(4);function n(t,e,a,n,s){var o=function(t,e,a,n){return function(a){a.delegateTarget=i(a.target,e),a.delegateTarget&&n.call(t,a)}}.apply(this,arguments);return t.addEventListener(a,o,s),{destroy:function(){t.removeEventListener(a,o,s)}}}t.exports=function(t,e,a,i,s){return"function"==typeof t.addEventListener?n.apply(null,arguments):"function"==typeof a?n.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return n(t,e,a,i,s)}))}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var a=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===a||"[object HTMLCollection]"===a)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var a=t.hasAttribute("readonly");a||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),a||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),n=document.createRange();n.selectNodeContents(t),i.removeAllRanges(),i.addRange(n),e=i.toString()}return e}}])},t.exports=i()},TTHX:function(t,e){},aT8d:function(t,e){},b9Al:function(t,e){},dAjg:function(t,e){},dbUY:function(t,e){},gZT7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("GIAq"),n=a("XLwt"),s={name:"LineChart",props:{id:{type:String},title:{type:String},legendName:{type:String},xAxisData:{type:Array},seriesData:{type:Array},primaryColor:{type:String,default:"#26bba0"},areaColor:{type:String,default:"#38cdb27d"}},data:function(){return{}},methods:{draw:function(t,e){var a=n.init(document.getElementById(this.id)),i={title:{text:this.title,textStyle:{fontSize:14}},tooltip:{trigger:"axis"},color:[this.primaryColor],legend:{selectedMode:!1,x:30,y:8,data:[{name:this.legendName}]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value"},series:[{name:this.legendName,type:"line",smooth:!0,symbolSize:6,label:{normal:{show:!0,position:"top",color:this.primaryColor}},itemStyle:{normal:{color:this.primaryColor,borderWidth:2}},lineStyle:{color:this.primaryColor},areaStyle:{normal:{color:this.areaColor,show:!0,position:"top"}},data:t}]};a.setOption(i)}},watch:{seriesData:function(t){this.draw(t,this.xAxisData)}}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line-container"},[e("header",[this._t("header")],2),this._v(" "),e("div",{staticClass:"rfd-line-chart",attrs:{id:this.id}})])},staticRenderFns:[]};var r=a("VU/8")(s,o,!1,function(t){a("2quZ")},null,null).exports,l=a("lZCD"),c={name:"ChangeLog",components:{CustomModal:l.a},props:{listId:{type:String},isAdmin:{type:Boolean}},data:function(){return{visible:!1,isAdminTrue:!1,logData:[],modalFormData:{scope:[],spendTime:1,content:""},ruleValidate:{scope:[{type:"array",required:!0,message:"ä¸åè®¸ä¸ºç©º"}],spendTime:[{required:!0,message:"ä¸åè®¸ä¸ºç©º",type:"number"}],content:[{required:!0,message:"ä¸åè®¸ä¸ºç©º",trigger:"blur"}]}}},watch:{isAdmin:function(t){this.isAdminTrue=!!t}},methods:{showAppLog:function(){this.visible=!0},modalVisibleChange:function(t){this.$refs.formValidate.resetFields()},submitLog:function(t){var e=this,a=void 0;if(this.$refs.formValidate.validate(function(t){a=t}),a){var n=this.listId,s=this.modalFormData.scope.join(","),o=this.modalFormData.spendTime,r=this.modalFormData.content;Object(i.D)(n,s,o,r).then(function(t){t.success&&(e.$Message.success(t.message),e.visible=!1,e.getChangeLog())})}},getChangeLog:function(){var t=this,e=this.listId;Object(i.u)(e).then(function(e){e.tableContent&&(e.tableContent.map(function(t){t.CHANGE_RANGE&&(t.CHANGE_RANGE=t.CHANGE_RANGE.split(","))}),t.logData=e.tableContent)})}},created:function(){this.getChangeLog()}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"timeline-box",attrs:{fix:""}},[a("div",{staticClass:"app-resource-group-title"},[a("h3",[t._v("æ´æ°æ¥å¿ "),t.isAdminTrue?a("a",{on:{click:t.showAppLog}},[t._v("æ°å¢")]):t._e()])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.logData.length,expression:"logData.length===0?false:true"}],staticClass:"timeline-box-log"},[a("Timeline",{staticClass:"timeline-list",attrs:{pending:""}},t._l(t.logData,function(e,i){return a("TimelineItem",{key:i},[a("p",{staticClass:"time"},[t._v(t._s(e.VERSION))]),t._v(" "),a("ul",{staticClass:"timeline-item-content-ul"},[a("li",[a("span",[t._v(t._s(e.CREATOR_NAME))]),t._v(" "),a("span",[t._v(t._s(e.CRT_TIME))]),t._v(" "),a("span",[t._v("èç¨å°æ¶æ°:"+t._s(e.TIME_CONSUMING))])]),t._v(" "),a("li",[a("span",[t._v("æ´æ°èå´:")]),t._v(" "),t._l(e.CHANGE_RANGE,function(e,i){return a("span",{key:i,staticClass:"customs-tag"},[t._v(t._s(e))])})],2),t._v(" "),a("li",[a("span",[t._v("å¤æ³¨:"+t._s(e.CONTENT))])])])])}))],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.logData.length,expression:"logData.length===0?true:false"}],staticClass:"show-no-log"},[t._v("\n    ææ æ¥å¿...\n  ")]),t._v(" "),a("custom-modal",{attrs:{width:"600",footerBtnAlign:"right",title:"æ´æ°æ¥å¿"},on:{onVisibleChange:t.modalVisibleChange,"on-ok":t.submitLog},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticStyle:{margin:"20px auto",width:"85%"}},[a("Form",{ref:"formValidate",attrs:{"label-width":95,model:t.modalFormData,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"æ´æ°èå´:",prop:"scope"}},[a("Select",{attrs:{multiple:""},model:{value:t.modalFormData.scope,callback:function(e){t.$set(t.modalFormData,"scope",e)},expression:"modalFormData.scope"}},[a("Option",{attrs:{value:"è¡¨å"}},[t._v("è¡¨å")]),t._v(" "),a("Option",{attrs:{value:"ç§ç®å³ç³»"}},[t._v("ç§ç®å³ç³»")]),t._v(" "),a("Option",{attrs:{value:"æ¥è¡¨"}},[t._v("æ¥è¡¨")]),t._v(" "),a("Option",{attrs:{value:"å·¥ä½æµ"}},[t._v("å·¥ä½æµ")]),t._v(" "),a("Option",{attrs:{value:"æé"}},[t._v("æé")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"èç¨å°æ¶æ°:",prop:"spendTime"}},[a("InputNumber",{model:{value:t.modalFormData.spendTime,callback:function(e){t.$set(t.modalFormData,"spendTime",e)},expression:"modalFormData.spendTime"}}),t._v(" "),a("span",{staticStyle:{color:"#ddd","margin-left":"10px"}},[t._v("åä½/æ¶")])],1),t._v(" "),a("FormItem",{attrs:{label:"æ´æ°åå®¹:",prop:"content"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6}},model:{value:t.modalFormData.content,callback:function(e){t.$set(t.modalFormData,"content",e)},expression:"modalFormData.content"}})],1)],1)],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("wfE3")},null,null).exports,p=a("oAV5"),h={name:"LogInstance",components:{LineChart:r,ChangeLog:d,LineChartTime:r},props:{isAdmin:Boolean},data:function(){return{listId:this.$route.params.listId,month:new Date,xAxisData:[],seriesData:[],active:!0,xAxisTimeData:[],seriesTimeData:[],workFlowTimeActive:!0,workFlowMonth:new Date}},watch:{month:function(t){this.getInstanceData()},workFlowMonth:function(t){this.getWorkFlowTime()}},methods:{getInstanceData:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){var e=this,a=e.listId,i=e.month,n=t||(this.active?"week":"day");i=Object(p.b)(i,"yyyy/MM/dd"),getInstanceData(a,n,i).then(function(t){if(t.list[0]){var a=[],i=[];t.list.map(function(t){a.push(t.xAxis),i.push(t.num)}),e.seriesData=i,e.xAxisData=a}})}),getWorkFlowTime:function(t){var e=this,a=e.listId,n=e.workFlowMonth,s=t||(this.workFlowTimeActive?"week":"day");n=Object(p.b)(n,"yyyy/MM/dd"),Object(i.A)(a,s,n).then(function(t){if(t.list[0]){var a=[],i=[];t.list.map(function(t){a.push(t.xAxis),t.num?i.push(t.num):i.push(0)}),e.seriesTimeData=i,e.xAxisTimeData=a}})},selectDataRange:function(t){this.active="week"===t,this.getInstanceData(t)},selectSpendTimeRange:function(t){this.workFlowTimeActive="week"===t,this.getWorkFlowTime(t)}},mounted:function(){this.getInstanceData(),this.getWorkFlowTime()}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"background-color":"#f0f0f0"}},[t._m(0),t._v(" "),a("div",[a("div",{staticClass:"line-chart"},[a("line-chart",{attrs:{legendName:"æ°å¢å®ä¾æ°",xAxisData:t.xAxisData,seriesData:t.seriesData,id:"instanceLineChart",primaryColor:"#1890ff",areaColor:"#1890ff8c"}},[a("div",{staticClass:"line-chart-header",attrs:{slot:"header"},slot:"header"},[t._v("\n          æ¥çèå´:\n          "),a("DatePicker",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{type:"month",placeholder:"éæ©æä»½",format:"yyyy-MM",clearable:!1},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}}),t._v(" "),a("div",{staticClass:"select-range"},[a("span",{staticClass:"customs-tag",class:{"customs-tag-active":t.active},on:{click:function(e){t.selectDataRange("week")}}},[t._v("å¨")]),t._v(" "),a("span",{staticClass:"customs-tag",class:{"customs-tag-active":!t.active},on:{click:function(e){t.selectDataRange("day")}}},[t._v("å¤©")])])],1)])],1),t._v(" "),a("div",{staticClass:"line-chart"},[a("line-chart-time",{attrs:{legendName:"å®ä¾å¹³åå·¥ä½æµèç¨æ¶é´å¨æ(å°æ¶)",xAxisData:t.xAxisTimeData,seriesData:t.seriesTimeData,id:"spendTimeChart",primaryColor:"#f9499e",areaColor:"#f9499e8c"}},[a("div",{staticClass:"line-chart-header",attrs:{slot:"header"},slot:"header"},[t._v("\n          æ¥çèå´:\n          "),a("DatePicker",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{type:"month",placeholder:"éæ©æä»½",format:"yyyy-MM",clearable:!1},model:{value:t.workFlowMonth,callback:function(e){t.workFlowMonth=e},expression:"workFlowMonth"}}),t._v(" "),a("div",{staticClass:"select-range"},[a("span",{staticClass:"customs-tag",class:{"customs-tag-active":t.workFlowTimeActive},on:{click:function(e){t.selectSpendTimeRange("week")}}},[t._v("å¨")]),t._v(" "),a("span",{staticClass:"customs-tag",class:{"customs-tag-active":!t.workFlowTimeActive},on:{click:function(e){t.selectSpendTimeRange("day")}}},[t._v("å¤©")])])],1)])],1)]),t._v(" "),a("change-log",{attrs:{listId:t.listId,isAdmin:t.isAdmin}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-resource-group-title"},[e("h3",[this._v("æ°æ®åæ")])])}]};var f=a("VU/8")(h,m,!1,function(t){a("112B")},"data-v-78dd9104",null).exports,g=a("mvHQ"),v=a.n(g),y={name:"appInfo",components:{},props:{listId:String,appData:Object,isAdmin:Boolean},data:function(){return{showEditAppInfo:!0,isAdminTrue:!1,showEditBtn:!0,adminLoading:!0,selectModel:"",showAdminModal:!1,selector:"",searchValue:"",hasPublishStatus:"å·²åå¸",notPublishStatus:"æªåå¸",notAppStatusColor:"blue",hasAppStatusColor:"green",total:0,currentPage:1,pageSize:10,adminColumns:[{title:"å¤´å",key:"photo",width:80,render:function(t,e){return t("div",[t("Avatar",{props:{src:e.row.photo}})])}},{title:"å·¥å·",key:"userCode"},{title:"å§å",key:"nickname"},{title:"ææº",key:"mobile"},{title:"é®ç®±",key:"email"}],adminData:[],selectAdminData:{}}},watch:{isAdmin:function(t){this.isAdminTrue=!!t}},methods:{childHasPublished:function(t){this.appData.publish=1},editAppinfo:function(){var t=this;if(this.showEditAppInfo=!this.showEditAppInfo,this.showEditBtn=!this.showEditBtn,this.showEditAppInfo){var e={uniqueId:this.appData.uniqueId,title:this.appData.title,administrator:this.appData.userId,comment:this.appData.comment};Object(i.C)(e).then(function(e){e.success&&(t.$Message.success("æ´æ°æå!"),t.$emit("reloadData"),t.$emit("changeAdmin"))})}},selectAdminModal:function(){this.showAdminModal=!0},confirmModal:function(){this.appData.administrator=this.selectAdminData.nickname,this.appData.userId=this.selectAdminData.userId},dbclickConfirmModal:function(t){this.appData.administrator=t.nickname,this.appData.userId=t.userId,this.showAdminModal=!1},selectAdmin:function(t,e){this.selectAdminData=t},getAdmintrstorData:function(t){var e=this;this.adminLoading=!0,Object(i.k)(t,this.currentPage,this.pageSize).then(function(t){e.adminData=t.tableContent,e.total=t.dataCount,e.adminLoading=!1})},changeAppStatus:function(t){var e=this,a=this.listId,n=v()([{operator:"eq",value:"æä½",property:"type"}]),s=[],o=[];Object(i.n)(a,n).then(function(a){a.tableContent.forEach(function(t){s.push(t.id),"æ¥ç"!=t.name&&o.push(t.id)}),"enabled"===t?Object(i.h)(s.join(",")).then(function(t){t.success&&(e.$Message.success(t.message),e.$emit("enabledForbiddenAppPermission"))}):Object(i.h)(null,o.join(",")).then(function(t){t.success&&(e.$Message.success(t.message),e.$emit("enabledForbiddenAppPermission"))})})},onPageChange:function(t){this.currentPage=t;var e=v()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getAdmintrstorData(e)},adminFilter:function(){var t=v()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getAdmintrstorData(t)}},mounted:function(){this.listId;this.getAdmintrstorData()}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-card"},[a("header",{staticClass:"app-header"},[a("Breadcrumb",[a("BreadcrumbItem",[t._v("é¦é¡µ")]),t._v(" "),a("BreadcrumbItem",{attrs:{to:"/application/list"}},[t._v("åºç¨åè¡¨")]),t._v(" "),a("BreadcrumbItem",[t._v(t._s(t.appData.title))])],1)],1),t._v(" "),a("Row",{staticClass:"font14"},[a("Col",{staticClass:"pad15",attrs:{span:"2"}},[a("img",{staticClass:"appIcon",attrs:{src:t.appData.icon}})]),t._v(" "),a("Col",{staticClass:"pad15",attrs:{span:"21"}},[a("h3",[t._v(" "+t._s(t.appData.title?t.appData.title:"å¾å è½½")+"  - åºç¨è¯¦æ")]),t._v(" "),a("Row",{staticClass:"pad5"},[a("Col",{attrs:{span:"6"}},[t._v("åºç¨åç§°ï¼ \n            "),t.showEditAppInfo?a("span",[t._v(t._s(t.appData.title))]):a("Input",{staticStyle:{width:"120px"},model:{value:t.appData.title,callback:function(e){t.$set(t.appData,"title",e)},expression:"appData.title"}}),t._v(" "),a("b",{on:{click:t.editAppinfo}},[t.showEditBtn?a("Tooltip",{attrs:{content:"ç¼è¾",placement:"top"}},[a("Icon",{staticClass:"app-edit-icon",attrs:{type:"ios-create-outline"}})],1):a("Tooltip",{attrs:{content:"ä¿å­",placement:"top"}},[a("b",{staticClass:"app-save-icon"},[t._v("ä¿å­")])])],1)],1),t._v(" "),a("Col",{attrs:{span:"6"}},[t._v("åºç¨ç±»åï¼ "),a("span",[t._v(t._s(t.appData.TRANS_NAME))])]),t._v(" "),a("Col",{attrs:{span:"6"}},[t._v("åºç¨ç®¡çåï¼ "),t.showEditAppInfo?a("span",[a("Icon",{attrs:{type:"person"}}),t._v(t._s(t.appData.administrator))],1):a("Input",{staticStyle:{width:"100px"},attrs:{icon:"md-arrow-dropdown"},on:{"on-click":t.selectAdminModal},model:{value:t.appData.administrator,callback:function(e){t.$set(t.appData,"administrator",e)},expression:"appData.administrator"}})],1)],1),t._v(" "),a("Row",{staticClass:"pad5"},[a("Col",{attrs:{span:"6"}},[t._v("åå»ºèï¼ "),a("span",[t._v(t._s(t.appData.creator))])]),t._v(" "),a("Col",{attrs:{span:"6"}},[t._v("åå»ºæ¶é´ï¼ "),a("span",[t._v(t._s(t.appData.crtTime))])]),t._v(" "),a("Col",{attrs:{span:"6"}},[t._v("ä¿®æ¹èï¼"+t._s(t.appData.modifer))]),t._v(" "),a("Col",{attrs:{span:"6"}},[t._v("ä¿®æ¹æ¶é´ï¼ "),a("span",[t._v(t._s(t.appData.modTime))])])],1),t._v(" "),a("Row",{staticClass:"pad5"},[a("Col",{attrs:{span:"24"}},[t._v("è¯´æï¼"),t.showEditAppInfo?a("span",[t._v(t._s(t.appData.comment))]):a("Input",{staticStyle:{width:"1000px"},model:{value:t.appData.comment,callback:function(e){t.$set(t.appData,"comment",e)},expression:"appData.comment"}})],1)],1)],1),t._v(" "),a("Col",{attrs:{span:"1"}},[a("Dropdown",{staticClass:"app-dropdown",on:{"on-click":t.changeAppStatus}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n                  æä½\n                  "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),t.isAdminTrue?a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"enabled"}},[t._v("å¯ç¨")]),t._v(" "),a("DropdownItem",{attrs:{name:"forbidden"}},[t._v("åç¨")])],1):t._e()],1)],1)],1),t._v(" "),a("Modal",{attrs:{title:"è¯·éæ©ç®¡çå",width:"800"},on:{"on-ok":t.confirmModal},model:{value:t.showAdminModal,callback:function(e){t.showAdminModal=e},expression:"showAdminModal"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"æç´¢åç§°æå·¥å·"},on:{"on-search":t.adminFilter},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),a("p",{staticClass:"app-search-icon",on:{click:t.adminFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[t._v("æ¥è¯¢")])],1)],1),t._v(" "),a("Table",{attrs:{"highlight-row":!0,loading:t.adminLoading,height:"300",stripe:"",columns:t.adminColumns,size:"small",data:t.adminData},on:{"on-row-dblclick":t.dbclickConfirmModal,"on-row-click":t.selectAdmin}}),t._v(" "),a("div",{staticClass:"user-page"},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.total,current:t.currentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onPageChange}})],1)])],1)],1)},staticRenderFns:[]};var w=a("VU/8")(y,b,!1,function(t){a("lWfA")},"data-v-5f01e85d",null).exports,_={name:"appSubject",components:{},props:{isAdmin:Boolean},data:function(){return{listId:this.$route.params.listId,columns:[{title:"ç§ç®åç§°",key:"accountName",align:"left"},{title:"ç§ç®ç±»å",key:"classify",align:"left",render:function(t,e){return 1===e.row.classify?t("span",{},"ä¼è®¡ç±»"):t("span",{},"éä¼è®¡ç±»")}},{title:"æ°æ®å½é",key:"dataCollection",align:"left",render:function(t,e){var a=[],i=e.row;if(i.calcRels.forEach(function(t){a.push(t.matchDirectionByDebit)}),1===i.classify){if(/1/.test(a)&&/-1/.test(a))return t("span",{},"åæ¹ï¼è´·æ¹");if(/1/.test(a))return t("span",{},"åæ¹");if(/-1/.test(a))return t("span",{},"è´·æ¹")}else{if(/1/.test(a)&&/-1/.test(a))return t("span",{},"å¢å ï¼åå°");if(/1/.test(a))return t("span",{},"å¢å ");if(/-1/.test(a))return t("span",{},"åå°")}}}],subjects:[]}},watch:{isAdmin:function(t){var e=this,a={title:"æä½",key:"key",align:"center",render:function(t,a){var i=!1,n=!1;return 1===a.row.classify&&(i=!0),1===a.row.calcRels[0].status&&(n=!0),t("Checkbox",{props:{disabled:i,value:n},on:{"on-change":function(t){e.renderMethod(t,a)}}})}};t?"æä½"!==this.columns[this.columns.length-1].title&&this.columns.push(a):"æä½"===this.columns[this.columns.length-1].title&&this.columns.splice(this.columns.length-1,1)}},methods:{rerenderSubjectColumns:function(){var t=this;this.columns[this.columns.length-1].render=function(e,a){var i=!1,n=!1;return 1===a.row.classify&&(i=!0),1===a.row.calcRels[0].status&&(n=!0),e("Checkbox",{props:{disabled:i,value:n},on:{"on-change":function(e){t.renderMethod(e,a)}}})}},renderMethod:function(t,e){var a=this,n="";n=t?"ç¡®è®¤å¯ç¨è¯¥ç§ç®ï¼":"ç¡®è®¤ç¦ç¨è¯¥ç§ç®ï¼",this.$Modal.confirm({title:"ç¡®è®¤",content:n,onOk:function(){e.row.calcRels.forEach(function(t){Object(i.B)(t.componentId).then(function(t){200===t.status&&a.$Message.success("æ´æ°æåï¼")})})},onCancel:function(){a.rerenderSubjectColumns()}})}},created:function(){var t=this;Object(i.r)(this.listId).then(function(e){200===e.status&&(t.subjects=e.data)})}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bg_ff"},[e("Row",{staticClass:"app-resource-group-title"},[e("h3",[this._v("ç§ç®å³ç³»")])]),this._v(" "),e("Row",{staticClass:"subject-content"},[e("Table",{attrs:{columns:this.columns,data:this.subjects,size:"small"}})],1)],1)},staticRenderFns:[]};var C=a("VU/8")(_,D,!1,function(t){a("dbUY")},"data-v-9d736a68",null).exports,S=a("TQvf"),k={name:"appApi",components:{},props:{},data:function(){return{listId:this.$route.params.listId,disabled:!1,collapseValue:"commit",commitApi:{},updateApi:{},viewApi:{},columns:[{title:"åæ°",key:"param",width:200,align:"center"},{title:"å¿é¡»",key:"required",width:160,align:"center"},{title:"è¯´æ",key:"explain"}],commitData:[],viewData:[],updateData:[]}},methods:{copy:function(){var t=new S(".tag-read");t.on("success",function(e){console.log("å¤å¶æå"),t.destroy()}),t.on("error",function(e){console.log("è¯¥æµè§å¨ä¸æ¯æèªå¨å¤å¶"),t.destroy()})},formatData:function(t){var e=void 0,a=void 0,i=[],n=void 0,s=t.formData,o=s.isRequired;for(var r in i.push({explain:"å¤æ³¨",param:"biComment",required:"å¦"}),i.push({explain:"åºç¨Id",param:"listId",required:"å¦"}),s)if(e={},"order"==r||"inPut"==r||"outPut"==r)for(var l in a=s[r])if(e={},"dataSet"!==l){for(var c in e.explain=a[l],e.param=l,o)e.required=c==l?"æ¯":"å¦";i.push(e)}else for(var u in n=a[l][0]){for(var c in(e={}).explain=n[u],e.param=u,o)e.required=c==u?"æ¯":"å¦";i.push(e)}else if("isRequired"!==r){for(var c in e.explain=s[r],e.param=r,o)e.required=c==r?"æ¯":"å¦";i.push(e)}return i}},mounted:function(){var t=this;Object(i.j)(this.listId).then(function(e){try{t.commitApi=e.commitUrl?JSON.parse(e.commitUrl):e.commitUrl,t.updateApi=e.updateUrl?JSON.parse(e.updateUrl):e.updateUrl,t.viewApi=e.viewUrl?JSON.parse(e.viewUrl):e.viewUrl}catch(e){t.$Message.error("åå°è¿åæ ¼å¼æè¯¯ï¼ï¼ï¼")}t.commitApi.body=Object(p.a)(t.commitApi.body),t.updateApi.body=Object(p.a)(t.updateApi.body),t.viewApi.body=Object(p.a)(t.viewApi.body),t.commitData=t.formatData(t.commitApi.body),t.updateData=t.formatData(t.updateApi.body),t.viewData=t.formatData(t.viewApi.body)}).catch(function(e){t.$Message.error(e.message.data)})}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg_ff martop20"},[a("Row",{staticClass:"app-resource-group-title"},[a("h3",[t._v("API")])]),t._v(" "),a("section",[a("Collapse",{attrs:{simple:""},model:{value:t.collapseValue,callback:function(e){t.collapseValue=e},expression:"collapseValue"}},[a("Panel",{attrs:{name:"commit"}},[a("strong",{staticStyle:{"font-weight":"700","font-size":"14px",color:"#333"}},[t._v("æäº¤")]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",{staticStyle:{"font-size":"14px",color:"#333"}},[a("strong",{staticStyle:{"font-weight":"700"}},[t._v("è¯·æ±æ¹å¼:")]),t._v("\n            "+t._s(t.commitApi.method)+"\n          ")]),t._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"#333"}},[a("strong",{staticStyle:{"font-weight":"700"}},[t._v("è¯·æ±å°åï¼")]),t._v("\n            "+t._s(t.commitApi.address)+"\n          ")]),t._v(" "),a("pre",{staticClass:"api-code"},[t._v("            "+t._s(t.commitApi.body)+"\n          ")]),t._v(" "),a("div",{staticClass:"tag-read",staticStyle:{position:"absolute",top:"70px",right:"20px",cursor:"pointer"},attrs:{"data-clipboard-text":t.commitApi.body},on:{click:t.copy}},[a("Tooltip",{attrs:{placement:"top",content:"ç¹å»å¤å¶",disabled:t.disabled}},[a("Icon",{attrs:{type:"md-document",size:"24"}})],1)],1),t._v(" "),a("h3",[t._v("è¯·æ±åæ°ï¼")]),t._v(" "),a("Table",{attrs:{size:"small",columns:t.columns,data:t.commitData}})],1)]),t._v(" "),a("Panel",{attrs:{name:"look"}},[a("strong",{staticStyle:{"font-weight":"700","font-size":"14px",color:"#333"}},[t._v("æ¥ç")]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",{staticStyle:{"font-size":"14px",color:"#333"}},[a("strong",{staticStyle:{"font-weight":"700"}},[t._v("è¯·æ±æ¹å¼:")]),t._v("\n            "+t._s(t.viewApi.method)+"\n          ")]),t._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"#333"}},[a("strong",{staticStyle:{"font-weight":"700"}},[t._v("è¯·æ±å°åï¼")]),t._v("\n            "+t._s(t.viewApi.address)+"\n          ")]),t._v(" "),a("pre",{staticClass:"api-code"},[t._v("            "+t._s(t.viewApi.body)+"\n          ")]),t._v(" "),a("div",{staticClass:"tag-read",staticStyle:{position:"absolute",top:"70px",right:"20px",cursor:"pointer"},attrs:{"data-clipboard-text":t.viewApi.body},on:{click:t.copy}},[a("Tooltip",{attrs:{placement:"top",content:"ç¹å»å¤å¶",disabled:t.disabled}},[a("Icon",{attrs:{type:"md-document",size:"24"}})],1)],1),t._v(" "),a("h3",[t._v("è¯·æ±åæ°ï¼")]),t._v(" "),a("Table",{attrs:{size:"small",columns:t.columns,data:t.viewData}})],1)]),t._v(" "),a("Panel",{attrs:{name:"update"}},[a("strong",{staticStyle:{"font-weight":"700","font-size":"14px",color:"#333"}},[t._v("æ´æ°")]),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",{staticStyle:{"font-size":"14px",color:"#333"}},[a("strong",{staticStyle:{"font-weight":"700"}},[t._v("è¯·æ±æ¹å¼:")]),t._v("\n            "+t._s(t.updateApi.method)+"\n          ")]),t._v(" "),a("p",{staticStyle:{"font-size":"14px",color:"#333"}},[a("strong",{staticStyle:{"font-weight":"700"}},[t._v("è¯·æ±å°åï¼")]),t._v("\n            "+t._s(t.updateApi.address)+"\n          ")]),t._v(" "),a("pre",{staticClass:"api-code"},[t._v("            "+t._s(t.updateApi.body)+"\n          ")]),t._v(" "),a("div",{staticClass:"tag-read",staticStyle:{position:"absolute",top:"70px",right:"20px",cursor:"pointer"},attrs:{"data-clipboard-text":t.updateApi.body},on:{click:t.copy}},[a("Tooltip",{attrs:{placement:"top",content:"ç¹å»å¤å¶",disabled:t.disabled}},[a("Icon",{attrs:{type:"md-document",size:"24"}})],1)],1),t._v(" "),a("h3",[t._v("è¯·æ±åæ°ï¼")]),t._v(" "),a("Table",{attrs:{size:"small",columns:t.columns,data:t.updateData}})],1)])],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(k,A,!1,function(t){a("q/wV")},null,null).exports,T={name:"relatedApp",components:{},props:{listId:{type:String}},data:function(){return{columns:[{title:"åºç¨åç§°",key:"relationAppName",align:"left"},{title:"åºç¨ç±»å",key:"relationAppType",align:"left"},{title:"å³ç³»ç±»å",key:"relationType",align:"left"},{title:"å³èåºç¨å­æ®µ",key:"relationAppField",align:"left"},{title:"æ¬åºç¨å­æ®µ",key:"appField",align:"left"}],relatedApps:[]}},methods:{},created:function(){var t=this;Object(i.y)(this.$route.params.listId).then(function(e){t.relatedApps=e.tableContent})}},I={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bg_ff martop20"},[e("Row",{staticClass:"app-resource-group-title"},[e("h3",[this._v("ç¸å³åºç¨")])]),this._v(" "),e("Row",{staticClass:"related-app-content"},[e("Table",{attrs:{columns:this.columns,data:this.relatedApps,size:"small"}})],1)],1)},staticRenderFns:[]};var M=a("VU/8")(T,I,!1,function(t){a("aT8d")},"data-v-9958eb50",null).exports,O={name:"canEditTable",props:{refs:String,columnsList:Array,value:Array,url:String,editIncell:{type:Boolean,default:!1},hoverShow:{type:Boolean,default:!1}},data:function(){return{columns:[],thisTableData:[],edittingStore:[]}},created:function(){this.init()},methods:{init:function(){var t,e=this,a=this,i=this.columnsList.filter(function(t){if(t.editable&&!0===t.editable)return t});t=JSON.parse(v()(this.value)).map(function(t,a){var n=!1;if(e.thisTableData[a])if(e.thisTableData[a].editting)n=!0;else for(var s in e.thisTableData[a].edittingCell)!0===e.thisTableData[a].edittingCell[s]&&(n=!0);if(n)return e.thisTableData[a];e.$set(t,"editting",!1);var o={};return i.forEach(function(t){o[t.key]=!1}),e.$set(t,"edittingCell",o),t}),this.thisTableData=t,this.edittingStore=JSON.parse(v()(this.thisTableData)),this.columnsList.forEach(function(t){t.editable&&(t.render=function(i,n){var s=e.thisTableData[n.index];return s.editting?i("Input",{props:{type:"text",value:s[t.key]},on:{"on-change":function(t){var e=n.column.key;a.edittingStore[n.index][e]=t.target.value}}}):e.editIncell?i("Row",{props:{type:"flex",align:"middle",justify:"center"}},[i("Col",{props:{span:"22"}},[s.edittingCell[n.column.key]?function(t,e,a,i){return e("Input",{props:{type:"text",value:t.edittingStore[a.index][i.key]},on:{"on-change":function(e){var n=i.key;t.edittingStore[a.index][n]=e.target.value}}})}(e,i,n,t):i("span",s[t.key])]),i("Col",{props:{span:"2"}},[s.edittingCell[n.column.key]?function(t,e,a){return e("Button",{props:{type:"text",icon:"checkmark"},on:{click:function(e){t.edittingStore[a.index].edittingCell[a.column.key]=!1,t.thisTableData=JSON.parse(v()(t.edittingStore)),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-cell-change",t.handleBackdata(t.thisTableData),a.index,a.column.key)}}})}(e,i,n):function(t,e,a){return t.hoverShow?e("div",{class:{"show-edit-btn":t.hoverShow}},[e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.edittingStore[a.index].edittingCell[a.column.key]=!0,t.thisTableData=JSON.parse(v()(t.edittingStore))}}})]):e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.edittingStore[a.index].edittingCell[a.column.key]=!0,t.thisTableData=JSON.parse(v()(t.edittingStore))}}})}(e,i,n)])]):i("span",s[t.key])}),t.handle&&(t.render=function(a,i){var n=e.thisTableData[i.index],s=[];return t.handle.forEach(function(t){"edit"===t?s.push(function(t,e,a,i){return e("Button",{props:{type:a.editting?"success":"primary",loading:a.saving},style:{margin:"0 5px"},on:{click:function(){if(a.editting){t.edittingStore[i].saving=!0,t.thisTableData=JSON.parse(v()(t.edittingStore));var e=t.edittingStore[i];e.editting=!1,e.saving=!1,t.thisTableData=JSON.parse(v()(t.edittingStore)),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-change",t.handleBackdata(t.thisTableData),i)}else{if(a.edittingCell)for(var n in a.edittingCell)a.edittingCell[n]=!1,t.edittingStore[i].edittingCell[n]=!1;t.edittingStore[i].editting=!0,t.thisTableData=JSON.parse(v()(t.edittingStore))}}}},a.editting?"ä¿å­":"ç¼è¾")}(e,a,n,i.index)):"delete"===t&&s.push(function(t,e,a,i){return e("Poptip",{props:{confirm:!0,title:"æ¨ç¡®å®è¦å é¤è¿æ¡æ°æ®å?",transfer:!0},on:{"on-ok":function(){t.thisTableData.splice(i,1),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-delete",t.handleBackdata(t.thisTableData),i)}}},[e("Button",{style:{margin:"0 5px"},props:{type:"error",placement:"top"}},"å é¤")])}(e,a,0,i.index))}),a("div",s)})})},handleBackdata:function(t){var e=JSON.parse(v()(t));return e.forEach(function(t){delete t.editting,delete t.edittingCell,delete t.saving}),e}},watch:{value:function(t){this.init()}}},E={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Table",{ref:this.refs,attrs:{columns:this.columnsList,data:this.thisTableData,border:"","disabled-hover":""}})],1)},staticRenderFns:[]};var P=a("VU/8")(O,E,!1,function(t){a("5cif")},null,null).exports,F={name:"admintrstorAssessment",components:{AssessModal:l.a,EditTable:P},props:{isAdmin:{type:Boolean}},data:function(){return{listId:this.$route.params.listId,showAssessModal:!1,isAdminTrue:!1,isEdit:"",IsEditId:"",changeResult:"",adminAssessData:{duringDate:"",result:"",opportunity:""},ruleValidate:{duringDate:[{type:"date",required:!0,message:"ä¸åè®¸ä¸ºç©º"}],result:[{required:!0,message:"ä¸åè®¸ä¸ºç©º",type:"string"}],opportunity:[{required:!0,message:"ä¸åè®¸ä¸ºç©º",type:"string"}]},assessments:[]}},watch:{isAdmin:function(t){t&&(this.isAdminTrue=!0)}},methods:{addAssess:function(){this.showAssessModal=!0,this.$refs.formValidate.resetFields()},submitAdminAssess:function(){var t=this,e={listId:this.listId,opportunity:this.adminAssessData.opportunity,result:this.adminAssessData.result,date:this.formatDate(this.adminAssessData.duringDate)};"edit"===this.isEdit&&(e.id=this.IsEditId);var a=!1;this.$refs.formValidate.validate(function(t){a=t}),a&&Object(i.E)(e).then(function(e){e.success?(t.$Message.success(e.message),t.getAssessmentData(),t.showAssessModal=!1,t.$refs.formValidate.resetFields(),t.isEdit=""):t.$Message.error(e.message)})},getAssessmentData:function(){var t=this;Object(i.t)(this.listId).then(function(e){t.assessments=e.tableContent})},formatDate:function(t){var e=new Date(t),a=e.getFullYear(),i=e.getMonth()+1;return i>=1&&i<=9&&(i="0"+i),a+"-"+i}},created:function(){this.getAssessmentData()}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg_ff"},[a("div",[a("Row",{staticClass:"app-resource-group-title"},[a("h3",[t._v("ç®¡çåèªè¯\n      ")])]),t._v(" "),a("Row",{directives:[{name:"show",rawName:"v-show",value:t.isAdminTrue,expression:"isAdminTrue"}]},[a("div",{staticStyle:{width:"95%",padding:"5px"}},[a("Form",{ref:"formValidate",attrs:{"label-width":150,model:t.adminAssessData,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"æé´ï¼æä»½ï¼:",prop:"duringDate"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{format:"yyyy-MM",type:"month",placeholder:"éæ©æ¥æ"},model:{value:t.adminAssessData.duringDate,callback:function(e){t.$set(t.adminAssessData,"duringDate",e)},expression:"adminAssessData.duringDate"}})],1),t._v(" "),a("FormItem",{attrs:{label:"æçä¸ææ¬æ¹è¿ææ:",prop:"result"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.adminAssessData.result,callback:function(e){t.$set(t.adminAssessData,"result",e)},expression:"adminAssessData.result"}})],1),t._v(" "),a("FormItem",{attrs:{label:"æçä¸ææ¬æ¹è¿æºä¼:",prop:"opportunity"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.adminAssessData.opportunity,callback:function(e){t.$set(t.adminAssessData,"opportunity",e)},expression:"adminAssessData.opportunity"}})],1)],1),t._v(" "),a("div",{staticStyle:{"text-align":"right","margin-bottom":"5px"}},[a("Button",{staticClass:"radius0",staticStyle:{"background-color":"rgb(0, 150, 136) !important",color:"#fff"},on:{click:t.submitAdminAssess}},[t._v("ä¿å­")])],1)],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isAdminTrue,expression:"isAdminTrue"}],staticStyle:{height:"30px",background:"#f0f0f0"}}),t._v(" "),t._l(t.assessments,function(e,i){return a("div",{key:i,staticClass:"pad10 bg_ff"},[a("img",{staticClass:"user-icon",attrs:{src:e.photo?e.photo:"resources/images/icon/contactor.png"}}),t._v(" "),a("div",{staticClass:"font14 content"},[a("div",[a("h4",[t._v(t._s(e.creator)+"\n            "),a("span",{staticClass:"fr"},[t._v(t._s(t.formatDate(e.date)))])])]),t._v(" "),a("div",{staticClass:"assessment-info"},[a("div",[a("span",{staticStyle:{color:"#a06970"}},[t._v("æ¹è¿ææ:")]),t._v(" "),a("span",{staticClass:"assessment-info-text"},[t._v(t._s(e.achievement))])]),t._v(" "),a("div",[a("span",{staticStyle:{color:"#a06970"}},[t._v("æ¹è¿æºä¼:")]),t._v(" "),a("span",{staticClass:"assessment-info-text"},[t._v(t._s(e.chance))])])])])])})],2)])},staticRenderFns:[]};var j=a("VU/8")(F,V,!1,function(t){a("GynB")},"data-v-20b772a2",null).exports,R=a("bTqw"),U=a("fZjL"),$=a.n(U),L={name:"permissionModal",components:{},props:{modalStatis:Boolean,editActionData:Object,memberType:String,isEdit:String},data:function(){return{appListId:this.$route.params.listId,selectUser:"",selectOrg:"",selectPosition:"",searchUserValue:"",searchOrgValue:"",searchDepValue:"",tableSize:"small",userTotal:0,orgTotal:0,depTotal:0,userCurrentPage:1,orgCurrentPage:1,depCurrentPage:1,pageSize:10,emitChange:0,userLoading:!0,orgLoading:!0,depLoading:!0,showUserModal:!1,showOrgModal:!1,showDepartmentModal:!1,showPermissionModal:!1,sameUserData:[],userSelectData:[],orgSelectData:[],departmentSelectData:[],userColumns:[],userData:[],orgColumns:[],orgData:[],departmentColumns:[],departmentData:[],allPermissionData:[],permissionSelectDatas:[],allPermissionColumns:[{type:"selection",width:60,align:"center"},{title:"å¨ä½åç§°",key:"name",width:100},{title:"è¯´æ",key:"desc"}],userSelection:[],orgSelection:[],departmentSelection:[]}},watch:{modalStatis:function(t,e){var a=this;this.showPermissionModal=t,this.permissionSelectDatas=[];var n=[];if(this.editActionData.action&&(n=JSON.parse(this.editActionData.action)),n.forEach(function(t){for(var e in t)a.permissionSelectDatas.push({name:t[e],id:Number(e)})}),"edit"===this.isEdit){var s=this.appListId;if(Object(i.n)(s).then(function(t){a.allPermissionData=t.tableContent,a.allPermissionData.map(function(t){t.desc=R.a[t.resourceName]}),a.allPermissionData.map(function(t){a.permissionSelectDatas.map(function(e){e.id===t.id&&(t._checked=!0)})})}),this.userSelectData=[],this.orgSelectData=[],this.departmentSelectData=[],this.userSelection=[],this.orgSelection=[],this.departmentSelection=[],$()(this.editActionData).length>0){var o=[],r=[],l=[];this.editActionData.objNames&&JSON.parse(this.editActionData.objNames).forEach(function(t){"user"===t.type?o.push({nickname:t.name,userId:t.id}):"group"===t.type?r.push({name:t.name,id:t.id}):l.push({name:t.name,id:t.id})}),this.userData=o,this.userSelectData=o,this.userSelection=o,this.orgData=r,this.orgSelectData=r,this.orgSelection=r,this.departmentData=l,this.departmentSelectData=l,this.departmentSelection=l}}else this.getData(),this.userSelectData=[],this.orgSelectData=[],this.departmentSelectData=[],this.userSelection=[],this.orgSelection=[],this.departmentSelection=[]}},methods:{userFilter:function(){var t=v()([{operator_1:"like",value_1:this.searchUserValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchUserValue,property_2:"userCode"}]);this.selectUserModal(t)},orgFilter:function(){var t=v()([{operator:"like",value:this.searchOrgValue,property:"name"}]);this.selectOrgModal(t)},depFilter:function(){var t=v()([{operator:"like",value:this.searchDepValue,property:"name"}]);this.selectPositionModal(t)},selectUserModal:function(t){var e=this;this.showUserModal=!0,this.userColumns=[{type:"selection",width:60,align:"center"},{title:"å¤´å",key:"photo",width:80,render:function(t,e){return t("div",[t("Avatar",{props:{src:e.row.photo}})])}},{title:"å§å",key:"nickname"},{title:"å·¥å·",key:"userCode"},{title:"ææº",key:"mobile"},{title:"é®ç®±",key:"email"}],this.userLoading=!0,Object(i.o)(this.userCurrentPage,this.pageSize,t).then(function(t){e.userData=t.tableContent,e.sameUserData=t.tableContent,e.userTotal=t.dataCount,e.userLoading=!1})},selectOrgModal:function(t){var e=this;this.showOrgModal=!0,this.orgColumns=[{type:"selection",width:60,align:"center"},{title:"åç§°",key:"name"}],this.orgLoading=!0,Object(i.m)(this.orgCurrentPage,this.pageSize,t).then(function(t){e.orgData=t.tableContent,e.orgTotal=t.dataCount,e.orgLoading=!1})},selectPositionModal:function(t){var e=this;this.showDepartmentModal=!0,this.departmentColumns=[{type:"selection",width:60,align:"center"},{title:"åç§°",key:"name"}],this.depLoading=!0,Object(i.l)(this.depCurrentPage,this.pageSize,t).then(function(t){e.departmentData=t.tableContent,e.depTotal=t.dataCount,e.depLoading=!1})},selectUserClick:function(t,e){if(this.userSelection.length>0){var a=[];a=this.userSelection.concat(t);var i={};this.userSelection=a.reduce(function(t,e){return!i[e.userId]&&(i[e.userId]=t.push(e)),t},[])}else this.userSelection=t},selectUserCancel:function(t,e){var a=this;this.userSelection.forEach(function(t,i){t.userId===e.userId&&a.userSelection.splice(i,1)})},cancelSelectUser:function(){this.userSelection=this.userSelectData},selectOrgClick:function(t,e){if(this.orgSelection.length>0){var a=[];a=this.orgSelection.concat(t);var i={};this.orgSelection=a.reduce(function(t,e){return!i[e.id]&&(i[e.id]=t.push(e)),t},[])}else this.orgSelection=t},selectOrgCancel:function(t,e){var a=this;this.orgSelection.forEach(function(t,i){t.id===e.id&&a.orgSelection.splice(i,1)})},cancelSelectOrg:function(){this.orgSelection=this.orgSelectData},selectDepartmentClick:function(t,e){if(this.departmentSelection.length>0){var a=[];a=this.departmentSelection.concat(t);var i={};this.departmentSelection=a.reduce(function(t,e){return!i[e.id]&&(i[e.id]=t.push(e)),t},[])}else this.departmentSelection=t},selectDepCancel:function(t,e){var a=this;this.departmentSelection.forEach(function(t,i){t.id===e.id&&a.departmentSelection.splice(i,1)})},cancelSelectDep:function(){this.departmentSelection=this.departmentSelectData},deleteUser:function(t){var e=this,a=t.target.parentElement.getAttribute("userid");Object(i.d)(this.appListId,a).then(function(t){t.success&&(e.userSelectData=e.userSelectData.filter(function(t){return t.userId!=a}),e.userSelection=e.userSelection.filter(function(t){return t.userId!=a}))})},deleteOrg:function(t){var e=this,a=t.target.parentElement.getAttribute("orgid");Object(i.d)(this.appListId,null,null,a).then(function(t){t.success&&(e.orgSelectData=e.orgSelectData.filter(function(t){return t.id!=a}),e.orgSelection=e.orgSelection.filter(function(t){return t.id!=a}))})},deleteDepartment:function(t,e){var a=this,n=event.target.parentElement.getAttribute("depid");Object(i.d)(this.appListId,null,n).then(function(t){t.success&&(a.departmentSelectData=a.departmentSelectData.filter(function(t){return t.id!=n}),a.departmentSelection=a.departmentSelection.filter(function(t){return t.id!=n}))})},permissionSelectChange:function(t,e){this.permissionSelectDatas=t},confirmUser:function(){var t={};this.userSelectData=this.userSelection.reduce(function(e,a){return!t[a.userId]&&(t[a.userId]=e.push(a)),e},[])},confirmOrg:function(){var t={};this.orgSelectData=this.orgSelection.reduce(function(e,a){return!t[a.id]&&(t[a.id]=e.push(a)),e},[])},confirmDepartment:function(){var t={};this.departmentSelectData=this.departmentSelection.reduce(function(e,a){return!t[a.id]&&(t[a.id]=e.push(a)),e},[])},submitPermission:function(){var t=this,e=this.userSelectData.map(function(t){return t.userId}),a=this.orgSelectData.map(function(t){return t.id}),n=this.departmentSelectData.map(function(t){return t.id}),s=this.permissionSelectDatas.map(function(t){return t.id}),o={userId:e.join(","),roleId:n.join(","),groupId:a.join(","),permissionId:s.join(",")};"edit"===this.isEdit?Object(i.H)(e.join(","),n.join(","),a.join(","),s.join(","),this.appListId).then(function(e){if(e.success){t.$Message.success(e.message);var a=t.emitChange++;t.$emit("reGetData",a)}}):o&&Object(i.b)(o).then(function(e){if(e.success){t.$Message.success(e.message);var a=t.emitChange++;t.$emit("reGetData",a)}})},getData:function(){var t=this,e=this.appListId;Object(i.n)(e).then(function(e){t.allPermissionData=e.tableContent,t.allPermissionData.map(function(t){t.desc=R.a[t.resourceName]})})},modalVisibleChange:function(t){t||this.$emit("emitPermissionModal",{modal:!1})},onUserPageChange:function(t){var e=v()([{operator_1:"like",value_1:this.searchUserValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchUserValue,property_2:"userCode"}]);this.userCurrentPage=t,this.selectUserModal(e)},onOrgPageChange:function(t){var e=v()([{operator:"like",value:this.searchOrgValue,property:"name"}]);this.orgCurrentPage=t,this.selectOrgModal(e)},onDepPageChange:function(t){var e=v()([{operator:"like",value:this.searchDepValue,property:"name"}]);this.depCurrentPage=t,this.selectPositionModal(e)}},mounted:function(){this.getData()}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"åºç¨æé",width:"1000","mask-closable":!1},on:{"on-ok":t.submitPermission,"on-visible-change":t.modalVisibleChange},model:{value:t.showPermissionModal,callback:function(e){t.showPermissionModal=e},expression:"showPermissionModal"}},[a("div",[a("Row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:8}},[a("Col",{attrs:{span:"4"}},[a("Button",{attrs:{type:"info",shape:"circle"},on:{click:t.selectUserModal}},[t._v("éæ©ç¨æ·")])],1),t._v(" "),a("Col",{attrs:{span:"4"}},[a("Button",{attrs:{type:"info",shape:"circle"},on:{click:t.selectOrgModal}},[t._v("éæ©ç»ç»")])],1),t._v(" "),a("Col",{attrs:{span:"4"}},[a("Button",{attrs:{type:"info",shape:"circle"},on:{click:t.selectPositionModal}},[t._v("éæ©èä½")])],1)],1),t._v(" "),a("Row",{attrs:{gutter:8}},[a("Col",{staticClass:"permission-tab",attrs:{span:"12"}},[a("Row",{staticStyle:{"margin-top":"10px"}},[a("Col",{attrs:{span:"3"}},[a("b",{staticClass:"permission-title"},[t._v("ç¨æ·")])]),t._v(" "),a("Col",{staticClass:"member-body",attrs:{span:"21"}},t._l(t.userSelectData,function(e,i){return a("Tag",{key:i,attrs:{userId:e.userId,closable:"",color:"warning"},on:{"on-close":t.deleteUser}},[t._v("\n          "+t._s(e.nickname)+"\n        ")])}))],1),t._v(" "),a("Row",{staticClass:"permission-line"}),t._v(" "),a("Row",[a("Col",{attrs:{span:"3"}},[a("b",{staticClass:"permission-title"},[t._v("ç»ç»")])]),t._v(" "),a("Col",{staticClass:"member-body",attrs:{span:"21"}},t._l(t.orgSelectData,function(e,i){return a("Tag",{key:i,attrs:{orgId:e.id,closable:"",color:"success"},on:{"on-close":t.deleteOrg}},[t._v("\n          "+t._s(e.name)+"\n        ")])}))],1),t._v(" "),a("Row",{staticClass:"permission-line"}),t._v(" "),a("Row",[a("Col",{attrs:{span:"3"}},[a("b",{staticClass:"permission-title"},[t._v("èä½")])]),t._v(" "),a("Col",{staticClass:"member-body",attrs:{span:"21"}},t._l(t.departmentSelectData,function(e,i){return a("Tag",{key:i,attrs:{depId:e.id,closable:"",color:"primary"},on:{"on-close":t.deleteDepartment}},[t._v("\n          "+t._s(e.name)+"\n        ")])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Table",{ref:"actionRef",attrs:{stripe:"",height:"350",columns:t.allPermissionColumns,size:"small",data:t.allPermissionData},on:{"on-selection-change":t.permissionSelectChange}})],1)],1),t._v(" "),a("Modal",{attrs:{title:"ç¨æ·éæ©","mask-closable":!1,width:"800",transfer:!1},on:{"on-ok":t.confirmUser,"on-cancel":t.cancelSelectUser},model:{value:t.showUserModal,callback:function(e){t.showUserModal=e},expression:"showUserModal"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"åç§°æå·¥å·æç´¢"},on:{"on-search":t.userFilter},model:{value:t.searchUserValue,callback:function(e){t.searchUserValue=e},expression:"searchUserValue"}}),t._v(" "),a("p",{staticClass:"app-search-icon",on:{click:t.userFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[t._v("æ¥è¯¢")])],1)],1),t._v(" "),a("Table",{attrs:{height:"400",stripe:"",size:"small",loading:t.userLoading,columns:t.userColumns,data:t.userData},on:{"on-select-cancel":t.selectUserCancel,"on-selection-change":t.selectUserClick}}),t._v(" "),a("div",{staticClass:"user-page"},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.userTotal,current:t.userCurrentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onUserPageChange}})],1)])],1),t._v(" "),a("Modal",{attrs:{title:"ç»ç»éæ©","mask-closable":!1,transfer:!1},on:{"on-ok":t.confirmOrg,"on-cancel":t.cancelSelectOrg},model:{value:t.showOrgModal,callback:function(e){t.showOrgModal=e},expression:"showOrgModal"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"æç´¢"},on:{"on-search":t.orgFilter},model:{value:t.searchOrgValue,callback:function(e){t.searchOrgValue=e},expression:"searchOrgValue"}}),t._v(" "),a("p",{staticClass:"app-search-icon",on:{click:t.orgFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[t._v("æ¥è¯¢")])],1)],1),t._v(" "),a("Table",{attrs:{height:"400",stripe:"",size:"small",loading:t.orgLoading,columns:t.orgColumns,data:t.orgData},on:{"on-select-cancel":t.selectOrgCancel,"on-selection-change":t.selectOrgClick}}),t._v(" "),a("div",{staticClass:"user-page"},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.orgTotal,current:t.orgCurrentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onOrgPageChange}})],1)])],1),t._v(" "),a("Modal",{attrs:{title:"èä½éæ©","mask-closable":!1,transfer:!1},on:{"on-ok":t.confirmDepartment,"on-cancel":t.cancelSelectDep},model:{value:t.showDepartmentModal,callback:function(e){t.showDepartmentModal=e},expression:"showDepartmentModal"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"æç´¢"},on:{"on-search":t.depFilter},model:{value:t.searchDepValue,callback:function(e){t.searchDepValue=e},expression:"searchDepValue"}}),t._v(" "),a("p",{staticClass:"app-search-icon",on:{click:t.depFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[t._v("æ¥è¯¢")])],1)],1),t._v(" "),a("Table",{attrs:{height:"400",stripe:"",size:t.tableSize,loading:t.depLoading,columns:t.departmentColumns,data:t.departmentData},on:{"on-select-cancel":t.selectDepCancel,"on-selection-change":t.selectDepartmentClick}}),t._v(" "),a("div",{staticClass:"user-page"},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.depTotal,current:t.depCurrentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onDepPageChange}})],1)])],1)],1)])},staticRenderFns:[]};var N={name:"permissionSource",components:{ActionModal:a("VU/8")(L,z,!1,function(t){a("qH/N")},null,null).exports},props:{enabledForbidden:Number,isAdmin:Boolean},data:function(){return{listId:this.$route.params.listId,showActionModal:!1,isAdminTrue:!1,isEdit:"",editActionData:{},memberType:"",actionData:[],isModalConfirm:1e3,columns:[{title:"å·²ææç¨æ·",key:"objNames",render:function(t,e){var a=e.row.objNames?JSON.parse(e.row.objNames):[],i=[];if(a.length>0)return a.forEach(function(e,a){var n;n=t("span",{style:{}},e.name+"; "),i.push(n)}),t("div",i)}},{title:"å¨ä½",key:"source",render:function(t,e){var a=e.row.action?JSON.parse(e.row.action):[],i=[];if(a.length>0)return a.forEach(function(e,a){var n=void 0;for(var s in e)n=t("span",{style:{margin:"0px 5px"}},e[s]);i.push(n)}),t("div",i)}}],userSources:[]}},watch:{isModalConfirm:function(){this.getActionData()},enabledForbidden:function(){this.getData()},isAdmin:function(t){var e=this,a={title:"æä½",key:"list",align:"center",render:function(t,a){return t("div",[t("a",{on:{click:function(){e.deleteAllPermission(a,a.row.list)}}},"å é¤"),t("span",{style:{height:"20px",borderLeft:"1px solid #39f",margin:"0px 5px"}}),t("a",{on:{click:function(){"sys_user_permission"===a.row.list?e.memberType="user":"sys_role_permission"===a.row.list?e.memberType="role":e.memberType="group",e.isEdit="edit",e.editActionData=a.row,e.showActionModal=!0}}},"ææ")])}};t?(this.isAdminTrue=!0,"æä½"!==this.columns[this.columns.length-1].title&&this.columns.push(a)):(this.isAdminTrue=!1,"æä½"===this.columns[this.columns.length-1].title&&this.columns.splice(this.columns.length-1,1))}},methods:{reGetData:function(t){this.isModalConfirm=t},showModal:function(){this.editActionData={},this.showActionModal=!0,this.isEdit=""},emitPermissionModal:function(){this.showActionModal=!1},getActionData:function(){var t=this,e=v()([{operator:"like",value:"æä½",property:"type"}]);Object(i.q)(this.listId,e).then(function(e){t.userSources=e.tableContent})},isForbidden:function(t,e){var a=this,n=0===t.atype,s=void 0;s=n?-2:0,Object(i.a)(t.id,s).then(function(t){t.success&&(a.$Message.success(t.message),a.actionData[e].atype=s)})},deleteAllPermission:function(t,e){var a=this,n=this;n.$Modal.confirm({title:"ç¡®è®¤",content:"ç¡®è®¤å é¤æ­¤ç¨æ·æéï¼",onOk:function(){var e,s=[],o=[],r=[],l=[];JSON.parse(t.row.action).forEach(function(t){for(var e in t)s.push(e)}),JSON.parse(t.row.objNames).forEach(function(t){"user"===t.type?o.push(t.id):"group"===t.type?r.push(t.id):l.push(t.id)}),e={user:o.join(","),group:r.join(","),role:l.join(","),multi:s.join(",")},Object(i.g)(e).then(function(t){t.success&&(n.$Message.success(t.message),a.getActionData())})}})},getData:function(){var t=this,e=this.listId;Object(i.n)(e).then(function(e){t.actionData=e.tableContent,t.actionData.map(function(t){t.desc=R.a[t.resourceName]})})}},created:function(){},mounted:function(){this.getActionData(),this.getData()}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app"},[a("Row",{staticClass:"app-action"},[a("Row",{staticClass:"app-action-title"},[a("h3",[t._v("å¨ä½  "),t.isAdminTrue?a("a",{on:{click:t.showModal}},[t._v("ææ")]):t._e()])]),t._v(" "),a("div",{staticClass:"app-action-source"},[a("Row",{staticClass:"app-action-source-list"},t._l(t.actionData,function(e,i){return a("Col",{key:i,staticClass:"app-action-source-item",attrs:{span:"6"}},[a("Col",{staticClass:"app-action-source-item-check",attrs:{span:"2"}},[a("Checkbox",{attrs:{disabled:!t.isAdminTrue,value:0===e.permType},on:{"on-change":function(a){t.isForbidden(e,i)}}})],1),t._v(" "),a("Col",{staticClass:"app-action-source-item-content",attrs:{span:"21"}},[a("h3",[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"app-action-source-item-desc"},[t._v(t._s(e.desc))])])],1)})),t._v(" "),a("Row",[a("Table",{attrs:{columns:t.columns,data:t.userSources,size:"small"}})],1)],1)],1),t._v(" "),a("action-modal",{attrs:{modalStatis:t.showActionModal,isEdit:t.isEdit,memberType:t.memberType,editActionData:t.editActionData},on:{reGetData:t.reGetData,emitPermissionModal:t.emitPermissionModal}})],1)},staticRenderFns:[]};var q=a("VU/8")(N,B,!1,function(t){a("JrnK")},"data-v-76699986",null).exports,W=a("Gu7T"),G=a.n(W),H={name:"permissionModal",components:{},props:{modalStatis:{type:Boolean},permissionId:{type:[String,Number]},permissionData:{type:Array}},data:function(){return{appListId:this.$route.params.listId,selectUser:"",selectOrg:"",selectPosition:"",searchUserValue:"",searchOrgValue:"",searchDepValue:"",tableSize:"small",userTotal:0,orgTotal:0,depTotal:0,userCurrentPage:1,orgCurrentPage:1,depCurrentPage:1,pageSize:10,emitChange:0,userLoading:!0,orgLoading:!0,depLoading:!0,showUserModal:!1,showOrgModal:!1,showDepartmentModal:!1,showPermissionModal:!1,sameUserData:[],userSelectData:[],orgSelectData:[],departmentSelectData:[],userColumns:[],userData:[],orgColumns:[],orgData:[],departmentColumns:[],departmentData:[],userSelection:[],orgSelection:[],departmentSelection:[]}},watch:{modalStatis:function(t,e){var a=this;this.showPermissionModal=t,this.userSelectData=[],this.orgSelectData=[],this.departmentSelectData=[],this.userSelection=[],this.orgSelection=[],this.departmentSelection=[],t&&(this.orgSelectData=this.permissionData.filter(function(t){return"group"===t.type}),this.orgSelection=this.orgSelectData,this.departmentSelectData=this.permissionData.filter(function(t){return"role"===t.type}),this.departmentSelection=this.departmentSelectData,this.permissionData.forEach(function(t){"user"===t.type&&a.userSelectData.push({nickname:t.name,userId:t.id,type:t.type})}),this.userSelection=this.userSelectData)}},permissionData:function(t,e){},methods:{userFilter:function(){var t=v()([{operator_1:"like",value_1:this.searchUserValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchUserValue,property_2:"userCode"}]);this.selectUserModal(t)},orgFilter:function(){var t=v()([{operator:"like",value:this.searchOrgValue,property:"name"}]);this.selectOrgModal(t)},depFilter:function(){var t=v()([{operator:"like",value:this.searchDepValue,property:"name"}]);this.selectPositionModal(t)},confirmMember:function(){},selectUserModal:function(t){var e=this;this.showUserModal=!0,this.userColumns=[{type:"selection",width:60,align:"center"},{title:"å¤´å",key:"photo",width:80,render:function(t,e){return t("div",[t("Avatar",{props:{src:e.row.photo}})])}},{title:"å§å",key:"nickname"},{title:"å·¥å·",key:"userCode"},{title:"ææº",key:"mobile"},{title:"é®ç®±",key:"email"}],this.userLoading=!0,Object(i.o)(this.userCurrentPage,this.pageSize,t).then(function(t){e.userData=t.tableContent,e.sameUserData=t.tableContent,e.userTotal=t.dataCount,e.userLoading=!1})},selectOrgModal:function(t){var e=this;this.showOrgModal=!0,this.orgColumns=[{type:"selection",width:60,align:"center"},{title:"åç§°",key:"name"}],this.orgLoading=!0,Object(i.m)(this.orgCurrentPage,this.pageSize,t).then(function(t){e.orgData=t.tableContent,e.orgTotal=t.dataCount,e.orgLoading=!1})},selectPositionModal:function(t){var e=this;this.showDepartmentModal=!0,this.departmentColumns=[{type:"selection",width:60,align:"center"},{title:"åç§°",key:"name"}],this.depLoading=!0,Object(i.l)(this.depCurrentPage,this.pageSize,t).then(function(t){e.departmentData=t.tableContent,e.depTotal=t.dataCount,e.depLoading=!1})},selectUserClick:function(t,e){var a=this;this.userSelection.length>0?t.forEach(function(t,e){a.userSelection.push(t)}):this.userSelection=t},selectUserCancel:function(t,e){var a=this;this.userSelection.forEach(function(t,i){t.userId===e.userId&&a.userSelection.splice(i,1)})},selectOrgClick:function(t,e){var a=this;this.orgSelection.length>0?t.forEach(function(t,e){a.orgSelection.push(t)}):this.orgSelection=t},selectOrgCancel:function(t,e){var a=this;this.orgSelection.forEach(function(t,i){t.id===e.id&&a.orgSelection.splice(i,1)})},selectDepartmentClick:function(t,e){var a=this;this.departmentSelection.length>0?t.forEach(function(t,e){a.departmentSelection.push(t)}):this.departmentSelection=t},selectDepCancel:function(t,e){var a=this;this.departmentSelection.forEach(function(t,i){t.id===e.id&&a.departmentSelection.splice(i,1)})},deleteUser:function(t){var e=t.target.parentElement.getAttribute("userid");this.userSelectData=this.userSelectData.filter(function(t){return t.userId!=e}),this.userSelection=this.userSelection.filter(function(t){return t.userId!=e})},deleteOrg:function(t){var e=t.target.parentElement.getAttribute("orgid");this.orgSelectData=this.orgSelectData.filter(function(t){return t.id!=e}),this.orgSelection=this.orgSelection.filter(function(t){return t.id!=e})},deleteDepartment:function(t){var e=t.target.parentElement.getAttribute("depid");this.departmentSelectData=this.departmentSelectData.filter(function(t){return t.id!=e}),this.departmentSelection=this.departmentSelection.filter(function(t){return t.id!=e})},confirmUser:function(){var t={};this.userSelectData=this.userSelection.reduce(function(e,a){return!t[a.userId]&&(t[a.userId]=e.push(a)),e},[])},confirmOrg:function(){var t={};this.orgSelectData=this.orgSelection.reduce(function(e,a){return!t[a.id]&&(t[a.id]=e.push(a)),e},[])},confirmDepartment:function(){var t={};this.departmentSelectData=this.departmentSelection.reduce(function(e,a){return!t[a.id]&&(t[a.id]=e.push(a)),e},[])},submitPermission:function(){var t=this,e=this.userSelectData.map(function(t){return t.userId}).join(","),a=this.orgSelectData.map(function(t){return t.id}).join(","),n=this.departmentSelectData.map(function(t){return t.id}).join(",");Object(i.G)(this.permissionId,e,a,n).then(function(e){if(e.success){t.$Message.success(e.message);var a=t.emitChange++;t.$emit("reGetData",a)}else t.$Message.error(e.message)})},modalVisibleChange:function(t){t||this.$emit("emitPermissionModal",{modal:!1})},onUserPageChange:function(t){var e=v()([{operator_1:"like",value_1:this.searchUserValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchUserValue,property_2:"userCode"}]);this.userCurrentPage=t,this.selectUserModal(e)},onOrgPageChange:function(t){var e=v()([{operator:"like",value:this.searchOrgValue,property:"name"}]);this.orgCurrentPage=t,this.selectOrgModal(e)},onDepPageChange:function(t){var e=v()([{operator:"like",value:this.searchDepValue,property:"name"}]);this.depCurrentPage=t,this.selectPositionModal(e)}}},J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"è§å¾æé",width:"600","mask-closable":!1},on:{"on-ok":t.submitPermission,"on-visible-change":t.modalVisibleChange},model:{value:t.showPermissionModal,callback:function(e){t.showPermissionModal=e},expression:"showPermissionModal"}},[a("div",[a("Row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:8}},[a("Col",{attrs:{span:"8"}},[a("Button",{attrs:{type:"info",shape:"circle"},on:{click:t.selectUserModal}},[t._v("éæ©ç¨æ·")])],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("Button",{attrs:{type:"info",shape:"circle"},on:{click:t.selectOrgModal}},[t._v("éæ©ç»ç»")])],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("Button",{attrs:{type:"info",shape:"circle"},on:{click:t.selectPositionModal}},[t._v("éæ©èä½")])],1)],1),t._v(" "),a("Row",{attrs:{gutter:8}},[a("Col",{staticClass:"permission-tab",attrs:{span:"24"}},[a("Row",{staticStyle:{"margin-top":"10px"}},[a("Col",{attrs:{span:"3"}},[a("b",{staticClass:"permission-title"},[t._v("ç¨æ·")])]),t._v(" "),a("Col",{staticClass:"member-body",attrs:{span:"21"}},t._l(t.userSelectData,function(e,i){return a("Tag",{key:i,attrs:{userId:e.userId,closable:"",color:"warning"},on:{"on-close":t.deleteUser}},[t._v("\n          "+t._s(e.nickname)+"\n        ")])}))],1),t._v(" "),a("Row",{staticClass:"permission-line"}),t._v(" "),a("Row",[a("Col",{attrs:{span:"3"}},[a("b",{staticClass:"permission-title"},[t._v("ç»ç»")])]),t._v(" "),a("Col",{staticClass:"member-body",attrs:{span:"21"}},t._l(t.orgSelectData,function(e,i){return a("Tag",{key:i,attrs:{orgId:e.id,closable:"",color:"success"},on:{"on-close":t.deleteOrg}},[t._v("\n          "+t._s(e.name)+"\n        ")])}))],1),t._v(" "),a("Row",{staticClass:"permission-line"}),t._v(" "),a("Row",[a("Col",{attrs:{span:"3"}},[a("b",{staticClass:"permission-title"},[t._v("èä½")])]),t._v(" "),a("Col",{staticClass:"member-body",attrs:{span:"21"}},t._l(t.departmentSelectData,function(e,i){return a("Tag",{key:i,attrs:{depId:e.id,closable:"",color:"primary"},on:{"on-close":t.deleteDepartment}},[t._v("\n          "+t._s(e.name)+"\n        ")])}))],1)],1)],1),t._v(" "),a("Modal",{attrs:{width:"800",title:"ç¨æ·éæ©","mask-closable":!1,transfer:!1},on:{"on-ok":t.confirmUser},model:{value:t.showUserModal,callback:function(e){t.showUserModal=e},expression:"showUserModal"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"åç§°æå·¥å·æç´¢"},on:{"on-search":t.userFilter},model:{value:t.searchUserValue,callback:function(e){t.searchUserValue=e},expression:"searchUserValue"}}),t._v(" "),a("p",{staticClass:"app-search-icon",on:{click:t.userFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[t._v("æ¥è¯¢")])],1)],1),t._v(" "),a("Table",{attrs:{height:"310",stripe:"",size:"small",loading:t.userLoading,columns:t.userColumns,data:t.userData},on:{"on-select-cancel":t.selectUserCancel,"on-select":t.selectUserClick,"on-select-all":t.selectUserClick}}),t._v(" "),a("div",{staticClass:"user-page"},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.userTotal,current:t.userCurrentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onUserPageChange}})],1)])],1),t._v(" "),a("Modal",{attrs:{title:"ç»ç»éæ©","mask-closable":!1,transfer:!1},on:{"on-ok":t.confirmOrg},model:{value:t.showOrgModal,callback:function(e){t.showOrgModal=e},expression:"showOrgModal"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"æç´¢"},on:{"on-search":t.orgFilter},model:{value:t.searchOrgValue,callback:function(e){t.searchOrgValue=e},expression:"searchOrgValue"}}),t._v(" "),a("p",{staticClass:"app-search-icon",on:{click:t.orgFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[t._v("æ¥è¯¢")])],1)],1),t._v(" "),a("Table",{attrs:{height:"310",stripe:"",size:"small",loading:t.orgLoading,columns:t.orgColumns,data:t.orgData},on:{"on-select-cancel":t.selectOrgCancel,"on-select":t.selectOrgClick,"on-select-all":t.selectOrgClick}}),t._v(" "),a("div",{staticClass:"user-page"},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.orgTotal,current:t.orgCurrentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onOrgPageChange}})],1)])],1),t._v(" "),a("Modal",{attrs:{title:"èä½éæ©","mask-closable":!1,transfer:!1},on:{"on-ok":t.confirmDepartment},model:{value:t.showDepartmentModal,callback:function(e){t.showDepartmentModal=e},expression:"showDepartmentModal"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"æç´¢"},on:{"on-search":t.depFilter},model:{value:t.searchDepValue,callback:function(e){t.searchDepValue=e},expression:"searchDepValue"}}),t._v(" "),a("p",{staticClass:"app-search-icon",on:{click:t.depFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[t._v("æ¥è¯¢")])],1)],1),t._v(" "),a("Table",{attrs:{height:"310",stripe:"",size:t.tableSize,loading:t.depLoading,columns:t.departmentColumns,data:t.departmentData},on:{"on-select-cancel":t.selectDepCancel,"on-select":t.selectDepartmentClick,"on-select-all":t.selectDepartmentClick}}),t._v(" "),a("div",{staticClass:"user-page"},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.depTotal,current:t.depCurrentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onDepPageChange}})],1)])],1)],1)])},staticRenderFns:[]};var Z={name:"reportSource",components:{ReportModal:a("VU/8")(H,J,!1,function(t){a("dAjg")},null,null).exports},props:{appType:String,isAdmin:Boolean},data:function(){var t=this;return{listId:this.$route.params.listId,showReportModal:!1,isAdminTrue:!1,permissionId:"",columns:[{title:"æ¥è¡¨åç§°",key:"title"},{title:"è§å¾ç±»å",key:"viewType",render:function(t,e){if("normal"===e.row.type)return t("span",{},"åè¡¨")}},{title:"å·²ææç¨æ·",key:"permissionList",render:function(t,e){var a=e.row.permissionList,i=[];if(a.length>0)return a.forEach(function(e,a){var n=t("span",{style:{margin:"0px 5px"}},e.name);i.push(n)}),t("div",i)}},{title:"é»è®¤è§å¾",key:"isDefault",align:"center",render:function(e,a){var i=!1;return 1===a.row.isDefault&&(i=!0),e("Radio",{props:{value:i,disabled:!t.isAdminTrue},on:{"on-change":function(e){t.onClickDefaultView(a)}}})}}],reportSources:[],permissionData:[]}},watch:{isAdmin:function(t){var e=this,a={title:"æä½",key:"list",align:"center",render:function(t,a){return t("div",[t("a",{on:{click:function(){e.deleteViews(a,a.index)}}},"å é¤"),t("span",{style:{height:"20px",borderLeft:"1px solid #39f",margin:"0px 5px"}}),t("a",{on:{click:function(){var t="/Site/index.html#appSetting/viewConfig/"+e.listId+"/"+a.row.viewId;window.top.location.href=t}}},"ä¿®æ¹"),t("span",{style:{height:"20px",borderLeft:"1px solid #39f",margin:"0px 5px"}}),t("a",{on:{click:function(){e.permissionId=a.row.permissionId,e.showReportModal=!0,e.permissionData=a.row.permissionList}}},"ææ")])}};t?(this.isAdminTrue=!0,"æä½"!==this.columns[this.columns.length-1].title&&this.columns.push(a)):(this.isAdminTrue=!1,"æä½"===this.columns[this.columns.length-1].title&&this.columns.splice(this.columns.length-1,1))}},methods:{emitPermissionModal:function(){this.showReportModal=!1},goCreateView:function(){window.top.location.href="/Site/index.html#appSetting/"+this.listId+"/"+this.appType+"/viewTypes"},reGetData:function(){this.getViewsData()},getViewsData:function(){var t=this;Object(i.w)(this.listId).then(function(e){e.forEach(function(t){t.users||(t.users=[]),t.roles||(t.roles=[]),t.groups||(t.groups=[]),t.permissionList=[].concat(G()(t.groups),G()(t.roles),G()(t.users))}),t.reportSources=e})},deleteViews:function(t,e){var a=this;if(1===this.reportSources.length)this.$Message.warning("ä¸å¯å é¤å¯ä¸è§å¾ï¼");else if(1===t.row.isDefault){var n={viewId:t.row.viewId,listId:this.listId};this.$Modal.confirm({title:"ç¡®è®¤",content:"ç¡®è®¤å é¤æ­¤è§å¾ï¼",onOk:function(){Object(i.f)(n).then(function(t){if(t.success){a.reportSources.splice(e,1);var n={viewId:a.reportSources[0].viewId,listId:a.listId};Object(i.F)(n).then(function(t){t.success&&a.reloadViewData()})}})}})}else{var s={viewId:t.row.viewId,listId:this.listId};this.$Modal.confirm({title:"ç¡®è®¤",content:"ç¡®è®¤å é¤æ­¤è§å¾ï¼",onOk:function(){Object(i.f)(s).then(function(t){t.success&&(a.reportSources.splice(e,1),a.$Message.success(t.message))})}})}},reloadViewData:function(){var t=this;Object(i.w)(this.listId).then(function(e){e.forEach(function(t){t.permissionList=[].concat(G()(t.groups),G()(t.roles),G()(t.users))}),t.reportSources=e,t.reRenderDefaultView()})},onClickDefaultView:function(t){var e=this;this.$Modal.confirm({title:"ç¡®è®¤",content:"ç¡®è®¤è®¾ç½®æ­¤è§å¾ä¸ºé»è®¤è§å¾ï¼",onOk:function(){e.setDefaultViews(t)},onCancel:function(){e.reRenderDefaultView()}})},setDefaultViews:function(t){var e=this,a={viewId:t.row.viewId,listId:this.listId};Object(i.F)(a).then(function(t){t.success&&(e.$Message.success(t.message),e.reloadViewData())})},reRenderDefaultView:function(){var t=this;this.columns[3].render=function(e,a){var i=!1;return 1===a.row.isDefault&&(i=!0),e("Radio",{props:{value:i},on:{"on-change":function(){t.onClickDefaultView(a)}}})}}},mounted:function(){this.getViewsData()}},Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-report"},[a("Row",{staticClass:"app-report-title"},[a("h3",[t._v("æ¥è¡¨ "),t.isAdminTrue?a("a",{on:{click:t.goCreateView}},[t._v("æ·»å æ¥è¡¨")]):t._e()])]),t._v(" "),a("Row",{staticClass:"app-report-table"},[a("Table",{attrs:{columns:t.columns,data:t.reportSources,size:"small"}})],1),t._v(" "),a("report-modal",{attrs:{modalStatis:t.showReportModal,permissionId:t.permissionId,permissionData:t.permissionData},on:{emitPermissionModal:t.emitPermissionModal,reGetData:t.reGetData}})],1)},staticRenderFns:[]};var X=a("VU/8")(Z,Y,!1,function(t){a("TTHX")},"data-v-0cd4afce",null).exports,Q={name:"formSource",components:{},props:{isAdmin:Boolean},data:function(){return{listId:this.$route.params.listId,isAdminTrue:!1}},watch:{isAdmin:function(t){this.isAdminTrue=!!t}},methods:{setForm:function(){window.open("/Form/index.html?viewDesign=true&list="+this.listId)}},created:function(){},mounted:function(){}},K={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-form"},[e("Row",{staticClass:"app-form-title"},[e("h3",[this._v("è¡¨å "),this.isAdminTrue?e("a",{on:{click:this.setForm}},[this._v("è¡¨åè®¾ç½®")]):this._e()])])],1)},staticRenderFns:[]};var tt=a("VU/8")(Q,K,!1,function(t){a("huWx")},"data-v-5d0045f2",null).exports,et={name:"workflowSource",components:{},props:{isAdmin:Boolean},data:function(){var t=this;return{listId:this.$route.params.listId,isAdminTrue:!1,deleteRelationWorkflow:-1,columns:[{title:"å·¥ä½æµåç§°",key:"processName",align:"left"},{title:"è§¦åå¨ä½",key:"triggerType",align:"left",render:function(t,e){return"create"===e.row.triggerType?t("span",{},"åå»ºå®ä¾"):t("span",{},"ä¿®æ¹å®ä¾")}},{title:"å¯ç¨",key:"status",align:"left",render:function(e,a){return e("Checkbox",{props:{value:1===a.row.status,disabled:!t.isAdminTrue},on:{"on-change":function(e){t.updateWorkFlowStaus(a)}}})}}],workflows:[]}},watch:{isAdmin:function(t){var e=this,a={title:"æä½",key:"list",align:"center",render:function(t,a){return t("div",[t("a",{on:{click:function(){e.deleteWorkflow(a.row,a.index)}}},"å é¤"),t("span",{style:{height:"20px",borderLeft:"1px solid #39f",margin:"0px 5px"}}),t("a",{on:{click:function(){window.open("/myflow/viewFlow.html?processId="+a.row.processId+"&listId="+e.listId+"&processCode="+a.row.processCode)}}},"ä¿®æ¹")])}};t?(this.isAdminTrue=!0,"æä½"!==this.columns[this.columns.length-1].title&&this.columns.push(a)):(this.isAdminTrue=!1,"æä½"===this.columns[this.columns.length-1].title&&this.columns.splice(this.columns.length-1,1))}},methods:{getRelativeWorkflowData:function(){var t=this;Object(i.x)(this.listId).then(function(e){t.workflows=e})},deleteWorkflow:function(t,e){var a=this;this.$Modal.confirm({title:"ç¡®è®¤",content:"ç¡®è®¤å é¤æ­¤å·¥ä½æµï¼",onOk:function(){Object(i.i)(null,null,t.id).then(function(t){t.success&&(a.$Message.success(t.message),a.workflows.splice(e,1),a.deleteRelationWorkflow++)})}})},addWorkflow:function(){this.getRelativeWorkflowData()},updateWorkFlowStaus:function(t){var e=this,a=t.row,n="";n=1===a.status?"ç¡®è®¤ç¦ç¨è¯¥å·¥ä½æµï¼":"ç¡®è®¤å¯ç¨è¯¥å·¥ä½æµï¼",this.$Modal.confirm({title:"ç³»ç»æç¤º",content:n,onOk:function(){1===a.status?Object(i.i)(null,a.id).then(function(t){t.success&&(e.$Message.success(t.message),e.getRelativeWorkflowData())}):Object(i.i)(a.id).then(function(t){t.success&&(e.$Message.success(t.message),e.getRelativeWorkflowData())})}})},createWorkflow:function(t){window.open("/myflow/createWorkFlow.html?listId="+this.listId+"&triggerType="+t)}},created:function(){this.getRelativeWorkflowData()}},at={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-workflow"},[a("Row",{staticClass:"app-workflow-title"},[a("h3",[t._v("å·¥ä½æµ  \n        "),t.isAdminTrue?a("Dropdown",{on:{"on-click":t.createWorkflow}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n              æä½\n              "),a("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"create"}},[t._v("æ·»å åå»ºå®ä¾å·¥ä½æµ")]),t._v(" "),a("DropdownItem",{attrs:{name:"update"}},[t._v("æ·»å ä¿®æ¹å®ä¾å·¥ä½æµ")])],1)],1):t._e()],1)]),t._v(" "),a("Row",{staticClass:"app-workflow-table"},[a("Table",{attrs:{columns:t.columns,data:t.workflows,size:"small"}})],1)],1)},staticRenderFns:[]};var it={name:"permissionSource",components:{ActionManage:q,ReportView:X,AppForm:tt,WorkFlow:a("VU/8")(et,at,!1,function(t){a("zWHF")},"data-v-61eb777c",null).exports},props:{listId:String,appType:String,enabledForbidden:Number,isAdmin:Boolean},data:function(){return{}}},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-permission"},[a("action-manage",{attrs:{enabledForbidden:t.enabledForbidden,isAdmin:t.isAdmin}}),t._v(" "),a("report-view",{attrs:{appType:t.appType,isAdmin:t.isAdmin}}),t._v(" "),a("app-form",{attrs:{isAdmin:t.isAdmin}}),t._v(" "),a("work-flow",{attrs:{isAdmin:t.isAdmin}})],1)},staticRenderFns:[]};var st={name:"detail",components:{AppSubject:C,AppApi:x,AdmintrstorAssessment:j,PermissionSource:a("VU/8")(it,nt,!1,function(t){a("10Zn")},null,null).exports,AppInfo:w,LogInstance:f,RelatedApp:M},data:function(){return{listId:this.$route.params.listId,appData:{},enforData:[],isAdmin:!1,appType:"",enabledForbidden:-1}},methods:{enabledForbiddenAppPermission:function(){this.enabledForbidden++},changeAdmin:function(){this.getAppInfoDatas()},getAppInfoDatas:function(){var t=this,e=this.listId,a=this.$currentUser,n=[];Object(i.v)(e).then(function(e){t.appData=e[0],t.appType=t.appData.type,a.isSysRoleList.forEach(function(t){n.push(t.id)}),a.userId==t.appData.administratorId||/1/.test(n)?t.isAdmin=!0:t.isAdmin=!1})},reloadData:function(){this.getAppInfoDatas()}},created:function(){this.getAppInfoDatas()}},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-details"},[a("app-info",{attrs:{listId:this.$route.params.listId,enforData:t.enforData,isAdmin:t.isAdmin,appData:t.appData},on:{reloadData:t.reloadData,changeAdmin:t.changeAdmin,enabledForbiddenAppPermission:t.enabledForbiddenAppPermission}}),t._v(" "),a("div",{staticClass:"rfd-tab"},[a("Tabs",{staticClass:"rfd-tab-warp",attrs:{value:"name1"}},[a("TabPane",{attrs:{label:"ä¸è¬",name:"name1"}},[a("log-instance",{attrs:{isAdmin:t.isAdmin}})],1),t._v(" "),a("TabPane",{attrs:{label:"äºå¨",name:"name2"}},[a("admintrstor-assessment",{attrs:{isAdmin:t.isAdmin}})],1),t._v(" "),a("TabPane",{attrs:{label:"èµæº",name:"name3"}},[a("permission-source",{attrs:{appType:t.appType,isAdmin:t.isAdmin,enabledForbidden:t.enabledForbidden}})],1),t._v(" "),a("TabPane",{attrs:{label:"è¿æ¥",name:"name4"}},[a("div",{staticClass:"app-sub"},[a("app-subject",{attrs:{isAdmin:t.isAdmin}})],1),t._v(" "),a("related-app"),t._v(" "),a("app-api")],1)],1)],1)],1)},staticRenderFns:[]};var rt=a("VU/8")(st,ot,!1,function(t){a("b9Al")},"data-v-cb6b86c6",null);e.default=rt.exports},huWx:function(t,e){},lWfA:function(t,e){},"q/wV":function(t,e){},"qH/N":function(t,e){},wfE3:function(t,e){},zWHF:function(t,e){}});
//# sourceMappingURL=7.20a4101e0676f013553d.js.map