{"source":"webpackJsonp([14],{\"2sQk\":function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var s=a(\"XLwt\"),i={name:\"LineChart\",props:{id:{type:String},title:{type:String},legendName:{type:String},xAxisData:{type:Array},seriesData:{type:Array},primaryColor:{type:String,default:\"#26bba0\"},areaColor:{type:String,default:\"#38cdb27d\"}},data:function(){return{}},methods:{draw:function(e,t){var a=s.init(document.getElementById(this.id)),i={title:{text:this.title,textStyle:{fontSize:14}},tooltip:{trigger:\"axis\"},color:[this.primaryColor],legend:{selectedMode:!1,x:30,y:8,data:[{name:this.legendName}]},grid:{left:\"3%\",right:\"4%\",bottom:\"3%\",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:\"category\",boundaryGap:!1,data:t},yAxis:{type:\"value\"},series:[{name:this.legendName,type:\"line\",smooth:!0,symbolSize:6,label:{normal:{show:!0,position:\"top\",color:this.primaryColor}},itemStyle:{normal:{color:this.primaryColor,borderWidth:2}},lineStyle:{color:this.primaryColor},areaStyle:{normal:{color:this.areaColor,show:!0,position:\"top\"}},data:e}]};a.setOption(i)}},watch:{seriesData:function(e){this.draw(e,this.xAxisData)}}},n=a(\"s6Wr\"),l=a.n(n);var o=function(e){a(\"WpRA\")},r=a(\"VU/8\")(i,l.a,!1,o,null,null).exports,c=a(\"GIAq\"),d=a(\"oAV5\"),h={name:\"LogInstance\",components:{LineChart:r,LineChartTime:r},props:{isAdmin:Boolean,isAddress:Boolean,appType:String},data:function(){return{listId:this.$route.params.listId,month:new Date,xAxisData:[],seriesData:[],active:!0,xAxisTimeData:[],seriesTimeData:[],workFlowTimeActive:!0,workFlowMonth:new Date}},watch:{month:function(e){this.getInstanceStatistics()},workFlowMonth:function(e){this.getWorkFlowTime()}},methods:{getInstanceStatistics:function(e){var i=this,t=i.listId,a=i.month,s=e||(this.active?\"week\":\"day\");a=Object(d.b)(a,\"yyyy/MM/dd\"),Object(c.L)(t,s,a).then(function(e){if(e.list[0]){var t=[],a=[];e.list.map(function(e){t.push(e.xAxis),a.push(e.num)}),i.seriesData=a,i.xAxisData=t}})},getWorkFlowTime:function(e){var i=this,t=i.listId,a=i.workFlowMonth,s=e||(this.workFlowTimeActive?\"week\":\"day\");a=Object(d.b)(a,\"yyyy/MM/dd\"),Object(c.V)(t,s,a).then(function(e){if(e.list[0]){var t=[],a=[];e.list.map(function(e){t.push(e.xAxis),e.num?a.push(e.num):a.push(0)}),i.seriesTimeData=a,i.xAxisTimeData=t}})},selectDataRange:function(e){this.active=\"week\"===e,this.getInstanceStatistics(e)},selectSpendTimeRange:function(e){this.workFlowTimeActive=\"week\"===e,this.getWorkFlowTime(e)}},mounted:function(){this.getInstanceStatistics(),this.getWorkFlowTime()}},p=a(\"gqNV\"),u=a.n(p);var g=function(e){a(\"XgTS\")},m=a(\"VU/8\")(h,u.a,!1,g,\"data-v-f56d02ea\",null).exports,f=a(\"K4CD\"),v={components:{ChangeDetail:a(\"lZCD\").a},data:function(){var o=this;return{fieldDetailColumns:[{title:\"版本\",key:\"version\",width:60,align:\"center\"},{title:\"交易号\",key:\"transCode\",align:\"center\"},{title:\"变更时间\",key:\"modiferTime\",align:\"center\"},{title:\"变更者\",key:\"modiferName\",align:\"center\"},{title:\"变更字段\",key:\"mainTable\",align:\"center\",render:function(a,e){var t=e.row.mainTable,i=(e.row.detailTable,[]);return 0<t.length&&t.forEach(function(e){i.push(a(\"p\",{style:{minHeight:\"16px\"}},e.fieldName))}),0<e.row.detailTable.length&&e.row.detailTable.forEach(function(e,t){i.push(a(\"p\",{style:{height:\"16px\"}},\"明细表\"))}),a(\"div\",i)}},{title:\"变更前\",key:\"mainTable\",align:\"center\",render:function(t,n){var e=n.row.mainTable,l=n.row.detailTable,a=[],i=/jpg|jpeg|png/g;return 0<e.length&&e.forEach(function(e){i.test(e.fieldOldValue)?a.push(t(\"img\",{attrs:{src:\"/H_roleplay-si/ds/download?url=\"+e.fieldOldValue,style:\"width: 30px;height: 30px;border-radius: 2px;\"}})):a.push(t(\"p\",{style:{minHeight:\"16px\",color:\"#ee0000\"}},e.fieldOldValue?e.fieldOldValue:\" \"))}),l&&0<l.length&&l.forEach(function(e,s){a.push(t(\"p\",{style:{height:\"16px\",color:\"#1605f3\",cursor:\"pointer\"},on:{click:function(){o.showChangeDetailsModal=!0,o.modiferName=n.row.modiferName,o.modiferTime=n.row.modiferTime,o.addRows=JSON.parse(JSON.parse(l[s].changes).adds),o.deleteRows=JSON.parse(l[s].changes).deletes?JSON.parse(JSON.parse(l[s].changes).deletes):[];var e=JSON.parse(l[s].changes).updates?JSON.parse(JSON.parse(l[s].changes).updates):[],t=JSON.parse(l[s].fieldName);for(var a in t)\"ID\"===t[a]&&(o.locationField=a);for(var i in o.changeColumns=[{type:\"index\",width:60,align:\"center\"}],t)i!==o.locationField&&o.changeColumns.push({title:t[i],key:i,hidden:!0,align:\"center\"});o.beforeChangeData=JSON.parse(l[s].oldData),o.afterChangeData=JSON.parse(l[s].newData),0<e.length&&e.forEach(function(i){o.afterChangeData.forEach(function(e){if(i.id===e[o.locationField]){var t=i.change;e.cellClassName={};for(var a=0;a<t.length;a++)e.cellClassName[t[a]]=\"table-column-update\"}})})}}},\"查看详情\"))}),t(\"div\",a)}},{title:\"变更后\",key:\"mainTable\",align:\"center\",render:function(t,n){var e=n.row.mainTable,l=n.row.detailTable,a=[],i=/jpg|jpeg|png/g;return 0<e.length&&e.forEach(function(e){i.test(e.fieldNewValue)?a.push(t(\"img\",{attrs:{src:\"/H_roleplay-si/ds/download?url=\"+e.fieldNewValue,style:\"width: 30px;height: 30px;border-radius: 2px;\"}})):a.push(t(\"p\",{style:{minHeight:\"16px\",color:\"#008000\"}},e.fieldNewValue))}),l&&0<l.length&&l.forEach(function(e,s){a.push(t(\"p\",{style:{height:\"16px\",color:\"#1605f3\",cursor:\"pointer\"},on:{click:function(){o.showChangeDetailsModal=!0,o.modiferName=n.row.modiferName,o.modiferTime=n.row.modiferTime,o.addRows=JSON.parse(JSON.parse(l[s].changes).adds),o.deleteRows=JSON.parse(l[s].changes).deletes?JSON.parse(JSON.parse(l[s].changes).deletes):[];var e=JSON.parse(l[s].changes).updates?JSON.parse(JSON.parse(l[s].changes).updates):[],t=JSON.parse(l[s].fieldName);for(var a in t)\"ID\"===t[a]&&(o.locationField=a);for(var i in o.changeColumns=[{type:\"index\",width:60,align:\"center\"}],t)i!==o.locationField&&o.changeColumns.push({title:t[i],key:i,hidden:!0,align:\"center\"});o.beforeChangeData=JSON.parse(l[s].oldData),o.afterChangeData=JSON.parse(l[s].newData),0<e.length&&e.forEach(function(i){o.afterChangeData.forEach(function(e){if(i.id===e[o.locationField]){var t=i.change;e.cellClassName={};for(var a=0;a<t.length;a++)e.cellClassName[t[a]]=\"table-column-update\"}})})}}},\"查看详情\"))}),t(\"div\",a)}}],fieldDetail:[],showChangeDetailsModal:!1,beforeChangeData:[],afterChangeData:[],changeColumns:[],modiferName:\"\",modiferTime:\"\",addRows:[],deleteRows:[],locationField:\"\",startDate:\"\",endDate:\"\",pageSize:10,pageIndex:1,dataTotal:0}},methods:{addRowClassName:function(e,t){for(var a=0;a<this.addRows.length;a++)if(e[this.locationField]===this.addRows[a])return\"table-column-add\"},deleteRowClassName:function(e,t){for(var a=0;a<this.deleteRows.length;a++)if(e[this.locationField]===this.deleteRows[a])return\"table-column-detele\"},dataChange:function(e){0<e.length&&(this.startDate=e[0],this.endDate=e[1]),this.getListChangeHistory()},getListChangeHistory:function(a){var i=this,e={listId:this.$route.params.listId,startDate:this.startDate,endDate:this.endDate,pageIndex:this.pageIndex,pageSize:this.pageSize},s=this.fieldDetailColumns;Object(f.i)(e).then(function(e){i.fieldDetail=e.tableContent,i.dataTotal=e.dataCount;var t=e.tableContent[0].extColumns;0<t.length&&a&&t.forEach(function(e){for(var t in e)s.push({title:t,key:t,align:\"center\"})})})},onPageSizeChange:function(e){this.pageSize=e,this.getListChangeHistory()},pageChange:function(e){this.pageIndex=e,this.getListChangeHistory()}},filters:{capitalize:function(e){return e?(e=Math.abs(Number(e))).toFixed(2):\"\"}},mounted:function(){this.getListChangeHistory(!0)}},y=a(\"Ksu2\"),w=a.n(y);var C=function(e){a(\"2vc8\")},b={name:\"AnalysisLayout\",components:{LogInstance:m,listChangeHistory:a(\"VU/8\")(v,w.a,!1,C,\"data-v-4c97204a\",null).exports},props:{listId:String,appType:String,enabledForbidden:Number,isCompanyAdmin:Boolean,isAdmin:Boolean,isAddress:Boolean}},x=a(\"3Lk6\"),D=a.n(x);var _=function(e){a(\"SYVF\")},S=a(\"VU/8\")(b,D.a,!1,_,\"data-v-2cad874f\",null);t.default=S.exports},\"2vc8\":function(e,t){},\"3Lk6\":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"analysis-layout\"},[a(\"log-instance\",{attrs:{isAdmin:e.isAdmin,isAddress:e.isAddress,appType:e.appType}}),e._v(\" \"),\"subject\"!==e.appType?a(\"list-change-history\"):e._e()],1)},staticRenderFns:[]}},Ksu2:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"wrapper\"},[t._m(0),t._v(\" \"),a(\"div\",{staticClass:\"wrapper-body\"},[a(\"div\",{staticClass:\"search\"},[a(\"DatePicker\",{staticStyle:{width:\"280px\"},attrs:{type:\"daterange\",editable:!1,placement:\"bottom-end\",placeholder:\"请选择日期范围\"},on:{\"on-change\":t.dataChange}})],1),t._v(\" \"),a(\"Table\",{attrs:{columns:t.fieldDetailColumns,data:t.fieldDetail}}),t._v(\" \"),a(\"div\",{staticStyle:{margin:\"10px\",overflow:\"hidden\"}},[a(\"div\",{staticClass:\"fr\"},[a(\"Page\",{attrs:{total:t.dataTotal,\"show-elevator\":\"\",\"show-sizer\":\"\",current:t.pageIndex,\"page-size\":t.pageSize,size:\"small\",\"show-total\":\"\"},on:{\"on-page-size-change\":t.onPageSizeChange,\"on-change\":t.pageChange}})],1)])],1),t._v(\" \"),a(\"change-detail\",{attrs:{title:\"变更详情\",width:\"900\",footerHide:!0},model:{value:t.showChangeDetailsModal,callback:function(e){t.showChangeDetailsModal=e},expression:\"showChangeDetailsModal\"}},[a(\"div\",{staticClass:\"detail\"},[a(\"div\",{staticClass:\"detail-header\"},[a(\"p\",[a(\"label\",[t._v(\"变更者:\")]),t._v(\" \"),a(\"span\",[t._v(t._s(t.modiferName))])]),t._v(\" \"),a(\"div\",{staticClass:\"detail-header-time\"},[a(\"label\",[t._v(\"变更时间:\")]),t._v(\" \"),a(\"span\",[t._v(t._s(t.modiferTime))]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"div\",{staticStyle:{\"background-color\":\"#ffe699\"}}),t._v(\"\\n                            已移除\\n                        \")]),t._v(\" \"),a(\"li\",[a(\"div\",{staticStyle:{\"background-color\":\"#c6e0b4\"}}),t._v(\"\\n                            新增\\n                        \")]),t._v(\" \"),a(\"li\",[a(\"div\",{staticStyle:{\"background-color\":\"#bdd7ee\"}}),t._v(\"\\n                            已修改\\n                        \")])])])]),t._v(\" \"),a(\"div\",{staticClass:\"detail-table\"},[a(\"div\",{staticClass:\"detail-table-before\"},[a(\"div\",{staticClass:\"detail-table-before-title\"},[t._v(\"更变前\")]),t._v(\" \"),a(\"Table\",{attrs:{\"row-class-name\":t.deleteRowClassName,columns:t.changeColumns,data:t.beforeChangeData,size:\"small\",height:\"152\",\"disabled-hover\":!0}})],1),t._v(\" \"),a(\"div\",{staticClass:\"detail-table-after\"},[a(\"div\",{staticClass:\"detail-table-after-title\"},[t._v(\"更变后\")]),t._v(\" \"),a(\"Table\",{attrs:{\"row-class-name\":t.addRowClassName,columns:t.changeColumns,data:t.afterChangeData,size:\"small\",height:\"152\",\"disabled-hover\":!0}})],1)])])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"app-resource-group-title\"},[t(\"h3\",[this._v(\"数据变更分析\")])])}]}},SYVF:function(e,t){},WpRA:function(e,t){},XgTS:function(e,t){},gqNV:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return\"subject\"!==t.appType?a(\"div\",[t._m(0),t._v(\" \"),a(\"div\",[a(\"div\",{class:{\"line-chart-screen\":t.isAddress,\"line-chart\":!0}},[a(\"line-chart\",{attrs:{legendName:\"新增实例数\",xAxisData:t.xAxisData,seriesData:t.seriesData,id:\"instanceLineChart\",primaryColor:\"#1890ff\",areaColor:\"#1890ff8c\"}},[a(\"div\",{staticClass:\"line-chart-header\",attrs:{slot:\"header\"},slot:\"header\"},[t._v(\"\\n          查看范围:\\n          \"),a(\"DatePicker\",{staticStyle:{width:\"120px\",\"margin-left\":\"10px\"},attrs:{type:\"month\",placeholder:\"选择月份\",format:\"yyyy-MM\",clearable:!1},model:{value:t.month,callback:function(e){t.month=e},expression:\"month\"}}),t._v(\" \"),a(\"div\",{staticClass:\"select-range\"},[a(\"span\",{staticClass:\"customs-tag\",class:{\"customs-tag-active\":t.active},on:{click:function(e){t.selectDataRange(\"week\")}}},[t._v(\"周\")]),t._v(\" \"),a(\"span\",{staticClass:\"customs-tag\",class:{\"customs-tag-active\":!t.active},on:{click:function(e){t.selectDataRange(\"day\")}}},[t._v(\"天\")])])],1)])],1),t._v(\" \"),t.isAddress?t._e():a(\"div\",{staticClass:\"line-chart\"},[a(\"line-chart-time\",{attrs:{legendName:\"实例平均工作流耗用时间周期(小时)\",xAxisData:t.xAxisTimeData,seriesData:t.seriesTimeData,id:\"spendTimeChart\",primaryColor:\"#f9499e\",areaColor:\"#f9499e8c\"}},[a(\"div\",{staticClass:\"line-chart-header\",attrs:{slot:\"header\"},slot:\"header\"},[t._v(\"\\n          查看范围:\\n          \"),a(\"DatePicker\",{staticStyle:{width:\"120px\",\"margin-left\":\"10px\"},attrs:{type:\"month\",placeholder:\"选择月份\",format:\"yyyy-MM\",clearable:!1},model:{value:t.workFlowMonth,callback:function(e){t.workFlowMonth=e},expression:\"workFlowMonth\"}}),t._v(\" \"),a(\"div\",{staticClass:\"select-range\"},[a(\"span\",{staticClass:\"customs-tag\",class:{\"customs-tag-active\":t.workFlowTimeActive},on:{click:function(e){t.selectSpendTimeRange(\"week\")}}},[t._v(\"周\")]),t._v(\" \"),a(\"span\",{staticClass:\"customs-tag\",class:{\"customs-tag-active\":!t.workFlowTimeActive},on:{click:function(e){t.selectSpendTimeRange(\"day\")}}},[t._v(\"天\")])])],1)])],1)])]):t._e()},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"app-resource-group-title\"},[t(\"h3\",[this._v(\"数据增量分析\")])])}]}},s6Wr:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"line-container\"},[a(\"header\",[e._t(\"header\")],2),e._v(\" \"),a(\"div\",{staticClass:\"rfd-line-chart\",attrs:{id:e.id}})])},staticRenderFns:[]}}});"}