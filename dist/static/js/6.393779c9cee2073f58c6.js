webpackJsonp([6,7],{"/RT9":function(t,e,i){"use strict";var n=i("lFHJ"),s=i("L8AQ"),o=function(t,e,i,s){this._options=i,this._callback=e,this._client=s,this._ackTimeoutRegistry=s._$getAckTimeoutRegistry(),this._ackTimeout=this._ackTimeoutRegistry.add({topic:n.TOPIC.RPC,action:n.ACTIONS.ACK,name:t,timeout:this._options.rpcAckTimeout,callback:this.error.bind(this)}),this._responseTimeout=this._ackTimeoutRegistry.add({topic:n.TOPIC.RPC,action:n.ACTIONS.REQUEST,name:t,event:n.EVENT.RESPONSE_TIMEOUT,timeout:this._options.rpcResponseTimeout,callback:this.error.bind(this)})};o.prototype.ack=function(){this._ackTimeoutRegistry.remove({ackId:this._ackTimeout})},o.prototype.respond=function(t){var e=s.convertTyped(t,this._client);this._callback(null,e),this._complete()},o.prototype.error=function(t){this._callback(t.event||t),this._complete()},o.prototype._complete=function(){this._ackTimeoutRegistry.remove({ackId:this._ackTimeout}),this._ackTimeoutRegistry.remove({ackId:this._responseTimeout})},t.exports=o},0:function(t,e){},"07GI":function(t,e,i){"use strict";(function(e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=e.WebSocket||e.MozWebSocket,o=i(0),r=i("L8AQ"),a=i("pX2W"),c=i("yxEg"),h=i("lFHJ"),l=function(t,e,i){this._client=t,this._options=i,this._authParams=null,this._authCallback=null,this._deliberateClose=!1,this._redirecting=!1,this._tooManyAuthAttempts=!1,this._connectionAuthenticationTimeout=!1,this._challengeDenied=!1,this._queuedMessages=[],this._reconnectTimeout=null,this._reconnectionAttempt=0,this._currentPacketMessageCount=0,this._sendNextPacketTimeout=null,this._currentMessageResetTimeout=null,this._endpoint=null,this._lastHeartBeat=null,this._heartbeatInterval=null,this._originalUrl=c.parseUrl(e,this._options.path),this._url=this._originalUrl,this._state=h.CONNECTION_STATE.CLOSED,this._createEndpoint()};l.prototype.getState=function(){return this._state},l.prototype.authenticate=function(t,e){if("object"===(void 0===t?"undefined":n(t))){if(this._authParams=t,this._authCallback=e,!(this._tooManyAuthAttempts||this._challengeDenied||this._connectionAuthenticationTimeout))return!0===this._deliberateClose&&this._state===h.CONNECTION_STATE.CLOSED?(this._createEndpoint(),void(this._deliberateClose=!1)):void(this._state===h.CONNECTION_STATE.AWAITING_AUTHENTICATION&&this._sendAuthParams());this._client._$onError(h.TOPIC.ERROR,h.EVENT.IS_CLOSED,"this client's connection was closed")}else this._client._$onError(h.TOPIC.ERROR,h.EVENT.INVALID_AUTH_MSG,"authParams is not an object")},l.prototype.sendMsg=function(t,e,i){this.send(a.getMsg(t,e,i))},l.prototype.send=function(t){this._queuedMessages.push(t),this._currentPacketMessageCount++,null===this._currentMessageResetTimeout&&(this._currentMessageResetTimeout=c.nextTick(this._resetCurrentMessageCount.bind(this))),this._state===h.CONNECTION_STATE.OPEN&&this._queuedMessages.length<this._options.maxMessagesPerPacket&&this._currentPacketMessageCount<this._options.maxMessagesPerPacket?this._sendQueuedMessages():null===this._sendNextPacketTimeout&&this._queueNextPacket()},l.prototype.close=function(){clearInterval(this._heartbeatInterval),this._deliberateClose=!0,this._endpoint.close()},l.prototype._createEndpoint=function(){this._endpoint=s?new s(this._url):new o(this._url,this._options.nodeSocketOptions),this._endpoint.onopen=this._onOpen.bind(this),this._endpoint.onerror=this._onError.bind(this),this._endpoint.onclose=this._onClose.bind(this),this._endpoint.onmessage=this._onMessage.bind(this)},l.prototype._resetCurrentMessageCount=function(){this._currentPacketMessageCount=0,this._currentMessageResetTimeout=null},l.prototype._sendQueuedMessages=function(){if(this._state===h.CONNECTION_STATE.OPEN&&this._endpoint.readyState===this._endpoint.OPEN)if(0!==this._queuedMessages.length){var t=this._queuedMessages.splice(0,this._options.maxMessagesPerPacket).join("");0!==this._queuedMessages.length?this._queueNextPacket():this._sendNextPacketTimeout=null,this._submit(t)}else this._sendNextPacketTimeout=null},l.prototype._submit=function(t){this._endpoint.readyState===this._endpoint.OPEN?this._endpoint.send(t):this._onError("Tried to send message on a closed websocket connection")},l.prototype._queueNextPacket=function(){var t=this._sendQueuedMessages.bind(this),e=this._options.timeBetweenSendingQueuedPackages;this._sendNextPacketTimeout=setTimeout(t,e)},l.prototype._sendAuthParams=function(){this._setState(h.CONNECTION_STATE.AUTHENTICATING);var t=a.getMsg(h.TOPIC.AUTH,h.ACTIONS.REQUEST,[this._authParams]);this._submit(t)},l.prototype._checkHeartBeat=function(){var t=2*this._options.heartbeatInterval;Date.now()-this._lastHeartBeat>t&&(clearInterval(this._heartbeatInterval),this._endpoint.close(),this._client._$onError(h.TOPIC.CONNECTION,h.EVENT.CONNECTION_ERROR,"heartbeat not received in the last "+t+" milliseconds"))},l.prototype._onOpen=function(){this._clearReconnect(),this._lastHeartBeat=Date.now(),this._heartbeatInterval=c.setInterval(this._checkHeartBeat.bind(this),this._options.heartbeatInterval),this._setState(h.CONNECTION_STATE.AWAITING_CONNECTION)},l.prototype._onError=function(t){var e=this;clearInterval(this._heartbeatInterval),this._setState(h.CONNECTION_STATE.ERROR),setTimeout(function(){var i=void 0;if("ECONNRESET"===t.code||"ECONNREFUSED"===t.code)i="Can't connect! Deepstream server unreachable on "+e._originalUrl;else try{i=JSON.stringify(t)}catch(e){i=t.toString()}e._client._$onError(h.TOPIC.CONNECTION,h.EVENT.CONNECTION_ERROR,i)},1)},l.prototype._onClose=function(){clearInterval(this._heartbeatInterval),!0===this._redirecting?(this._redirecting=!1,this._createEndpoint()):!0===this._deliberateClose?this._setState(h.CONNECTION_STATE.CLOSED):this._tryReconnect()},l.prototype._onMessage=function(t){for(var e=r.parse(t.data,this._client),i=0;i<e.length;i++)null!==e[i]&&(e[i].topic===h.TOPIC.CONNECTION?this._handleConnectionResponse(e[i]):e[i].topic===h.TOPIC.AUTH?this._handleAuthResponse(e[i]):this._client._$onMessage(e[i]))},l.prototype._handleConnectionResponse=function(t){t.action===h.ACTIONS.PING?(this._lastHeartBeat=Date.now(),this._submit(a.getMsg(h.TOPIC.CONNECTION,h.ACTIONS.PONG))):t.action===h.ACTIONS.ACK?(this._setState(h.CONNECTION_STATE.AWAITING_AUTHENTICATION),this._authParams&&this._sendAuthParams()):t.action===h.ACTIONS.CHALLENGE?(this._setState(h.CONNECTION_STATE.CHALLENGING),this._submit(a.getMsg(h.TOPIC.CONNECTION,h.ACTIONS.CHALLENGE_RESPONSE,[this._originalUrl]))):t.action===h.ACTIONS.REJECTION?(this._challengeDenied=!0,this.close()):t.action===h.ACTIONS.REDIRECT?(this._url=t.data[0],this._redirecting=!0,this._endpoint.close()):t.action===h.ACTIONS.ERROR&&t.data[0]===h.EVENT.CONNECTION_AUTHENTICATION_TIMEOUT&&(this._deliberateClose=!0,this._connectionAuthenticationTimeout=!0,this._client._$onError(h.TOPIC.CONNECTION,t.data[0],t.data[1]))},l.prototype._handleAuthResponse=function(t){if(t.action===h.ACTIONS.ERROR){if(t.data[0]===h.EVENT.TOO_MANY_AUTH_ATTEMPTS)this._deliberateClose=!0,this._tooManyAuthAttempts=!0;else{if(t.data[0]===h.EVENT.INVALID_AUTH_MSG)return this._deliberateClose=!0,void(this._authCallback&&this._authCallback(!1,"invalid authentication message"));this._setState(h.CONNECTION_STATE.AWAITING_AUTHENTICATION)}this._authCallback&&this._authCallback(!1,this._getAuthData(t.data[1]))}else t.action===h.ACTIONS.ACK&&(this._setState(h.CONNECTION_STATE.OPEN),this._authCallback&&this._authCallback(!0,this._getAuthData(t.data[0])),this._sendQueuedMessages())},l.prototype._getAuthData=function(t){return void 0===t?null:r.convertTyped(t,this._client)},l.prototype._setState=function(t){this._state=t,this._client.emit(h.EVENT.CONNECTION_STATE_CHANGED,t)},l.prototype._tryReconnect=function(){null===this._reconnectTimeout&&(this._reconnectionAttempt<this._options.maxReconnectAttempts?(this._setState(h.CONNECTION_STATE.RECONNECTING),this._reconnectTimeout=setTimeout(this._tryOpen.bind(this),Math.min(this._options.maxReconnectInterval,this._options.reconnectIntervalIncrement*this._reconnectionAttempt)),this._reconnectionAttempt++):(this._clearReconnect(),this.close(),this._client.emit(h.EVENT.MAX_RECONNECTION_ATTEMPTS_REACHED,this._reconnectionAttempt)))},l.prototype._tryOpen=function(){this._originalUrl!==this._url&&(this._url=this._originalUrl),this._createEndpoint(),this._reconnectTimeout=null},l.prototype._clearReconnect=function(){clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null,this._reconnectionAttempt=0},t.exports=l}).call(e,i("DuR2"))},"1nuA":function(t,e,i){"use strict";e.decode=e.parse=i("kMPS"),e.encode=e.stringify=i("xaZU")},"33oV":function(t,e){},"3IRH":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"5LsM":function(t,e,i){"use strict";var n=i("lFHJ"),s=i("HUfI"),o=i("8tIl"),r=i("07GI"),a=i("IbPE"),c=i("affY"),h=i("W+n7"),l=i("xxnB"),d=i("MaXM"),u=i("trS8"),p=function(t,e){this._url=t,this._options=this._getOptions(e||{}),this._connection=new r(this,this._url,this._options),this._ackTimeoutRegistry=new u(this,this._options),this.event=new a(this._options,this._connection,this),this.rpc=new c(this._options,this._connection,this),this.record=new h(this._options,this._connection,this),this.presence=new l(this._options,this._connection,this),this._messageCallbacks={},this._messageCallbacks[n.TOPIC.EVENT]=this.event._$handle.bind(this.event),this._messageCallbacks[n.TOPIC.RPC]=this.rpc._$handle.bind(this.rpc),this._messageCallbacks[n.TOPIC.RECORD]=this.record._$handle.bind(this.record),this._messageCallbacks[n.TOPIC.PRESENCE]=this.presence._$handle.bind(this.presence),this._messageCallbacks[n.TOPIC.ERROR]=this._onErrorMessage.bind(this)};function _(t,e){return new p(t,e)}o(p.prototype),p.prototype.login=function(t,e){return"function"==typeof t?this._connection.authenticate({},t):this._connection.authenticate(t||{},e),this},p.prototype.close=function(){this._connection.close()},p.prototype.getConnectionState=function(){return this._connection.getState()},p.prototype.getUid=function(){return(new Date).getTime().toString(36)+"-"+(1e16*Math.random()).toString(36).replace(".","")},p.prototype._$getAckTimeoutRegistry=function(){return this._ackTimeoutRegistry},p.prototype._$onMessage=function(t){this._messageCallbacks[t.topic]?this._messageCallbacks[t.topic](t):(t.processedError=!0,this._$onError(t.topic,n.EVENT.MESSAGE_PARSE_ERROR,"Received message for unknown topic "+t.topic)),t.action!==n.ACTIONS.ERROR||t.processedError||this._$onError(t.topic,t.data[0],t.data.slice(0))},p.prototype._$onError=function(t,e,i){var s=void 0;if(e!==n.EVENT.ACK_TIMEOUT&&e!==n.EVENT.RESPONSE_TIMEOUT||this.getConnectionState()===n.CONNECTION_STATE.AWAITING_AUTHENTICATION&&(s="Your message timed out because you're not authenticated. Have you called login()?",setTimeout(this._$onError.bind(this,n.EVENT.NOT_AUTHENTICATED,n.TOPIC.ERROR,s),1)),!this.hasListeners("error"))throw console.log("--- You can catch all deepstream errors by subscribing to the error event ---"),s=e+": "+i,t&&(s+=" ("+t+")"),new Error(s);this.emit("error",i,e,t),this.emit(e,t,i)},p.prototype._onErrorMessage=function(t){this._$onError(t.topic,t.data[0],t.data[1])},p.prototype._getOptions=function(t){var e={};for(var i in d)void 0===t[i]?e[i]=d[i]:e[i]=t[i];return e},p.prototype.CONSTANTS=n,_.CONSTANTS=n,p.prototype.MERGE_STRATEGIES=s,_.MERGE_STRATEGIES=s,t.exports=_},"8tIl":function(t,e,i){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||Object.create(null),(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||Object.create(null),0==arguments.length)return this._callbacks=Object.create(null),this;var i,n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var s=0;s<n.length;s++)if((i=n[s])===e||i.fn===e){n.splice(s,1);break}return 0===n.length&&delete this._callbacks[t],this},n.prototype.emit=function(t){this._callbacks=this._callbacks||Object.create(null);for(var e=new Array(arguments.length-1),i=this._callbacks[t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i){n=0;for(var s=(i=i.slice(0)).length;n<s;++n)i[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||Object.create(null),this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length},n.prototype.eventNames=function(){return this._callbacks?Object.keys(this._callbacks):[]}},F5Hz:function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=i("yxEg"),o=/([^.[\]\s]+)/g,r=Object.create(null);function a(t,e,i){var o=void 0,r=void 0;if(null===t||null===e)return e;if(Array.isArray(t)&&Array.isArray(e)){var c=void 0;for(o=0;o<e.length;o++){var h=a(t[o],e[o],!1);if(!c){if(h===t[o])continue;for(c=[],r=0;r<o;++r)c[r]=t[r]}c[o]=h}return c=(c=c&&!1!==i?s.deepCopy(c):c)||(t.length===e.length?t:e)}if(!Array.isArray(e)&&"object"===(void 0===t?"undefined":n(t))&&"object"===(void 0===e?"undefined":n(e))){var l=void 0,d=Object.keys(e);for(o=0;o<d.length;o++){var u=a(t[d[o]],e[d[o]],!1);if(!l){if(u===t[d[o]])continue;for(l=Object.create(null),r=0;r<o;++r)l[d[r]]=t[d[r]]}l[d[o]]=e[d[o]]}return l=(l=l&&!1!==i?s.deepCopy(l):l)||(Object.keys(t).length===d.length?t:e)}return e!==t?!1!==i?s.deepCopy(e):e:t}function c(t){if(r[t])return r[t];var e="undefined"!==String(t)?String(t).match(o):[];if(!e)throw new Error("invalid path "+t);return r[t]=e,r[t]}t.exports.get=function(t,e,i){for(var o=c(e),r=t,a=0;a<o.length;a++){if(void 0===r)return;if("object"!==(void 0===r?"undefined":n(r)))throw new Error("invalid data or path");r=r[o[a]]}return!1!==i?s.deepCopy(r):r},t.exports.set=function(e,i,n,o){var r=c(i);if(0===r.length)return a(e,n,o);var h=t.exports.get(e,i,!1),l=a(h,n,o);if(l===h)return e;for(var d=s.shallowCopy(e),u=d,p=0;p<r.length;p++)p===r.length-1?u[r[p]]=l:u=void 0!==u[r[p]]?u[r[p]]=s.shallowCopy(u[r[p]]):r[p+1]&&!isNaN(r[p+1])?u[r[p]]=[]:u[r[p]]=Object.create(null);return d}},"H+LD":function(t,e){},HUfI:function(t,e,i){"use strict";t.exports={REMOTE_WINS:function(t,e,i,n){n(null,e)},LOCAL_WINS:function(t,e,i,n){n(null,t.get())}}},IbPE:function(t,e,i){"use strict";var n=i("pX2W"),s=i("L8AQ"),o=i("m3N9"),r=i("lFHJ"),a=i("gBz4"),c=i("8tIl"),h=function(t,e,i){this._options=t,this._connection=e,this._client=i,this._emitter=new c,this._listener={},this._ackTimeoutRegistry=i._$getAckTimeoutRegistry(),this._resubscribeNotifier=new o(this._client,this._resubscribe.bind(this))};h.prototype.subscribe=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");if("function"!=typeof e)throw new Error("invalid argument callback");this._emitter.hasListeners(t)||(this._ackTimeoutRegistry.add({topic:r.TOPIC.EVENT,action:r.ACTIONS.SUBSCRIBE,name:t}),this._connection.sendMsg(r.TOPIC.EVENT,r.ACTIONS.SUBSCRIBE,[t])),this._emitter.on(t,e)},h.prototype.unsubscribe=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");if(void 0!==e&&"function"!=typeof e)throw new Error("invalid argument callback");this._emitter.off(t,e),this._emitter.hasListeners(t)||(this._ackTimeoutRegistry.add({topic:r.TOPIC.EVENT,action:r.ACTIONS.UNSUBSCRIBE,name:t}),this._connection.sendMsg(r.TOPIC.EVENT,r.ACTIONS.UNSUBSCRIBE,[t]))},h.prototype.emit=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");this._connection.sendMsg(r.TOPIC.EVENT,r.ACTIONS.EVENT,[t,n.typed(e)]),this._emitter.emit(t,e)},h.prototype.listen=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument pattern");if("function"!=typeof e)throw new Error("invalid argument callback");!this._listener[t]||this._listener[t].destroyPending?(this._listener[t]&&this._listener[t].destroy(),this._listener[t]=new a(r.TOPIC.EVENT,t,e,this._options,this._client,this._connection)):this._client._$onError(r.TOPIC.EVENT,r.EVENT.LISTENER_EXISTS,t)},h.prototype.unlisten=function(t){if("string"!=typeof t||0===t.length)throw new Error("invalid argument pattern");var e=this._listener[t];e&&!e.destroyPending?e.sendDestroy():this._listener[t]?(this._ackTimeoutRegistry.add({topic:r.TOPIC.EVENT,action:r.EVENT.UNLISTEN,name:t}),this._listener[t].destroy(),delete this._listener[t]):this._client._$onError(r.TOPIC.RECORD,r.EVENT.NOT_LISTENING,t)},h.prototype._$handle=function(t){var e=t.data[t.action===r.ACTIONS.ACK?1:0];if(t.action!==r.ACTIONS.EVENT){if(t.action===r.ACTIONS.ACK&&t.data[0]===r.ACTIONS.UNLISTEN&&this._listener[e]&&this._listener[e].destroyPending)return this._listener[e].destroy(),void delete this._listener[e];if(this._listener[e])this._listener[e]._$onMessage(t);else if(t.action!==r.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED&&t.action!==r.ACTIONS.SUBSCRIPTION_HAS_PROVIDER){if(t.action!==r.ACTIONS.ACK)return t.action===r.ACTIONS.ERROR?(t.data[0]===r.EVENT.MESSAGE_DENIED?this._ackTimeoutRegistry.remove({topic:r.TOPIC.EVENT,name:t.data[1],action:t.data[2]}):t.data[0]===r.EVENT.NOT_SUBSCRIBED&&this._ackTimeoutRegistry.remove({topic:r.TOPIC.EVENT,name:t.data[1],action:r.ACTIONS.UNSUBSCRIBE}),t.processedError=!0,void this._client._$onError(r.TOPIC.EVENT,t.data[0],t.data[1])):void this._client._$onError(r.TOPIC.EVENT,r.EVENT.UNSOLICITED_MESSAGE,e);this._ackTimeoutRegistry.clear(t)}}else t.data&&2===t.data.length?this._emitter.emit(e,s.convertTyped(t.data[1],this._client)):this._emitter.emit(e)},h.prototype._resubscribe=function(){var t=this._emitter._callbacks;for(var e in t)this._connection.sendMsg(r.TOPIC.EVENT,r.ACTIONS.SUBSCRIBE,[e])},t.exports=h},"Kj+9":function(t,e,i){"use strict";var n=i("lFHJ"),s=i("yxEg"),o=i("pX2W"),r=function(t,e,i){this._connection=t,this._name=e,this._correlationId=i,this._isAcknowledged=!1,this._isComplete=!1,this.autoAck=!0,s.nextTick(this._performAutoAck.bind(this))};r.prototype.ack=function(){!1===this._isAcknowledged&&(this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.ACK,[n.ACTIONS.REQUEST,this._name,this._correlationId]),this._isAcknowledged=!0)},r.prototype.reject=function(){this.autoAck=!1,this._isComplete=!0,this._isAcknowledged=!0,this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.REJECTION,[this._name,this._correlationId])},r.prototype.error=function(t){this.autoAck=!1,this._isComplete=!0,this._isAcknowledged=!0,this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.ERROR,[t,this._name,this._correlationId])},r.prototype.send=function(t){if(!0===this._isComplete)throw new Error("Rpc "+this._name+" already completed");this.ack();var e=o.typed(t);this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.RESPONSE,[this._name,this._correlationId,e]),this._isComplete=!0},r.prototype._performAutoAck=function(){!0===this.autoAck&&this.ack()},t.exports=r},L8AQ:function(t,e,i){"use strict";var n=i("lFHJ"),s=function(){this._actions=this._getActions()};s.prototype.parse=function(t,e){for(var i=[],s=t.split(n.MESSAGE_SEPERATOR),o=0;o<s.length;o++)s[o].length>2&&i.push(this._parseMessage(s[o],e));return i},s.prototype.convertTyped=function(t,e){var i=t.charAt(0);if(i===n.TYPES.STRING)return t.substr(1);if(i===n.TYPES.OBJECT)try{return JSON.parse(t.substr(1))}catch(i){return void e._$onError(n.TOPIC.ERROR,n.EVENT.MESSAGE_PARSE_ERROR,i.toString()+"("+t+")")}return i===n.TYPES.NUMBER?parseFloat(t.substr(1)):i===n.TYPES.NULL?null:i===n.TYPES.TRUE||i!==n.TYPES.FALSE&&void(i!==n.TYPES.UNDEFINED&&e._$onError(n.TOPIC.ERROR,n.EVENT.MESSAGE_PARSE_ERROR,"UNKNOWN_TYPE ("+t+")"))},s.prototype._getActions=function(){var t={};for(var e in n.ACTIONS)t[n.ACTIONS[e]]=e;return t},s.prototype._parseMessage=function(t,e){var i=t.split(n.MESSAGE_PART_SEPERATOR),s={};return i.length<2?(e._$onError(n.TOPIC.ERROR,n.EVENT.MESSAGE_PARSE_ERROR,"Insufficiant message parts"),null):void 0===this._actions[i[1]]?(e._$onError(n.TOPIC.ERROR,n.EVENT.MESSAGE_PARSE_ERROR,"Unknown action "+i[1]),null):(s.raw=t,s.topic=i[0],s.action=i[1],s.data=i.splice(2),s)},t.exports=new s},MaXM:function(t,e,i){"use strict";var n=i("HUfI");t.exports={heartbeatInterval:3e4,reconnectIntervalIncrement:4e3,maxReconnectInterval:18e4,maxReconnectAttempts:5,rpcAckTimeout:6e3,rpcResponseTimeout:1e4,subscriptionTimeout:2e3,maxMessagesPerPacket:100,timeBetweenSendingQueuedPackages:16,recordReadAckTimeout:15e3,recordReadTimeout:15e3,recordDeleteTimeout:15e3,path:"/deepstream",mergeStrategy:n.REMOTE_WINS,recordDeepCopy:!0,nodeSocketOptions:null}},MsCo:function(t,e,i){(function(t,n){var s;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var r="object"==typeof n&&n;r.global!==r&&r.window!==r&&r.self;var a,c=2147483647,h=36,l=1,d=26,u=38,p=700,_=72,f=128,T="-",E=/^xn--/,m=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=h-l,v=Math.floor,S=String.fromCharCode;function N(t){throw new RangeError(C[t])}function I(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function O(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+I((t=t.replace(g,".")).split("."),e).join(".")}function b(t){for(var e,i,n=[],s=0,o=t.length;s<o;)(e=t.charCodeAt(s++))>=55296&&e<=56319&&s<o?56320==(64512&(i=t.charCodeAt(s++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),s--):n.push(e);return n}function R(t){return I(t,function(t){var e="";return t>65535&&(e+=S((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=S(t)}).join("")}function A(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function k(t,e,i){var n=0;for(t=i?v(t/p):t>>1,t+=v(t/e);t>y*d>>1;n+=h)t=v(t/y);return v(n+(y+1)*t/(t+u))}function w(t){var e,i,n,s,o,r,a,u,p,E,m,g=[],C=t.length,y=0,S=f,I=_;for((i=t.lastIndexOf(T))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&N("not-basic"),g.push(t.charCodeAt(n));for(s=i>0?i+1:0;s<C;){for(o=y,r=1,a=h;s>=C&&N("invalid-input"),((u=(m=t.charCodeAt(s++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:h)>=h||u>v((c-y)/r))&&N("overflow"),y+=u*r,!(u<(p=a<=I?l:a>=I+d?d:a-I));a+=h)r>v(c/(E=h-p))&&N("overflow"),r*=E;I=k(y-o,e=g.length+1,0==o),v(y/e)>c-S&&N("overflow"),S+=v(y/e),y%=e,g.splice(y++,0,S)}return R(g)}function P(t){var e,i,n,s,o,r,a,u,p,E,m,g,C,y,I,O=[];for(g=(t=b(t)).length,e=f,i=0,o=_,r=0;r<g;++r)(m=t[r])<128&&O.push(S(m));for(n=s=O.length,s&&O.push(T);n<g;){for(a=c,r=0;r<g;++r)(m=t[r])>=e&&m<a&&(a=m);for(a-e>v((c-i)/(C=n+1))&&N("overflow"),i+=(a-e)*C,e=a,r=0;r<g;++r)if((m=t[r])<e&&++i>c&&N("overflow"),m==e){for(u=i,p=h;!(u<(E=p<=o?l:p>=o+d?d:p-o));p+=h)I=u-E,y=h-E,O.push(S(A(E+I%y,0))),u=v(I/y);O.push(S(A(u,0))),o=k(i,C,n==s),i=0,++n}++i,++e}return O.join("")}a={version:"1.4.1",ucs2:{decode:b,encode:R},decode:w,encode:P,toASCII:function(t){return O(t,function(t){return m.test(t)?"xn--"+P(t):t})},toUnicode:function(t){return O(t,function(t){return E.test(t)?w(t.slice(4).toLowerCase()):t})}},void 0===(s=function(){return a}.call(e,i,e,t))||(t.exports=s)}()}).call(e,i("3IRH")(t),i("DuR2"))},QRzD:function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=i("F5Hz"),o=i("m3N9"),r=i("8tIl"),a=i("lFHJ"),c=i("pX2W"),h=i("L8AQ"),l=i("yxEg"),d=function(t,e,i,n,s){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");this.name=t,this.usages=0,this._recordOptions=e,this._connection=i,this._client=s,this._options=n,this.isReady=!1,this.isDestroyed=!1,this.hasProvider=!1,this._$data=Object.create(null),this.version=null,this._eventEmitter=new r,this._queuedMethodCalls=[],this._writeCallbacks={},this._mergeStrategy=null,n.mergeStrategy&&this.setMergeStrategy(n.mergeStrategy),this._ackTimeoutRegistry=s._$getAckTimeoutRegistry(),this._resubscribeNotifier=new o(this._client,this._sendRead.bind(this)),this._readAckTimeout=this._ackTimeoutRegistry.add({topic:a.TOPIC.RECORD,name:t,action:a.ACTIONS.SUBSCRIBE,timeout:this._options.recordReadAckTimeout}),this._responseTimeout=this._ackTimeoutRegistry.add({topic:a.TOPIC.RECORD,name:t,action:a.ACTIONS.READ,event:a.EVENT.RESPONSE_TIMEOUT,timeout:this._options.recordReadTimeout}),this._sendRead()};r(d.prototype),d.prototype.setMergeStrategy=function(t){if("function"!=typeof t)throw new Error("Invalid merge strategy: Must be a Function");this._mergeStrategy=t},d.prototype.get=function(t){return s.get(this._$data,t,this._options.recordDeepCopy)},d.prototype.set=function(t,e,i){var o=void 0,r=void 0;if(1===arguments.length){if("object"!==(void 0===t?"undefined":n(t)))throw new Error("invalid argument data");r=t}else if(2===arguments.length)if("string"==typeof t&&0!==t.length&&"function"!=typeof e)o=t,r=e;else{if("object"!==(void 0===t?"undefined":n(t))||"function"!=typeof e)throw new Error("invalid argument path");r=t,i=e}else if(3===arguments.length){if("string"!=typeof t||0===t.length||"function"!=typeof i)throw new Error("invalid arguments, must pass in a string, a value and a function");o=t,r=e}if(!o&&(null===r||"object"!==(void 0===r?"undefined":n(r))))throw new Error("invalid arguments, scalar values cannot be set without path");if(this._checkDestroyed("set"))return this;if(!this.isReady)return this._queuedMethodCalls.push({method:"set",args:arguments}),this;var a=this._$data,c=s.set(a,o,r,this._options.recordDeepCopy);if(a===c){if("function"==typeof i){var h=null;l.isConnected(this._client)||(h="Connection error: error updating record as connection was closed"),l.requestIdleCallback(function(){return i(h)})}return this}var d=void 0;return"function"==typeof i&&((d={}).writeSuccess=!0,l.isConnected(this._client)?this._setUpCallback(this.version,i):l.requestIdleCallback(function(){return i("Connection error: error updating record as connection was closed")})),this._sendUpdate(o,r,d),this._applyChange(c),this},d.prototype.subscribe=function(t,e,i){var n=this,s=this._normalizeArguments(arguments);if(void 0!==s.path&&("string"!=typeof s.path||0===s.path.length))throw new Error("invalid argument path");if("function"!=typeof s.callback)throw new Error("invalid argument callback");this._checkDestroyed("subscribe")||(s.triggerNow?this.whenReady(function(){n._eventEmitter.on(s.path,s.callback),s.callback(n.get(s.path))}):this._eventEmitter.on(s.path,s.callback))},d.prototype.unsubscribe=function(t,e){var i=this._normalizeArguments(arguments);if(void 0!==i.path&&("string"!=typeof i.path||0===i.path.length))throw new Error("invalid argument path");if(void 0!==i.callback&&"function"!=typeof i.callback)throw new Error("invalid argument callback");this._checkDestroyed("unsubscribe")||this._eventEmitter.off(i.path,i.callback)},d.prototype.discard=function(){var t=this;this._checkDestroyed("discard")||this.whenReady(function(){t.usages--,t.usages<=0&&(t.emit("destroyPending"),t._discardTimeout=t._ackTimeoutRegistry.add({topic:a.TOPIC.RECORD,name:t.name,action:a.ACTIONS.UNSUBSCRIBE}),t._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.UNSUBSCRIBE,[t.name]))})},d.prototype.delete=function(){var t=this;this._checkDestroyed("delete")||this.whenReady(function(){t.emit("destroyPending"),t._deleteAckTimeout=t._ackTimeoutRegistry.add({topic:a.TOPIC.RECORD,name:t.name,action:a.ACTIONS.DELETE,event:a.EVENT.DELETE_TIMEOUT,timeout:t._options.recordDeleteTimeout}),t._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.DELETE,[t.name])})},d.prototype.whenReady=function(t){!0===this.isReady?t(this):this.once("ready",t.bind(this,this))},d.prototype._$onMessage=function(t){if(t.action===a.ACTIONS.READ)null===this.version?(this._ackTimeoutRegistry.clear(t),this._onRead(t)):this._applyUpdate(t,this._client);else if(t.action===a.ACTIONS.ACK)this._processAckMessage(t);else if(t.action===a.ACTIONS.UPDATE||t.action===a.ACTIONS.PATCH)this._applyUpdate(t,this._client);else if(t.action===a.ACTIONS.WRITE_ACKNOWLEDGEMENT)d._handleWriteAcknowledgements(t,this._writeCallbacks,this._client);else if(t.data[0]===a.EVENT.VERSION_EXISTS)this._recoverRecord(t.data[2],JSON.parse(t.data[3]),t);else if(t.data[0]===a.EVENT.MESSAGE_DENIED)this._clearTimeouts();else if(t.action===a.ACTIONS.SUBSCRIPTION_HAS_PROVIDER){var e=h.convertTyped(t.data[1],this._client);this.hasProvider=e,this.emit("hasProviderChanged",e)}},d._handleWriteAcknowledgements=function(t,e,i){for(var n=JSON.parse(t.data[1]),s=0;s<n.length;s++){var o=e[n[s]];void 0!==o&&(o(h.convertTyped(t.data[2],i)),delete e[n[s]])}},d.prototype._recoverRecord=function(t,e,i){i.processedError=!0,this._mergeStrategy?this._mergeStrategy(this,e,t,this._onRecordRecovered.bind(this,t,e,i)):this.emit("error",a.EVENT.VERSION_EXISTS,"received update for "+t+" but version is "+this.version)},d.prototype._sendUpdate=function(t,e,i){this.version++;var n=void 0;t?(n=void 0===i?[this.name,this.version,t,c.typed(e)]:[this.name,this.version,t,c.typed(e),i],this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.PATCH,n)):(n=void 0===i?[this.name,this.version,e]:[this.name,this.version,e,i],this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.UPDATE,n))},d.prototype._onRecordRecovered=function(t,e,i,n,o){if(n)this.emit("error",a.EVENT.VERSION_EXISTS,"received update for "+t+" but version is "+this.version);else{var r=this.version;this.version=t;var c=this._$data;if(l.deepEquals(c,e))return;var h=s.set(c,void 0,o,!1);if(l.deepEquals(o,e)){this._applyChange(o);var d=this._writeCallbacks[t];return void(void 0!==d&&(d(null),delete this._writeCallbacks[t]))}var u=i.data[4];if(u&&JSON.parse(u).writeSuccess){var p=this._writeCallbacks[r];delete this._writeCallbacks[r],this._setUpCallback(this.version,p)}this._sendUpdate(void 0,o,u),this._applyChange(h)}},d.prototype._processAckMessage=function(t){var e=t.data[0];e===a.ACTIONS.SUBSCRIBE?this._ackTimeoutRegistry.clear(t):e===a.ACTIONS.DELETE?(this.emit("delete"),this._destroy()):e===a.ACTIONS.UNSUBSCRIBE&&(this.emit("discard"),this._destroy())},d.prototype._applyUpdate=function(t){var e=parseInt(t.data[1],10),i=void 0;if(i=t.action===a.ACTIONS.PATCH?h.convertTyped(t.data[3],this._client):JSON.parse(t.data[2]),null===this.version)this.version=e;else if(this.version+1!==e)return void(t.action===a.ACTIONS.PATCH?this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.SNAPSHOT,[this.name]):this._recoverRecord(e,i,t));this.version=e,this._applyChange(s.set(this._$data,t.action===a.ACTIONS.PATCH?t.data[2]:void 0,i))},d.prototype._onRead=function(t){this.version=parseInt(t.data[1],10),this._applyChange(s.set(this._$data,void 0,JSON.parse(t.data[2]))),this._setReady()},d.prototype._setReady=function(){this.isReady=!0;for(var t=0;t<this._queuedMethodCalls.length;t++)this[this._queuedMethodCalls[t].method].apply(this,this._queuedMethodCalls[t].args);this._queuedMethodCalls=[],this.emit("ready")},d.prototype._setUpCallback=function(t,e){var i=Number(this.version)+1;this._writeCallbacks[i]=e},d.prototype._sendRead=function(){this._connection.sendMsg(a.TOPIC.RECORD,a.ACTIONS.CREATEORREAD,[this.name])},d.prototype._applyChange=function(t){if(!this.isDestroyed){var e=this._$data;this._$data=t;for(var i=this._eventEmitter.eventNames(),n=0;n<i.length;n++){s.get(t,i[n],!1)!==s.get(e,i[n],!1)&&this._eventEmitter.emit(i[n],this.get(i[n]))}}},d.prototype._normalizeArguments=function(t){if(1===t.length&&"object"===n(t[0]))return t[0];for(var e=Object.create(null),i=0;i<t.length;i++)"string"==typeof t[i]?e.path=t[i]:"function"==typeof t[i]?e.callback=t[i]:"boolean"==typeof t[i]&&(e.triggerNow=t[i]);return e},d.prototype._clearTimeouts=function(){this._ackTimeoutRegistry.remove({ackId:this._readAckTimeout,silent:!0}),this._ackTimeoutRegistry.remove({ackId:this._responseTimeout,silent:!0}),this._ackTimeoutRegistry.remove({ackId:this._deleteAckTimeout,silent:!0}),this._ackTimeoutRegistry.remove({ackId:this._discardTimeout,silent:!0})},d.prototype._checkDestroyed=function(t){return!!this.isDestroyed&&(this.emit("error","Can't invoke '"+t+"'. Record '"+this.name+"' is already destroyed"),!0)},d.prototype._destroy=function(){this._clearTimeouts(),this._eventEmitter.off(),this._resubscribeNotifier.destroy(),this.isDestroyed=!0,this.isReady=!1,this._client=null,this._eventEmitter=null,this._connection=null},t.exports=d},T7wd:function(t,e){},UZ5h:function(t,e,i){"use strict";var n=i("MsCo"),s=i("qOJP");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=g,e.resolve=function(t,e){return g(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?g(t,!1,!0).resolveObject(e):e},e.format=function(t){s.isString(t)&&(t=g(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var r=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(h),d=["%","/","?",";","#"].concat(l),u=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=i("1nuA");function g(t,e,i){if(t&&s.isObject(t)&&t instanceof o)return t;var n=new o;return n.parse(t,e,i),n}o.prototype.parse=function(t,e,i){if(!s.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",h=t.split(a);h[0]=h[0].replace(/\\/g,"/");var g=t=h.join(a);if(g=g.trim(),!i&&1===t.split("#").length){var C=c.exec(g);if(C)return this.path=g,this.href=g,this.pathname=C[1],C[2]?(this.search=C[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var y=r.exec(g);if(y){var v=(y=y[0]).toLowerCase();this.protocol=v,g=g.substr(y.length)}if(i||y||g.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===g.substr(0,2);!S||y&&T[y]||(g=g.substr(2),this.slashes=!0)}if(!T[y]&&(S||y&&!E[y])){for(var N,I,O=-1,b=0;b<u.length;b++){-1!==(R=g.indexOf(u[b]))&&(-1===O||R<O)&&(O=R)}-1!==(I=-1===O?g.lastIndexOf("@"):g.lastIndexOf("@",O))&&(N=g.slice(0,I),g=g.slice(I+1),this.auth=decodeURIComponent(N)),O=-1;for(b=0;b<d.length;b++){var R;-1!==(R=g.indexOf(d[b]))&&(-1===O||R<O)&&(O=R)}-1===O&&(O=g.length),this.host=g.slice(0,O),g=g.slice(O),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var k=this.hostname.split(/\./),w=(b=0,k.length);b<w;b++){var P=k[b];if(P&&!P.match(p)){for(var D="",M=0,U=P.length;M<U;M++)P.charCodeAt(M)>127?D+="x":D+=P[M];if(!D.match(p)){var L=k.slice(0,b),x=k.slice(b+1),j=P.match(_);j&&(L.push(j[1]),x.unshift(j[2])),x.length&&(g="/"+x.join(".")+g),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=n.toASCII(this.hostname));var V=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+V,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==g[0]&&(g="/"+g))}if(!f[v])for(b=0,w=l.length;b<w;b++){var H=l[b];if(-1!==g.indexOf(H)){var G=encodeURIComponent(H);G===H&&(G=escape(H)),g=g.split(H).join(G)}}var $=g.indexOf("#");-1!==$&&(this.hash=g.substr($),g=g.slice(0,$));var q=g.indexOf("?");if(-1!==q?(this.search=g.substr(q),this.query=g.substr(q+1),e&&(this.query=m.parse(this.query)),g=g.slice(0,q)):e&&(this.search="",this.query={}),g&&(this.pathname=g),E[v]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){V=this.pathname||"";var F=this.search||"";this.path=V+F}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",o=!1,r="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(r=m.stringify(this.query));var a=this.search||r&&"?"+r||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||E[e])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+n},o.prototype.resolve=function(t){return this.resolveObject(g(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(s.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var i=new o,n=Object.keys(this),r=0;r<n.length;r++){var a=n[r];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),h=0;h<c.length;h++){var l=c[h];"protocol"!==l&&(i[l]=t[l])}return E[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!E[t.protocol]){for(var d=Object.keys(t),u=0;u<d.length;u++){var p=d[u];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||T[t.protocol])i.pathname=t.pathname;else{for(var _=(t.pathname||"").split("/");_.length&&!(t.host=_.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==_[0]&&_.unshift(""),_.length<2&&_.unshift(""),i.pathname=_.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var f=i.pathname||"",m=i.search||"";i.path=f+m}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var g=i.pathname&&"/"===i.pathname.charAt(0),C=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=C||g||i.host&&t.pathname,v=y,S=i.pathname&&i.pathname.split("/")||[],N=(_=t.pathname&&t.pathname.split("/")||[],i.protocol&&!E[i.protocol]);if(N&&(i.hostname="",i.port=null,i.host&&(""===S[0]?S[0]=i.host:S.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===_[0]?_[0]=t.host:_.unshift(t.host)),t.host=null),y=y&&(""===_[0]||""===S[0])),C)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,S=_;else if(_.length)S||(S=[]),S.pop(),S=S.concat(_),i.search=t.search,i.query=t.query;else if(!s.isNullOrUndefined(t.search)){if(N)i.hostname=i.host=S.shift(),(A=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=A.shift(),i.host=i.hostname=A.shift());return i.search=t.search,i.query=t.query,s.isNull(i.pathname)&&s.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!S.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var I=S.slice(-1)[0],O=(i.host||t.host||S.length>1)&&("."===I||".."===I)||""===I,b=0,R=S.length;R>=0;R--)"."===(I=S[R])?S.splice(R,1):".."===I?(S.splice(R,1),b++):b&&(S.splice(R,1),b--);if(!y&&!v)for(;b--;b)S.unshift("..");!y||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),O&&"/"!==S.join("/").substr(-1)&&S.push("");var A,k=""===S[0]||S[0]&&"/"===S[0].charAt(0);N&&(i.hostname=i.host=k?"":S.length?S.shift():"",(A=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=A.shift(),i.host=i.hostname=A.shift()));return(y=y||i.host&&S.length)&&!k&&S.unshift(""),S.length?i.pathname=S.join("/"):(i.pathname=null,i.path=null),s.isNull(i.pathname)&&s.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},"W+n7":function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=i("QRzD"),o=i("dAKQ"),r=i("ybXf"),a=i("gBz4"),c=i("f6PM"),h=i("lFHJ"),l=i("L8AQ"),d=i("pX2W"),u=i("8tIl"),p=function(t,e,i){this._options=t,this._connection=e,this._client=i,this._records={},this._lists={},this._listener={},this._writeCallbacks={},this._destroyEventEmitter=new u,this._hasRegistry=new c(i,e,h.TOPIC.RECORD,h.ACTIONS.HAS,this._options.recordReadTimeout),this._snapshotRegistry=new c(i,e,h.TOPIC.RECORD,h.ACTIONS.SNAPSHOT,this._options.recordReadTimeout)};p.prototype.getRecord=function(t,e){return this._records[t]||(this._records[t]=new s(t,e||{},this._connection,this._options,this._client),this._records[t].on("error",this._onRecordError.bind(this,t)),this._records[t].on("destroyPending",this._onDestroyPending.bind(this,t)),this._records[t].on("delete",this._removeRecord.bind(this,t)),this._records[t].on("discard",this._removeRecord.bind(this,t))),this._records[t].usages++,this._records[t]},p.prototype.getList=function(t,e){return this._lists[t]?this._records[t].usages++:this._lists[t]=new r(this,t,e),this._lists[t]},p.prototype.getAnonymousRecord=function(){return new o(this)},p.prototype.listen=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument pattern");if("function"!=typeof e)throw new Error("invalid argument callback");!this._listener[t]||this._listener[t].destroyPending?(this._listener[t]&&this._listener[t].destroy(),this._listener[t]=new a(h.TOPIC.RECORD,t,e,this._options,this._client,this._connection)):this._client._$onError(h.TOPIC.RECORD,h.EVENT.LISTENER_EXISTS,t)},p.prototype.unlisten=function(t){if("string"!=typeof t||0===t.length)throw new Error("invalid argument pattern");var e=this._listener[t];e&&!e.destroyPending?e.sendDestroy():this._listener[t]?(this._listener[t].destroy(),delete this._listener[t]):this._client._$onError(h.TOPIC.RECORD,h.EVENT.NOT_LISTENING,t)},p.prototype.snapshot=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument: name");if("function"!=typeof e)throw new Error("invalid argument: callback");this._records[t]&&this._records[t].isReady?e(null,this._records[t].get()):this._snapshotRegistry.request(t,e)},p.prototype.has=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument: name");if("function"!=typeof e)throw new Error("invalid argument: callback");this._records[t]?e(null,!0):this._hasRegistry.request(t,e)},p.prototype.setData=function(t,e,i,s){var o=void 0,r=void 0,a=void 0;if(4===arguments.length?(o=e,r=i,a=s):3===arguments.length?"function"!=typeof i?(o=e,r=i):(o=null,r=e,a=i):2===arguments.length&&(r=e),"string"!=typeof t||0===t.length)throw new Error("invalid argument: recordName");if(s&&"function"!=typeof s)throw new Error("invalid argument: callback");if(o&&("string"!=typeof o||0===o.length))throw new Error("invalid argument: path");if(!o&&(null===r||"object"!==(void 0===r?"undefined":n(r))))throw new Error("invalid argument: data must be an object when no path is provided");var c=this._records[t];if(c)o&&a?c.set(o,r,a):o?c.set(o,r):a?c.set(r,a):c.set(r);else{var l=o?[t,-1,o,d.typed(r)]:[t,-1,r],u={};a&&(u.writeSuccess=!0,this._writeCallbacks[t]={},this._writeCallbacks[t][-1]=a),l.push(u),this._connection.sendMsg(h.TOPIC.RECORD,h.ACTIONS.CREATEANDUPDATE,l)}},p.prototype._$handle=function(t){var e=void 0;if(t.action===h.ACTIONS.ERROR&&t.data[0]!==h.EVENT.VERSION_EXISTS&&t.data[0]!==h.ACTIONS.SNAPSHOT&&t.data[0]!==h.ACTIONS.HAS&&t.data[0]!==h.EVENT.MESSAGE_DENIED)return t.processedError=!0,void this._client._$onError(h.TOPIC.RECORD,t.data[0],t.data[1]);if(t.action===h.ACTIONS.ACK||t.action===h.ACTIONS.ERROR){if(e=t.data[1],t.data[0]===h.ACTIONS.DELETE||t.data[0]===h.ACTIONS.UNSUBSCRIBE||t.data[0]===h.EVENT.MESSAGE_DENIED&&t.data[2]===h.ACTIONS.DELETE)return this._destroyEventEmitter.emit("destroy_ack_"+e,t),void(t.data[0]===h.ACTIONS.DELETE&&this._records[e]&&this._records[e]._$onMessage(t));if(t.data[0]===h.ACTIONS.SNAPSHOT)return t.processedError=!0,void this._snapshotRegistry.recieve(e,t.data[2]);if(t.data[0]===h.ACTIONS.HAS)return t.processedError=!0,void this._snapshotRegistry.recieve(e,t.data[2])}else e=t.data[0];var i=!1,n=this._records[e];n&&(i=!0,n._$onMessage(t)),t.action===h.ACTIONS.READ&&this._snapshotRegistry.hasRequest(e)?(i=!0,this._snapshotRegistry.recieve(e,null,JSON.parse(t.data[2]))):t.action===h.ACTIONS.HAS&&this._hasRegistry.hasRequest(e)?(i=!0,this._hasRegistry.recieve(e,null,l.convertTyped(t.data[1]))):t.action!==h.ACTIONS.WRITE_ACKNOWLEDGEMENT||n?t.action===h.ACTIONS.ACK&&t.data[0]===h.ACTIONS.UNLISTEN&&this._listener[e]&&this._listener[e].destroyPending?(i=!0,this._listener[e].destroy(),delete this._listener[e]):this._listener[e]?(i=!0,this._listener[e]._$onMessage(t)):t.action===h.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED?i=!0:t.action===h.ACTIONS.SUBSCRIPTION_HAS_PROVIDER&&(i=!0):(i=!0,s._handleWriteAcknowledgements(t,this._writeCallbacks[e],this._client)),i||(t.processedError=!0,this._client._$onError(h.TOPIC.RECORD,h.EVENT.UNSOLICITED_MESSAGE,e))},p.prototype._onRecordError=function(t,e){this._client._$onError(h.TOPIC.RECORD,e,t)},p.prototype._onDestroyPending=function(t){if(this._records[t]){var e=this._records[t]._$onMessage.bind(this._records[t]);this._destroyEventEmitter.once("destroy_ack_"+t,e),this._removeRecord(t)}else this._client._$onError(h.TOPIC.RECORD,"Record attempted to be destroyed but does not exists",t)},p.prototype._removeRecord=function(t){delete this._records[t],delete this._lists[t]},t.exports=p},affY:function(t,e,i){"use strict";var n=i("lFHJ"),s=i("m3N9"),o=i("Kj+9"),r=i("/RT9"),a=i("L8AQ"),c=i("pX2W"),h=function(t,e,i){this._options=t,this._connection=e,this._client=i,this._rpcs={},this._providers={},this._ackTimeoutRegistry=i._$getAckTimeoutRegistry(),this._resubscribeNotifier=new s(this._client,this._reprovide.bind(this))};h.prototype.provide=function(t,e){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");if(this._providers[t])throw new Error("RPC "+t+" already registered");if("function"!=typeof e)throw new Error("invalid argument callback");this._ackTimeoutRegistry.add({topic:n.TOPIC.RPC,name:t,action:n.ACTIONS.SUBSCRIBE}),this._providers[t]=e,this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.SUBSCRIBE,[t])},h.prototype.unprovide=function(t){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");this._providers[t]&&(delete this._providers[t],this._ackTimeoutRegistry.add({topic:n.TOPIC.RPC,name:t,action:n.ACTIONS.UNSUBSCRIBE}),this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.UNSUBSCRIBE,[t]))},h.prototype.make=function(t,e,i){if("string"!=typeof t||0===t.length)throw new Error("invalid argument name");if("function"!=typeof i)throw new Error("invalid argument callback");var s=this._client.getUid(),o=c.typed(e);this._rpcs[s]=new r(t,i,this._options,this._client),this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.REQUEST,[t,s,o])},h.prototype._getRpc=function(t,e,i){var s=this._rpcs[t];return s||(this._client._$onError(n.TOPIC.RPC,n.EVENT.UNSOLICITED_MESSAGE,i),null)},h.prototype._respondToRpc=function(t){var e=t.data[0],i=t.data[1],s=null,r=void 0;t.data[2]&&(s=a.convertTyped(t.data[2],this._client)),this._providers[e]?(r=new o(this._connection,e,i),this._providers[e](s,r)):this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.REJECTION,[e,i])},h.prototype._$handle=function(t){var e=void 0,i=void 0;if(t.action!==n.ACTIONS.REQUEST)if(t.action!==n.ACTIONS.ACK||t.data[0]!==n.ACTIONS.SUBSCRIBE&&t.data[0]!==n.ACTIONS.UNSUBSCRIBE){if(t.action===n.ACTIONS.ERROR){if(t.data[0]===n.EVENT.MESSAGE_PERMISSION_ERROR)return;if(t.data[0]===n.EVENT.MESSAGE_DENIED&&t.data[2]===n.ACTIONS.SUBSCRIBE)return void this._ackTimeoutRegistry.remove({topic:n.TOPIC.RPC,action:n.ACTIONS.SUBSCRIBE,name:t.data[1]})}t.action===n.ACTIONS.ERROR||t.action===n.ACTIONS.ACK?(i=t.data[0]===n.EVENT.MESSAGE_DENIED&&t.data[2]===n.ACTIONS.REQUEST?t.data[3]:t.data[2],e=t.data[1]):(e=t.data[0],i=t.data[1]);var s=this._getRpc(i,e,t.raw);null!==s&&(t.action===n.ACTIONS.ACK?s.ack():t.action===n.ACTIONS.RESPONSE?(s.respond(t.data[2]),delete this._rpcs[i]):t.action===n.ACTIONS.ERROR&&(t.processedError=!0,s.error(t.data[0]),delete this._rpcs[i]))}else this._ackTimeoutRegistry.clear(t);else this._respondToRpc(t)},h.prototype._reprovide=function(){for(var t in this._providers)this._connection.sendMsg(n.TOPIC.RPC,n.ACTIONS.SUBSCRIBE,[t])},t.exports=h},dAKQ:function(t,e,i){"use strict";var n=i("QRzD"),s=function(t){this.name=null,this._recordHandler=t,this._record=null,this._subscriptions=[],this._proxyMethod("delete"),this._proxyMethod("set"),this._proxyMethod("discard")};i("8tIl")(s.prototype),s.prototype.get=function(t){if(null!==this._record)return this._record.get(t)},s.prototype.subscribe=function(){var t=n.prototype._normalizeArguments(arguments);t.triggerNow=!0,this._subscriptions.push(t),null!==this._record&&this._record.subscribe(t)},s.prototype.unsubscribe=function(){var t=n.prototype._normalizeArguments(arguments),e=[],i=void 0;for(i=0;i<this._subscriptions.length;i++)this._subscriptions[i].path===t.path&&this._subscriptions[i].callback===t.callback||e.push(this._subscriptions[i]);this._subscriptions=e,null!==this._record&&this._record.unsubscribe(t)},s.prototype.setName=function(t){if(this.name!==t){this.name=t;var e=void 0;if(null!==this._record&&!this._record.isDestroyed){for(e=0;e<this._subscriptions.length;e++)this._record.unsubscribe(this._subscriptions[e]);this._record.discard()}for(this._record=this._recordHandler.getRecord(t),e=0;e<this._subscriptions.length;e++)this._record.subscribe(this._subscriptions[e]);this._record.whenReady(this.emit.bind(this,"ready")),this.emit("nameChanged",t)}},s.prototype._proxyMethod=function(t){this[t]=this._callMethodOnRecord.bind(this,t)},s.prototype._callMethodOnRecord=function(t){if(null===this._record)throw new Error("Can`t invoke "+t+". AnonymousRecord not initialised. Call setName first");if("function"!=typeof this._record[t])throw new Error(t+" is not a method on the record");var e=Array.prototype.slice.call(arguments,1);return this._record[t].apply(this._record,e)},t.exports=s},f6PM:function(t,e,i){"use strict";var n=i("lFHJ"),s=i("m3N9"),o=function(t,e,i,n,o){this._client=t,this._connection=e,this._topic=i,this._action=n,this._timeoutDuration=o,this._requests={},this._ackTimeoutRegistry=t._$getAckTimeoutRegistry(),this._resubscribeNotifier=new s(this._client,this._resendRequests.bind(this)),this._onResponseTimeout=this._onResponseTimeout.bind(this)};o.prototype.hasRequest=function(t){return!!this._requests[t]},o.prototype.request=function(t,e){this._requests[t]||(this._requests[t]=[],this._connection.sendMsg(this._topic,this._action,[t]));var i=this._ackTimeoutRegistry.add({topic:this._topic,event:n.EVENT.RESPONSE_TIMEOUT,name:t,action:this._action,timeout:this._timeoutDuration,callback:this._onResponseTimeout});this._requests[t].push({callback:e,ackId:i})},o.prototype.recieve=function(t,e,i){var s=this._requests[t];if(s){for(var o=0;o<s.length;o++){var r=s[o];this._ackTimeoutRegistry.remove({ackId:r.ackId}),r.callback(e,i)}delete this._requests[t]}else this._client._$onError(this._topic,n.EVENT.UNSOLICITED_MESSAGE,"no entry for "+t)},o.prototype._onResponseTimeout=function(t){var e="No response received in time for "+this._topic+"|"+this._action+"|"+t.name;this._client._$onError(this._topic,n.EVENT.RESPONSE_TIMEOUT,e)},o.prototype._resendRequests=function(){for(var t in this._requests)this._connection.sendMsg(this._topic,this._action,[t])},t.exports=o},gBz4:function(t,e,i){"use strict";var n=i("lFHJ"),s=i("m3N9"),o=function(t,e,i,o,r,a){this._topic=t,this._callback=i,this._pattern=e,this._options=o,this._client=r,this._connection=a,this._ackTimeoutRegistry=r._$getAckTimeoutRegistry(),this._ackTimeoutRegistry.add({topic:this._topic,name:e,action:n.ACTIONS.LISTEN}),this._resubscribeNotifier=new s(r,this._sendListen.bind(this)),this._sendListen(),this.destroyPending=!1};o.prototype.sendDestroy=function(){this.destroyPending=!0,this._connection.sendMsg(this._topic,n.ACTIONS.UNLISTEN,[this._pattern]),this._resubscribeNotifier.destroy()},o.prototype.destroy=function(){this._callback=null,this._pattern=null,this._client=null,this._connection=null},o.prototype.accept=function(t){this._connection.sendMsg(this._topic,n.ACTIONS.LISTEN_ACCEPT,[this._pattern,t])},o.prototype.reject=function(t){this._connection.sendMsg(this._topic,n.ACTIONS.LISTEN_REJECT,[this._pattern,t])},o.prototype._createCallbackResponse=function(t){return{accept:this.accept.bind(this,t.data[1]),reject:this.reject.bind(this,t.data[1])}},o.prototype._$onMessage=function(t){t.action===n.ACTIONS.ACK?this._ackTimeoutRegistry.clear(t):t.action===n.ACTIONS.SUBSCRIPTION_FOR_PATTERN_FOUND?this._callback(t.data[1],!0,this._createCallbackResponse(t)):t.action===n.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED?this._callback(t.data[1],!1):this._client._$onError(this._topic,n.EVENT.UNSOLICITED_MESSAGE,t.data[0]+"|"+t.data[1])},o.prototype._sendListen=function(){this._connection.sendMsg(this._topic,n.ACTIONS.LISTEN,[this._pattern])},t.exports=o},kMPS:function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,o){e=e||"&",i=i||"=";var r={};if("string"!=typeof t||0===t.length)return r;var a=/\+/g;t=t.split(e);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var h=t.length;c>0&&h>c&&(h=c);for(var l=0;l<h;++l){var d,u,p,_,f=t[l].replace(a,"%20"),T=f.indexOf(i);T>=0?(d=f.substr(0,T),u=f.substr(T+1)):(d=f,u=""),p=decodeURIComponent(d),_=decodeURIComponent(u),n(r,p)?s(r[p])?r[p].push(_):r[p]=[r[p],_]:r[p]=_}return r};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},kqZM:function(t,e){},"l+cs":function(t,e){},lFHJ:function(t,e,i){"use strict";e.CONNECTION_STATE={},e.CONNECTION_STATE.CLOSED="CLOSED",e.CONNECTION_STATE.AWAITING_CONNECTION="AWAITING_CONNECTION",e.CONNECTION_STATE.CHALLENGING="CHALLENGING",e.CONNECTION_STATE.AWAITING_AUTHENTICATION="AWAITING_AUTHENTICATION",e.CONNECTION_STATE.AUTHENTICATING="AUTHENTICATING",e.CONNECTION_STATE.OPEN="OPEN",e.CONNECTION_STATE.ERROR="ERROR",e.CONNECTION_STATE.RECONNECTING="RECONNECTING",e.MESSAGE_SEPERATOR=String.fromCharCode(30),e.MESSAGE_PART_SEPERATOR=String.fromCharCode(31),e.TYPES={},e.TYPES.STRING="S",e.TYPES.OBJECT="O",e.TYPES.NUMBER="N",e.TYPES.NULL="L",e.TYPES.TRUE="T",e.TYPES.FALSE="F",e.TYPES.UNDEFINED="U",e.TOPIC={},e.TOPIC.CONNECTION="C",e.TOPIC.AUTH="A",e.TOPIC.ERROR="X",e.TOPIC.EVENT="E",e.TOPIC.RECORD="R",e.TOPIC.RPC="P",e.TOPIC.PRESENCE="U",e.TOPIC.PRIVATE="PRIVATE/",e.EVENT={},e.EVENT.CONNECTION_ERROR="connectionError",e.EVENT.CONNECTION_STATE_CHANGED="connectionStateChanged",e.EVENT.MAX_RECONNECTION_ATTEMPTS_REACHED="MAX_RECONNECTION_ATTEMPTS_REACHED",e.EVENT.CONNECTION_AUTHENTICATION_TIMEOUT="CONNECTION_AUTHENTICATION_TIMEOUT",e.EVENT.ACK_TIMEOUT="ACK_TIMEOUT",e.EVENT.NO_RPC_PROVIDER="NO_RPC_PROVIDER",e.EVENT.RESPONSE_TIMEOUT="RESPONSE_TIMEOUT",e.EVENT.DELETE_TIMEOUT="DELETE_TIMEOUT",e.EVENT.UNSOLICITED_MESSAGE="UNSOLICITED_MESSAGE",e.EVENT.MESSAGE_DENIED="MESSAGE_DENIED",e.EVENT.MESSAGE_PARSE_ERROR="MESSAGE_PARSE_ERROR",e.EVENT.VERSION_EXISTS="VERSION_EXISTS",e.EVENT.NOT_AUTHENTICATED="NOT_AUTHENTICATED",e.EVENT.MESSAGE_PERMISSION_ERROR="MESSAGE_PERMISSION_ERROR",e.EVENT.LISTENER_EXISTS="LISTENER_EXISTS",e.EVENT.NOT_LISTENING="NOT_LISTENING",e.EVENT.TOO_MANY_AUTH_ATTEMPTS="TOO_MANY_AUTH_ATTEMPTS",e.EVENT.INVALID_AUTH_MSG="INVALID_AUTH_MSG",e.EVENT.IS_CLOSED="IS_CLOSED",e.EVENT.RECORD_NOT_FOUND="RECORD_NOT_FOUND",e.EVENT.NOT_SUBSCRIBED="NOT_SUBSCRIBED",e.ACTIONS={},e.ACTIONS.PING="PI",e.ACTIONS.PONG="PO",e.ACTIONS.ACK="A",e.ACTIONS.REDIRECT="RED",e.ACTIONS.CHALLENGE="CH",e.ACTIONS.CHALLENGE_RESPONSE="CHR",e.ACTIONS.READ="R",e.ACTIONS.CREATE="C",e.ACTIONS.UPDATE="U",e.ACTIONS.PATCH="P",e.ACTIONS.DELETE="D",e.ACTIONS.SUBSCRIBE="S",e.ACTIONS.UNSUBSCRIBE="US",e.ACTIONS.HAS="H",e.ACTIONS.SNAPSHOT="SN",e.ACTIONS.INVOKE="I",e.ACTIONS.SUBSCRIPTION_FOR_PATTERN_FOUND="SP",e.ACTIONS.SUBSCRIPTION_FOR_PATTERN_REMOVED="SR",e.ACTIONS.SUBSCRIPTION_HAS_PROVIDER="SH",e.ACTIONS.LISTEN="L",e.ACTIONS.UNLISTEN="UL",e.ACTIONS.LISTEN_ACCEPT="LA",e.ACTIONS.LISTEN_REJECT="LR",e.ACTIONS.PROVIDER_UPDATE="PU",e.ACTIONS.QUERY="Q",e.ACTIONS.CREATEORREAD="CR",e.ACTIONS.CREATEANDUPDATE="CU",e.ACTIONS.EVENT="EVT",e.ACTIONS.ERROR="E",e.ACTIONS.REQUEST="REQ",e.ACTIONS.RESPONSE="RES",e.ACTIONS.REJECTION="REJ",e.ACTIONS.PRESENCE_JOIN="PNJ",e.ACTIONS.PRESENCE_LEAVE="PNL",e.ACTIONS.WRITE_ACKNOWLEDGEMENT="WA",e.CALL_STATE={},e.CALL_STATE.INITIAL="INITIAL",e.CALL_STATE.CONNECTING="CONNECTING",e.CALL_STATE.ESTABLISHED="ESTABLISHED",e.CALL_STATE.ACCEPTED="ACCEPTED",e.CALL_STATE.DECLINED="DECLINED",e.CALL_STATE.ENDED="ENDED",e.CALL_STATE.ERROR="ERROR"},ll1Z:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("mvHQ"),s=i.n(n),o=i("woOf"),r=i.n(o),a=i("5LsM"),c=i("K4CD"),h=i("oAV5"),l={name:"TaskModal",data:function(){return{columns:[{title:"交易号",key:"transCode",sortable:"custom",width:160,render:function(t,e){return t("a",{attrs:{href:"/Form/index.html?data="+e.row.transCode,target:"_blank"}},e.row.transCode)}},{title:"当前节点",key:"nodeName"},{title:"当前用户",key:"assigneeName",width:90},{title:"创建者",key:"creatorName",width:90},{title:"创建时间",key:"crtTime",sortable:"custom",width:160,render:function(t,e){return t("span",function(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var s=e.getDate();s=s<10?"0"+s:s;var o=e.getHours();o=o<10?"0"+o:o;var r=e.getMinutes(),a=e.getSeconds();return i+"-"+n+"-"+s+" "+o+":"+(r=r<10?"0"+r:r)+":"+(a=a<10?"0"+a:a)}(e.row.crtTime))}}],columnData:[],loading:!0,pageTotal:0,pageSize:6,currentPage:1,modelState:!1,filterData:{transCode:"",creatorName:"",crtTime:[],assigneeName:"",nodeName:""},sort:"",expand:!1,expandValue:"展开",expandIcon:"&#xe617;"}},props:{listId:{type:String},modal:{type:Boolean},taskValue:{type:String},type:{type:String},orderCode:{type:String},projectName:{type:String}},watch:{listId:{handler:function(t,e){this.getTaskList()}},modal:function(t,e){this.modelState=t}},methods:{changeCurrentPage:function(t){this.currentPage=t,this.getAppTaskCount(this.sort,t)},handleSort:function(t,e,i){var n={};n[t.key]=t.order,this.sort=n,this.getAppTaskCount(n,this.currentPage)},modalVisibleChange:function(t){t||(this.$emit("emitModal",{modal:!1,listId:""}),this.filterData.transCode="",this.filterData.creatorName="",this.filterData.crtTime="",this.filterData.assigneeName="",this.filterData.nodeName="",this.expand=!1,this.sort="",this.currentPage=1,this.expandValue="展开")},clearInputValue:function(){this.filterData.transCode="",this.filterData.creatorName="",this.filterData.crtTime="",this.filterData.assigneeName="",this.filterData.nodeName="",this.filterTaskBtn()},getTaskList:function(){var t=this,e={type:this.type,page:this.currentPage,listId:this.listId,limit:this.pageSize,filter:{}};this.orderCode&&(e.filter.orderCode=this.orderCode),this.projectName&&(e.filter.projectName=this.projectName),e.filter=s()(e.filter),this.loading=!0,Object(c.a)(e).then(function(e){t.pageTotal=e.total,t.columnData=e.tableContent,t.loading=!1})},filterTaskBtn:function(t){this.currentPage=1,this.getAppTaskCount("",1)},getAppTaskCount:function(t,e){var i=this,n="";this.filterData.crtTime.length>0&&this.filterData.crtTime[0]&&(n=Object(h.b)(this.filterData.crtTime[0],"yyyy-MM-dd")+"/"+Object(h.b)(this.filterData.crtTime[1],"yyyy-MM-dd")),this.orderCode&&(this.filterData.orderCode=this.orderCode),this.projectName&&(this.filterData.projectName=this.projectName),this.filterData.crtTime=n;var o={type:this.type,page:e,listId:this.listId,limit:this.pageSize,filter:s()(this.filterData)};t&&(o.sort=s()(t)),this.loading=!0,Object(c.a)(o).then(function(t){i.pageTotal=t.total,i.columnData=t.tableContent,i.loading=!1})},expandCrtTime:function(){this.expand?(this.expand=!1,this.expandValue="展开",this.expandIcon="&#xe617;"):(this.expand=!0,this.expandValue="收起",this.expandIcon="&#xe618;")}}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{attrs:{title:"任务列表 - "+t.taskValue,width:"660",closable:""},on:{"on-visible-change":t.modalVisibleChange},model:{value:t.modelState,callback:function(e){t.modelState=e},expression:"modelState"}},[i("div",{staticStyle:{position:"relative"}},[i("div",{staticClass:"input-filter-box"},[i("label",{staticClass:"input-filter-lebal"},[t._v("交易号:")]),t._v(" "),i("Input",{staticStyle:{width:"127px","margin-left":"12px"},attrs:{placeholder:"请输入交易号"},model:{value:t.filterData.transCode,callback:function(e){t.$set(t.filterData,"transCode",e)},expression:"filterData.transCode"}})],1),t._v(" "),i("div",{staticClass:"input-filter-box"},[i("label",{staticClass:"input-filter-lebal"},[t._v("创建者:")]),t._v(" "),i("Input",{staticStyle:{width:"127px","margin-left":"12px"},attrs:{placeholder:"请输入创建者"},model:{value:t.filterData.creatorName,callback:function(e){t.$set(t.filterData,"creatorName",e)},expression:"filterData.creatorName"}})],1),t._v(" "),i("div",{staticClass:"input-filter-box"},[i("label",{staticClass:"input-filter-lebal"},[t._v("当前用户:")]),t._v(" "),i("Input",{staticStyle:{width:"127px","margin-left":"12px"},attrs:{placeholder:"请输入审批者"},model:{value:t.filterData.assigneeName,callback:function(e){t.$set(t.filterData,"assigneeName",e)},expression:"filterData.assigneeName"}})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.expand,expression:"expand"}],staticClass:"input-crttime"},[i("div",{staticClass:"input-filter-box"},[i("label",{staticClass:"input-filter-lebal"},[t._v("当前节点:")]),t._v(" "),i("Input",{staticStyle:{width:"127px","margin-left":"12px"},attrs:{placeholder:"请输入当前节点"},model:{value:t.filterData.nodeName,callback:function(e){t.$set(t.filterData,"nodeName",e)},expression:"filterData.nodeName"}})],1),t._v(" "),i("div",{staticClass:"input-filter-box"},[i("label",{staticClass:"input-filter-lebal"},[t._v("创建时间:")]),t._v(" "),i("DatePicker",{staticStyle:{width:"170px"},attrs:{format:"yyyy/MM/dd",type:"daterange",placement:"bottom-end",placeholder:"请输入过滤时间"},model:{value:t.filterData.crtTime,callback:function(e){t.$set(t.filterData,"crtTime",e)},expression:"filterData.crtTime"}})],1)]),t._v(" "),i("div",{staticClass:"action-btn"},[i("Button",{attrs:{type:"primary",size:"small"},on:{click:t.filterTaskBtn}},[t._v("查询")]),t._v(" "),i("Button",{attrs:{size:"small"},on:{click:t.clearInputValue}},[t._v("重置")]),t._v(" "),i("span",{staticClass:"expand",on:{click:t.expandCrtTime}},[t._v("\n        "+t._s(t.expandValue)+"\n        "),i("i",{staticClass:"iconfont",domProps:{innerHTML:t._s(t.expandIcon)}})])],1)]),t._v(" "),i("Table",{attrs:{loading:t.loading,data:t.columnData,columns:t.columns,size:"small",stripe:""},on:{"on-sort-change":t.handleSort}}),t._v(" "),i("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{attrs:{total:t.pageTotal,current:t.currentPage,"page-size":t.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":t.changeCurrentPage}})],1)]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"})],1)},staticRenderFns:[]};var u=i("VU/8")(l,d,!1,function(t){i("T7wd")},"data-v-81ca90ec",null).exports,p=i("Gu7T"),_=i.n(p),f=i("XLwt"),T={props:["caseId"],data:function(){return{nodes:[],links:[],groupLength:0,dataItem:[],title:""}},methods:{drawECharts:function(){var t=f.init(document.getElementById("circularGraph"));for(var e in t.on("click",this.redirectTo),this.nodes)delete this.nodes[e].symbol;var i=this.dataItem.map(function(t,e){return{name:t.name}});this.nodes.forEach(function(t){t.category=t.index,t.draggable=!0,t.symbol="image:///resources/images/icon/"+t.icon+".png"});var n={tooltip:{},clickable:!0,legend:[{data:i.map(function(t){return t.name})}],animationDuration:3e3,animationDurationUpdate:3e3,animationEasingUpdate:"quinticInOut",series:[{name:this.title,type:"graph",width:"400px",height:"400px",top:"80px",layout:"circular",circular:{rotateLabel:!0},data:this.nodes,links:this.links,categories:i,draggable:!0,edgeSymbol:["none","arrow"],label:{normal:{position:["50%","50%"],formatter:"{b}"}},lineStyle:{normal:{color:"source",curveness:.1}},force:{repulsion:12}}]};t.setOption(n)},redirectTo:function(t){if(void 0!==t.seriesIndex&&"click"==t.type){if("list"!==t.data.type)return;if(t.data.url){var e="appReport/"+t.data.url;window.top.postMessage({type:"redirect",url:e},"*")}}}},created:function(){var t=this,e=this;Object(c.m)(this.caseId).then(function(i){var n=[];t.groupLength=i.dataItem.length,t.dataItem=i.dataItem,t.title=i.title,i&&i.dataItem.map(function(t,e){for(var i=0;i<t.child.length;i++)t.child[i].index=e,t.child[i].icon=e+"_"+i;n=[].concat(_()(n),_()(t.child))}),console.log(n),n.map(function(e){t.nodes.push({name:e.value,id:e.id,index:e.index,icon:e.icon,value:10,url:e.url,type:e.type,symbol:"rect",label:{show:!0},itemStyle:{borderColor:"#ddd",shadowBlur:10,shadowOffsetX:2,shadowOffsetY:2}}),e.endNode.map(function(i){t.links.push({source:e.id,target:i.id})})}),e.drawECharts()})},mounted:function(){}},E={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"graph-box"},[e("div",{staticClass:"graph",attrs:{id:"circularGraph"}})])}]};var m=i("VU/8")(T,E,!1,function(t){i("33oV")},"data-v-73dead91",null).exports,g=i("bTqw"),C={data:function(){return{spinShow:!0,baseLength:45,graphSpace:65,circleFillColor:"#646b86",circleBorderColor:"#e0a527",squareFillColor:"#00ae9d",squareBorderColor:"#77b745",isActive:!1,arr:[],title:"",dataItem:[],pointList:[],transTypePointList:[],waterFlow:{},flowType:!0,businessItemWidth:"50px",ds:a("wss://192.168.3.160:6021/deepstream"),books$$:null,radioGroupLabel:"mytask",rodioGroupDoOrNot:"todo",doneortodo:"todo",taskType:"mytask",defaultDisplayTask:{},teamDone:{},teamTodo:{},myDone:{},myToDo:{},subjectTodo:{},modal:!1,taskValue:"",pageListId:"",type:"myToDo",subjectList:g.b,visible:!1,ordersLoading:!1,searchValue:"",orderCode:"",columnData:[],columns:[{title:"交易号",key:"transCode",align:"center"},{title:"创建者",key:"creatorName",align:"center",width:80},{title:"创建时间",key:"crtTime",align:"center"},{title:"生效时间",key:"effectiveTime",align:"center"}],pageTotal:0,currentPage:1,ordersPageSize:6,projectPopTipVisible:!1,projectLoading:!1,projectSearchValue:"",projectName:"",projectColumnData:[],projectColumns:[{title:"项目名称",key:"projectName",align:"center"},{title:"创建者",key:"creatorName",align:"center",width:80},{title:"创建时间",key:"crtTime",align:"center"},{title:"生效时间",key:"effectiveTime",align:"center"}],projectPageTotal:0,projectCurrentPage:1,projectPageSize:6}},components:{TaskModal:u,CircularGraph:m},props:["caseId"],methods:{draw:function(){for(var t=this.baseLength,e=this.graphSpace,i=this.dataItem,n={},s=void 0,o=void 0,r=void 0,a=0;a<i.length;a++){var c=170+170*a;if(i[a].point="0,"+c+" 2100,"+c,i[a].child.length>0)for(var h=0;h<i[a].child.length;h++){this.dataItem[a].child[h].pointX=40+(t+e)*i[a].child[h].sort,this.dataItem[a].child[h].pointY=50+t/2+170*a,n[this.dataItem[a].child[h].id]=this.dataItem[a].child[h].pointX+","+this.dataItem[a].child[h].pointY;var l=i[a].child[h];l.teamDone>0&&(this.teamDone[l.listId]=l.teamDone>99?"99+":l.teamDone),l.teamTodo>0&&(this.teamTodo[l.listId]=l.teamTodo>99?"99+":l.teamTodo),l.myDone>0&&(this.myDone[l.listId]=l.myDone>99?"99+":l.myDone),l.myToDo>0&&(this.myToDo[l.listId]=l.myToDo>99?"99+":l.myToDo),l.subjectTodo>0&&(this.subjectTodo[l.id]=l.subjectTodo>99?"99+":l.subjectTodo)}}var d=this;i.forEach(function(i,a){i.child.forEach(function(a,c){a.relevantNode&&a.relevantNode.length>0&&a.relevantNode.forEach(function(c,h){c.id in n&&(s=n[c.id].split(","),o=Number(s[0]),r=Number(s[1]),c.groupIndex<i.index?d.transTypePointList.push({id:a.id+"_"+c.id,value:a.pointX+t/2+","+(a.pointY-t/2)+" "+(o+t/2)+","+(r+t/2+20)}):c.groupIndex>i.index?d.transTypePointList.push({id:a.id+"_"+c.id,value:a.pointX+t/2+","+(a.pointY+t/2+20)+" "+(o+t/2)+","+(r-t/2-4.3)}):a.pointX<o-40-t-e?d.transTypePointList.push({id:a.id+"_"+c.id,value:a.pointX+t/2+","+(a.pointY-t/2)+" "+(a.pointX+t/2)+","+(a.pointY-t/2-20)+" "+(o+t/2)+","+(r-t/2-20)+" "+(o+t/2)+","+(r-t/2-4.3)}):d.transTypePointList.push({id:a.id+"_"+c.id,value:a.pointX+t+","+a.pointY+" "+(o-4.3)+","+r}))}),a.endNode&&a.endNode.length>0&&a.endNode.forEach(function(c,h){if(c.id in n)if(s=n[c.id].split(","),o=Number(s[0]),r=Number(s[1]),c.groupIndex<i.index){var l=(o-a.pointX)/(t+e)*8.5;d.pointList.push({id:a.id+"_"+c.id,value:a.pointX+t/2+","+(a.pointY-t/2)+" "+(o+t/2-l)+","+(r+t/2+20)})}else if(c.groupIndex>i.index){var u=(o-a.pointX)/(t+e)*8.5;d.pointList.push({id:a.id+"_"+c.id,value:a.pointX+t/2+","+(a.pointY+t/2+20)+" "+(o+t/2-u)+","+(r-t/2-4.3)})}})})})},calcSvgWidth:function(t){var e=0;if(t.length>0){e=t[0].child.length;for(var i=1;i<t.length;i++)e<t[i].child.length&&(e=t[i].child.length)}var n=e*(30+this.baseLength+this.graphSpace)+50;return document.body.clientWidth>n?document.body.clientWidth:n},calcSvgHeight:function(t){var e=t.length>0?171*t.length+79:215;return document.body.clientHeight>e?document.body.clientHeight:e},doAction:function(t,e){if(this.waterFlow={},t.endNode&&t.endNode.length>0)for(var i=0;i<t.endNode.length;i++)this.waterFlow[t.id+"_"+t.endNode[i].id]=t.endNode[i];if(t.lastNode&&t.lastNode.length>0)for(var n=0;n<t.lastNode.length;n++)this.waterFlow[t.lastNode[n].id+"_"+t.id]=t.lastNode[n]},outBlur:function(t){this.waterFlow={}},redirectTo:function(t,e){var i=t.url,n=window.top.document.getElementById("frame1").getAttribute("nr");"_blank"===t.target?window.open(t.url,"_blank"):(n||(i=~i.indexOf("outlink")?t.url:~i.indexOf("app")?"appReport/"+i:"report/"+i),window.top.postMessage({type:"redirect",url:i},"*"))},subscribeMessage:function(){var t=Object(h.c)();this.ds.event.subscribe("taskChange/"+t,function(t){})},radioGroupChange:function(t){var e=this;if(this.taskType=t,"teamtask"===this.taskType&&"done"===this.doneortodo?this.type="teamDone":"teamtask"===this.taskType&&"todo"===this.doneortodo?this.type="teamTodo":"mytask"===this.taskType&&"done"===this.doneortodo?this.type="myDone":"mytask"===this.taskType&&"todo"===this.doneortodo&&(this.type="myToDo"),this.orderCode||this.projectName){var i=this.type;Object(c.h)(i,this.projectName,this.orderCode).then(function(t){e.defaultDisplayTask={},e.defaultDisplayTask=t})}else{switch(this.type){case"teamDone":this.defaultDisplayTask=this.teamDone;break;case"teamTodo":this.defaultDisplayTask=this.teamTodo;break;case"myDone":this.defaultDisplayTask=this.myDone;break;case"myToDo":this.defaultDisplayTask=this.myToDo}this.defaultDisplayTask=r()(this.defaultDisplayTask,this.subjectTodo)}},radioGroupChangeDoneOrTodo:function(t){var e=this;if(this.doneortodo=t,"teamtask"===this.taskType&&"done"===this.doneortodo?this.type="teamDone":"teamtask"===this.taskType&&"todo"===this.doneortodo?this.type="teamTodo":"mytask"===this.taskType&&"done"===this.doneortodo?this.type="myDone":"mytask"===this.taskType&&"todo"===this.doneortodo&&(this.type="myToDo"),this.orderCode||this.projectName){var i=this.type;Object(c.h)(i,this.projectName,this.orderCode).then(function(t){e.defaultDisplayTask={},e.defaultDisplayTask=t})}else{switch(this.type){case"teamDone":this.defaultDisplayTask=this.teamDone;break;case"teamTodo":this.defaultDisplayTask=this.teamTodo;break;case"myDone":this.defaultDisplayTask=this.myDone;break;case"myToDo":this.defaultDisplayTask=this.myToDo}this.defaultDisplayTask=r()(this.defaultDisplayTask,this.subjectTodo)}},opentask:function(t){"subject"===t.type?this.redirectTo(t,event):(this.modal=!0,this.pageListId=event.target.getAttribute("listId"),this.taskValue=event.target.getAttribute("taskValue"))},emitModal:function(t,e){this.pageListId=t.listId,this.modal=!1},changeCurrentPage:function(t){var e=this,i={type:this.type,page:t,listId:this.pageListId,limit:this.pageSize};this.loading=!0,Object(c.a)(i).then(function(t){t.tableContent.length>0&&(e.columnData=t.tableContent,e.loading=!1)})},onHandleClearOrderTag:function(){var t=this;this.orderCode="",Object(c.h)(this.type,this.projectName).then(function(e){t.defaultDisplayTask={},t.defaultDisplayTask=e})},onHandleFilterByCode:function(){var t=this,e=[];this.searchValue&&(e=s()([{operator:"like",value:this.searchValue,property:"transCode"}])),this.currentPage=1,this.ordersLoading=!0,Object(c.i)(this.currentPage,e).then(function(e){t.pageTotal=e.dataCount,t.columnData=e.tableContent,t.ordersLoading=!1})},getSaleOrderList:function(){var t=this;this.searchValue="",this.currentPage=1,this.ordersLoading=!0,Object(c.i)(this.currentPage).then(function(e){t.pageTotal=e.dataCount,t.columnData=e.tableContent,t.ordersLoading=!1})},orderPageChange:function(t){var e=this,i=[];this.searchValue&&(i=s()([{operator:"like",value:this.searchValue,property:"transCode"}])),this.currentPage=t,this.ordersLoading=!0,Object(c.i)(this.currentPage,i).then(function(t){e.pageTotal=t.dataCount,e.columnData=t.tableContent,e.ordersLoading=!1})},handleDblclick:function(t,e){var i=this,n=this.type;this.orderCode=t.transCode,Object(c.h)(n,this.projectName,this.orderCode).then(function(t){i.defaultDisplayTask={},i.visible=!1,i.defaultDisplayTask=t})},onHandleClearProjectTag:function(){var t=this;this.projectName="",Object(c.h)(this.type,"",this.orderCode).then(function(e){t.defaultDisplayTask={},t.defaultDisplayTask=e})},onHandleFilterByProjectName:function(){var t=this,e=[];this.projectSearchValue&&(e=s()([{operator:"like",value:this.projectSearchValue,property:"projectName"}])),this.projectCurrentPage=1,this.projectLoading=!0,Object(c.k)(this.currentPage,e).then(function(e){t.projectPageTotal=e.dataCount,t.projectColumnData=e.tableContent,t.projectLoading=!1})},getProjectList:function(){var t=this;this.projectSearchValue="",this.projectCurrentPage=1,this.projectLoading=!0,Object(c.k)(this.projectCurrentPage).then(function(e){t.projectPageTotal=e.dataCount,t.projectColumnData=e.tableContent,t.projectLoading=!1})},projectPageChange:function(t){var e=this,i=[];this.projectSearchValue&&(i=s()([{operator:"like",value:this.projectSearchValue,property:"projectName"}])),this.projectCurrentPage=t,this.projectLoading=!0,Object(c.k)(this.projectCurrentPage,i).then(function(t){e.projectPageTotal=t.dataCount,e.projectColumnData=t.tableContent,e.projectLoading=!1})},handleDbSelectProject:function(t,e){var i=this,n=this.type;this.projectName=t.projectName,Object(c.h)(n,this.projectName,this.orderCode).then(function(t){i.defaultDisplayTask={},i.projectPopTipVisible=!1,i.defaultDisplayTask=t})}},created:function(){var t=this.$currentUser,e=[t.nickname,t.userId].join("|"),i=Object(h.c)();this.ds.login({token:i,username:e},function(t){console.log("connect success!")}),this.subscribeMessage()},mounted:function(){var t=this,e=this;Object(c.m)(this.caseId).then(function(i){i.dataItem.map(function(e){e.child&&e.child.map(function(e){var i,n;"subject"===e.type&&e.value&&(e.icon="resources/images/icon/"+(i=e.value,n="",t.subjectList.map(function(t){t.name===i&&(n=t.icon)}),n))})}),e.title=i.title,e.dataItem=i.dataItem;var n=e.calcSvgWidth(i.dataItem)>1400?e.calcSvgWidth(i.dataItem):1400,s=e.calcSvgHeight(i.dataItem);window.document.getElementById("flow-box")&&(window.document.getElementById("flow-box").style.width=n+"px",window.document.getElementById("flow-box").style.height=s+"px",e.draw(),t.defaultDisplayTask=r()(t.myToDo,t.subjectTodo),e.spinShow=!1)}).catch(function(e){var i="<p>"+e+"</p>";t.$Modal.error({title:"提示",content:i,closable:!0})})}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flow_container right_container"},[t.spinShow?i("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),i("div",{attrs:{id:"flow-box"}},[i("RadioGroup",{staticClass:"taskbtn",attrs:{size:"large"},on:{"on-change":t.radioGroupChange},model:{value:t.radioGroupLabel,callback:function(e){t.radioGroupLabel=e},expression:"radioGroupLabel"}},[i("Radio",{attrs:{label:"mytask"}},[i("span",[t._v("我的任务")])]),t._v(" "),i("Radio",{attrs:{label:"teamtask"}},[i("span",[t._v("团队任务")])]),t._v(" "),i("i",{staticClass:"vertical-divide"})],1),t._v(" "),i("RadioGroup",{staticClass:"taskbtn_1",attrs:{size:"large"},on:{"on-change":t.radioGroupChangeDoneOrTodo},model:{value:t.rodioGroupDoOrNot,callback:function(e){t.rodioGroupDoOrNot=e},expression:"rodioGroupDoOrNot"}},[i("Radio",{attrs:{label:"todo"}},[i("span",[t._v("未完成")])]),t._v(" "),i("Radio",{attrs:{label:"done"}},[i("span",[t._v("已完成")])]),t._v(" "),i("i",{staticClass:"vertical-divide"})],1),t._v(" "),i("RadioGroup",{staticClass:"taskbtn_2",attrs:{size:"large"}},[i("Radio",{attrs:{label:"no-overdue"}},[i("span",[t._v("未逾期")])]),t._v(" "),i("Radio",{attrs:{label:"overdue "}},[i("span",[t._v("逾期")])]),t._v(" "),i("i",{staticClass:"vertical-divide"})],1),t._v(" "),i("div",{staticClass:"app-dropdown-select"},[i("Poptip",{attrs:{title:"项目立项",width:"660",content:"content"},model:{value:t.projectPopTipVisible,callback:function(e){t.projectPopTipVisible=e},expression:"projectPopTipVisible"}},[i("span",{staticClass:"app-dropdown-select-item",on:{click:t.getProjectList}},[i("Tag",{attrs:{closable:"",color:"primary"},on:{"on-close":t.onHandleClearProjectTag}},[t._v(t._s(t.projectName?t.projectName:"项目立项"))]),t._v(" "),i("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),i("div",{staticClass:"api",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"app-search"},[i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入项目名称",icon:"ios-close-circle"},on:{"on-enter":t.onHandleFilterByProjectName,"on-click":t.getProjectList},model:{value:t.projectSearchValue,callback:function(e){t.projectSearchValue=e},expression:"projectSearchValue"}}),t._v(" "),i("Button",{attrs:{type:"primary",size:"small"},on:{click:t.onHandleFilterByProjectName}},[t._v("查询")])],1),t._v(" "),i("Table",{attrs:{columns:t.projectColumns,data:t.projectColumnData,loading:t.projectLoading,size:"small"},on:{"on-row-dblclick":t.handleDbSelectProject}}),t._v(" "),i("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{attrs:{total:t.projectPageTotal,current:t.projectCurrentPage,size:"small","page-size":t.projectPageSize,"show-total":"","show-elevator":""},on:{"on-change":t.projectPageChange}})],1)])],1)]),t._v(" "),i("Poptip",{attrs:{title:"销售订单",content:"content",width:"560"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("span",{staticClass:"app-dropdown-select-item",staticStyle:{"margin-left":"10px"},on:{click:t.getSaleOrderList}},[i("Tag",{attrs:{closable:"",color:"primary"},on:{"on-close":t.onHandleClearOrderTag}},[t._v(t._s(t.orderCode?t.orderCode:"销售订单"))]),t._v(" "),i("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),i("div",{staticClass:"api",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"app-search"},[i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入交易号",icon:"ios-close-circle"},on:{"on-enter":t.onHandleFilterByCode,"on-click":t.getSaleOrderList},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),i("Button",{attrs:{type:"primary",size:"small"},on:{click:t.onHandleFilterByCode}},[t._v("查询")])],1),t._v(" "),i("Table",{attrs:{columns:t.columns,data:t.columnData,loading:t.ordersLoading,size:"small"},on:{"on-row-dblclick":t.handleDblclick}}),t._v(" "),i("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{attrs:{total:t.pageTotal,current:t.currentPage,size:"small","page-size":t.ordersPageSize,"show-total":"","show-elevator":""},on:{"on-change":t.orderPageChange}})],1)])],1)])],1),t._v(" "),i("div",{staticClass:"divide"}),t._v(" "),i("div",{staticClass:"business_item",staticStyle:{width:"50px"}},t._l(t.dataItem,function(t,e){return i("div",{key:e,staticClass:"left-name"},[i("span")])})),t._v(" "),i("div",{staticClass:"svg_box",on:{click:t.outBlur}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[i("defs",[i("filter",{attrs:{id:"f1",x:"0",y:"0",width:"200%",height:"200%"}},[i("feOffset",{attrs:{result:"offOut",in:"SourceGraphic",dx:"0",dy:"0"}}),t._v(" "),i("feColorMatrix",{attrs:{result:"matrixOut",in:"offOut",type:"matrix",values:"0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0"}}),t._v(" "),i("feGaussianBlur",{attrs:{result:"blurOut",in:"matrixOut",stdDeviation:"5"}}),t._v(" "),i("feBlend",{attrs:{in:"SourceGraphic",in2:"blurOut",mode:"normal"}})],1)]),t._v(" "),i("defs",[i("marker",{attrs:{id:"arrow",markerUnits:"userSpaceOnUse",markerWidth:"15",markerHeight:"15",viewBox:"0 0 15 15",refX:"6",refY:"6",orient:"auto"}},[i("path",{staticStyle:{fill:"gray"},attrs:{d:"M2,0 L10,6 L2,12 L6,6 L2,0"}})])]),t._v(" "),i("defs",[i("marker",{attrs:{id:"arrow1",markerUnits:"userSpaceOnUse",markerWidth:"15",markerHeight:"15",viewBox:"0 0 15 15",refX:"6",refY:"6",orient:"auto"}},[i("path",{staticStyle:{fill:"#fff",opacity:"0"},attrs:{d:"M2,0 L10,6 L2,12 L6,6 L2,0"}})])]),t._v(" "),i("defs",[i("marker",{attrs:{id:"arrow_hight_color",markerUnits:"userSpaceOnUse",markerWidth:"15",markerHeight:"15",viewBox:"0 0 15 15",refX:"6",refY:"6",orient:"auto"}},[i("path",{staticStyle:{fill:"red"},attrs:{d:"M2,0 L10,6 L2,12 L6,6 L2,0"}})])]),t._v(" "),i("defs",[i("linearGradient",{attrs:{id:"orange_red",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}},[i("stop",{staticStyle:{"stop-color":"#ffdfd9","stop-opacity":"1"},attrs:{offset:"0%"}}),t._v(" "),i("stop",{staticStyle:{"stop-color":"#ff8069 stop-opacity:1"},attrs:{offset:"100%"}})],1)],1),t._v(" "),t._l(t.dataItem,function(e,n){return i("g",{key:n},t._l(e.child,function(e,s){return i("g",{key:s},[i("image",{attrs:{x:40+(t.baseLength+t.graphSpace)*e.sort,y:50+170*n,width:t.baseLength,height:t.baseLength,"xlink:href":e.icon,rx:"10"},on:{click:function(i){i.stopPropagation(),t.doAction(e)}}}),t._v(" "),i("a",{staticClass:"svg-title-style",on:{click:function(i){t.redirectTo(e)}}},[i("text",{attrs:{x:40+t.baseLength/2+(t.baseLength+t.graphSpace)*e.sort,y:65+t.baseLength+170*n}},[t._v("\n                "+t._s(e.value)+"\n              ")])]),t._v(" "),(e.listId?e.listId:e.id)in t.defaultDisplayTask?i("circle",{attrs:{cx:40+(t.baseLength+t.graphSpace)*e.sort,cy:50+170*n,r:"12","stroke-width":"1",fill:"list"===e.type?"red":"#2d8cf0"}}):t._e(),t._v(" "),i("text",{staticClass:"svg-text-common-style",staticStyle:{"font-size":"12px"},attrs:{x:40+(t.baseLength+t.graphSpace)*e.sort,y:45+170*n,fill:"#fff",listId:"subject"===e.type?e.id:e.listId,taskValue:e.value},on:{click:function(i){t.opentask(e)}}},[t._v("\n              "+t._s("subject"===e.type?t.defaultDisplayTask[e.id]:t.defaultDisplayTask[e.listId])+"\n            ")])])}))}),t._v(" "),t._l(t.pointList,function(e){return i("g",{key:e.id},[i("polyline",{class:void 0!==t.waterFlow[e.id]?"path":"",staticStyle:{fill:"none",stroke:"#fff",opacity:"0","stroke-width":"1"},attrs:{points:e.value,"marker-end":void 0!==t.waterFlow[e.id]?"url(#arrow_hight_color)":"url(#arrow1)"}})])}),t._v(" "),t._l(t.transTypePointList,function(t){return i("g",{key:t.id},[i("polyline",{staticClass:"transTypeRel_style",attrs:{points:t.value,"marker-end":"url(#arrow)"}})])})],2)])],1),t._v(" "),i("task-modal",{attrs:{modal:t.modal,listId:t.pageListId,taskValue:t.taskValue,type:t.type,orderCode:t.orderCode,projectName:t.projectName},on:{emitModal:t.emitModal}})],1)},staticRenderFns:[]};var v=i("VU/8")(C,y,!1,function(t){i("H+LD")},null,null);e.default=v.exports},m3N9:function(t,e,i){"use strict";var n=i("lFHJ"),s=function(t,e){this._client=t,this._resubscribe=e,this._isReconnecting=!1,this._connectionStateChangeHandler=this._handleConnectionStateChanges.bind(this),this._client.on("connectionStateChanged",this._connectionStateChangeHandler)};s.prototype.destroy=function(){this._client.removeListener("connectionStateChanged",this._connectionStateChangeHandler),this._connectionStateChangeHandler=null,this._client=null},s.prototype._handleConnectionStateChanges=function(){var t=this._client.getConnectionState();t===n.CONNECTION_STATE.RECONNECTING&&!1===this._isReconnecting&&(this._isReconnecting=!0),t===n.CONNECTION_STATE.OPEN&&!0===this._isReconnecting&&(this._isReconnecting=!1,this._resubscribe())},t.exports=s},mYhp:function(t,e){},pX2W:function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=i("lFHJ"),o=s.MESSAGE_PART_SEPERATOR;e.getMsg=function(t,e,i){if(i&&!(i instanceof Array))throw new Error("data must be an array");var r=[t,e];if(i)for(var a=0;a<i.length;a++)"object"===n(i[a])?r.push(JSON.stringify(i[a])):r.push(i[a]);return r.join(o)+s.MESSAGE_SEPERATOR},e.typed=function(t){var e=void 0===t?"undefined":n(t);if("string"===e)return s.TYPES.STRING+t;if(null===t)return s.TYPES.NULL;if("object"===e)return s.TYPES.OBJECT+JSON.stringify(t);if("number"===e)return s.TYPES.NUMBER+t.toString();if(!0===t)return s.TYPES.TRUE;if(!1===t)return s.TYPES.FALSE;if(void 0===t)return s.TYPES.UNDEFINED;throw new Error("Can't serialize type "+t)}},qOJP:function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},trS8:function(t,e,i){"use strict";var n=i("lFHJ"),s=function(t,e){this._options=e,this._client=t,this._register={},this._counter=1,t.on("connectionStateChanged",this._onConnectionStateChanged.bind(this))};i("8tIl")(s.prototype),s.prototype.add=function(t){var e=t.timeout||this._options.subscriptionTimeout;return this._client.getConnectionState()!==n.CONNECTION_STATE.OPEN||e<1?-1:(this.remove(t),t.ackId=this._counter++,t.event=t.event||n.EVENT.ACK_TIMEOUT,t.__timeout=setTimeout(this._onTimeout.bind(this,t),e),this._register[this._getUniqueName(t)]=t,t.ackId)},s.prototype.remove=function(t){if(t.ackId)for(var e in this._register)t.ackId===this._register[e].ackId&&this.clear({topic:this._register[e].topic,action:this._register[e].action,data:[this._register[e].name]});this._register[this._getUniqueName(t)]&&this.clear({topic:t.topic,action:t.action,data:[t.name]})},s.prototype.clear=function(t){var e=void 0;e=t.action===n.ACTIONS.ACK&&t.data.length>1?t.topic+t.data[0]+(t.data[1]?t.data[1]:""):t.topic+t.action+t.data[0],this._register[e]&&clearTimeout(this._register[e].__timeout),delete this._register[e]},s.prototype._onTimeout=function(t){if(delete this._register[this._getUniqueName(t)],t.callback)delete t.__timeout,delete t.timeout,t.callback(t);else{var e="No ACK message received in time"+(t.name?" for "+t.name:"");this._client._$onError(t.topic,t.event,e)}},s.prototype._getUniqueName=function(t){return t.topic+t.action+(t.name?t.name:"")},s.prototype._onConnectionStateChanged=function(t){if(t!==n.CONNECTION_STATE.OPEN)for(var e in this._register)clearTimeout(this._register[e].__timeout)},t.exports=s},vFuF:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Gu7T"),s=i.n(n),o=i("5LsM"),r=i("K4CD"),a=i("GIAq"),c={props:["appinfo","allTaskCount"],components:{MyPopTip:i("3ovf").a},data:function(){return{taskCount:0,type:this.appinfo.url.split("/")[0],columns:[{title:"交易号",key:"transCode",sortable:!0,width:160,align:"center",render:function(t,e){return t("a",{attrs:{href:"/Form/index.html?data="+e.row.transCode,target:"_blank"}},e.row.transCode)}},{title:"当前节点",key:"nodeName"},{title:"当前用户",key:"assigneeName",width:90},{title:"创建者",key:"creatorName",sortable:!0},{title:"任务创建时间",key:"crtTime",width:160,align:"center",sortable:!0,render:function(t,e){return t("span",function(t){var e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var s=e.getDate();s=s<10?"0"+s:s;var o=e.getHours();o=o<10?"0"+o:o;var r=e.getMinutes(),a=e.getSeconds();return i+"-"+n+"-"+s+" "+o+":"+(r=r<10?"0"+r:r)+":"+(a=a<10?"0"+a:a)}(e.row.crtTime))}}],columnData:[],loading:!0,pageTotal:0,pageSize:10,currentPage:1,pageListId:"",userInfo:{}}},created:function(){~this.appinfo.icon.indexOf("/dist/")&&(this.appinfo.icon="/dist/"+this.appinfo.icon);var t=this.appinfo.url.split("/")[1],e=this.allTaskCount.filter(function(e){return e.listId===t});e.length>0&&(this.taskCount=e[0].total)},watch:{allTaskCount:{handler:function(t,e){var i=this.appinfo.url.split("/")[1],n=t.filter(function(t){return t.listId===i});n.length>0&&(this.taskCount=n[0].total)},deep:!0}},methods:{redirectTo:function(t){var e=t.url,i=window.top.document.getElementById("frame1").getAttribute("nr");"_blank"===t.target?window.open(e,"_blank"):(i||(e=~e.indexOf("outlink")?e:~t.url.indexOf("app")?"appReport/"+e:"report/"+e),window.top.postMessage({type:"redirect",url:e},"*"))},showUserInfo:function(){var t=this,e=this.appinfo.adminId;Object(a.F)(e).then(function(e){e.dataCount&&(t.userInfo=e.tableContent[0])})},popperShow:function(t){var e=this;this.pageListId=this.appinfo.url.split("/")[1];var i={type:"myToDo",page:this.currentPage,listId:this.pageListId,limit:this.pageSize};Object(r.a)(i).then(function(t){e.pageTotal=t.total,t.tableContent.length>0&&(e.columnData=t.tableContent,e.loading=!1)})},changeCurrentPage:function(t){var e=this,i={type:"myToDo",page:t,listId:this.pageListId,limit:this.pageSize};this.loading=!0,Object(r.a)(i).then(function(t){t.tableContent.length>0&&(e.columnData=t.tableContent,e.loading=!1)})},goAppSetting:function(t){var e="appSetting/"+t.listId;window.top.postMessage({type:"redirect",url:e},"*")},handlerAddInstance:function(){var t=this,e="";Object(r.d)(this.appinfo.listId).then(function(i){i.length>0?(e=i.filter(function(t){return"submit"===t.viewType})[0].uniqueId,window.open("/Form/index.html?model=new&view="+e+"&list="+t.appinfo.listId)):t.$Message.info("表单模板为空")})}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card ivu-card ivu-card-bordered"},["subject"!==t.type?i("Poptip",{staticClass:"badge-custom",attrs:{width:"660",placement:"right-end",transfer:!0},on:{"on-popper-show":t.popperShow}},[i("Badge",{attrs:{count:t.taskCount}}),t._v(" "),i("div",{attrs:{slot:"title"},slot:"title"},[i("h3",[t._v(t._s(t.appinfo.text+" - 待办任务"))])]),t._v(" "),i("div",{staticClass:"api",attrs:{slot:"content"},slot:"content"},[i("Table",{attrs:{columns:t.columns,data:t.columnData,size:"small"}}),t._v(" "),i("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{attrs:{total:t.pageTotal,current:t.currentPage,size:"small","page-size":t.pageSize,"show-total":""},on:{"on-change":t.changeCurrentPage}})],1)])],1)],1):t._e(),t._v(" "),i("div",{staticClass:"badge-custom",on:{click:function(e){t.redirectTo(t.appinfo)}}},["subject"===t.type?i("Badge",{attrs:{count:t.taskCount,type:"primary"}}):t._e()],1),t._v(" "),i("img",{class:"img-radius-"+this.appinfo.type,attrs:{src:t.appinfo.icon}}),t._v(" "),i("div",{staticClass:"content"},[i("a",{staticClass:"content-detail",on:{click:function(e){e.stopPropagation(),t.goAppSetting(t.appinfo)}}},[t._v("详情")]),t._v(" "),i("h5",{on:{click:function(e){t.redirectTo(t.appinfo)}}},[t._v(t._s(t.appinfo.text))]),t._v(" "),i("span",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis",display:"inline-block","vertical-align":"middle"}},[t._v(t._s(t.appinfo.administrator?t.appinfo.transName+" ":t.appinfo.transName))]),t._v(" "),i("my-pop-tip",{attrs:{userInfo:t.userInfo,trigger:"click"}},[i("span",{staticClass:"content-admin",attrs:{slot:"userCard"},on:{click:t.showUserInfo},slot:"userCard"},[t._v(t._s(t.appinfo.administrator))])]),t._v(" "),i("Tooltip",{staticStyle:{"margin-right":"5px",float:"right"},attrs:{content:"创建实例",transfer:!0}},[i("i",{directives:[{name:"show",rawName:"v-show",value:"obj"===this.appinfo.type||"business"===this.appinfo.type,expression:"this.appinfo.type === 'obj'||this.appinfo.type === 'business'"}],staticClass:"iconfont content-add-instance",on:{click:t.handlerAddInstance}},[t._v("")])])],1)],1)},staticRenderFns:[]};var l=i("VU/8")(c,h,!1,function(t){i("mYhp")},"data-v-2826909f",null).exports,d={props:["menuItem","allTaskCount"],components:{CardItem:l},created:function(){}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("row",{staticClass:"menu-field-set",attrs:{gutter:16}},[i("label",[t._v(t._s(t.menuItem.text))]),t._v(" "),t._l(t.menuItem.children,function(e,n){return i("Col",{key:n,attrs:{span:"4"}},[i("card-item",{attrs:{appinfo:e,allTaskCount:t.allTaskCount}})],1)})],2)},staticRenderFns:[]};var p=i("VU/8")(d,u,!1,function(t){i("l+cs")},"data-v-24ac7fc4",null).exports,_=i("oAV5"),f={components:{CardList:p,CardItem:l,PulseGraph:i("ll1Z").default},data:function(){return{spinShow:!0,cutView:!0,menuList:[],favoriteMenu:{leaf:!1,text:"常用应用",children:[]},caseId:"apps",pulseGraphLlistr:[],allTaskCount:[],ds:o("wss://sunwingfood.roletask.com:6021/deepstream"),books$$:null,isAdmin:this.$currentUser.isAdmin,model:"apps"}},mounted:function(){var t=this;this.subscribeMessage(),Object(r.g)().then(function(e){e.tableContent.length>0&&(t.favoriteMenu.children=e.tableContent)}),Object(r.b)().then(function(e){t.allTaskCount=e.tableContent,Object(r.f)().then(function(e){t.urlMd5(e),t.favoriteMenu.children.length>0?t.menuList=[t.favoriteMenu].concat(s()(e)):t.menuList=e,t.spinShow=!1})}),Object(r.l)().then(function(e){t.pulseGraphLlistr=e.tableContent})},methods:{changeView:function(t){t&&("apps"===t?(this.cutView=!0,this.caseId=t):(this.cutView=!1,this.caseId=Number(t)))},goAppManage:function(){window.top.location.hash="#page/AppSetting"},subscribeMessage:function(){var t=this,e=this.$currentUser;if(e.name&&e.Id){var i=[e.name,e.userId].join("|"),n=Object(_.c)();this.ds.login({token:n,username:i},function(t){console.log("connect success!")}),this.ds.event.subscribe("taskChange/"+n,function(e){t.allTaskCount=e.tableContent})}},urlMd5:function(t){!function t(e){for(var i=e.length,n=void 0;i--;){if((n=e[i]).url&&"_iframe"==n.target){var s=n.url,o="outlink/"+window.top.MD5(s);n.url=o}n.children&&t(n.children)}}(t)}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap"},[t.spinShow?i("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),i("div",{staticClass:"main-header"},[i("div",{staticClass:"main-header-nav"},[i("Row",[i("Col",{attrs:{span:"24"}},[i("ButtonGroup",{staticClass:"fr"},[i("Icon",{attrs:{type:"apps"===t.model?"ios-apps":"md-share",size:"16"}}),t._v(" "),i("Select",{staticClass:"input-select",staticStyle:{width:"230px","font-size":"16px"},attrs:{placeholder:"请选择业务单元"},on:{"on-change":t.changeView},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[i("Option",{attrs:{value:"apps"}},[i("Icon",{attrs:{type:"ios-apps",size:"16"}}),t._v(" 所有应用看板\n            ")],1),t._v(" "),t._l(t.pulseGraphLlistr,function(e){return i("Option",{key:e.id,attrs:{value:e.id}},[i("Icon",{attrs:{type:"md-share",size:"16"}}),t._v(" "+t._s(e.name)+"\n            ")],1)})],2)],1)],1)],1)],1)]),t._v(" "),t.cutView&&"apps"===t.caseId?i("div",t._l(t.menuList,function(e,n){return i("section",{key:n,staticClass:"bg-gray-lighter"},[i("row",{staticClass:"menu-group"},[i("row",[i("h3",{staticClass:"menu-group-title"},[t._v(t._s(e.text))])]),t._v(" "),i("row",{attrs:{gutter:16}},t._l(e.children,function(e,n){return e.leaf?i("Col",{key:n,attrs:{span:"4"}},[e.leaf?i("card-item",{attrs:{appinfo:e,allTaskCount:t.allTaskCount}}):t._e()],1):i("card-list",{attrs:{menuItem:e,index:n,allTaskCount:t.allTaskCount}})}))],1)],1)})):t._e(),t._v(" "),t._l(t.pulseGraphLlistr,function(e,n){return t.cutView||e.id!==t.caseId?t._e():i("div",{key:n},[i("pulse-graph",{attrs:{caseId:e.id}})],1)})],2)},staticRenderFns:[]};var E=i("VU/8")(f,T,!1,function(t){i("kqZM")},null,null);e.default=E.exports},xaZU:function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?o(r(t),function(r){var a=encodeURIComponent(n(r))+i;return s(t[r])?o(t[r],function(t){return a+encodeURIComponent(n(t))}).join(e):a+encodeURIComponent(n(t[r]))}).join(e):a?encodeURIComponent(n(a))+i+encodeURIComponent(n(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},xxnB:function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=i("8tIl"),r=i("lFHJ"),a=i("m3N9");function c(t,e,i){if("function"==typeof t&&void 0===e?(e=t,t=i):t=[t],void 0!==e&&"function"!=typeof e)throw new Error("invalid argument callback");return{userId:t,callback:e}}t.exports=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=e,this._connection=i,this._client=n,this._queryEmitter=new o,this._subscribeEmitter=new o,this._ackTimeoutRegistry=n._$getAckTimeoutRegistry(),this._resubscribeNotifier=new a(this._client,this._resubscribe.bind(this)),this._counter=1,this._flush=this._flush.bind(this),this._flushTimeout=null,this._pendingSubscribes={},this._pendingUnsubscribes={}}return s(t,[{key:"getAll",value:function(t,e){if("function"==typeof t)this._connection.sendMsg(r.TOPIC.PRESENCE,r.ACTIONS.QUERY,[r.ACTIONS.QUERY]),this._queryEmitter.once(r.ACTIONS.QUERY,t);else{var i=this._counter++;this._connection.sendMsg(r.TOPIC.PRESENCE,r.ACTIONS.QUERY,[i,t]),this._queryEmitter.once(i,e)}}},{key:"subscribe",value:function(t,e){var i=c(t,e,r.ACTIONS.SUBSCRIBE);this._subscribeEmitter.hasListeners(i.userId)||(i.userId===r.ACTIONS.SUBSCRIBE?(this._sendGlobalSubscription(r.ACTIONS.SUBSCRIBE),this._subscribeEmitter.on(r.ACTIONS.SUBSCRIBE,i.callback)):(delete this._pendingUnsubscribes[i.userId],this._pendingSubscribes[i.userId]=!0,this._flushTimeout||(this._flushTimeout=setTimeout(this._flush,0)),this._subscribeEmitter.on(i.userId,i.callback)))}},{key:"unsubscribe",value:function(t,e){var i=c(t,e,r.ACTIONS.UNSUBSCRIBE);i.userId===r.ACTIONS.UNSUBSCRIBE?this._subscribeEmitter.off(r.ACTIONS.SUBSCRIBE,i.callback):this._subscribeEmitter.off(i.userId,i.callback),this._subscribeEmitter.hasListeners(i.userId)||(i.userId===r.ACTIONS.UNSUBSCRIBE?this._sendGlobalSubscription(r.ACTIONS.UNSUBSCRIBE):(delete this._pendingSubscribes[i.userId],this._pendingUnsubscribes[i.userId]=!0,this._flushTimeout||(this._flushTimeout=setTimeout(this._flush,0))))}},{key:"_$handle",value:function(t){if(t.action===r.ACTIONS.ERROR&&t.data[0]===r.EVENT.MESSAGE_DENIED)this._ackTimeoutRegistry.remove(r.TOPIC.PRESENCE,t.data[1]),t.processedError=!0,this._client._$onError(r.TOPIC.PRESENCE,r.EVENT.MESSAGE_DENIED,t.data[1]);else if(t.action===r.ACTIONS.ACK)this._ackTimeoutRegistry.clear(t);else if(t.action===r.ACTIONS.PRESENCE_JOIN)this._subscribeEmitter.emit(r.ACTIONS.SUBSCRIBE,t.data[0],!0),this._subscribeEmitter.emit(t.data[0],!0,t.data[0]);else if(t.action===r.ACTIONS.PRESENCE_LEAVE)this._subscribeEmitter.emit(r.ACTIONS.SUBSCRIBE,t.data[0],!1),this._subscribeEmitter.emit(t.data[0],!1,t.data[0]);else if(t.action===r.ACTIONS.QUERY){try{var e=JSON.parse(t.data[1]);if("object"===(void 0===e?"undefined":n(e)))return void this._queryEmitter.emit(t.data[0],e)}catch(t){}this._queryEmitter.emit(r.ACTIONS.QUERY,t.data)}else this._client._$onError(r.TOPIC.PRESENCE,r.EVENT.UNSOLICITED_MESSAGE,t.action)}},{key:"_resubscribe",value:function(){var t=Object.keys(this._subscribeEmitter._callbacks||{});t.indexOf(r.ACTIONS.SUBSCRIBE)>-1&&(t.splice(t.indexOf(r.ACTIONS.SUBSCRIBE),1),this._sendGlobalSubscription(r.ACTIONS.SUBSCRIBE)),t.length>0&&this._sendSubscriptionBulk(r.ACTIONS.SUBSCRIBE,t)}},{key:"_flush",value:function(){var t=Object.keys(this._pendingSubscribes);t.length>0&&(this._sendSubscriptionBulk(r.ACTIONS.SUBSCRIBE,t),this._pendingSubscribes={});var e=Object.keys(this._pendingUnsubscribes);e.length>0&&(this._sendSubscriptionBulk(r.ACTIONS.UNSUBSCRIBE,e),this._pendingUnsubscribes={}),this._flushTimeout=null}},{key:"_sendSubscriptionBulk",value:function(t,e){var i=this._counter++;this._ackTimeoutRegistry.add({topic:r.TOPIC.PRESENCE,action:t,name:i}),this._connection.sendMsg(r.TOPIC.PRESENCE,t,[i,e])}},{key:"_sendGlobalSubscription",value:function(t){this._ackTimeoutRegistry.add({topic:r.TOPIC.PRESENCE,action:t,name:t}),this._connection.sendMsg(r.TOPIC.PRESENCE,t,[t])}}]),t}()},ybXf:function(t,e,i){"use strict";var n=i("8tIl"),s=i("QRzD"),o=i("lFHJ"),r=function(t,e,i){if("string"!=typeof e||0===e.length)throw new Error("invalid argument name");this._recordHandler=t,this._record=this._recordHandler.getRecord(e,i),this._record._applyUpdate=this._applyUpdate.bind(this),this._record.on("delete",this.emit.bind(this,"delete")),this._record.on("discard",this._onDiscard.bind(this)),this._record.on("ready",this._onReady.bind(this)),this.isDestroyed=this._record.isDestroyed,this.isReady=this._record.isReady,this.name=e,this._queuedMethods=[],this._beforeStructure=null,this._hasAddListener=null,this._hasRemoveListener=null,this._hasMoveListener=null,this.delete=this._record.delete.bind(this._record),this.discard=this._record.discard.bind(this._record),this.whenReady=this._record.whenReady.bind(this)};n(r.prototype),r.prototype.getEntries=function(){var t=this._record.get();return t instanceof Array?t:[]},r.prototype.isEmpty=function(){return 0===this.getEntries().length},r.prototype.setEntries=function(t){var e="entries must be an array of record names",i=void 0;if(!(t instanceof Array))throw new Error(e);for(i=0;i<t.length;i++)if("string"!=typeof t[i])throw new Error(e);!1===this._record.isReady?this._queuedMethods.push(this.setEntries.bind(this,t)):(this._beforeChange(),this._record.set(t),this._afterChange())},r.prototype.removeEntry=function(t,e){if(!1!==this._record.isReady){var i=this._record.get(),n=this._hasIndex(e),s=[],o=void 0;for(o=0;o<i.length;o++)(i[o]!==t||n&&e!==o)&&s.push(i[o]);this._beforeChange(),this._record.set(s),this._afterChange()}else this._queuedMethods.push(this.removeEntry.bind(this,t,e))},r.prototype.addEntry=function(t,e){if("string"!=typeof t)throw new Error("Entry must be a recordName");if(!1!==this._record.isReady){var i=this._hasIndex(e),n=this.getEntries();i?n.splice(e,0,t):n.push(t),this._beforeChange(),this._record.set(n),this._afterChange()}else this._queuedMethods.push(this.addEntry.bind(this,t,e))},r.prototype.subscribe=function(){var t=s.prototype._normalizeArguments(arguments);if(t.path)throw new Error("path is not supported for List.subscribe");var e=function(t){t(this.getEntries())}.bind(this,t.callback);t.callback.wrappedCallback=e,t.callback=e,this._record.subscribe(t)},r.prototype.unsubscribe=function(){var t=s.prototype._normalizeArguments(arguments);if(t.path)throw new Error("path is not supported for List.unsubscribe");t.callback=t.callback.wrappedCallback,this._record.unsubscribe(t)},r.prototype._onReady=function(){this.isReady=!0;for(var t=0;t<this._queuedMethods.length;t++)this._queuedMethods[t]();this._queuedMethods=[],this.emit("ready")},r.prototype._onDiscard=function(){this.isDestroyed=!0,this.emit("discard")},r.prototype._applyUpdate=function(t){if(t.action===o.ACTIONS.PATCH)throw new Error("PATCH is not supported for Lists");"["!==t.data[2].charAt(0)&&(t.data[2]="[]"),this._beforeChange(),s.prototype._applyUpdate.call(this._record,t),this._afterChange()},r.prototype._hasIndex=function(t){var e=!1,i=this.getEntries();if(void 0!==t){if(isNaN(t))throw new Error("Index must be a number");if(t!==i.length&&(t>=i.length||t<0))throw new Error("Index must be within current entries");e=!0}return e},r.prototype._beforeChange=function(){this._hasAddListener=this.listeners("entry-added").length>0,this._hasRemoveListener=this.listeners("entry-removed").length>0,this._hasMoveListener=this.listeners("entry-moved").length>0,this._hasAddListener||this._hasRemoveListener||this._hasMoveListener?this._beforeStructure=this._getStructure():this._beforeStructure=null},r.prototype._afterChange=function(){if(null!==this._beforeStructure){var t=this._getStructure(),e=this._beforeStructure,i=void 0,n=void 0;if(this._hasRemoveListener)for(i in e)for(n=0;n<e[i].length;n++)void 0!==t[i]&&void 0!==t[i][n]||this.emit("entry-removed",i,e[i][n]);if(this._hasAddListener||this._hasMoveListener)for(i in t)if(void 0===e[i])for(n=0;n<t[i].length;n++)this.emit("entry-added",i,t[i][n]);else for(n=0;n<t[i].length;n++)e[i][n]!==t[i][n]&&(void 0===e[i][n]?this.emit("entry-added",i,t[i][n]):this.emit("entry-moved",i,t[i][n]))}},r.prototype._getStructure=function(){var t={},e=void 0,i=this._record.get();for(e=0;e<i.length;e++)void 0===t[i[e]]?t[i[e]]=[e]:t[i[e]].push(e);return t},t.exports=r},yxEg:function(t,e,i){"use strict";(function(t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=i("lFHJ"),o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;e.isNode=void 0!==t&&"[object process]"===t.toString(),e.nextTick=function(i){e.isNode?t.nextTick(i):setTimeout(i,0)},e.trim=function(t){return t.trim?t.trim():t.replace(o,"")},e.deepEquals=function(t,e){return t===e||"object"===(void 0===t?"undefined":n(t))&&"object"===(void 0===e?"undefined":n(e))&&JSON.stringify(t)===JSON.stringify(e)},e.deepCopy=function(t){return"object"===(void 0===t?"undefined":n(t))?JSON.parse(JSON.stringify(t)):t},e.shallowCopy=function(t){if(Array.isArray(t))return t.slice(0);if("object"===(void 0===t?"undefined":n(t))){for(var e=Object.create(null),i=Object.keys(t),s=0;s<i.length;s++)e[i[s]]=t[i[s]];return e}return t},e.setTimeout=function(t,e){return null!==e?setTimeout(t,e):-1},e.setInterval=function(t,e){return null!==e?setInterval(t,e):-1},e.requestIdleCallback=!e.isNode&&window.requestIdleCallback&&window.requestIdleCallback.bind(window)||function(t){var e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)},e.cancelIdleCallback=!e.isNode&&window.cancelIdleCallback&&window.cancelIdleCallback.bind(window)||function(t){clearTimeout(t)};var r=/^wss:|^ws:|^\/\//,a=/^http:|^https:/,c=i("UZ5h");e.parseUrl=function(t,e){var i=t;if(a.test(i))throw new Error("Only ws and wss are supported");r.test(i)?0===i.indexOf("//")&&(i="ws:"+i):i="ws://"+i;var n=c.parse(i);if(!n.host)throw new Error("invalid url, missing host");return n.protocol=n.protocol?n.protocol:"ws:",n.pathname=n.pathname?n.pathname:e,c.format(n)},e.isConnected=function(t){return t.getConnectionState()===s.CONNECTION_STATE.OPEN}}).call(e,i("W2nU"))}});
//# sourceMappingURL=6.393779c9cee2073f58c6.js.map