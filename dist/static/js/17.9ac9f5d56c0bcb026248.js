webpackJsonp([17],{"5PLg":function(t,e){},K6bz:function(t,e){},PuhB:function(t,e){},gAfU:function(t,e){t.exports={render:function(){var t=this;t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"graph-box"},[e("div",{staticClass:"graph",attrs:{id:"circularGraph"}})])}]}},"lSc+":function(t,e){t.exports={render:function(){var i=this,t=i.$createElement,o=i._self._c||t;return o("div",{staticClass:"flow_container right_container"},[i.spinShow?o("Spin",{attrs:{size:"large",fix:""}}):i._e(),i._v(" "),o("div",{attrs:{id:"flow-box"}},[o("RadioGroup",{staticClass:"taskbtn",attrs:{size:"large"},on:{"on-change":i.radioGroupChange},model:{value:i.radioGroupLabel,callback:function(t){i.radioGroupLabel=t},expression:"radioGroupLabel"}},[o("Radio",{attrs:{label:"mytask"}},[o("span",[i._v("我的任务")])]),i._v(" "),o("Radio",{attrs:{label:"teamtask"}},[o("span",[i._v("团队任务")])]),i._v(" "),o("i",{staticClass:"vertical-divide"})],1),i._v(" "),o("RadioGroup",{staticClass:"taskbtn_1",attrs:{size:"large"},on:{"on-change":i.radioGroupChangeDoneOrTodo},model:{value:i.rodioGroupDoOrNot,callback:function(t){i.rodioGroupDoOrNot=t},expression:"rodioGroupDoOrNot"}},[o("Radio",{attrs:{label:"todo"}},[o("span",[i._v("未完成")])]),i._v(" "),o("Radio",{attrs:{label:"done"}},[o("span",[i._v("已完成")])]),i._v(" "),o("i",{staticClass:"vertical-divide"}),i._v(" "),o("Icon",{staticStyle:{cursor:"pointer"},attrs:{type:"md-refresh",size:"20"},on:{click:function(t){i.refreshData()}}})],1),i._v(" "),o("div",{staticClass:"app-dropdown-select"},[o("Poptip",{attrs:{title:"项目立项",width:"660",content:"content"},model:{value:i.projectPopTipVisible,callback:function(t){i.projectPopTipVisible=t},expression:"projectPopTipVisible"}},[o("span",{staticClass:"app-dropdown-select-item",on:{click:i.getProjectList}},[o("Tag",{attrs:{closable:"",color:"primary"},on:{"on-close":i.onHandleClearProjectTag}},[i._v(i._s(i.projectName?i.projectName:"项目立项"))]),i._v(" "),o("Icon",{attrs:{type:"ios-arrow-down"}})],1),i._v(" "),o("div",{staticClass:"api",attrs:{slot:"content"},slot:"content"},[o("div",{staticClass:"app-search"},[o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入项目名称",icon:"ios-close-circle"},on:{"on-enter":i.onHandleFilterByProjectName,"on-click":i.getProjectList},model:{value:i.projectSearchValue,callback:function(t){i.projectSearchValue=t},expression:"projectSearchValue"}}),i._v(" "),o("Button",{attrs:{type:"primary",size:"small"},on:{click:i.onHandleFilterByProjectName}},[i._v("查询")])],1),i._v(" "),o("Table",{attrs:{columns:i.projectColumns,data:i.projectColumnData,loading:i.projectLoading,size:"small"},on:{"on-row-dblclick":i.handleDbSelectProject}}),i._v(" "),o("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[o("div",{staticStyle:{float:"right"}},[o("Page",{attrs:{total:i.projectPageTotal,current:i.projectCurrentPage,size:"small","page-size":i.projectPageSize,"show-total":"","show-elevator":""},on:{"on-change":i.projectPageChange}})],1)])],1)]),i._v(" "),o("Poptip",{attrs:{title:"销售订单",content:"content",width:"560"},model:{value:i.visible,callback:function(t){i.visible=t},expression:"visible"}},[o("span",{staticClass:"app-dropdown-select-item",staticStyle:{"margin-left":"10px"},on:{click:i.getSaleOrderList}},[o("Tag",{attrs:{closable:"",color:"primary"},on:{"on-close":i.onHandleClearOrderTag}},[i._v(i._s(i.orderCode?i.orderCode:"销售订单"))]),i._v(" "),o("Icon",{attrs:{type:"ios-arrow-down"}})],1),i._v(" "),o("div",{staticClass:"api",attrs:{slot:"content"},slot:"content"},[o("div",{staticClass:"app-search"},[o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入交易号",icon:"ios-close-circle"},on:{"on-enter":i.onHandleFilterByCode,"on-click":i.getSaleOrderList},model:{value:i.searchValue,callback:function(t){i.searchValue=t},expression:"searchValue"}}),i._v(" "),o("Button",{attrs:{type:"primary",size:"small"},on:{click:i.onHandleFilterByCode}},[i._v("查询")])],1),i._v(" "),o("Table",{attrs:{columns:i.columns,data:i.columnData,loading:i.ordersLoading,size:"small"},on:{"on-row-dblclick":i.handleDblclick}}),i._v(" "),o("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[o("div",{staticStyle:{float:"right"}},[o("Page",{attrs:{total:i.pageTotal,current:i.currentPage,size:"small","page-size":i.ordersPageSize,"show-total":"","show-elevator":""},on:{"on-change":i.orderPageChange}})],1)])],1)])],1),i._v(" "),o("div",{staticClass:"divide"}),i._v(" "),o("div",{staticClass:"business_item",staticStyle:{width:"50px"}},i._l(i.dataItem,function(t,e){return o("div",{key:e,staticClass:"left-name"},[o("span")])}),0),i._v(" "),o("div",{staticClass:"svg_box",on:{click:i.outBlur}},[o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[o("defs",[o("filter",{attrs:{id:"f1",x:"0",y:"0",width:"200%",height:"200%"}},[o("feOffset",{attrs:{result:"offOut",in:"SourceGraphic",dx:"0",dy:"0"}}),i._v(" "),o("feColorMatrix",{attrs:{result:"matrixOut",in:"offOut",type:"matrix",values:"0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0"}}),i._v(" "),o("feGaussianBlur",{attrs:{result:"blurOut",in:"matrixOut",stdDeviation:"5"}}),i._v(" "),o("feBlend",{attrs:{in:"SourceGraphic",in2:"blurOut",mode:"normal"}})],1)]),i._v(" "),o("defs",[o("marker",{attrs:{id:"arrow",markerUnits:"userSpaceOnUse",markerWidth:"15",markerHeight:"15",viewBox:"0 0 15 15",refX:"6",refY:"6",orient:"auto"}},[o("path",{staticStyle:{fill:"gray"},attrs:{d:"M2,0 L10,6 L2,12 L6,6 L2,0"}})])]),i._v(" "),o("defs",[o("marker",{attrs:{id:"arrow1",markerUnits:"userSpaceOnUse",markerWidth:"15",markerHeight:"15",viewBox:"0 0 15 15",refX:"6",refY:"6",orient:"auto"}},[o("path",{staticStyle:{fill:"#fff",opacity:"0"},attrs:{d:"M2,0 L10,6 L2,12 L6,6 L2,0"}})])]),i._v(" "),o("defs",[o("marker",{attrs:{id:"arrow_hight_color",markerUnits:"userSpaceOnUse",markerWidth:"15",markerHeight:"15",viewBox:"0 0 15 15",refX:"6",refY:"6",orient:"auto"}},[o("path",{staticStyle:{fill:"red"},attrs:{d:"M2,0 L10,6 L2,12 L6,6 L2,0"}})])]),i._v(" "),o("defs",[o("linearGradient",{attrs:{id:"orange_red",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}},[o("stop",{staticStyle:{"stop-color":"#ffdfd9","stop-opacity":"1"},attrs:{offset:"0%"}}),i._v(" "),o("stop",{staticStyle:{"stop-color":"#ff8069 stop-opacity:1"},attrs:{offset:"100%"}})],1)],1),i._v(" "),i._l(i.dataItem,function(t,a){return o("g",{key:a},i._l(t.child,function(e,t){return o("g",{key:t},[o("image",{staticClass:"svg-image-style",attrs:{x:40+(i.baseLength+i.graphSpace)*e.sort,y:50+170*a,width:i.baseLength,height:i.baseLength,"xlink:href":e.icon,rx:"10"},on:{mouseenter:function(t){i.doAction(e)}}}),i._v(" "),o("a",{staticClass:"svg-title-style",on:{click:function(t){i.redirectTo(e)}}},[o("text",{attrs:{x:40+i.baseLength/2+(i.baseLength+i.graphSpace)*e.sort,y:65+i.baseLength+170*a}},[i._v("\n                "+i._s(e.value)+"\n              ")])]),i._v(" "),(e.listId?e.listId:e.id)in i.defaultDisplayTask?o("circle",{attrs:{cx:40+(i.baseLength+i.graphSpace)*e.sort,cy:50+170*a,r:"12","stroke-width":"1",fill:"list"===e.type?"red":"#2d8cf0"}}):i._e(),i._v(" "),o("text",{staticClass:"svg-text-common-style",staticStyle:{"font-size":"12px"},attrs:{x:40+(i.baseLength+i.graphSpace)*e.sort,y:45+170*a,fill:"#fff",listId:"subject"===e.type?e.id:e.listId,taskValue:e.value},on:{click:function(t){i.opentask(e)}}},[i._v("\n              "+i._s("subject"===e.type?i.defaultDisplayTask[e.id]:i.defaultDisplayTask[e.listId])+"\n            ")])])}),0)}),i._v(" "),i._l(i.pointList,function(t){return o("g",{key:t.id},[o("polyline",{class:void 0!==i.waterFlow[t.id]?"path":"",staticStyle:{fill:"none",stroke:"transparent","stroke-width":"1"},attrs:{points:t.value,"marker-end":void 0!==i.waterFlow[t.id]?"url(#arrow_hight_color)":"url(#arrow1)"}})])}),i._v(" "),i._l(i.transTypePointList,function(t){return o("g",{key:t.id},[o("polyline",{staticClass:"transTypeRel_style",attrs:{points:t.value,"marker-end":"url(#arrow)"}})])})],2)])],1),i._v(" "),o("Modal",{attrs:{scrollable:"",width:"80%","class-name":"subReportModel-modal",styles:{top:"20px",pandding:"0px"},title:i.subReportModelTitle},on:{"on-ok":i.refreshData},model:{value:i.subReportModel,callback:function(t){i.subReportModel=t},expression:"subReportModel"}},[o("iframe",{staticStyle:{height:"450px",border:"none"},attrs:{width:"100%",src:i.subReportUrl}})]),i._v(" "),o("task-modal",{attrs:{modal:i.modal,listId:i.pageListId,taskValue:i.taskValue,type:i.type,orderCode:i.orderCode,projectName:i.projectName},on:{emitModal:i.emitModal}})],1)},staticRenderFns:[]}},ll1Z:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),r=a.n(i),o=a("woOf"),s=a.n(o),n=a("ifoU"),l=a.n(n),c=a("5LsM"),d=a("K4CD"),p=a("oAV5"),u={name:"TaskModal",data:function(){return{columns:[{title:"交易号",key:"transCode",sortable:"custom",width:160,render:function(t,e){return t("a",{attrs:{href:"/Form/index.html?data="+e.row.transCode,target:"_blank"}},e.row.transCode)}},{title:"当前节点",key:"nodeName"},{title:"当前用户",key:"assigneeName",width:90},{title:"创建者",key:"creatorName",width:90},{title:"创建时间",key:"crtTime",sortable:"custom",width:160,render:function(t,e){return t("span",function(t){var e=new Date(t),a=e.getFullYear(),i=e.getMonth()+1;i=i<10?"0"+i:i;var o=e.getDate();o=o<10?"0"+o:o;var r=e.getHours();r=r<10?"0"+r:r;var s=e.getMinutes(),n=e.getSeconds();return a+"-"+i+"-"+o+" "+r+":"+(s=s<10?"0"+s:s)+":"+(n=n<10?"0"+n:n)}(e.row.crtTime))}}],columnData:[],loading:!0,pageTotal:0,pageSize:6,currentPage:1,modelState:!1,filterData:{transCode:"",creatorName:"",crtTime:[],assigneeName:"",nodeName:""},sort:"",expand:!1,expandValue:"展开",expandIcon:"&#xe617;"}},props:{listId:{type:String},modal:{type:Boolean},taskValue:{type:String},type:{type:String},orderCode:{type:String},projectName:{type:String}},watch:{listId:{handler:function(t,e){this.getTaskList()}},modal:function(t,e){this.modelState=t}},methods:{changeCurrentPage:function(t){this.currentPage=t,this.getAppTaskCount(this.sort,t)},handleSort:function(t,e,a){var i={};i[t.key]=t.order,this.sort=i,this.getAppTaskCount(i,this.currentPage)},modalVisibleChange:function(t){t||(this.$emit("emitModal",{modal:!1,listId:""}),this.filterData.transCode="",this.filterData.creatorName="",this.filterData.crtTime="",this.filterData.assigneeName="",this.filterData.nodeName="",this.expand=!1,this.sort="",this.currentPage=1,this.expandValue="展开")},clearInputValue:function(){this.filterData.transCode="",this.filterData.creatorName="",this.filterData.crtTime="",this.filterData.assigneeName="",this.filterData.nodeName="",this.filterTaskBtn()},getTaskList:function(){var e=this,t={type:this.type,page:this.currentPage,listId:this.listId,limit:this.pageSize,filter:{}};this.orderCode&&(t.filter.orderCode=this.orderCode),this.projectName&&(t.filter.projectName=this.projectName),t.filter=r()(t.filter),this.loading=!0,Object(d.a)(t).then(function(t){e.pageTotal=t.total,e.columnData=t.tableContent,e.loading=!1})},filterTaskBtn:function(t){this.currentPage=1,this.getAppTaskCount("",1)},getAppTaskCount:function(t,e){var a=this,i="";0<this.filterData.crtTime.length&&this.filterData.crtTime[0]&&(i=Object(p.b)(this.filterData.crtTime[0],"yyyy-MM-dd")+"/"+Object(p.b)(this.filterData.crtTime[1],"yyyy-MM-dd")),this.orderCode&&(this.filterData.orderCode=this.orderCode),this.projectName&&(this.filterData.projectName=this.projectName),this.filterData.crtTime=i;var o={type:this.type,page:e,listId:this.listId,limit:this.pageSize,filter:r()(this.filterData)};t&&(o.sort=r()(t)),this.loading=!0,Object(d.a)(o).then(function(t){a.pageTotal=t.total,a.columnData=t.tableContent,a.loading=!1})},expandCrtTime:function(){this.expand?(this.expand=!1,this.expandValue="展开",this.expandIcon="&#xe617;"):(this.expand=!0,this.expandValue="收起",this.expandIcon="&#xe618;")}}},h=a("ypaA"),m=a.n(h);var f=function(t){a("5PLg")},g=a("VU/8")(u,m.a,!1,f,"data-v-93c16d82",null).exports,v=a("Gu7T"),y=a.n(v),b=a("XLwt"),k={props:["caseId"],data:function(){return{nodes:[],links:[],groupLength:0,dataItem:[],title:""}},methods:{drawECharts:function(){var t=b.init(document.getElementById("circularGraph"));for(var e in t.on("click",this.redirectTo),this.nodes)delete this.nodes[e].symbol;var a=this.dataItem.map(function(t,e){return{name:t.name}});this.nodes.forEach(function(t){t.category=t.index,t.draggable=!0,t.symbol="image:///resources/images/icon/"+t.icon+".png"});var i={tooltip:{},clickable:!0,legend:[{data:a.map(function(t){return t.name})}],animationDuration:3e3,animationDurationUpdate:3e3,animationEasingUpdate:"quinticInOut",series:[{name:this.title,type:"graph",width:"400px",height:"400px",top:"80px",layout:"circular",circular:{rotateLabel:!0},data:this.nodes,links:this.links,categories:a,draggable:!0,edgeSymbol:["none","arrow"],label:{normal:{position:["50%","50%"],formatter:"{b}"}},lineStyle:{normal:{color:"source",curveness:.1}},force:{repulsion:12}}]};t.setOption(i)},redirectTo:function(t){if(void 0!==t.seriesIndex&&"click"==t.type){if("list"!==t.data.type)return;if(t.data.url){var e="appReport/"+t.data.url;window.top.postMessage({type:"redirect",url:e},"*")}}}},created:function(){var a=this,e=this;Object(d.n)(this.caseId).then(function(t){var i=[];a.groupLength=t.dataItem.length,a.dataItem=t.dataItem,a.title=t.title,t&&t.dataItem.map(function(t,e){for(var a=0;a<t.child.length;a++)t.child[a].index=e,t.child[a].icon=e+"_"+a;i=[].concat(y()(i),y()(t.child))}),console.log(i),i.map(function(e){a.nodes.push({name:e.value,id:e.id,index:e.index,icon:e.icon,value:10,url:e.url,type:e.type,symbol:"rect",label:{show:!0},itemStyle:{borderColor:"#ddd",shadowBlur:10,shadowOffsetX:2,shadowOffsetY:2}}),e.endNode.map(function(t){a.links.push({source:e.id,target:t.id})})}),e.drawECharts()})},mounted:function(){}},T=a("gAfU"),C=a.n(T);var D=function(t){a("K6bz")},_=a("VU/8")(k,C.a,!1,D,"data-v-351d1a7e",null).exports,j=a("bTqw"),w={data:function(){return{subReportUrl:"",subReportId:"",subReportModelTitle:"",subReportModel:!1,spinShow:!0,baseLength:45,graphSpace:65,circleFillColor:"#646b86",circleBorderColor:"#e0a527",squareFillColor:"#00ae9d",squareBorderColor:"#77b745",isActive:!1,arr:[],title:"",dataItem:[],pointList:[],transTypePointList:[],waterFlow:{},flowType:!0,businessItemWidth:"50px",ds:c("wss://192.168.3.160:6021/deepstream"),books$$:null,radioGroupLabel:"mytask",rodioGroupDoOrNot:"todo",doneortodo:"todo",taskType:"mytask",defaultDisplayTask:{},teamDone:{},teamTodo:{},myDone:{},myToDo:{},subjectTodo:{},modal:!1,taskValue:"",pageListId:"",type:"myToDo",subjectList:j.c,visible:!1,ordersLoading:!1,searchValue:"",orderCode:"",columnData:[],columns:[{title:"交易号",key:"transCode",align:"center"},{title:"创建者",key:"creatorName",align:"center",width:80},{title:"创建时间",key:"crtTime",align:"center"},{title:"生效时间",key:"effectiveTime",align:"center"}],pageTotal:0,currentPage:1,ordersPageSize:6,projectPopTipVisible:!1,projectLoading:!1,projectSearchValue:"",projectName:"",projectColumnData:[],projectColumns:[{title:"项目名称",key:"projectName",align:"center"},{title:"创建者",key:"creatorName",align:"center",width:80},{title:"创建时间",key:"crtTime",align:"center"},{title:"生效时间",key:"effectiveTime",align:"center"}],projectPageTotal:0,projectCurrentPage:1,projectPageSize:6}},components:{TaskModal:g,CircularGraph:_},props:["caseId"],methods:{draw:function(){for(var s=this.baseLength,n=this.graphSpace,t=this.dataItem,l={},c=void 0,d=void 0,p=void 0,e=0;e<t.length;e++){var a=170+170*e;if(t[e].point="0,"+a+" 2100,"+a,0<t[e].child.length)for(var i=0;i<t[e].child.length;i++){this.dataItem[e].child[i].pointX=40+(s+n)*t[e].child[i].sort,this.dataItem[e].child[i].pointY=50+s/2+170*e,l[this.dataItem[e].child[i].id]=this.dataItem[e].child[i].pointX+","+this.dataItem[e].child[i].pointY;var o=t[e].child[i];0<o.teamDone&&(this.teamDone[o.listId]=99<o.teamDone?"99+":o.teamDone),0<o.teamTodo&&(this.teamTodo[o.listId]=99<o.teamTodo?"99+":o.teamTodo),0<o.myDone&&(this.myDone[o.listId]=99<o.myDone?"99+":o.myDone),0<o.myToDo&&(this.myToDo[o.listId]=99<o.myToDo?"99+":o.myToDo),0<o.subjectTodo&&(this.subjectTodo[o.id]=99<o.subjectTodo?"99+":o.subjectTodo)}}var u=this;t.forEach(function(r,t){r.child.forEach(function(o,t){o.relevantNode&&0<o.relevantNode.length&&o.relevantNode.forEach(function(t,e){t.id in l&&(c=l[t.id].split(","),d=Number(c[0]),p=Number(c[1]),t.groupIndex<r.index?u.transTypePointList.push({id:o.id+"_"+t.id,value:o.pointX+s/2+","+(o.pointY-s/2)+" "+(d+s/2)+","+(p+s/2+20)}):t.groupIndex>r.index?u.transTypePointList.push({id:o.id+"_"+t.id,value:o.pointX+s/2+","+(o.pointY+s/2+20)+" "+(d+s/2)+","+(p-s/2-4.3)}):o.pointX<d-40-s-n?u.transTypePointList.push({id:o.id+"_"+t.id,value:o.pointX+s/2+","+(o.pointY-s/2)+" "+(o.pointX+s/2)+","+(o.pointY-s/2-20)+" "+(d+s/2)+","+(p-s/2-20)+" "+(d+s/2)+","+(p-s/2-4.3)}):u.transTypePointList.push({id:o.id+"_"+t.id,value:o.pointX+s+","+o.pointY+" "+(d-4.3)+","+p}))}),o.endNode&&0<o.endNode.length&&o.endNode.forEach(function(t,e){if(t.id in l)if(c=l[t.id].split(","),d=Number(c[0]),p=Number(c[1]),t.groupIndex<r.index){var a=(d-o.pointX)/(s+n)*8.5;u.pointList.push({id:o.id+"_"+t.id,value:o.pointX+s/2+","+(o.pointY-s/2)+" "+(d+s/2-a)+","+(p+s/2+20)})}else if(t.groupIndex>r.index){var i=(d-o.pointX)/(s+n)*8.5;u.pointList.push({id:o.id+"_"+t.id,value:o.pointX+s/2+","+(o.pointY+s/2+20)+" "+(d+s/2-i)+","+(p-s/2-4.3)})}})})})},calcSvgWidth:function(t){var e=0;if(0<t.length){e=t[0].child.length;for(var a=1;a<t.length;a++)e<t[a].child.length&&(e=t[a].child.length)}var i=e*(30+this.baseLength+this.graphSpace)+50;return document.body.clientWidth>i?document.body.clientWidth:i},calcSvgHeight:function(t){var e=0<t.length?171*t.length+79:215;return document.body.clientHeight>e?document.body.clientHeight:e},doAction:function(t,e){if(this.waterFlow={},t.endNode&&0<t.endNode.length)for(var a=0;a<t.endNode.length;a++)this.waterFlow[t.id+"_"+t.endNode[a].id]=t.endNode[a];if(t.lastNode&&0<t.lastNode.length)for(var i=0;i<t.lastNode.length;i++)this.waterFlow[t.lastNode[i].id+"_"+t.id]=t.lastNode[i]},outBlur:function(t){this.waterFlow={}},redirectTo:function(t,e){var a=t.url,i=window.top.document.getElementById("frame1").getAttribute("nr");"_blank"===t.target?window.open(t.url,"_blank"):(i||(a=~a.indexOf("outlink")?t.url:~a.indexOf("app")?"appReport/"+a:"report/"+a),window.top.postMessage({type:"redirect",url:a},"*"))},subscribeMessage:function(){var t=Object(p.c)();this.ds.event.subscribe("taskChange/"+t,function(t){})},radioGroupChange:function(t){var e=this;this.taskType=t;var a=new l.a([["teamtask_done",function(){return"teamDone"}],["teamtask_todo",function(){return"teamTodo"}],["mytask_done",function(){return"myDone"}],["mytask_todo",function(){return"myToDo"}]]);if(this.type=a.get(this.taskType+"_"+this.doneortodo)(),this.orderCode||this.projectName){var i=this.type;Object(d.h)(i,this.projectName,this.orderCode).then(function(t){e.defaultDisplayTask={},e.defaultDisplayTask=t})}else{switch(this.type){case"teamDone":this.defaultDisplayTask=this.teamDone;break;case"teamTodo":this.defaultDisplayTask=this.teamTodo;break;case"myDone":this.defaultDisplayTask=this.myDone;break;case"myToDo":this.defaultDisplayTask=this.myToDo}this.defaultDisplayTask=s()(this.defaultDisplayTask,this.subjectTodo)}},radioGroupChangeDoneOrTodo:function(t){var e=this;this.doneortodo=t;var a=new l.a([["teamtask_done",function(){return"teamDone"}],["teamtask_todo",function(){return"teamTodo"}],["mytask_done",function(){return"myDone"}],["mytask_todo",function(){return"myToDo"}]]);if(this.type=a.get(this.taskType+"_"+this.doneortodo)(),this.orderCode||this.projectName){var i=this.type;Object(d.h)(i,this.projectName,this.orderCode).then(function(t){e.defaultDisplayTask={},e.defaultDisplayTask=t})}else{switch(this.type){case"teamDone":this.defaultDisplayTask=this.teamDone;break;case"teamTodo":this.defaultDisplayTask=this.teamTodo;break;case"myDone":this.defaultDisplayTask=this.myDone;break;case"myToDo":this.defaultDisplayTask=this.myToDo}this.defaultDisplayTask=s()(this.defaultDisplayTask,this.subjectTodo)}},opentask:function(t){"subject"===t.type?(this.subReportId=t.url.split("/")[1],this.subReportUrl="/Site/index.html?window=dialog#subject/"+this.subReportId,this.subReportModelTitle=t.value,this.subReportModel=!0):(this.modal=!0,this.pageListId=event.target.getAttribute("listId"),this.taskValue=event.target.getAttribute("taskValue"))},emitModal:function(t,e){this.pageListId=t.listId,this.modal=!1},changeCurrentPage:function(t){var e=this,a={type:this.type,page:t,listId:this.pageListId,limit:this.pageSize};this.loading=!0,Object(d.a)(a).then(function(t){0<t.tableContent.length&&(e.columnData=t.tableContent,e.loading=!1)})},onHandleClearOrderTag:function(){var e=this;this.orderCode="",this.projectName?Object(d.h)(this.type,this.projectName).then(function(t){e.defaultDisplayTask={},e.defaultDisplayTask=t}):this.defaultDisplayTask=s()(this[this.type],this.subjectTodo)},onHandleFilterByCode:function(){var e=this,t=[];this.searchValue&&(t=r()([{operator:"like",value:this.searchValue,property:"transCode"}])),this.currentPage=1,this.ordersLoading=!0,Object(d.i)(this.currentPage,t).then(function(t){e.pageTotal=t.dataCount,e.columnData=t.tableContent,e.ordersLoading=!1})},getSaleOrderList:function(){var e=this;this.searchValue="",this.currentPage=1,this.ordersLoading=!0,Object(d.i)(this.currentPage).then(function(t){e.pageTotal=t.dataCount,e.columnData=t.tableContent,e.ordersLoading=!1})},orderPageChange:function(t){var e=this,a=[];this.searchValue&&(a=r()([{operator:"like",value:this.searchValue,property:"transCode"}])),this.currentPage=t,this.ordersLoading=!0,Object(d.i)(this.currentPage,a).then(function(t){e.pageTotal=t.dataCount,e.columnData=t.tableContent,e.ordersLoading=!1})},handleDblclick:function(t,e){var a=this,i=this.type;this.orderCode=t.transCode,Object(d.h)(i,this.projectName,this.orderCode).then(function(t){a.defaultDisplayTask={},a.visible=!1,a.defaultDisplayTask=t})},onHandleClearProjectTag:function(){var e=this;this.projectName="",this.orderCode?Object(d.h)(this.type,"",this.orderCode).then(function(t){e.defaultDisplayTask={},e.defaultDisplayTask=t}):this.defaultDisplayTask=s()(this[this.type],this.subjectTodo)},onHandleFilterByProjectName:function(){var e=this,t=[];this.projectSearchValue&&(t=r()([{operator:"like",value:this.projectSearchValue,property:"projectName"}])),this.projectCurrentPage=1,this.projectLoading=!0,Object(d.l)(this.currentPage,t).then(function(t){e.projectPageTotal=t.dataCount,e.projectColumnData=t.tableContent,e.projectLoading=!1})},getProjectList:function(){var e=this;this.projectSearchValue="",this.projectCurrentPage=1,this.projectLoading=!0,Object(d.l)(this.projectCurrentPage).then(function(t){e.projectPageTotal=t.dataCount,e.projectColumnData=t.tableContent,e.projectLoading=!1})},projectPageChange:function(t){var e=this,a=[];this.projectSearchValue&&(a=r()([{operator:"like",value:this.projectSearchValue,property:"projectName"}])),this.projectCurrentPage=t,this.projectLoading=!0,Object(d.l)(this.projectCurrentPage,a).then(function(t){e.projectPageTotal=t.dataCount,e.projectColumnData=t.tableContent,e.projectLoading=!1})},handleDbSelectProject:function(t,e){var a=this,i=this.type;this.projectName=t.projectName,Object(d.h)(i,this.projectName,this.orderCode).then(function(t){a.defaultDisplayTask={},a.projectPopTipVisible=!1,a.defaultDisplayTask=t})},refreshData:function(){var i=this,o=this;Object(d.n)(this.caseId).then(function(t){t.dataItem.map(function(t){t.child&&t.child.map(function(t){var e,a;"subject"===t.type&&t.value&&(t.icon="resources/images/icon/"+(e=t.value,a="",i.subjectList.map(function(t){t.name===e&&(a=t.icon)}),a))})}),o.title=t.title,o.dataItem=t.dataItem;var e=1400<o.calcSvgWidth(t.dataItem)?o.calcSvgWidth(t.dataItem):1400,a=o.calcSvgHeight(t.dataItem);window.document.getElementById("flow-box")&&(window.document.getElementById("flow-box").style.width=e+"px",window.document.getElementById("flow-box").style.height=a+"px",o.draw(),i.defaultDisplayTask=s()(i.myToDo,i.subjectTodo),o.spinShow=!1)}).catch(function(t){var e="<p>"+t+"</p>";i.$Modal.error({title:"提示",content:e,closable:!0})})}},created:function(){var t=this.$currentUser,e=[t.nickname,t.userId].join("|"),a=Object(p.c)();this.ds.login({token:a,username:e},function(t){console.log("connect success!")}),this.subscribeMessage()},mounted:function(){this.refreshData()}},x=a("lSc+"),S=a.n(x);var I=function(t){a("PuhB")},N=a("VU/8")(w,S.a,!1,I,null,null);e.default=N.exports},ypaA:function(t,e){t.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{title:"任务列表 - "+e.taskValue,width:"660",closable:""},on:{"on-visible-change":e.modalVisibleChange},model:{value:e.modelState,callback:function(t){e.modelState=t},expression:"modelState"}},[a("div",{staticStyle:{position:"relative"}},[a("div",{staticClass:"input-filter-box"},[a("label",{staticClass:"input-filter-lebal"},[e._v("交易号:")]),e._v(" "),a("Input",{staticStyle:{width:"127px","margin-left":"12px"},attrs:{placeholder:"请输入交易号"},model:{value:e.filterData.transCode,callback:function(t){e.$set(e.filterData,"transCode",t)},expression:"filterData.transCode"}})],1),e._v(" "),a("div",{staticClass:"input-filter-box"},[a("label",{staticClass:"input-filter-lebal"},[e._v("创建者:")]),e._v(" "),a("Input",{staticStyle:{width:"127px","margin-left":"12px"},attrs:{placeholder:"请输入创建者"},model:{value:e.filterData.creatorName,callback:function(t){e.$set(e.filterData,"creatorName",t)},expression:"filterData.creatorName"}})],1),e._v(" "),a("div",{staticClass:"input-filter-box"},[a("label",{staticClass:"input-filter-lebal"},[e._v("当前用户:")]),e._v(" "),a("Input",{staticStyle:{width:"127px","margin-left":"12px"},attrs:{placeholder:"请输入审批者"},model:{value:e.filterData.assigneeName,callback:function(t){e.$set(e.filterData,"assigneeName",t)},expression:"filterData.assigneeName"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"expand"}],staticClass:"input-crttime"},[a("div",{staticClass:"input-filter-box"},[a("label",{staticClass:"input-filter-lebal"},[e._v("当前节点:")]),e._v(" "),a("Input",{staticStyle:{width:"127px","margin-left":"12px"},attrs:{placeholder:"请输入当前节点"},model:{value:e.filterData.nodeName,callback:function(t){e.$set(e.filterData,"nodeName",t)},expression:"filterData.nodeName"}})],1),e._v(" "),a("div",{staticClass:"input-filter-box"},[a("label",{staticClass:"input-filter-lebal"},[e._v("创建时间:")]),e._v(" "),a("DatePicker",{staticStyle:{width:"170px"},attrs:{format:"yyyy/MM/dd",type:"daterange",placement:"bottom-end",placeholder:"请输入创建时间"},model:{value:e.filterData.crtTime,callback:function(t){e.$set(e.filterData,"crtTime",t)},expression:"filterData.crtTime"}})],1)]),e._v(" "),a("div",{staticClass:"action-btn"},[a("Button",{attrs:{type:"primary",size:"small"},on:{click:e.filterTaskBtn}},[e._v("查询")]),e._v(" "),a("Button",{attrs:{size:"small"},on:{click:e.clearInputValue}},[e._v("重置")]),e._v(" "),a("span",{staticClass:"expand",on:{click:e.expandCrtTime}},[e._v("\n        "+e._s(e.expandValue)+"\n        "),a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expandIcon)}})])],1)]),e._v(" "),a("Table",{attrs:{loading:e.loading,data:e.columnData,columns:e.columns,size:"small",stripe:""},on:{"on-sort-change":e.handleSort}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.pageTotal,current:e.currentPage,"page-size":e.pageSize,size:"small","show-total":"","show-elevator":""},on:{"on-change":e.changeCurrentPage}})],1)]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)},staticRenderFns:[]}}});