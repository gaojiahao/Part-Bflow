webpackJsonp([7],{"+Ubb":function(t,e){},"2quZ":function(t,e){},"4+ME":function(t,e){},"5cif":function(t,e){},"7Y6Q":function(t,e){},DAYN:function(t,e,n){"use strict";var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}!function(){function e(t){function e(t){t.parentElement.removeChild(t)}function n(t,e,n){var i=0===n?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,i)}function s(t,e){var n=this;this.$nextTick(function(){return n.$emit(t.toLowerCase(),e)})}var o=["Start","Add","Remove","Update","End"],r=["Choose","Sort","Filter","Clone"],l=["Move"].concat(o,r).map(function(t){return"on"+t}),c=null;return{name:"draggable",props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(t){var e=this.$slots.default;if(e&&1===e.length){var n=e[0];n.componentOptions&&"transition-group"===n.componentOptions.tag&&(this.transitionMode=!0)}var i=e,s=this.$slots.footer;s&&(i=e?[].concat(a(e),a(s)):[].concat(a(s)));var o=null,r=function(t,e){o=function(t,e,n){return void 0==n?t:((t=null==t?{}:t)[e]=n,t)}(o,t,e)};if(r("attrs",this.$attrs),this.componentData){var l=this.componentData,c=l.on,u=l.props;r("on",c),r("props",u)}return t(this.element,o,i)},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var n={};o.forEach(function(t){n["on"+t]=function(t){var e=this;return function(n){null!==e.realList&&e["onDrag"+t](n),s.call(e,t,n)}}.call(e,t)}),r.forEach(function(t){n["on"+t]=s.bind(e,t)});var a=i({},this.options,n,{onMove:function(t,n){return e.onDragMove(t,n)}});!("draggable"in a)&&(a.draggable=">*"),this._sortable=new t(this.rootContainer,a),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){for(var e in t)-1==l.indexOf(e)&&this._sortable.option(e,t[e])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=function(t,e,n){if(!t)return[];var i=t.map(function(t){return t.elm}),s=[].concat(a(e)).map(function(t){return i.indexOf(t)});return n?s.filter(function(t){return-1!==t}):s}(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode)})},getUnderlyingVm:function(t){var e=function(t,e){return t.map(function(t){return t.elm}).indexOf(e)}(this.getChildrenNodes()||[],t);return-1===e?null:{index:e,element:this.realList[e]}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&"transition-group"===e.$options._componentTag?e.$parent:e},emitChanges:function(t){var e=this;this.$nextTick(function(){e.$emit("change",t)})},alterList:function(t){if(this.list)t(this.list);else{var e=[].concat(a(this.value));t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,t)};this.alterList(e)},updatePosition:function(t,e){var n=function(n){return n.splice(e,0,n.splice(t,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(t){var e=t.to,n=t.related,a=this.getUnderlyingPotencialDraggableComponent(e);if(!a)return{component:a};var s=a.realList,o={list:s,component:a};if(e!==n&&s&&a.getUnderlyingVm){var r=a.getUnderlyingVm(n);if(r)return i(r,o)}return o},getVmIndex:function(t){var e=this.visibleIndexes,n=e.length;return t>n-1?n:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[t].data=null;var e=this.getComponent();e.children=[],e.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),c=t.item},onDragAdd:function(t){var n=t.item._underlying_vm_;if(void 0!==n){e(t.item);var i=this.getVmIndex(t.newIndex);this.spliceList(i,0,n),this.computeIndexes();var a={element:n,newIndex:i};this.emitChanges({added:a})}},onDragRemove:function(t){if(n(this.rootContainer,t.item,t.oldIndex),this.isCloning)e(t.clone);else{var i=this.context.index;this.spliceList(i,1);var a={element:this.context.element,oldIndex:i};this.resetTransitionData(i),this.emitChanges({removed:a})}},onDragUpdate:function(t){e(t.item),n(t.from,t.item,t.oldIndex);var i=this.context.index,a=this.getVmIndex(t.newIndex);this.updatePosition(i,a);var s={element:this.context.element,oldIndex:i,newIndex:a};this.emitChanges({moved:s})},computeFutureIndex:function(t,e){if(!t.element)return 0;var n=[].concat(a(e.to.children)).filter(function(t){return"none"!==t.style.display}),i=n.indexOf(e.related),s=t.component.getVmIndex(i);return-1!=n.indexOf(c)||!e.willInsertAfter?s:s+1},onDragMove:function(t,e){var n=this.move;if(!n||!this.realList)return!0;var a=this.getRelatedContextFromMoveEvent(t),s=this.context,o=this.computeFutureIndex(a,t);return i(s,{futureIndex:o}),i(t,{relatedContext:a,draggedContext:s}),n(t,e)},onDragEnd:function(t){this.computeIndexes(),c=null}}}}Array.from||(Array.from=function(t){return[].slice.call(t)});var s=n("Lokx");t.exports=e(s)}()},ECJQ:function(t,e){},EXx6:function(t,e){},JrnK:function(t,e){},Lokx:function(t,e,n){var i,a;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
!function(s){"use strict";void 0===(a="function"==typeof(i=s)?i.call(e,n,e,t):i)||(t.exports=a)}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var t,e,n,i,a,s,o,r,l,c,u,d,p,h,m,f,g,v,y,b,_,D={},w=/\s+/g,C=/left|right|inline/,S="Sortable"+(new Date).getTime(),k=window,A=k.document,x=k.parseInt,T=k.setTimeout,I=k.jQuery||k.Zepto,M=k.Polymer,E=!1,O="draggable"in A.createElement("div"),P=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&((_=A.createElement("x")).style.cssText="pointer-events:auto","auto"===_.style.pointerEvents),F=!1,R=Math.abs,j=Math.min,V=[],$=[],U=it(function(t,e,n){if(n&&e.scroll){var i,a,s,o,u,d,p=n[S],h=e.scrollSensitivity,m=e.scrollSpeed,f=t.clientX,g=t.clientY,v=window.innerWidth,y=window.innerHeight;if(l!==n&&(r=e.scroll,l=n,c=e.scrollFn,!0===r)){r=n;do{if(r.offsetWidth<r.scrollWidth||r.offsetHeight<r.scrollHeight)break}while(r=r.parentNode)}r&&(i=r,a=r.getBoundingClientRect(),s=(R(a.right-f)<=h)-(R(a.left-f)<=h),o=(R(a.bottom-g)<=h)-(R(a.top-g)<=h)),s||o||(o=(y-g<=h)-(g<=h),((s=(v-f<=h)-(f<=h))||o)&&(i=k)),D.vx===s&&D.vy===o&&D.el===i||(D.el=i,D.vx=s,D.vy=o,clearInterval(D.pid),i&&(D.pid=setInterval(function(){if(d=o?o*m:0,u=s?s*m:0,"function"==typeof c)return c.call(p,u,d,t);i===k?k.scrollTo(k.pageXOffset+u,k.pageYOffset+d):(i.scrollTop+=d,i.scrollLeft+=u)},24)))}},30),L=function(t){function e(t,e){return void 0!==t&&!0!==t||(t=n.name),"function"==typeof t?t:function(n,i){var a=i.options.group.name;return e?t:t&&(t.join?t.indexOf(a)>-1:a==t)}}var n={},i=t.group;i&&"object"==typeof i||(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){E={capture:!1,passive:!1}}}))}catch(t){}function N(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=at({},e),t[S]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==N.supportPointer};for(var i in n)!(i in e)&&(e[i]=n[i]);for(var a in L(e),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!e.forceFallback&&O,Y(t,"mousedown",this._onTapStart),Y(t,"touchstart",this._onTapStart),e.supportPointer&&Y(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Y(t,"dragover",this),Y(t,"dragenter",this)),$.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function z(e,n){"clone"!==e.lastPullMode&&(n=!0),i&&i.state!==n&&(X(i,"display",n?"none":""),n||i.state&&(e.options.group.revertClone?(a.insertBefore(i,s),e._animate(t,i)):a.insertBefore(i,t)),i.state=n)}function B(t,e,n){if(t){n=n||A;do{if(">*"===e&&t.parentNode===n||nt(t,e))return t}while(t=q(t))}return null}function q(t){var e=t.host;return e&&e.nodeType?e:t.parentNode}function Y(t,e,n){t.addEventListener(e,n,E)}function W(t,e,n){t.removeEventListener(e,n,E)}function H(t,e,n){if(t)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(w," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(w," ")}}function X(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return A.defaultView&&A.defaultView.getComputedStyle?n=A.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function G(t,e,n){if(t){var i=t.getElementsByTagName(e),a=0,s=i.length;if(n)for(;a<s;a++)n(i[a],a);return i}return[]}function J(t,e,n,a,s,o,r,l){t=t||e[S];var c=A.createEvent("Event"),u=t.options,d="on"+n.charAt(0).toUpperCase()+n.substr(1);c.initEvent(n,!0,!0),c.to=s||e,c.from=o||e,c.item=a||e,c.clone=i,c.oldIndex=r,c.newIndex=l,e.dispatchEvent(c),u[d]&&u[d].call(t,c)}function Q(t,e,n,i,a,s,o,r){var l,c,u=t[S],d=u.options.onMove;return(l=A.createEvent("Event")).initEvent("move",!0,!0),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=a||e,l.relatedRect=s||e.getBoundingClientRect(),l.willInsertAfter=r,t.dispatchEvent(l),d&&(c=d.call(u,l,o)),c}function Z(t){t.draggable=!1}function K(){F=!1}function tt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function et(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"===t.nodeName.toUpperCase()||">*"!==e&&!nt(t,e)||n++;return n}function nt(t,e){if(t){var n=(e=e.split(".")).shift().toUpperCase(),i=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");return!(""!==n&&t.nodeName.toUpperCase()!=n||e.length&&((" "+t.className+" ").match(i)||[]).length!=e.length)}return!1}function it(t,e){var n,i;return function(){void 0===n&&(n=arguments,i=this,T(function(){1===n.length?t.call(i,n[0]):t.apply(i,n),n=void 0},e))}}function at(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function st(t){return M&&M.dom?M.dom(t).cloneNode(!0):I?I(t).clone(!0)[0]:t.cloneNode(!0)}function ot(t){return T(t,0)}function rt(t){return clearTimeout(t)}return N.prototype={constructor:N,_onTapStart:function(e){var n,i=this,a=this.el,s=this.options,r=s.preventOnFilter,l=e.type,c=e.touches&&e.touches[0],u=(c||e).target,d=e.target.shadowRoot&&e.path&&e.path[0]||u,p=s.filter;if(function(t){var e=t.getElementsByTagName("input"),n=e.length;for(;n--;){var i=e[n];i.checked&&V.push(i)}}(a),!t&&!(/mousedown|pointerdown/.test(l)&&0!==e.button||s.disabled)&&!d.isContentEditable&&(u=B(u,s.draggable,a))&&o!==u){if(n=et(u,s.draggable),"function"==typeof p){if(p.call(this,e,u,this))return J(i,d,"filter",u,a,a,n),void(r&&e.preventDefault())}else if(p&&(p=p.split(",").some(function(t){if(t=B(d,t.trim(),a))return J(i,t,"filter",u,a,a,n),!0})))return void(r&&e.preventDefault());s.handle&&!B(d,s.handle,a)||this._prepareDragStart(e,c,u,n)}},_prepareDragStart:function(n,i,r,l){var c,u=this,d=u.el,p=u.options,m=d.ownerDocument;r&&!t&&r.parentNode===d&&(v=n,a=d,e=(t=r).parentNode,s=t.nextSibling,o=r,f=p.group,h=l,this._lastX=(i||n).clientX,this._lastY=(i||n).clientY,t.style["will-change"]="all",c=function(){u._disableDelayedDrag(),t.draggable=u.nativeDraggable,H(t,p.chosenClass,!0),u._triggerDragStart(n,i),J(u,a,"choose",t,a,a,h)},p.ignore.split(",").forEach(function(e){G(t,e.trim(),Z)}),Y(m,"mouseup",u._onDrop),Y(m,"touchend",u._onDrop),Y(m,"touchcancel",u._onDrop),Y(m,"selectstart",u),p.supportPointer&&Y(m,"pointercancel",u._onDrop),p.delay?(Y(m,"mouseup",u._disableDelayedDrag),Y(m,"touchend",u._disableDelayedDrag),Y(m,"touchcancel",u._disableDelayedDrag),Y(m,"mousemove",u._disableDelayedDrag),Y(m,"touchmove",u._disableDelayedDrag),p.supportPointer&&Y(m,"pointermove",u._disableDelayedDrag),u._dragStartTimer=T(c,p.delay)):c())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),W(t,"mouseup",this._disableDelayedDrag),W(t,"touchend",this._disableDelayedDrag),W(t,"touchcancel",this._disableDelayedDrag),W(t,"mousemove",this._disableDelayedDrag),W(t,"touchmove",this._disableDelayedDrag),W(t,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,n){(n=n||("touch"==e.pointerType?e:null))?(v={target:t,clientX:n.clientX,clientY:n.clientY},this._onDragStart(v,"touch")):this.nativeDraggable?(Y(t,"dragend",this),Y(a,"dragstart",this._onDragStart)):this._onDragStart(v,!0);try{A.selection?ot(function(){A.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){if(a&&t){var e=this.options;H(t,e.ghostClass,!0),H(t,e.dragClass,!1),N.active=this,J(this,a,"start",t,a,a,h)}else this._nulling()},_emulateDragOver:function(){if(y){if(this._lastX===y.clientX&&this._lastY===y.clientY)return;this._lastX=y.clientX,this._lastY=y.clientY,P||X(n,"display","none");var t=A.elementFromPoint(y.clientX,y.clientY),e=t,i=$.length;if(t&&t.shadowRoot&&(e=t=t.shadowRoot.elementFromPoint(y.clientX,y.clientY)),e)do{if(e[S]){for(;i--;)$[i]({clientX:y.clientX,clientY:y.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);P||X(n,"display","")}},_onTouchMove:function(t){if(v){var e=this.options,i=e.fallbackTolerance,a=e.fallbackOffset,s=t.touches?t.touches[0]:t,o=s.clientX-v.clientX+a.x,r=s.clientY-v.clientY+a.y,l=t.touches?"translate3d("+o+"px,"+r+"px,0)":"translate("+o+"px,"+r+"px)";if(!N.active){if(i&&j(R(s.clientX-this._lastX),R(s.clientY-this._lastY))<i)return;this._dragStarted()}this._appendGhost(),b=!0,y=s,X(n,"webkitTransform",l),X(n,"mozTransform",l),X(n,"msTransform",l),X(n,"transform",l),t.preventDefault()}},_appendGhost:function(){if(!n){var e,i=t.getBoundingClientRect(),s=X(t),o=this.options;H(n=t.cloneNode(!0),o.ghostClass,!1),H(n,o.fallbackClass,!0),H(n,o.dragClass,!0),X(n,"top",i.top-x(s.marginTop,10)),X(n,"left",i.left-x(s.marginLeft,10)),X(n,"width",i.width),X(n,"height",i.height),X(n,"opacity","0.8"),X(n,"position","fixed"),X(n,"zIndex","100000"),X(n,"pointerEvents","none"),o.fallbackOnBody&&A.body.appendChild(n)||a.appendChild(n),e=n.getBoundingClientRect(),X(n,"width",2*i.width-e.width),X(n,"height",2*i.height-e.height)}},_onDragStart:function(e,n){var s=this,o=e.dataTransfer,r=s.options;s._offUpEvents(),f.checkPull(s,s,t,e)&&((i=st(t)).draggable=!1,i.style["will-change"]="",X(i,"display","none"),H(i,s.options.chosenClass,!1),s._cloneId=ot(function(){a.insertBefore(i,t),J(s,a,"clone",t)})),H(t,r.dragClass,!0),n?("touch"===n?(Y(A,"touchmove",s._onTouchMove),Y(A,"touchend",s._onDrop),Y(A,"touchcancel",s._onDrop),r.supportPointer&&(Y(A,"pointermove",s._onTouchMove),Y(A,"pointerup",s._onDrop))):(Y(A,"mousemove",s._onTouchMove),Y(A,"mouseup",s._onDrop)),s._loopId=setInterval(s._emulateDragOver,50)):(o&&(o.effectAllowed="move",r.setData&&r.setData.call(s,o,t)),Y(A,"drop",s),s._dragStartId=ot(s._dragStarted))},_onDragOver:function(o){var r,l,c,h,m=this.el,v=this.options,y=v.group,_=N.active,D=f===y,w=!1,k=v.sort;if(void 0!==o.preventDefault&&(o.preventDefault(),!v.dragoverBubble&&o.stopPropagation()),!t.animated&&(b=!0,_&&!v.disabled&&(D?k||(h=!a.contains(t)):g===this||(_.lastPullMode=f.checkPull(this,_,t,o))&&y.checkPut(this,_,t,o))&&(void 0===o.rootEl||o.rootEl===this.el))){if(U(o,v,this.el),F)return;if(r=B(o.target,v.draggable,m),l=t.getBoundingClientRect(),g!==this&&(g=this,w=!0),h)return z(_,!0),e=a,void(i||s?a.insertBefore(t,i||s):k||a.appendChild(t));if(0===m.children.length||m.children[0]===n||m===o.target&&function(t,e){var n=t.lastElementChild.getBoundingClientRect();return e.clientY-(n.top+n.height)>5||e.clientX-(n.left+n.width)>5}(m,o)){if(0!==m.children.length&&m.children[0]!==n&&m===o.target&&(r=m.lastElementChild),r){if(r.animated)return;c=r.getBoundingClientRect()}z(_,D),!1!==Q(a,m,t,l,r,c,o)&&(t.contains(m)||(m.appendChild(t),e=m),this._animate(l,t),r&&this._animate(c,r))}else if(r&&!r.animated&&r!==t&&void 0!==r.parentNode[S]){u!==r&&(u=r,d=X(r),p=X(r.parentNode));var A=(c=r.getBoundingClientRect()).right-c.left,x=c.bottom-c.top,I=C.test(d.cssFloat+d.display)||"flex"==p.display&&0===p["flex-direction"].indexOf("row"),M=r.offsetWidth>t.offsetWidth,E=r.offsetHeight>t.offsetHeight,O=(I?(o.clientX-c.left)/A:(o.clientY-c.top)/x)>.5,P=r.nextElementSibling,R=!1;if(I){var j=t.offsetTop,V=r.offsetTop;R=j===V?r.previousElementSibling===t&&!M||O&&M:r.previousElementSibling===t||t.previousElementSibling===r?(o.clientY-c.top)/x>.5:V>j}else w||(R=P!==t&&!E||O&&E);var $=Q(a,m,t,l,r,c,o,R);!1!==$&&(1!==$&&-1!==$||(R=1===$),F=!0,T(K,30),z(_,D),t.contains(m)||(R&&!P?m.appendChild(t):r.parentNode.insertBefore(t,R?P:r)),e=t.parentNode,this._animate(l,t),this._animate(c,r))}}},_animate:function(t,e){var n=this.options.animation;if(n){var i=e.getBoundingClientRect();1===t.nodeType&&(t=t.getBoundingClientRect()),X(e,"transition","none"),X(e,"transform","translate3d("+(t.left-i.left)+"px,"+(t.top-i.top)+"px,0)"),e.offsetWidth,X(e,"transition","all "+n+"ms"),X(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=T(function(){X(e,"transition",""),X(e,"transform",""),e.animated=!1},n)}},_offUpEvents:function(){var t=this.el.ownerDocument;W(A,"touchmove",this._onTouchMove),W(A,"pointermove",this._onTouchMove),W(t,"mouseup",this._onDrop),W(t,"touchend",this._onDrop),W(t,"pointerup",this._onDrop),W(t,"touchcancel",this._onDrop),W(t,"pointercancel",this._onDrop),W(t,"selectstart",this)},_onDrop:function(o){var r=this.el,l=this.options;clearInterval(this._loopId),clearInterval(D.pid),clearTimeout(this._dragStartTimer),rt(this._cloneId),rt(this._dragStartId),W(A,"mouseover",this),W(A,"mousemove",this._onTouchMove),this.nativeDraggable&&(W(A,"drop",this),W(r,"dragstart",this._onDragStart)),this._offUpEvents(),o&&(b&&(o.preventDefault(),!l.dropBubble&&o.stopPropagation()),n&&n.parentNode&&n.parentNode.removeChild(n),a!==e&&"clone"===N.active.lastPullMode||i&&i.parentNode&&i.parentNode.removeChild(i),t&&(this.nativeDraggable&&W(t,"dragend",this),Z(t),t.style["will-change"]="",H(t,this.options.ghostClass,!1),H(t,this.options.chosenClass,!1),J(this,a,"unchoose",t,e,a,h),a!==e?(m=et(t,l.draggable))>=0&&(J(null,e,"add",t,e,a,h,m),J(this,a,"remove",t,e,a,h,m),J(null,e,"sort",t,e,a,h,m),J(this,a,"sort",t,e,a,h,m)):t.nextSibling!==s&&(m=et(t,l.draggable))>=0&&(J(this,a,"update",t,e,a,h,m),J(this,a,"sort",t,e,a,h,m)),N.active&&(null!=m&&-1!==m||(m=h),J(this,a,"end",t,e,a,h,m),this.save()))),this._nulling()},_nulling:function(){a=t=e=n=s=i=o=r=l=v=y=b=m=u=d=g=f=N.active=null,V.forEach(function(t){t.checked=!0}),V.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":t&&(this._onDragOver(e),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.preventDefault()}(e));break;case"mouseover":this._onDrop(e);break;case"selectstart":e.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,a=n.length,s=this.options;i<a;i++)B(t=n[i],s.draggable,this.el)&&e.push(t.getAttribute(s.dataIdAttr)||tt(t));return e},sort:function(t){var e={},n=this.el;this.toArray().forEach(function(t,i){var a=n.children[i];B(a,this.options.draggable,n)&&(e[t]=a)},this),t.forEach(function(t){e[t]&&(n.removeChild(e[t]),n.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return B(t,e||this.options.draggable,this.el)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];n[t]=e,"group"===t&&L(n)},destroy:function(){var t=this.el;t[S]=null,W(t,"mousedown",this._onTapStart),W(t,"touchstart",this._onTapStart),W(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(W(t,"dragover",this),W(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),$.splice($.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},Y(A,"touchmove",function(t){N.active&&t.preventDefault()}),N.utils={on:Y,off:W,css:X,find:G,is:function(t,e){return!!B(t,e,t)},extend:at,throttle:it,closest:B,toggleClass:H,clone:st,index:et,nextTick:ot,cancelNextTick:rt},N.create=function(t,e){return new N(t,e)},N.version="1.7.0",N})},TQvf:function(t,e,n){
/*!
 * clipboard.js v2.0.1
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
var i;i=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){var i,a,s,o;o=function(t,e){"use strict";var n,i=(n=e)&&n.__esModule?n:{default:n};var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolveOptions(e),this.initSelection()}return s(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":a(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=o},a=[t,n(7)],void 0===(s="function"==typeof(i=o)?i.apply(e,a):i)||(t.exports=s)},function(t,e,n){var i=n(6),a=n(5);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!i.string(e))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(i.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}(t,e,n);if(i.string(t))return function(t,e,n){return a(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function a(){i.off(t,a),e.apply(n,arguments)}return a._=e,this.on(t,a,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,a=n.length;i<a;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],a=[];if(i&&e)for(var s=0,o=i.length;s<o;s++)i[s].fn!==e&&i[s].fn._!==e&&a.push(i[s]);return a.length?n[t]=a:delete n[t],this}},t.exports=n},function(t,e,n){var i,a,s,o;o=function(t,e,n,i){"use strict";var a=r(e),s=r(n),o=r(i);function r(t){return t&&t.__esModule?t:{default:t}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var u=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.resolveOptions(n),i.listenClick(t),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),c(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===l(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,o.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new a.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return d("action",t)}},{key:"defaultTarget",value:function(t){var e=d("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return d("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}();function d(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}t.exports=u},a=[t,n(0),n(2),n(1)],void 0===(s="function"==typeof(i=o)?i.apply(e,a):i)||(t.exports=s)},function(t,e){var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}t.exports=function(t,e){for(;t&&t.nodeType!==n;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},function(t,e,n){var i=n(4);function a(t,e,n,a,s){var o=function(t,e,n,a){return function(n){n.delegateTarget=i(n.target,e),n.delegateTarget&&a.call(t,n)}}.apply(this,arguments);return t.addEventListener(n,o,s),{destroy:function(){t.removeEventListener(n,o,s)}}}t.exports=function(t,e,n,i,s){return"function"==typeof t.addEventListener?a.apply(null,arguments):"function"==typeof n?a.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return a(t,e,n,i,s)}))}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),a=document.createRange();a.selectNodeContents(t),i.removeAllRanges(),i.addRange(a),e=i.toString()}return e}}])},t.exports=i()},TTHX:function(t,e){},XnzV:function(t,e){},Y3R7:function(t,e){},YdV9:function(t,e){},dAjg:function(t,e){},gZT7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("GIAq"),a=n("XLwt"),s={name:"LineChart",props:{id:{type:String},title:{type:String},legendName:{type:String},xAxisData:{type:Array},seriesData:{type:Array},primaryColor:{type:String,default:"#26bba0"},areaColor:{type:String,default:"#38cdb27d"}},data:function(){return{}},methods:{draw:function(t,e){var n=a.init(document.getElementById(this.id)),i={title:{text:this.title,textStyle:{fontSize:14}},tooltip:{trigger:"axis"},color:[this.primaryColor],legend:{selectedMode:!1,x:30,y:8,data:[{name:this.legendName}]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value"},series:[{name:this.legendName,type:"line",smooth:!0,symbolSize:6,label:{normal:{show:!0,position:"top",color:this.primaryColor}},itemStyle:{normal:{color:this.primaryColor,borderWidth:2}},lineStyle:{color:this.primaryColor},areaStyle:{normal:{color:this.areaColor,show:!0,position:"top"}},data:t}]};n.setOption(i)}},watch:{seriesData:function(t){this.draw(t,this.xAxisData)}}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"line-container"},[e("header",[this._t("header")],2),this._v(" "),e("div",{staticClass:"rfd-line-chart",attrs:{id:this.id}})])},staticRenderFns:[]};var r=n("VU/8")(s,o,!1,function(t){n("2quZ")},null,null).exports,l={name:"ChangeLog",props:{listId:{type:String},isAdmin:{type:Boolean}},data:function(){return{isAdminTrue:!1,logData:[],modalFormData:{scope:[],spendTime:1,content:""},ruleValidate:{scope:[{type:"array",required:!0,message:"不允许为空"}],spendTime:[{required:!0,message:"不允许为空",type:"number"}],content:[{required:!0,message:"不允许为空",trigger:"blur"}]}}},watch:{isAdmin:function(t){this.isAdminTrue=!!t}},methods:{modalVisibleChange:function(t){this.$refs.formValidate.resetFields()},submitLog:function(t){var e=this,n=void 0;if(this.$refs.formValidate.validate(function(t){n=t}),n){var a=this.listId,s=this.modalFormData.scope.join(","),o=this.modalFormData.spendTime,r=this.modalFormData.content;Object(i.G)(a,s,o,r).then(function(t){t.success&&(e.$Message.success(t.message),e.getChangeLog())})}},getChangeLog:function(){var t=this,e=this.listId;Object(i.v)(e).then(function(e){e.tableContent&&(e.tableContent.map(function(t){t.CHANGE_RANGE&&(t.CHANGE_RANGE=t.CHANGE_RANGE.split(","))}),t.logData=e.tableContent)})}},created:function(){this.getChangeLog()}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"timeline-box",attrs:{fix:""}},[t._m(0),t._v(" "),t.isAdminTrue?n("div",{staticClass:"timeline-box-form"},[n("Form",{ref:"formValidate",staticStyle:{margin:"5px",width:"95%"},attrs:{"label-width":120,model:t.modalFormData,rules:t.ruleValidate}},[n("FormItem",{attrs:{label:"更新范围:",prop:"scope",width:"300"}},[n("Select",{attrs:{multiple:""},model:{value:t.modalFormData.scope,callback:function(e){t.$set(t.modalFormData,"scope",e)},expression:"modalFormData.scope"}},[n("Option",{attrs:{value:"表单"}},[t._v("表单")]),t._v(" "),n("Option",{attrs:{value:"科目关系"}},[t._v("科目关系")]),t._v(" "),n("Option",{attrs:{value:"报表"}},[t._v("报表")]),t._v(" "),n("Option",{attrs:{value:"工作流"}},[t._v("工作流")]),t._v(" "),n("Option",{attrs:{value:"权限"}},[t._v("权限")])],1)],1),t._v(" "),n("FormItem",{attrs:{label:"耗用小时数:",prop:"spendTime"}},[n("InputNumber",{model:{value:t.modalFormData.spendTime,callback:function(e){t.$set(t.modalFormData,"spendTime",e)},expression:"modalFormData.spendTime"}}),t._v(" "),n("span",{staticStyle:{color:"#ddd","margin-left":"10px"}},[t._v("单位/时")])],1),t._v(" "),n("FormItem",{attrs:{label:"更新内容:",prop:"content"}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.modalFormData.content,callback:function(e){t.$set(t.modalFormData,"content",e)},expression:"modalFormData.content"}})],1),t._v(" "),n("FormItem",[n("input",{staticClass:"timeline-box-form-submit",attrs:{type:"submit",value:"提交"},on:{click:t.submitLog}})])],1)],1):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.logData.length,expression:"logData.length===0?false:true"}]},t._l(t.logData,function(e,i){return n("div",{key:i,staticClass:"timeline-box-log-item"},[n("div",{staticClass:"timeline-item-content-header"},[n("div",{staticClass:"circle"}),t._v(" "),n("span",{staticClass:"time"},[t._v(t._s(e.VERSION))])]),t._v(" "),n("ul",{staticClass:"timeline-item-content-ul"},[n("li",[n("span",[t._v(t._s(e.CREATOR_NAME))]),t._v(" "),n("span",[t._v(t._s(e.CRT_TIME))]),t._v(" "),n("span",[t._v("耗用时间:"+t._s(e.TIME_CONSUMING))])]),t._v(" "),n("li",[n("span",[t._v("更新范围:")]),t._v(" "),t._l(e.CHANGE_RANGE,function(e,i){return n("span",{key:i,staticClass:"customs-tag"},[t._v(t._s(e))])})],2),t._v(" "),n("li",[n("span",[t._v("备注:"+t._s(e.CONTENT))])])])])}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-resource-group-title"},[e("h3",[this._v("更新日志")])])}]};var u=n("VU/8")(l,c,!1,function(t){n("EXx6")},null,null).exports,d=n("oAV5"),p={name:"LogInstance",components:{LineChart:r,ChangeLog:u,LineChartTime:r},props:{isAdmin:Boolean,isAddress:Boolean},data:function(){return{listId:this.$route.params.listId,month:new Date,xAxisData:[],seriesData:[],active:!0,xAxisTimeData:[],seriesTimeData:[],workFlowTimeActive:!0,workFlowMonth:new Date}},watch:{month:function(t){this.getInstanceStatistics()},workFlowMonth:function(t){this.getWorkFlowTime()}},methods:{getInstanceStatistics:function(t){var e=this,n=e.listId,a=e.month,s=t||(this.active?"week":"day");a=Object(d.b)(a,"yyyy/MM/dd"),Object(i.w)(n,s,a).then(function(t){if(t.list[0]){var n=[],i=[];t.list.map(function(t){n.push(t.xAxis),i.push(t.num)}),e.seriesData=i,e.xAxisData=n}})},getWorkFlowTime:function(t){var e=this,n=e.listId,a=e.workFlowMonth,s=t||(this.workFlowTimeActive?"week":"day");a=Object(d.b)(a,"yyyy/MM/dd"),Object(i.C)(n,s,a).then(function(t){if(t.list[0]){var n=[],i=[];t.list.map(function(t){n.push(t.xAxis),t.num?i.push(t.num):i.push(0)}),e.seriesTimeData=i,e.xAxisTimeData=n}})},selectDataRange:function(t){this.active="week"===t,this.getInstanceStatistics(t)},selectSpendTimeRange:function(t){this.workFlowTimeActive="week"===t,this.getWorkFlowTime(t)}},mounted:function(){this.getInstanceStatistics(),this.getWorkFlowTime()}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"background-color":"#f0f0f0"}},[t._m(0),t._v(" "),n("div",[n("div",{class:{"line-chart-screen":t.isAddress,"line-chart":!0}},[n("line-chart",{attrs:{legendName:"新增实例数",xAxisData:t.xAxisData,seriesData:t.seriesData,id:"instanceLineChart",primaryColor:"#1890ff",areaColor:"#1890ff8c"}},[n("div",{staticClass:"line-chart-header",attrs:{slot:"header"},slot:"header"},[t._v("\n          查看范围:\n          "),n("DatePicker",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{type:"month",placeholder:"选择月份",format:"yyyy-MM",clearable:!1},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}}),t._v(" "),n("div",{staticClass:"select-range"},[n("span",{staticClass:"customs-tag",class:{"customs-tag-active":t.active},on:{click:function(e){t.selectDataRange("week")}}},[t._v("周")]),t._v(" "),n("span",{staticClass:"customs-tag",class:{"customs-tag-active":!t.active},on:{click:function(e){t.selectDataRange("day")}}},[t._v("天")])])],1)])],1),t._v(" "),t.isAddress?t._e():n("div",{staticClass:"line-chart"},[n("line-chart-time",{attrs:{legendName:"实例平均工作流耗用时间周期(小时)",xAxisData:t.xAxisTimeData,seriesData:t.seriesTimeData,id:"spendTimeChart",primaryColor:"#f9499e",areaColor:"#f9499e8c"}},[n("div",{staticClass:"line-chart-header",attrs:{slot:"header"},slot:"header"},[t._v("\n          查看范围:\n          "),n("DatePicker",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{type:"month",placeholder:"选择月份",format:"yyyy-MM",clearable:!1},model:{value:t.workFlowMonth,callback:function(e){t.workFlowMonth=e},expression:"workFlowMonth"}}),t._v(" "),n("div",{staticClass:"select-range"},[n("span",{staticClass:"customs-tag",class:{"customs-tag-active":t.workFlowTimeActive},on:{click:function(e){t.selectSpendTimeRange("week")}}},[t._v("周")]),t._v(" "),n("span",{staticClass:"customs-tag",class:{"customs-tag-active":!t.workFlowTimeActive},on:{click:function(e){t.selectSpendTimeRange("day")}}},[t._v("天")])])],1)])],1)]),t._v(" "),n("change-log",{attrs:{listId:t.listId,isAdmin:t.isAdmin}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-resource-group-title"},[e("h3",[this._v("数据分析")])])}]};var m=n("VU/8")(p,h,!1,function(t){n("Y3R7")},"data-v-9173fc7e",null).exports,f=n("mvHQ"),g=n.n(f),v={name:"appInfo",components:{},props:{listId:String,appData:Object,isAdmin:Boolean,isCompanyAdmin:Boolean},data:function(){return{showEditAppInfo:!0,showAppEditAdmin:!0,isAdminTrue:!1,showEditBtn:!0,adminLoading:!0,selectModel:"",showAdminModal:!1,selector:"",searchValue:"",hasPublishStatus:"已发布",notPublishStatus:"未发布",notAppStatusColor:"blue",hasAppStatusColor:"green",total:0,currentPage:1,pageSize:10,adminColumns:[{title:"头像",key:"photo",width:80,render:function(t,e){return t("div",[t("Avatar",{props:{src:e.row.photo}})])}},{title:"工号",key:"userCode"},{title:"姓名",key:"nickname"},{title:"手机",key:"mobile"},{title:"邮箱",key:"email"}],adminData:[],selectAdminData:{}}},watch:{isAdmin:function(t){this.isAdminTrue=!!t}},methods:{childHasPublished:function(t){this.appData.publish=1},editAppinfo:function(){var t=this;if(this.showEditAppInfo=!this.showEditAppInfo,this.isCompanyAdmin&&(this.showAppEditAdmin=!1),this.showEditBtn=!this.showEditBtn,this.showEditAppInfo){var e={uniqueId:this.appData.uniqueId,title:this.appData.title,administrator:this.appData.userId,comment:this.appData.comment};Object(i.F)(e).then(function(e){e.success&&(t.$Message.success("更新成功!"),t.$emit("reloadData"),t.$emit("changeAdmin"))})}},selectAdminModal:function(){this.showAdminModal=!0},confirmModal:function(){this.appData.administrator=this.selectAdminData.nickname,this.appData.userId=this.selectAdminData.userId},dbclickConfirmModal:function(t){this.appData.administrator=t.nickname,this.appData.userId=t.userId,this.showAdminModal=!1},selectAdmin:function(t,e){this.selectAdminData=t},getAdmintrstorData:function(t){var e=this;this.adminLoading=!0,Object(i.k)(t,this.currentPage,this.pageSize).then(function(t){e.adminData=t.tableContent,e.total=t.dataCount,e.adminLoading=!1})},changeAppStatus:function(t){var e=this,n=this.listId,a=g()([{operator:"eq",value:"操作",property:"type"}]),s=[],o=[];Object(i.n)(n,a).then(function(n){n.tableContent.forEach(function(t){s.push(t.id),"查看"!=t.name&&o.push(t.id)}),"enabled"===t?Object(i.h)(s.join(",")).then(function(t){t.success&&(e.$Message.success(t.message),e.$emit("enabledForbiddenAppPermission"))}):Object(i.h)(null,o.join(",")).then(function(t){t.success&&(e.$Message.success(t.message),e.$emit("enabledForbiddenAppPermission"))})})},onPageChange:function(t){this.currentPage=t;var e=g()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getAdmintrstorData(e)},adminFilter:function(){var t=g()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getAdmintrstorData(t)}},mounted:function(){this.listId;this.getAdmintrstorData()}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-card"},[n("header",{staticClass:"app-header"},[n("Breadcrumb",[n("BreadcrumbItem",[t._v("首页")]),t._v(" "),n("BreadcrumbItem",{attrs:{to:"/application/list"}},[t._v("应用列表")]),t._v(" "),n("BreadcrumbItem",[t._v(t._s(t.appData.title))])],1)],1),t._v(" "),n("Row",{staticClass:"font14"},[n("Col",{staticClass:"pad15",attrs:{span:"2"}},[n("img",{staticClass:"appIcon",attrs:{src:t.appData.icon}})]),t._v(" "),n("Col",{staticClass:"pad15",attrs:{span:"21"}},[n("h3",[t._v(" "+t._s(t.appData.title?t.appData.title:"待加载")+"  - 应用详情")]),t._v(" "),n("Row",{staticClass:"pad5"},[n("Col",{attrs:{span:"6"}},[t._v("应用名称： \n            "),t.showEditAppInfo?n("span",[t._v(t._s(t.appData.title))]):n("Input",{staticStyle:{width:"120px"},model:{value:t.appData.title,callback:function(e){t.$set(t.appData,"title",e)},expression:"appData.title"}}),t._v(" "),t.isAdminTrue?n("b",{on:{click:t.editAppinfo}},[t.showEditBtn?n("Tooltip",{attrs:{content:"编辑",placement:"top"}},[n("Icon",{staticClass:"app-edit-icon",attrs:{type:"ios-create-outline"}})],1):n("Tooltip",{attrs:{content:"保存",placement:"top"}},[n("b",{staticClass:"app-save-icon"},[t._v("保存")])])],1):t._e()],1),t._v(" "),n("Col",{attrs:{span:"6"}},[t._v("应用类型： "),n("span",[t._v(t._s(t.appData.TRANS_NAME))])]),t._v(" "),n("Col",{attrs:{span:"6"}},[t._v("应用管理员： \n            "),t.showAppEditAdmin?n("span",[n("Icon",{attrs:{type:"person"}}),t._v(t._s(t.appData.administrator)+"\n            ")],1):n("Input",{staticStyle:{width:"100px"},attrs:{icon:"md-arrow-dropdown"},on:{"on-click":t.selectAdminModal},model:{value:t.appData.administrator,callback:function(e){t.$set(t.appData,"administrator",e)},expression:"appData.administrator"}})],1)],1),t._v(" "),n("Row",{staticClass:"pad5"},[n("Col",{attrs:{span:"6"}},[t._v("创建者： "),n("span",[t._v(t._s(t.appData.creator))])]),t._v(" "),n("Col",{attrs:{span:"6"}},[t._v("创建时间： "),n("span",[t._v(t._s(t.appData.crtTime))])]),t._v(" "),n("Col",{attrs:{span:"6"}},[t._v("修改者："+t._s(t.appData.modifer))]),t._v(" "),n("Col",{attrs:{span:"6"}},[t._v("修改时间： "),n("span",[t._v(t._s(t.appData.modTime))])])],1),t._v(" "),n("Row",{staticClass:"pad5"},[n("Col",{attrs:{span:"24"}},[t._v("说明："),t.showEditAppInfo?n("span",[t._v(t._s(t.appData.comment))]):n("Input",{staticStyle:{width:"1000px"},model:{value:t.appData.comment,callback:function(e){t.$set(t.appData,"comment",e)},expression:"appData.comment"}})],1)],1)],1),t._v(" "),n("Col",{attrs:{span:"1"}},[n("Dropdown",{staticClass:"app-dropdown",on:{"on-click":t.changeAppStatus}},[n("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n                  操作\n                  "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),t.isAdminTrue?n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{attrs:{name:"enabled"}},[t._v("启用")]),t._v(" "),n("DropdownItem",{attrs:{name:"forbidden"}},[t._v("停用")])],1):t._e()],1)],1)],1),t._v(" "),n("Modal",{attrs:{title:"请选择管理员",width:"800"},on:{"on-ok":t.confirmModal},model:{value:t.showAdminModal,callback:function(e){t.showAdminModal=e},expression:"showAdminModal"}},[n("div",{staticClass:"app-search"},[n("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索名称或工号"},on:{"on-search":t.adminFilter},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),n("p",{staticClass:"app-search-icon",on:{click:t.adminFilter}},[n("Button",{attrs:{type:"primary",size:"small"}},[t._v("查询")])],1)],1),t._v(" "),n("Table",{attrs:{"highlight-row":!0,loading:t.adminLoading,height:"300",stripe:"",columns:t.adminColumns,size:"small",data:t.adminData},on:{"on-row-dblclick":t.dbclickConfirmModal,"on-row-click":t.selectAdmin}}),t._v(" "),n("div",{staticClass:"user-page"},[n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:t.total,current:t.currentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onPageChange}})],1)])],1)],1)},staticRenderFns:[]};var b=n("VU/8")(v,y,!1,function(t){n("+Ubb")},"data-v-ba13e7ae",null).exports,_={name:"appSubject",components:{},props:{isAdmin:Boolean},data:function(){return{listId:this.$route.params.listId,columns:[{title:"科目名称",key:"accountName",align:"left"},{title:"科目类型",key:"classify",align:"left",render:function(t,e){return 1===e.row.classify?t("span",{},"会计类"):t("span",{},"非会计类")}},{title:"数据归集",key:"dataCollection",align:"left",render:function(t,e){var n=[],i=e.row;if(i.calcRels.forEach(function(t){n.push(t.matchDirectionByDebit)}),1===i.classify){if(n.indexOf(1)>-1&&n.indexOf(-1)>-1)return t("span",{},"借方，贷方");if(n.indexOf(1)>-1)return t("span",{},"借方");if(n.indexOf(-1)>-1)return t("span",{},"贷方")}else{if(n.indexOf(1)>-1&&n.indexOf(-1)>-1)return t("span",{},"增加，减少");if(n.indexOf(1)>-1)return t("span",{},"增加");if(n.indexOf(-1)>-1)return t("span",{},"减少")}}}],subjects:[]}},watch:{isAdmin:function(t){var e=this,n={title:"操作",key:"key",align:"center",render:function(t,n){var i=!1,a=!1;return 1===n.row.classify&&(i=!0),1===n.row.calcRels[0].status&&(a=!0),t("Checkbox",{props:{disabled:i,value:a},on:{"on-change":function(t){e.renderMethod(t,n)}}})}};t?"操作"!==this.columns[this.columns.length-1].title&&this.columns.push(n):"操作"===this.columns[this.columns.length-1].title&&this.columns.splice(this.columns.length-1,1)}},methods:{rerenderSubjectColumns:function(){var t=this;this.columns[this.columns.length-1].render=function(e,n){var i=!1,a=!1;return 1===n.row.classify&&(i=!0),1===n.row.calcRels[0].status&&(a=!0),e("Checkbox",{props:{disabled:i,value:a},on:{"on-change":function(e){t.renderMethod(e,n)}}})}},renderMethod:function(t,e){var n=this,a="";a=t?"确认启用该科目？":"确认禁用该科目？",this.$Modal.confirm({title:"确认",content:a,onOk:function(){e.row.calcRels.forEach(function(t){Object(i.D)(t.componentId).then(function(t){200===t.status&&n.$Message.success("更新成功！")})})},onCancel:function(){n.rerenderSubjectColumns()}})}},created:function(){var t=this;Object(i.r)(this.listId).then(function(e){200===e.status&&(t.subjects=e.data)})}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bg_ff"},[e("Row",{staticClass:"app-resource-group-title"},[e("h3",[this._v("科目关系")])]),this._v(" "),e("Row",{staticClass:"subject-content"},[e("Table",{attrs:{columns:this.columns,data:this.subjects,size:"small"}})],1)],1)},staticRenderFns:[]};var w=n("VU/8")(_,D,!1,function(t){n("ECJQ")},"data-v-28978a20",null).exports,C=n("TQvf"),S={name:"appApi",components:{},props:{},data:function(){return{listId:this.$route.params.listId,disabled:!1,collapseValue:"commit",commitApi:{},updateApi:{},viewApi:{},columns:[{title:"参数",key:"param",width:200,align:"center"},{title:"必须",key:"required",width:160,align:"center"},{title:"说明",key:"explain"}],commitData:[],viewData:[],updateData:[]}},methods:{copy:function(){var t=new C(".tag-read");t.on("success",function(e){console.log("复制成功"),t.destroy()}),t.on("error",function(e){console.log("该浏览器不支持自动复制"),t.destroy()})},formatData:function(t){var e=void 0,n=void 0,i=[],a=void 0,s=t.formData,o=s.isRequired;for(var r in i.push({explain:"备注",param:"biComment",required:"否"}),i.push({explain:"应用Id",param:"listId",required:"否"}),s)if(e={},"order"==r||"inPut"==r||"outPut"==r)for(var l in n=s[r])if(e={},"dataSet"!==l){for(var c in e.explain=n[l],e.param=l,o)e.required=c==l?"是":"否";i.push(e)}else for(var u in a=n[l][0]){for(var c in(e={}).explain=a[u],e.param=u,o)e.required=c==u?"是":"否";i.push(e)}else if("isRequired"!==r){for(var c in e.explain=s[r],e.param=r,o)e.required=c==r?"是":"否";i.push(e)}return i}},mounted:function(){var t=this;Object(i.j)(this.listId).then(function(e){try{t.commitApi=e.commitUrl?JSON.parse(e.commitUrl):e.commitUrl,t.updateApi=e.updateUrl?JSON.parse(e.updateUrl):e.updateUrl,t.viewApi=e.viewUrl?JSON.parse(e.viewUrl):e.viewUrl}catch(e){t.$Message.error("后台返回格式有误！！！")}t.commitApi.body=Object(d.a)(t.commitApi.body),t.updateApi.body=Object(d.a)(t.updateApi.body),t.viewApi.body=Object(d.a)(t.viewApi.body),t.commitData=t.formatData(t.commitApi.body),t.updateData=t.formatData(t.updateApi.body),t.viewData=t.formatData(t.viewApi.body)}).catch(function(e){t.$Message.error(e.message.data)})}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg_ff martop20"},[n("Row",{staticClass:"app-resource-group-title"},[n("h3",[t._v("API")])]),t._v(" "),n("section",[n("Collapse",{attrs:{simple:""},model:{value:t.collapseValue,callback:function(e){t.collapseValue=e},expression:"collapseValue"}},[n("Panel",{attrs:{name:"commit"}},[n("strong",{staticStyle:{"font-weight":"700","font-size":"14px",color:"#333"}},[t._v("提交")]),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("p",{staticStyle:{"font-size":"14px",color:"#333"}},[n("strong",{staticStyle:{"font-weight":"700"}},[t._v("请求方式:")]),t._v("\n            "+t._s(t.commitApi.method)+"\n          ")]),t._v(" "),n("p",{staticStyle:{"font-size":"14px",color:"#333"}},[n("strong",{staticStyle:{"font-weight":"700"}},[t._v("请求地址：")]),t._v("\n            "+t._s(t.commitApi.address)+"\n          ")]),t._v(" "),n("pre",{staticClass:"api-code"},[t._v("            "+t._s(t.commitApi.body)+"\n          ")]),t._v(" "),n("div",{staticClass:"tag-read",staticStyle:{position:"absolute",top:"70px",right:"20px",cursor:"pointer"},attrs:{"data-clipboard-text":t.commitApi.body},on:{click:t.copy}},[n("Tooltip",{attrs:{placement:"top",content:"点击复制",disabled:t.disabled}},[n("Icon",{attrs:{type:"md-document",size:"24"}})],1)],1),t._v(" "),n("h3",[t._v("请求参数：")]),t._v(" "),n("Table",{attrs:{size:"small",columns:t.columns,data:t.commitData}})],1)]),t._v(" "),n("Panel",{attrs:{name:"look"}},[n("strong",{staticStyle:{"font-weight":"700","font-size":"14px",color:"#333"}},[t._v("查看")]),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("p",{staticStyle:{"font-size":"14px",color:"#333"}},[n("strong",{staticStyle:{"font-weight":"700"}},[t._v("请求方式:")]),t._v("\n            "+t._s(t.viewApi.method)+"\n          ")]),t._v(" "),n("p",{staticStyle:{"font-size":"14px",color:"#333"}},[n("strong",{staticStyle:{"font-weight":"700"}},[t._v("请求地址：")]),t._v("\n            "+t._s(t.viewApi.address)+"\n          ")]),t._v(" "),n("pre",{staticClass:"api-code"},[t._v("            "+t._s(t.viewApi.body)+"\n          ")]),t._v(" "),n("div",{staticClass:"tag-read",staticStyle:{position:"absolute",top:"70px",right:"20px",cursor:"pointer"},attrs:{"data-clipboard-text":t.viewApi.body},on:{click:t.copy}},[n("Tooltip",{attrs:{placement:"top",content:"点击复制",disabled:t.disabled}},[n("Icon",{attrs:{type:"md-document",size:"24"}})],1)],1),t._v(" "),n("h3",[t._v("请求参数：")]),t._v(" "),n("Table",{attrs:{size:"small",columns:t.columns,data:t.viewData}})],1)]),t._v(" "),n("Panel",{attrs:{name:"update"}},[n("strong",{staticStyle:{"font-weight":"700","font-size":"14px",color:"#333"}},[t._v("更新")]),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("p",{staticStyle:{"font-size":"14px",color:"#333"}},[n("strong",{staticStyle:{"font-weight":"700"}},[t._v("请求方式:")]),t._v("\n            "+t._s(t.updateApi.method)+"\n          ")]),t._v(" "),n("p",{staticStyle:{"font-size":"14px",color:"#333"}},[n("strong",{staticStyle:{"font-weight":"700"}},[t._v("请求地址：")]),t._v("\n            "+t._s(t.updateApi.address)+"\n          ")]),t._v(" "),n("pre",{staticClass:"api-code"},[t._v("            "+t._s(t.updateApi.body)+"\n          ")]),t._v(" "),n("div",{staticClass:"tag-read",staticStyle:{position:"absolute",top:"70px",right:"20px",cursor:"pointer"},attrs:{"data-clipboard-text":t.updateApi.body},on:{click:t.copy}},[n("Tooltip",{attrs:{placement:"top",content:"点击复制",disabled:t.disabled}},[n("Icon",{attrs:{type:"md-document",size:"24"}})],1)],1),t._v(" "),n("h3",[t._v("请求参数：")]),t._v(" "),n("Table",{attrs:{size:"small",columns:t.columns,data:t.updateData}})],1)])],1)],1)],1)},staticRenderFns:[]};var A=n("VU/8")(S,k,!1,function(t){n("mPxM")},null,null).exports,x=n("DAYN"),T={name:"relatedApp",components:{draggable:n.n(x).a},props:{listId:{type:String},isAdmin:Boolean},data:function(){return{editable:!0,isDragging:!1,delayedDragging:!1,isAdminTrue:!1,relatedApps:[]}},computed:{dragOptions:function(){return{animation:0,group:"description",disabled:!this.editable,ghostClass:"ghost"}}},watch:{isAdmin:function(t){t&&(this.isAdminTrue=!0)},isDragging:function(t){var e=this;t?this.delayedDragging=!0:this.$nextTick(function(){e.delayedDragging=!1})}},methods:{onMove:function(t){var e=t.relatedContext,n=t.draggedContext,i=e.element,a=n.element;return!(i&&i.fixed||a.fixed)},saveAppData:function(){var t=this,e=[];this.relatedApps.forEach(function(t){e.push(t.id)}),e&&Object(i.K)(e.join(",")).then(function(e){e.success&&t.$Message.success(e.message)})},changeAppStatus:function(t,e){var n=this;Object(i.E)(t.id).then(function(t){t.success&&n.$Message.success(t.message)}).catch(function(t){n.$Message.error(t.data.message)})},getRelatedAppData:function(){var t=this;Object(i.A)(this.$route.params.listId).then(function(e){t.relatedApps=e})}},created:function(){this.getRelatedAppData()}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg_ff martop20"},[n("Row",{staticClass:"app-resource-group-title"},[n("h3",[t._v("相关应用\r\n        "),n("a",{directives:[{name:"show",rawName:"v-show",value:t.isAdminTrue,expression:"isAdminTrue"}],on:{click:t.saveAppData}},[t._v("保存")])])]),t._v(" "),n("Row",{staticClass:"related-app-content",attrs:{gutter:8}},[n("draggable",{attrs:{options:t.dragOptions,move:t.onMove},on:{start:function(e){t.isDragging=!0},end:function(e){t.isDragging=!1}},model:{value:t.relatedApps,callback:function(e){t.relatedApps=e},expression:"relatedApps"}},[n("transition-group",{attrs:{type:"transition",name:"flip-list"}},t._l(t.relatedApps,function(e,i){return n("Col",{key:i,staticStyle:{"margin-bottom":"5px"},attrs:{xs:24,sm:12,md:6,lg:4}},[n("Card",{staticClass:"app-card"},[n("img",{staticClass:"card-img",attrs:{src:e.icon}}),t._v(" "),n("span",{staticClass:"card-right"},[n("b",{staticClass:"card-name"},[t._v(t._s(e.listName))]),t._v(" "),n("span",{staticClass:"card-type"},[t._v(t._s(e.appName))]),t._v(" "),n("Checkbox",{staticClass:"card-check",attrs:{disabled:!t.isAdminTrue,value:1===e.STATUS},on:{"on-change":function(n){t.changeAppStatus(e,i)}}})],1)])],1)}))],1)],1)],1)},staticRenderFns:[]};var M=n("VU/8")(T,I,!1,function(t){n("YdV9")},"data-v-41ee7d1e",null).exports,E={name:"canEditTable",props:{refs:String,columnsList:Array,value:Array,url:String,editIncell:{type:Boolean,default:!1},hoverShow:{type:Boolean,default:!1}},data:function(){return{columns:[],thisTableData:[],edittingStore:[]}},created:function(){this.init()},methods:{init:function(){var t,e=this,n=this,i=this.columnsList.filter(function(t){if(t.editable&&!0===t.editable)return t});t=JSON.parse(g()(this.value)).map(function(t,n){var a=!1;if(e.thisTableData[n])if(e.thisTableData[n].editting)a=!0;else for(var s in e.thisTableData[n].edittingCell)!0===e.thisTableData[n].edittingCell[s]&&(a=!0);if(a)return e.thisTableData[n];e.$set(t,"editting",!1);var o={};return i.forEach(function(t){o[t.key]=!1}),e.$set(t,"edittingCell",o),t}),this.thisTableData=t,this.edittingStore=JSON.parse(g()(this.thisTableData)),this.columnsList.forEach(function(t){t.editable&&(t.render=function(i,a){var s=e.thisTableData[a.index];return s.editting?i("Input",{props:{type:"text",value:s[t.key]},on:{"on-change":function(t){var e=a.column.key;n.edittingStore[a.index][e]=t.target.value}}}):e.editIncell?i("Row",{props:{type:"flex",align:"middle",justify:"center"}},[i("Col",{props:{span:"22"}},[s.edittingCell[a.column.key]?function(t,e,n,i){return e("Input",{props:{type:"text",value:t.edittingStore[n.index][i.key]},on:{"on-change":function(e){var a=i.key;t.edittingStore[n.index][a]=e.target.value}}})}(e,i,a,t):i("span",s[t.key])]),i("Col",{props:{span:"2"}},[s.edittingCell[a.column.key]?function(t,e,n){return e("Button",{props:{type:"text",icon:"checkmark"},on:{click:function(e){t.edittingStore[n.index].edittingCell[n.column.key]=!1,t.thisTableData=JSON.parse(g()(t.edittingStore)),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-cell-change",t.handleBackdata(t.thisTableData),n.index,n.column.key)}}})}(e,i,a):function(t,e,n){return t.hoverShow?e("div",{class:{"show-edit-btn":t.hoverShow}},[e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.edittingStore[n.index].edittingCell[n.column.key]=!0,t.thisTableData=JSON.parse(g()(t.edittingStore))}}})]):e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.edittingStore[n.index].edittingCell[n.column.key]=!0,t.thisTableData=JSON.parse(g()(t.edittingStore))}}})}(e,i,a)])]):i("span",s[t.key])}),t.handle&&(t.render=function(n,i){var a=e.thisTableData[i.index],s=[];return t.handle.forEach(function(t){"edit"===t?s.push(function(t,e,n,i){return e("Button",{props:{type:n.editting?"success":"primary",loading:n.saving},style:{margin:"0 5px"},on:{click:function(){if(n.editting){t.edittingStore[i].saving=!0,t.thisTableData=JSON.parse(g()(t.edittingStore));var e=t.edittingStore[i];e.editting=!1,e.saving=!1,t.thisTableData=JSON.parse(g()(t.edittingStore)),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-change",t.handleBackdata(t.thisTableData),i)}else{if(n.edittingCell)for(var a in n.edittingCell)n.edittingCell[a]=!1,t.edittingStore[i].edittingCell[a]=!1;t.edittingStore[i].editting=!0,t.thisTableData=JSON.parse(g()(t.edittingStore))}}}},n.editting?"保存":"编辑")}(e,n,a,i.index)):"delete"===t&&s.push(function(t,e,n,i){return e("Poptip",{props:{confirm:!0,title:"您确定要删除这条数据吗?",transfer:!0},on:{"on-ok":function(){t.thisTableData.splice(i,1),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-delete",t.handleBackdata(t.thisTableData),i)}}},[e("Button",{style:{margin:"0 5px"},props:{type:"error",placement:"top"}},"删除")])}(e,n,0,i.index))}),n("div",s)})})},handleBackdata:function(t){var e=JSON.parse(g()(t));return e.forEach(function(t){delete t.editting,delete t.edittingCell,delete t.saving}),e}},watch:{value:function(t){this.init()}}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Table",{ref:this.refs,attrs:{columns:this.columnsList,data:this.thisTableData,border:"","disabled-hover":""}})],1)},staticRenderFns:[]};var P=n("VU/8")(E,O,!1,function(t){n("5cif")},null,null).exports,F={name:"admintrstorAssessment",components:{AssessModal:n("lZCD").a,EditTable:P},props:{isAdmin:{type:Boolean}},data:function(){return{listId:this.$route.params.listId,showAssessModal:!1,isAdminTrue:!1,isEdit:"",IsEditId:"",changeResult:"",adminAssessData:{duringDate:"",result:"",opportunity:""},ruleValidate:{duringDate:[{type:"date",required:!0,message:"不允许为空"}],result:[{required:!0,message:"不允许为空",type:"string"}],opportunity:[{required:!0,message:"不允许为空",type:"string"}]},assessments:[]}},watch:{isAdmin:function(t){t&&(this.isAdminTrue=!0)}},methods:{addAssess:function(){this.showAssessModal=!0,this.$refs.formValidate.resetFields()},submitAdminAssess:function(){var t=this,e={listId:this.listId,opportunity:this.adminAssessData.opportunity,result:this.adminAssessData.result,date:this.formatDate(this.adminAssessData.duringDate)};"edit"===this.isEdit&&(e.id=this.IsEditId);var n=!1;this.$refs.formValidate.validate(function(t){n=t}),n&&Object(i.H)(e).then(function(e){e.success?(t.$Message.success(e.message),t.getAssessmentData(),t.showAssessModal=!1,t.$refs.formValidate.resetFields(),t.isEdit=""):t.$Message.error(e.message)})},getAssessmentData:function(){var t=this;Object(i.t)(this.listId).then(function(e){t.assessments=e.tableContent})},formatDate:function(t){var e=new Date(t),n=e.getFullYear(),i=e.getMonth()+1;return i>=1&&i<=9&&(i="0"+i),n+"-"+i}},created:function(){this.getAssessmentData()}},R={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg_ff"},[n("div",[n("Row",{staticClass:"app-resource-group-title"},[n("h3",[t._v("管理员自评\n      ")])]),t._v(" "),n("Row",{directives:[{name:"show",rawName:"v-show",value:t.isAdminTrue,expression:"isAdminTrue"}],staticStyle:{"border-bottom":"10px solid #f0f0f0"}},[n("div",{staticStyle:{width:"95%",padding:"5px"}},[n("Form",{ref:"formValidate",attrs:{"label-width":150,model:t.adminAssessData,rules:t.ruleValidate}},[n("FormItem",{attrs:{label:"期间（月份）:",prop:"duringDate"}},[n("DatePicker",{staticStyle:{width:"200px"},attrs:{format:"yyyy-MM",type:"month",placeholder:"选择日期"},model:{value:t.adminAssessData.duringDate,callback:function(e){t.$set(t.adminAssessData,"duringDate",e)},expression:"adminAssessData.duringDate"}})],1),t._v(" "),n("FormItem",{attrs:{label:"效率与成本改进成果:",prop:"result"}},[n("Input",{attrs:{type:"textarea"},model:{value:t.adminAssessData.result,callback:function(e){t.$set(t.adminAssessData,"result",e)},expression:"adminAssessData.result"}})],1),t._v(" "),n("FormItem",{attrs:{label:"效率与成本改进机会:",prop:"opportunity"}},[n("Input",{attrs:{type:"textarea"},model:{value:t.adminAssessData.opportunity,callback:function(e){t.$set(t.adminAssessData,"opportunity",e)},expression:"adminAssessData.opportunity"}})],1)],1),t._v(" "),n("div",{staticStyle:{"text-align":"right","margin-bottom":"5px"}},[n("Button",{staticClass:"radius0",staticStyle:{"background-color":"rgb(0, 150, 136) !important",color:"#fff"},on:{click:t.submitAdminAssess}},[t._v("保存")])],1)],1)]),t._v(" "),t._l(t.assessments,function(e,i){return n("div",{key:i,staticClass:"pad10 bg_ff assessmentItem"},[n("img",{staticClass:"user-icon",attrs:{src:e.photo?e.photo:"resources/images/icon/contactor.png"}}),t._v(" "),n("div",{staticClass:"font14 content"},[n("div",[n("h4",[t._v(t._s(e.creator)+"\n            "),n("span",{staticClass:"fr"},[t._v(t._s(t.formatDate(e.date)))])])]),t._v(" "),n("div",{staticClass:"assessment-info"},[n("div",[n("span",{staticStyle:{color:"#a06970"}},[t._v("改进成果:")]),t._v(" "),n("span",{staticClass:"assessment-info-text"},[t._v(t._s(e.achievement))])]),t._v(" "),n("div",[n("span",{staticStyle:{color:"#a06970"}},[t._v("改进机会:")]),t._v(" "),n("span",{staticClass:"assessment-info-text"},[t._v(t._s(e.chance))])])])])])})],2)])},staticRenderFns:[]};var j=n("VU/8")(F,R,!1,function(t){n("4+ME")},"data-v-b6c36dd4",null).exports,V=n("bTqw"),$=n("fZjL"),U=n.n($),L={name:"permissionModal",components:{},props:{modalStatis:Boolean,editActionData:Object,memberType:String,isEdit:String},data:function(){return{appListId:this.$route.params.listId,selectUser:"",selectOrg:"",selectPosition:"",searchUserValue:"",searchOrgValue:"",searchDepValue:"",tableSize:"small",userTotal:0,orgTotal:0,depTotal:0,userCurrentPage:1,orgCurrentPage:1,depCurrentPage:1,pageSize:10,emitChange:0,userLoading:!0,orgLoading:!0,depLoading:!0,showUserModal:!1,showOrgModal:!1,showDepartmentModal:!1,showPermissionModal:!1,sameUserData:[],userSelectData:[],orgSelectData:[],departmentSelectData:[],userColumns:[],userData:[],orgColumns:[],orgData:[],departmentColumns:[],departmentData:[],allPermissionData:[],permissionSelectDatas:[],allPermissionColumns:[{type:"selection",width:60,align:"center"},{title:"动作名称",key:"name",width:100},{title:"说明",key:"desc"}],userSelection:[],orgSelection:[],departmentSelection:[]}},watch:{modalStatis:function(t,e){var n=this;this.showPermissionModal=t,this.permissionSelectDatas=[];var a=[];if(this.editActionData.action&&(a=JSON.parse(this.editActionData.action)),a.forEach(function(t){for(var e in t)n.permissionSelectDatas.push({name:t[e],id:Number(e)})}),"edit"===this.isEdit){var s=this.appListId;if(Object(i.n)(s).then(function(t){n.allPermissionData=t.tableContent,n.allPermissionData.map(function(t){t.desc=V.a[t.resourceName]}),n.allPermissionData.map(function(t){n.permissionSelectDatas.map(function(e){e.id===t.id&&(t._checked=!0)})})}),this.userSelectData=[],this.orgSelectData=[],this.departmentSelectData=[],this.userSelection=[],this.orgSelection=[],this.departmentSelection=[],U()(this.editActionData).length>0){var o=[],r=[],l=[];this.editActionData.objNames&&JSON.parse(this.editActionData.objNames).forEach(function(t){"user"===t.type?o.push({nickname:t.name,userId:t.id}):"group"===t.type?r.push({name:t.name,id:t.id}):l.push({name:t.name,id:t.id})}),this.userData=o,this.userSelectData=o,this.userSelection=o,this.orgData=r,this.orgSelectData=r,this.orgSelection=r,this.departmentData=l,this.departmentSelectData=l,this.departmentSelection=l}}else this.getData(),this.userSelectData=[],this.orgSelectData=[],this.departmentSelectData=[],this.userSelection=[],this.orgSelection=[],this.departmentSelection=[]}},methods:{userFilter:function(){var t=g()([{operator_1:"like",value_1:this.searchUserValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchUserValue,property_2:"userCode"}]);this.selectUserModal(t)},orgFilter:function(){var t=g()([{operator:"like",value:this.searchOrgValue,property:"name"}]);this.selectOrgModal(t)},depFilter:function(){var t=g()([{operator:"like",value:this.searchDepValue,property:"name"}]);this.selectPositionModal(t)},selectUserModal:function(t){var e=this;this.showUserModal=!0,this.userColumns=[{type:"selection",width:60,align:"center"},{title:"头像",key:"photo",width:80,render:function(t,e){return t("div",[t("Avatar",{props:{src:e.row.photo}})])}},{title:"姓名",key:"nickname"},{title:"工号",key:"userCode"},{title:"手机",key:"mobile"},{title:"邮箱",key:"email"}],this.userLoading=!0,Object(i.o)(this.userCurrentPage,this.pageSize,t).then(function(t){e.userData=t.tableContent,e.sameUserData=t.tableContent,e.userTotal=t.dataCount,e.userLoading=!1})},selectOrgModal:function(t){var e=this;this.showOrgModal=!0,this.orgColumns=[{type:"selection",width:60,align:"center"},{title:"名称",key:"name"}],this.orgLoading=!0,Object(i.m)(this.orgCurrentPage,this.pageSize,t).then(function(t){e.orgData=t.tableContent,e.orgTotal=t.dataCount,e.orgLoading=!1})},selectPositionModal:function(t){var e=this;this.showDepartmentModal=!0,this.departmentColumns=[{type:"selection",width:60,align:"center"},{title:"名称",key:"name"}],this.depLoading=!0,Object(i.l)(this.depCurrentPage,this.pageSize,t).then(function(t){e.departmentData=t.tableContent,e.depTotal=t.dataCount,e.depLoading=!1})},selectUserClick:function(t,e){if(this.userSelection.length>0){var n=[];n=this.userSelection.concat(t);var i={};this.userSelection=n.reduce(function(t,e){return!i[e.userId]&&(i[e.userId]=t.push(e)),t},[])}else this.userSelection=t},selectUserCancel:function(t,e){var n=this;this.userSelection.forEach(function(t,i){t.userId===e.userId&&n.userSelection.splice(i,1)})},cancelSelectUser:function(){this.userSelection=this.userSelectData},selectOrgClick:function(t,e){if(this.orgSelection.length>0){var n=[];n=this.orgSelection.concat(t);var i={};this.orgSelection=n.reduce(function(t,e){return!i[e.id]&&(i[e.id]=t.push(e)),t},[])}else this.orgSelection=t},selectOrgCancel:function(t,e){var n=this;this.orgSelection.forEach(function(t,i){t.id===e.id&&n.orgSelection.splice(i,1)})},cancelSelectOrg:function(){this.orgSelection=this.orgSelectData},selectDepartmentClick:function(t,e){if(this.departmentSelection.length>0){var n=[];n=this.departmentSelection.concat(t);var i={};this.departmentSelection=n.reduce(function(t,e){return!i[e.id]&&(i[e.id]=t.push(e)),t},[])}else this.departmentSelection=t},selectDepCancel:function(t,e){var n=this;this.departmentSelection.forEach(function(t,i){t.id===e.id&&n.departmentSelection.splice(i,1)})},cancelSelectDep:function(){this.departmentSelection=this.departmentSelectData},deleteUser:function(t){var e=this,n=t.target.parentElement.getAttribute("userid"),a=[];this.permissionSelectDatas.forEach(function(t){a.push(t.id)}),Object(i.d)("sys_user_permission",n,a.join(",")).then(function(t){t.success&&(e.userSelectData=e.userSelectData.filter(function(t){return t.userId!=n}),e.userSelection=e.userSelection.filter(function(t){return t.userId!=n}))})},deleteOrg:function(t){var e=this,n=t.target.parentElement.getAttribute("orgid"),a=[];this.permissionSelectDatas.forEach(function(t){a.push(t.id)}),Object(i.d)("sys_group_permission",n,userId,a.join(",")).then(function(t){t.success&&(e.orgSelectData=e.orgSelectData.filter(function(t){return t.id!=n}),e.orgSelection=e.orgSelection.filter(function(t){return t.id!=n}))})},deleteDepartment:function(t,e){var n=this,a=event.target.parentElement.getAttribute("depid"),s=[];this.permissionSelectDatas.forEach(function(t){s.push(t.id)}),Object(i.d)("sys_role_permission",a,s.join(",")).then(function(t){t.success&&(n.departmentSelectData=n.departmentSelectData.filter(function(t){return t.id!=a}),n.departmentSelection=n.departmentSelection.filter(function(t){return t.id!=a}))})},permissionSelectChange:function(t,e){this.permissionSelectDatas=t},confirmUser:function(){var t={};this.userSelectData=this.userSelection.reduce(function(e,n){return!t[n.userId]&&(t[n.userId]=e.push(n)),e},[])},confirmOrg:function(){var t={};this.orgSelectData=this.orgSelection.reduce(function(e,n){return!t[n.id]&&(t[n.id]=e.push(n)),e},[])},confirmDepartment:function(){var t={};this.departmentSelectData=this.departmentSelection.reduce(function(e,n){return!t[n.id]&&(t[n.id]=e.push(n)),e},[])},submitPermission:function(){var t=this,e=this.userSelectData.map(function(t){return t.userId}),n=this.orgSelectData.map(function(t){return t.id}),a=this.departmentSelectData.map(function(t){return t.id}),s=this.permissionSelectDatas.map(function(t){return t.id}),o={userId:e.join(","),roleId:a.join(","),groupId:n.join(","),permissionId:s.join(",")};"edit"===this.isEdit?Object(i.L)(e.join(","),a.join(","),n.join(","),s.join(","),this.appListId).then(function(e){if(e.success){t.$Message.success(e.message);var n=t.emitChange++;t.$emit("reGetData",n)}}):o&&Object(i.b)(o).then(function(e){if(e.success){t.$Message.success(e.message);var n=t.emitChange++;t.$emit("reGetData",n)}})},getData:function(){var t=this,e=this.appListId;Object(i.n)(e).then(function(e){t.allPermissionData=e.tableContent,t.allPermissionData.map(function(t){t.desc=V.a[t.resourceName]})})},modalVisibleChange:function(t){t||this.$emit("emitPermissionModal",{modal:!1})},onUserPageChange:function(t){var e=g()([{operator_1:"like",value_1:this.searchUserValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchUserValue,property_2:"userCode"}]);this.userCurrentPage=t,this.selectUserModal(e)},onOrgPageChange:function(t){var e=g()([{operator:"like",value:this.searchOrgValue,property:"name"}]);this.orgCurrentPage=t,this.selectOrgModal(e)},onDepPageChange:function(t){var e=g()([{operator:"like",value:this.searchDepValue,property:"name"}]);this.depCurrentPage=t,this.selectPositionModal(e)}},mounted:function(){this.getData()}},N={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:"应用权限",width:"1000","mask-closable":!1},on:{"on-ok":t.submitPermission,"on-visible-change":t.modalVisibleChange},model:{value:t.showPermissionModal,callback:function(e){t.showPermissionModal=e},expression:"showPermissionModal"}},[n("div",[n("Row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:8}},[n("Col",{attrs:{span:"4"}},[n("Button",{attrs:{type:"info",shape:"circle"},on:{click:t.selectUserModal}},[t._v("选择用户")])],1),t._v(" "),n("Col",{attrs:{span:"4"}},[n("Button",{attrs:{type:"info",shape:"circle"},on:{click:t.selectOrgModal}},[t._v("选择组织")])],1),t._v(" "),n("Col",{attrs:{span:"4"}},[n("Button",{attrs:{type:"info",shape:"circle"},on:{click:t.selectPositionModal}},[t._v("选择职位")])],1)],1),t._v(" "),n("Row",{attrs:{gutter:8}},[n("Col",{staticClass:"permission-tab",attrs:{span:"12"}},[n("Row",{staticStyle:{"margin-top":"10px"}},[n("Col",{attrs:{span:"3"}},[n("b",{staticClass:"permission-title"},[t._v("用户")])]),t._v(" "),n("Col",{staticClass:"member-body",attrs:{span:"21"}},t._l(t.userSelectData,function(e,i){return n("Tag",{key:i,attrs:{userId:e.userId,closable:"",color:"warning"},on:{"on-close":t.deleteUser}},[t._v("\n          "+t._s(e.nickname)+"\n        ")])}))],1),t._v(" "),n("Row",{staticClass:"permission-line"}),t._v(" "),n("Row",[n("Col",{attrs:{span:"3"}},[n("b",{staticClass:"permission-title"},[t._v("组织")])]),t._v(" "),n("Col",{staticClass:"member-body",attrs:{span:"21"}},t._l(t.orgSelectData,function(e,i){return n("Tag",{key:i,attrs:{orgId:e.id,closable:"",color:"success"},on:{"on-close":t.deleteOrg}},[t._v("\n          "+t._s(e.name)+"\n        ")])}))],1),t._v(" "),n("Row",{staticClass:"permission-line"}),t._v(" "),n("Row",[n("Col",{attrs:{span:"3"}},[n("b",{staticClass:"permission-title"},[t._v("职位")])]),t._v(" "),n("Col",{staticClass:"member-body",attrs:{span:"21"}},t._l(t.departmentSelectData,function(e,i){return n("Tag",{key:i,attrs:{depId:e.id,closable:"",color:"primary"},on:{"on-close":t.deleteDepartment}},[t._v("\n          "+t._s(e.name)+"\n        ")])}))],1)],1),t._v(" "),n("Col",{attrs:{span:"12"}},[n("Table",{ref:"actionRef",attrs:{stripe:"",height:"350",columns:t.allPermissionColumns,size:"small",data:t.allPermissionData},on:{"on-selection-change":t.permissionSelectChange}})],1)],1),t._v(" "),n("Modal",{attrs:{title:"用户选择","mask-closable":!1,width:"800",transfer:!1},on:{"on-ok":t.confirmUser,"on-cancel":t.cancelSelectUser},model:{value:t.showUserModal,callback:function(e){t.showUserModal=e},expression:"showUserModal"}},[n("div",{staticClass:"app-search"},[n("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"名称或工号搜索"},on:{"on-search":t.userFilter},model:{value:t.searchUserValue,callback:function(e){t.searchUserValue=e},expression:"searchUserValue"}}),t._v(" "),n("p",{staticClass:"app-search-icon",on:{click:t.userFilter}},[n("Button",{attrs:{type:"primary",size:"small"}},[t._v("查询")])],1)],1),t._v(" "),n("Table",{attrs:{height:"400",stripe:"",size:"small",loading:t.userLoading,columns:t.userColumns,data:t.userData},on:{"on-select-cancel":t.selectUserCancel,"on-selection-change":t.selectUserClick}}),t._v(" "),n("div",{staticClass:"user-page"},[n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:t.userTotal,current:t.userCurrentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onUserPageChange}})],1)])],1),t._v(" "),n("Modal",{attrs:{title:"组织选择","mask-closable":!1,transfer:!1},on:{"on-ok":t.confirmOrg,"on-cancel":t.cancelSelectOrg},model:{value:t.showOrgModal,callback:function(e){t.showOrgModal=e},expression:"showOrgModal"}},[n("div",{staticClass:"app-search"},[n("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索"},on:{"on-search":t.orgFilter},model:{value:t.searchOrgValue,callback:function(e){t.searchOrgValue=e},expression:"searchOrgValue"}}),t._v(" "),n("p",{staticClass:"app-search-icon",on:{click:t.orgFilter}},[n("Button",{attrs:{type:"primary",size:"small"}},[t._v("查询")])],1)],1),t._v(" "),n("Table",{attrs:{height:"400",stripe:"",size:"small",loading:t.orgLoading,columns:t.orgColumns,data:t.orgData},on:{"on-select-cancel":t.selectOrgCancel,"on-selection-change":t.selectOrgClick}}),t._v(" "),n("div",{staticClass:"user-page"},[n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:t.orgTotal,current:t.orgCurrentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onOrgPageChange}})],1)])],1),t._v(" "),n("Modal",{attrs:{title:"职位选择","mask-closable":!1,transfer:!1},on:{"on-ok":t.confirmDepartment,"on-cancel":t.cancelSelectDep},model:{value:t.showDepartmentModal,callback:function(e){t.showDepartmentModal=e},expression:"showDepartmentModal"}},[n("div",{staticClass:"app-search"},[n("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索"},on:{"on-search":t.depFilter},model:{value:t.searchDepValue,callback:function(e){t.searchDepValue=e},expression:"searchDepValue"}}),t._v(" "),n("p",{staticClass:"app-search-icon",on:{click:t.depFilter}},[n("Button",{attrs:{type:"primary",size:"small"}},[t._v("查询")])],1)],1),t._v(" "),n("Table",{attrs:{height:"400",stripe:"",size:t.tableSize,loading:t.depLoading,columns:t.departmentColumns,data:t.departmentData},on:{"on-select-cancel":t.selectDepCancel,"on-selection-change":t.selectDepartmentClick}}),t._v(" "),n("div",{staticClass:"user-page"},[n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:t.depTotal,current:t.depCurrentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onDepPageChange}})],1)])],1)],1)])},staticRenderFns:[]};var z={name:"permissionSource",components:{ActionModal:n("VU/8")(L,N,!1,function(t){n("rvON")},null,null).exports},props:{enabledForbidden:Number,isAdmin:Boolean},data:function(){return{listId:this.$route.params.listId,showActionModal:!1,isAdminTrue:!1,isEdit:"",editActionData:{},memberType:"",actionData:[],isModalConfirm:1e3,columns:[{title:"已授权用户",key:"objNames",render:function(t,e){var n=e.row.objNames?JSON.parse(e.row.objNames):[],i=[];if(n.length>0)return n.forEach(function(e,n){var a;a=t("span",{style:{}},e.name+"; "),i.push(a)}),t("div",i)}},{title:"动作",key:"source",render:function(t,e){var n=e.row.action?JSON.parse(e.row.action):[],i=[];if(n.length>0)return n.forEach(function(e,n){var a=void 0;for(var s in e)a=t("span",{style:{margin:"0px 5px"}},e[s]);i.push(a)}),t("div",i)}}],userSources:[]}},watch:{isModalConfirm:function(){this.getActionData()},enabledForbidden:function(){this.getData()},isAdmin:function(t){var e=this,n={title:"操作",key:"list",align:"center",render:function(t,n){return t("div",[t("a",{on:{click:function(){e.deleteAllPermission(n,n.row.list)}}},"删除"),t("span",{style:{height:"20px",borderLeft:"1px solid #39f",margin:"0px 5px"}}),t("a",{on:{click:function(){"sys_user_permission"===n.row.list?e.memberType="user":"sys_role_permission"===n.row.list?e.memberType="role":e.memberType="group",e.isEdit="edit",e.editActionData=n.row,e.showActionModal=!0}}},"授权")])}};t?(this.isAdminTrue=!0,"操作"!==this.columns[this.columns.length-1].title&&this.columns.push(n)):(this.isAdminTrue=!1,"操作"===this.columns[this.columns.length-1].title&&this.columns.splice(this.columns.length-1,1))}},methods:{reGetData:function(t){this.isModalConfirm=t},showModal:function(){this.editActionData={},this.showActionModal=!0,this.isEdit=""},emitPermissionModal:function(){this.showActionModal=!1},getActionData:function(){var t=this,e=g()([{operator:"like",value:"操作",property:"type"}]);Object(i.q)(this.listId,e).then(function(e){t.userSources=e.tableContent})},isForbidden:function(t,e){var n=this,a=0===t.atype,s=void 0;s=a?-2:0,Object(i.a)(t.id,s).then(function(t){t.success&&(n.$Message.success(t.message),n.actionData[e].atype=s)})},deleteAllPermission:function(t,e){var n=this,a=this;a.$Modal.confirm({title:"确认",content:"确认删除此用户权限？",onOk:function(){var e,s=[],o=[],r=[],l=[];JSON.parse(t.row.action).forEach(function(t){for(var e in t)s.push(e)}),JSON.parse(t.row.objNames).forEach(function(t){"user"===t.type?o.push(t.id):"group"===t.type?r.push(t.id):l.push(t.id)}),e={user:o.join(","),group:r.join(","),role:l.join(","),multi:s.join(",")},Object(i.g)(e).then(function(t){t.success&&(a.$Message.success(t.message),n.getActionData())})}})},getData:function(){var t=this,e=this.listId;Object(i.n)(e).then(function(e){t.actionData=e.tableContent,t.actionData.map(function(t){t.desc=V.a[t.resourceName]})})}},created:function(){},mounted:function(){this.getActionData(),this.getData()}},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("Row",{staticClass:"app-action"},[n("Row",{staticClass:"app-action-title"},[n("h3",[t._v("动作  "),t.isAdminTrue?n("a",{on:{click:t.showModal}},[t._v("授权")]):t._e()])]),t._v(" "),n("div",{staticClass:"app-action-source"},[n("Row",{staticClass:"app-action-source-list"},t._l(t.actionData,function(e,i){return n("Col",{key:i,staticClass:"app-action-source-item",attrs:{span:"6"}},[n("Col",{staticClass:"app-action-source-item-check",attrs:{span:"2"}},[n("Checkbox",{attrs:{disabled:!t.isAdminTrue,value:0===e.permType},on:{"on-change":function(n){t.isForbidden(e,i)}}})],1),t._v(" "),n("Col",{staticClass:"app-action-source-item-content",attrs:{span:"21"}},[n("h3",[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"app-action-source-item-desc"},[t._v(t._s(e.desc))])])],1)})),t._v(" "),n("Row",[n("Table",{attrs:{columns:t.columns,data:t.userSources,size:"small"}})],1)],1)],1),t._v(" "),n("action-modal",{attrs:{modalStatis:t.showActionModal,isEdit:t.isEdit,memberType:t.memberType,editActionData:t.editActionData},on:{reGetData:t.reGetData,emitPermissionModal:t.emitPermissionModal}})],1)},staticRenderFns:[]};var q=n("VU/8")(z,B,!1,function(t){n("JrnK")},"data-v-76699986",null).exports,Y=n("Gu7T"),W=n.n(Y),H={name:"permissionModal",components:{},props:{modalStatis:{type:Boolean},permissionId:{type:[String,Number]},permissionData:{type:Array}},data:function(){return{appListId:this.$route.params.listId,selectUser:"",selectOrg:"",selectPosition:"",searchUserValue:"",searchOrgValue:"",searchDepValue:"",tableSize:"small",userTotal:0,orgTotal:0,depTotal:0,userCurrentPage:1,orgCurrentPage:1,depCurrentPage:1,pageSize:10,emitChange:0,userLoading:!0,orgLoading:!0,depLoading:!0,showUserModal:!1,showOrgModal:!1,showDepartmentModal:!1,showPermissionModal:!1,sameUserData:[],userSelectData:[],orgSelectData:[],departmentSelectData:[],userColumns:[],userData:[],orgColumns:[],orgData:[],departmentColumns:[],departmentData:[],userSelection:[],orgSelection:[],departmentSelection:[]}},watch:{modalStatis:function(t,e){var n=this;this.showPermissionModal=t,this.userSelectData=[],this.orgSelectData=[],this.departmentSelectData=[],this.userSelection=[],this.orgSelection=[],this.departmentSelection=[],t&&(this.orgSelectData=this.permissionData.filter(function(t){return"group"===t.type}),this.orgSelection=this.orgSelectData,this.departmentSelectData=this.permissionData.filter(function(t){return"role"===t.type}),this.departmentSelection=this.departmentSelectData,this.permissionData.forEach(function(t){"user"===t.type&&n.userSelectData.push({nickname:t.name,userId:t.id,type:t.type})}),this.userSelection=this.userSelectData)}},permissionData:function(t,e){},methods:{userFilter:function(){var t=g()([{operator_1:"like",value_1:this.searchUserValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchUserValue,property_2:"userCode"}]);this.selectUserModal(t)},orgFilter:function(){var t=g()([{operator:"like",value:this.searchOrgValue,property:"name"}]);this.selectOrgModal(t)},depFilter:function(){var t=g()([{operator:"like",value:this.searchDepValue,property:"name"}]);this.selectPositionModal(t)},confirmMember:function(){},selectUserModal:function(t){var e=this;this.showUserModal=!0,this.userColumns=[{type:"selection",width:60,align:"center"},{title:"头像",key:"photo",width:80,render:function(t,e){return t("div",[t("Avatar",{props:{src:e.row.photo}})])}},{title:"姓名",key:"nickname"},{title:"工号",key:"userCode"},{title:"手机",key:"mobile"},{title:"邮箱",key:"email"}],this.userLoading=!0,Object(i.o)(this.userCurrentPage,this.pageSize,t).then(function(t){e.userData=t.tableContent,e.sameUserData=t.tableContent,e.userTotal=t.dataCount,e.userLoading=!1})},selectOrgModal:function(t){var e=this;this.showOrgModal=!0,this.orgColumns=[{type:"selection",width:60,align:"center"},{title:"名称",key:"name"}],this.orgLoading=!0,Object(i.m)(this.orgCurrentPage,this.pageSize,t).then(function(t){e.orgData=t.tableContent,e.orgTotal=t.dataCount,e.orgLoading=!1})},selectPositionModal:function(t){var e=this;this.showDepartmentModal=!0,this.departmentColumns=[{type:"selection",width:60,align:"center"},{title:"名称",key:"name"}],this.depLoading=!0,Object(i.l)(this.depCurrentPage,this.pageSize,t).then(function(t){e.departmentData=t.tableContent,e.depTotal=t.dataCount,e.depLoading=!1})},selectUserClick:function(t,e){var n=this;this.userSelection.length>0?t.forEach(function(t,e){n.userSelection.push(t)}):this.userSelection=t},selectUserCancel:function(t,e){var n=this;this.userSelection.forEach(function(t,i){t.userId===e.userId&&n.userSelection.splice(i,1)})},selectOrgClick:function(t,e){var n=this;this.orgSelection.length>0?t.forEach(function(t,e){n.orgSelection.push(t)}):this.orgSelection=t},selectOrgCancel:function(t,e){var n=this;this.orgSelection.forEach(function(t,i){t.id===e.id&&n.orgSelection.splice(i,1)})},selectDepartmentClick:function(t,e){var n=this;this.departmentSelection.length>0?t.forEach(function(t,e){n.departmentSelection.push(t)}):this.departmentSelection=t},selectDepCancel:function(t,e){var n=this;this.departmentSelection.forEach(function(t,i){t.id===e.id&&n.departmentSelection.splice(i,1)})},deleteUser:function(t){var e=t.target.parentElement.getAttribute("userid");this.userSelectData=this.userSelectData.filter(function(t){return t.userId!=e}),this.userSelection=this.userSelection.filter(function(t){return t.userId!=e})},deleteOrg:function(t){var e=t.target.parentElement.getAttribute("orgid");this.orgSelectData=this.orgSelectData.filter(function(t){return t.id!=e}),this.orgSelection=this.orgSelection.filter(function(t){return t.id!=e})},deleteDepartment:function(t){var e=t.target.parentElement.getAttribute("depid");this.departmentSelectData=this.departmentSelectData.filter(function(t){return t.id!=e}),this.departmentSelection=this.departmentSelection.filter(function(t){return t.id!=e})},confirmUser:function(){var t={};this.userSelectData=this.userSelection.reduce(function(e,n){return!t[n.userId]&&(t[n.userId]=e.push(n)),e},[])},confirmOrg:function(){var t={};this.orgSelectData=this.orgSelection.reduce(function(e,n){return!t[n.id]&&(t[n.id]=e.push(n)),e},[])},confirmDepartment:function(){var t={};this.departmentSelectData=this.departmentSelection.reduce(function(e,n){return!t[n.id]&&(t[n.id]=e.push(n)),e},[])},submitPermission:function(){var t=this,e=this.userSelectData.map(function(t){return t.userId}).join(","),n=this.orgSelectData.map(function(t){return t.id}).join(","),a=this.departmentSelectData.map(function(t){return t.id}).join(",");Object(i.J)(this.permissionId,e,n,a).then(function(e){if(e.success){t.$Message.success(e.message);var n=t.emitChange++;t.$emit("reGetData",n)}else t.$Message.error(e.message)})},modalVisibleChange:function(t){t||this.$emit("emitPermissionModal",{modal:!1})},onUserPageChange:function(t){var e=g()([{operator_1:"like",value_1:this.searchUserValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchUserValue,property_2:"userCode"}]);this.userCurrentPage=t,this.selectUserModal(e)},onOrgPageChange:function(t){var e=g()([{operator:"like",value:this.searchOrgValue,property:"name"}]);this.orgCurrentPage=t,this.selectOrgModal(e)},onDepPageChange:function(t){var e=g()([{operator:"like",value:this.searchDepValue,property:"name"}]);this.depCurrentPage=t,this.selectPositionModal(e)}}},X={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:"视图权限",width:"600","mask-closable":!1},on:{"on-ok":t.submitPermission,"on-visible-change":t.modalVisibleChange},model:{value:t.showPermissionModal,callback:function(e){t.showPermissionModal=e},expression:"showPermissionModal"}},[n("div",[n("Row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:8}},[n("Col",{attrs:{span:"8"}},[n("Button",{attrs:{type:"info",shape:"circle"},on:{click:t.selectUserModal}},[t._v("选择用户")])],1),t._v(" "),n("Col",{attrs:{span:"8"}},[n("Button",{attrs:{type:"info",shape:"circle"},on:{click:t.selectOrgModal}},[t._v("选择组织")])],1),t._v(" "),n("Col",{attrs:{span:"8"}},[n("Button",{attrs:{type:"info",shape:"circle"},on:{click:t.selectPositionModal}},[t._v("选择职位")])],1)],1),t._v(" "),n("Row",{attrs:{gutter:8}},[n("Col",{staticClass:"permission-tab",attrs:{span:"24"}},[n("Row",{staticStyle:{"margin-top":"10px"}},[n("Col",{attrs:{span:"3"}},[n("b",{staticClass:"permission-title"},[t._v("用户")])]),t._v(" "),n("Col",{staticClass:"member-body",attrs:{span:"21"}},t._l(t.userSelectData,function(e,i){return n("Tag",{key:i,attrs:{userId:e.userId,closable:"",color:"warning"},on:{"on-close":t.deleteUser}},[t._v("\n          "+t._s(e.nickname)+"\n        ")])}))],1),t._v(" "),n("Row",{staticClass:"permission-line"}),t._v(" "),n("Row",[n("Col",{attrs:{span:"3"}},[n("b",{staticClass:"permission-title"},[t._v("组织")])]),t._v(" "),n("Col",{staticClass:"member-body",attrs:{span:"21"}},t._l(t.orgSelectData,function(e,i){return n("Tag",{key:i,attrs:{orgId:e.id,closable:"",color:"success"},on:{"on-close":t.deleteOrg}},[t._v("\n          "+t._s(e.name)+"\n        ")])}))],1),t._v(" "),n("Row",{staticClass:"permission-line"}),t._v(" "),n("Row",[n("Col",{attrs:{span:"3"}},[n("b",{staticClass:"permission-title"},[t._v("职位")])]),t._v(" "),n("Col",{staticClass:"member-body",attrs:{span:"21"}},t._l(t.departmentSelectData,function(e,i){return n("Tag",{key:i,attrs:{depId:e.id,closable:"",color:"primary"},on:{"on-close":t.deleteDepartment}},[t._v("\n          "+t._s(e.name)+"\n        ")])}))],1)],1)],1),t._v(" "),n("Modal",{attrs:{width:"800",title:"用户选择","mask-closable":!1,transfer:!1},on:{"on-ok":t.confirmUser},model:{value:t.showUserModal,callback:function(e){t.showUserModal=e},expression:"showUserModal"}},[n("div",{staticClass:"app-search"},[n("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"名称或工号搜索"},on:{"on-search":t.userFilter},model:{value:t.searchUserValue,callback:function(e){t.searchUserValue=e},expression:"searchUserValue"}}),t._v(" "),n("p",{staticClass:"app-search-icon",on:{click:t.userFilter}},[n("Button",{attrs:{type:"primary",size:"small"}},[t._v("查询")])],1)],1),t._v(" "),n("Table",{attrs:{height:"310",stripe:"",size:"small",loading:t.userLoading,columns:t.userColumns,data:t.userData},on:{"on-select-cancel":t.selectUserCancel,"on-select":t.selectUserClick,"on-select-all":t.selectUserClick}}),t._v(" "),n("div",{staticClass:"user-page"},[n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:t.userTotal,current:t.userCurrentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onUserPageChange}})],1)])],1),t._v(" "),n("Modal",{attrs:{title:"组织选择","mask-closable":!1,transfer:!1},on:{"on-ok":t.confirmOrg},model:{value:t.showOrgModal,callback:function(e){t.showOrgModal=e},expression:"showOrgModal"}},[n("div",{staticClass:"app-search"},[n("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索"},on:{"on-search":t.orgFilter},model:{value:t.searchOrgValue,callback:function(e){t.searchOrgValue=e},expression:"searchOrgValue"}}),t._v(" "),n("p",{staticClass:"app-search-icon",on:{click:t.orgFilter}},[n("Button",{attrs:{type:"primary",size:"small"}},[t._v("查询")])],1)],1),t._v(" "),n("Table",{attrs:{height:"310",stripe:"",size:"small",loading:t.orgLoading,columns:t.orgColumns,data:t.orgData},on:{"on-select-cancel":t.selectOrgCancel,"on-select":t.selectOrgClick,"on-select-all":t.selectOrgClick}}),t._v(" "),n("div",{staticClass:"user-page"},[n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:t.orgTotal,current:t.orgCurrentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onOrgPageChange}})],1)])],1),t._v(" "),n("Modal",{attrs:{title:"职位选择","mask-closable":!1,transfer:!1},on:{"on-ok":t.confirmDepartment},model:{value:t.showDepartmentModal,callback:function(e){t.showDepartmentModal=e},expression:"showDepartmentModal"}},[n("div",{staticClass:"app-search"},[n("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索"},on:{"on-search":t.depFilter},model:{value:t.searchDepValue,callback:function(e){t.searchDepValue=e},expression:"searchDepValue"}}),t._v(" "),n("p",{staticClass:"app-search-icon",on:{click:t.depFilter}},[n("Button",{attrs:{type:"primary",size:"small"}},[t._v("查询")])],1)],1),t._v(" "),n("Table",{attrs:{height:"310",stripe:"",size:t.tableSize,loading:t.depLoading,columns:t.departmentColumns,data:t.departmentData},on:{"on-select-cancel":t.selectDepCancel,"on-select":t.selectDepartmentClick,"on-select-all":t.selectDepartmentClick}}),t._v(" "),n("div",{staticClass:"user-page"},[n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:t.depTotal,current:t.depCurrentPage,"page-size":t.pageSize,size:"small","show-total":""},on:{"on-change":t.onDepPageChange}})],1)])],1)],1)])},staticRenderFns:[]};var G={name:"reportSource",components:{ReportModal:n("VU/8")(H,X,!1,function(t){n("dAjg")},null,null).exports},props:{appType:String,isAdmin:Boolean},data:function(){var t=this;return{listId:this.$route.params.listId,showReportModal:!1,isAdminTrue:!1,permissionId:"",columns:[{title:"报表名称",key:"title"},{title:"视图类型",key:"viewType",render:function(t,e){if("normal"===e.row.type)return t("span",{},"列表")}},{title:"已授权用户",key:"permissionList",render:function(t,e){var n=e.row.permissionList,i=[];if(n.length>0)return n.forEach(function(e,n){var a=t("span",{style:{margin:"0px 5px"}},e.name);i.push(a)}),t("div",i)}},{title:"默认视图",key:"isDefault",align:"center",render:function(e,n){var i=!1;return 1===n.row.isDefault&&(i=!0),e("Radio",{props:{value:i,disabled:!t.isAdminTrue},on:{"on-change":function(e){t.onClickDefaultView(n)}}})}}],reportSources:[],permissionData:[]}},watch:{isAdmin:function(t){var e=this,n={title:"操作",key:"list",align:"center",render:function(t,n){return t("div",[t("a",{on:{click:function(){e.deleteViews(n,n.index)}}},"删除"),t("span",{style:{height:"20px",borderLeft:"1px solid #39f",margin:"0px 5px"}}),t("a",{on:{click:function(){var t="/Site/index.html#appSetting/viewConfig/"+e.listId+"/"+n.row.viewId;window.top.location.href=t}}},"修改"),t("span",{style:{height:"20px",borderLeft:"1px solid #39f",margin:"0px 5px"}}),t("a",{on:{click:function(){e.permissionId=n.row.permissionId,e.showReportModal=!0,e.permissionData=n.row.permissionList}}},"授权")])}};t?(this.isAdminTrue=!0,"操作"!==this.columns[this.columns.length-1].title&&this.columns.push(n)):(this.isAdminTrue=!1,"操作"===this.columns[this.columns.length-1].title&&this.columns.splice(this.columns.length-1,1))}},methods:{emitPermissionModal:function(){this.showReportModal=!1},goCreateView:function(){window.top.location.href="/Site/index.html#appSetting/"+this.listId+"/"+this.appType+"/viewTypes"},reGetData:function(){this.getViewsData()},getViewsData:function(){var t=this;Object(i.y)(this.listId).then(function(e){e.forEach(function(t){t.users||(t.users=[]),t.roles||(t.roles=[]),t.groups||(t.groups=[]),t.permissionList=[].concat(W()(t.groups),W()(t.roles),W()(t.users))}),t.reportSources=e})},deleteViews:function(t,e){var n=this;if(1===this.reportSources.length)this.$Message.warning("不可删除唯一视图！");else if(1===t.row.isDefault){var a={viewId:t.row.viewId,listId:this.listId};this.$Modal.confirm({title:"确认",content:"确认删除此视图？",onOk:function(){Object(i.f)(a).then(function(t){if(t.success){n.reportSources.splice(e,1);var a={viewId:n.reportSources[0].viewId,listId:n.listId};Object(i.I)(a).then(function(t){t.success&&n.reloadViewData()})}})}})}else{var s={viewId:t.row.viewId,listId:this.listId};this.$Modal.confirm({title:"确认",content:"确认删除此视图？",onOk:function(){Object(i.f)(s).then(function(t){t.success&&(n.reportSources.splice(e,1),n.$Message.success(t.message))})}})}},reloadViewData:function(){var t=this;Object(i.y)(this.listId).then(function(e){e.forEach(function(t){t.permissionList=[].concat(W()(t.groups),W()(t.roles),W()(t.users))}),t.reportSources=e,t.reRenderDefaultView()})},onClickDefaultView:function(t){var e=this;this.$Modal.confirm({title:"确认",content:"确认设置此视图为默认视图？",onOk:function(){e.setDefaultViews(t)},onCancel:function(){e.reRenderDefaultView()}})},setDefaultViews:function(t){var e=this,n={viewId:t.row.viewId,listId:this.listId};Object(i.I)(n).then(function(t){t.success&&(e.$Message.success(t.message),e.reloadViewData())})},reRenderDefaultView:function(){var t=this;this.columns[3].render=function(e,n){var i=!1;return 1===n.row.isDefault&&(i=!0),e("Radio",{props:{value:i},on:{"on-change":function(){t.onClickDefaultView(n)}}})}}},mounted:function(){this.getViewsData()}},J={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-report"},[n("Row",{staticClass:"app-report-title"},[n("h3",[t._v("报表 "),t.isAdminTrue?n("a",{on:{click:t.goCreateView}},[t._v("添加报表")]):t._e()])]),t._v(" "),n("Row",{staticClass:"app-report-table"},[n("Table",{attrs:{columns:t.columns,data:t.reportSources,size:"small"}})],1),t._v(" "),n("report-modal",{attrs:{modalStatis:t.showReportModal,permissionId:t.permissionId,permissionData:t.permissionData},on:{emitPermissionModal:t.emitPermissionModal,reGetData:t.reGetData}})],1)},staticRenderFns:[]};var Q=n("VU/8")(G,J,!1,function(t){n("TTHX")},"data-v-0cd4afce",null).exports,Z={name:"formSource",components:{},props:{isAdmin:Boolean},data:function(){return{listId:this.$route.params.listId,isAdminTrue:!1}},watch:{isAdmin:function(t){this.isAdminTrue=!!t}},methods:{setForm:function(){window.open("/Form/index.html?viewDesign=true&list="+this.listId)}},created:function(){},mounted:function(){}},K={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-form"},[e("Row",{staticClass:"app-form-title"},[e("h3",[this._v("表单 "),this.isAdminTrue?e("a",{on:{click:this.setForm}},[this._v("表单设置")]):this._e()])])],1)},staticRenderFns:[]};var tt=n("VU/8")(Z,K,!1,function(t){n("huWx")},"data-v-5d0045f2",null).exports,et={name:"workflowSource",components:{},props:{isAdmin:Boolean},data:function(){var t=this;return{listId:this.$route.params.listId,isAdminTrue:!1,deleteRelationWorkflow:-1,columns:[{title:"工作流名称",key:"processName",align:"left"},{title:"触发动作",key:"triggerType",align:"left",render:function(t,e){return"create"===e.row.triggerType?t("span",{},"创建实例"):t("span",{},"修改实例")}},{title:"启用",key:"status",align:"left",render:function(e,n){return e("Checkbox",{props:{value:1===n.row.status,disabled:!t.isAdminTrue},on:{"on-change":function(e){t.updateWorkFlowStaus(n)}}})}}],workflows:[]}},watch:{isAdmin:function(t){var e=this,n={title:"操作",key:"list",align:"center",render:function(t,n){return t("div",[t("a",{on:{click:function(){e.deleteWorkflow(n.row,n.index)}}},"删除"),t("span",{style:{height:"20px",borderLeft:"1px solid #39f",margin:"0px 5px"}}),t("a",{on:{click:function(){window.open("/myflow/viewFlow.html?processId="+n.row.processId+"&listId="+e.listId+"&processCode="+n.row.processCode)}}},"修改")])}};t?(this.isAdminTrue=!0,"操作"!==this.columns[this.columns.length-1].title&&this.columns.push(n)):(this.isAdminTrue=!1,"操作"===this.columns[this.columns.length-1].title&&this.columns.splice(this.columns.length-1,1))}},methods:{getRelativeWorkflowData:function(){var t=this;Object(i.z)(this.listId).then(function(e){t.workflows=e})},deleteWorkflow:function(t,e){var n=this;this.$Modal.confirm({title:"确认",content:"确认删除此工作流？",onOk:function(){Object(i.i)(null,null,t.id).then(function(t){t.success&&(n.$Message.success(t.message),n.workflows.splice(e,1),n.deleteRelationWorkflow++)})}})},addWorkflow:function(){this.getRelativeWorkflowData()},updateWorkFlowStaus:function(t){var e=this,n=t.row,a="";a=1===n.status?"确认禁用该工作流？":"确认启用该工作流？",this.$Modal.confirm({title:"系统提示",content:a,onOk:function(){1===n.status?Object(i.i)(null,n.id).then(function(t){t.success&&(e.$Message.success(t.message),e.getRelativeWorkflowData())}):Object(i.i)(n.id).then(function(t){t.success&&(e.$Message.success(t.message),e.getRelativeWorkflowData())})}})},createWorkflow:function(t){window.open("/myflow/createWorkFlow.html?listId="+this.listId+"&triggerType="+t)}},created:function(){this.getRelativeWorkflowData()}},nt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-workflow"},[n("Row",{staticClass:"app-workflow-title"},[n("h3",[t._v("工作流  \n        "),t.isAdminTrue?n("Dropdown",{on:{"on-click":t.createWorkflow}},[n("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n              操作\n              "),n("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{attrs:{name:"create"}},[t._v("添加创建实例工作流")]),t._v(" "),n("DropdownItem",{attrs:{name:"update"}},[t._v("添加修改实例工作流")])],1)],1):t._e()],1)]),t._v(" "),n("Row",{staticClass:"app-workflow-table"},[n("Table",{attrs:{columns:t.columns,data:t.workflows,size:"small"}})],1)],1)},staticRenderFns:[]};var it={name:"permissionSource",components:{ActionManage:q,ReportView:Q,AppForm:tt,WorkFlow:n("VU/8")(et,nt,!1,function(t){n("zWHF")},"data-v-61eb777c",null).exports},props:{listId:String,appType:String,enabledForbidden:Number,isAdmin:Boolean,isAddress:Boolean},data:function(){return{}}},at={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-permission"},[n("action-manage",{attrs:{enabledForbidden:t.enabledForbidden,isAdmin:t.isAdmin}}),t._v(" "),n("report-view",{attrs:{appType:t.appType,isAdmin:t.isAdmin}}),t._v(" "),t.isAddress?t._e():n("app-form",{attrs:{isAdmin:t.isAdmin}}),t._v(" "),t.isAddress?t._e():n("work-flow",{attrs:{isAdmin:t.isAdmin}})],1)},staticRenderFns:[]};var st={name:"detail",components:{AppSubject:w,AppApi:A,AdmintrstorAssessment:j,PermissionSource:n("VU/8")(it,at,!1,function(t){n("7Y6Q")},null,null).exports,AppInfo:b,LogInstance:m,RelatedApp:M},data:function(){return{listId:this.$route.params.listId,appData:{},enforData:[],isAdmin:!1,isCompanyAdmin:!1,isAddress:!1,appType:"",enabledForbidden:-1}},methods:{enabledForbiddenAppPermission:function(){this.enabledForbidden++},changeAdmin:function(){this.getAppInfoDatas()},getAppInfoDatas:function(){var t=this,e=this.listId,n=this.$currentUser,a=[];Object(i.x)(e).then(function(e){t.appData=e[0],t.appType=t.appData.type,n.isSysRoleList.forEach(function(t){a.push(t.id)}),n.userId==t.appData.administratorId&&/1/.test(a)?(t.isAdmin=!0,t.isCompanyAdmin=!0):n.userId==t.appData.administratorId?t.isAdmin=!0:/1/.test(a)?(t.isAdmin=!0,t.isCompanyAdmin=!0):(t.isAdmin=!1,t.isCompanyAdmin=!1),"hr"===t.appData.type&&(t.isAddress=!0)})},reloadData:function(){this.getAppInfoDatas()}},created:function(){this.getAppInfoDatas()}},ot={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-details"},[n("app-info",{attrs:{listId:this.$route.params.listId,enforData:t.enforData,isAdmin:t.isAdmin,isCompanyAdmin:t.isCompanyAdmin,appData:t.appData},on:{reloadData:t.reloadData,changeAdmin:t.changeAdmin,enabledForbiddenAppPermission:t.enabledForbiddenAppPermission}}),t._v(" "),n("div",{staticClass:"rfd-tab"},[n("Tabs",{staticClass:"rfd-tab-warp",attrs:{value:"name1"}},[n("TabPane",{attrs:{label:"一般",name:"name1"}},[n("log-instance",{attrs:{isAdmin:t.isAdmin,isAddress:t.isAddress}})],1),t._v(" "),n("TabPane",{attrs:{label:"互动",name:"name2"}},[n("admintrstor-assessment",{attrs:{isAdmin:t.isAdmin}})],1),t._v(" "),n("TabPane",{attrs:{label:"资源",name:"name3"}},[n("permission-source",{attrs:{appType:t.appType,isAdmin:t.isAdmin,isAddress:t.isAddress,enabledForbidden:t.enabledForbidden}})],1),t._v(" "),n("TabPane",{attrs:{label:"连接",name:"name4"}},[n("div",{staticClass:"app-sub"},[t.isAddress?t._e():n("app-subject",{attrs:{isAdmin:t.isAdmin}})],1),t._v(" "),t.isAddress?t._e():n("related-app",{attrs:{isAdmin:t.isAdmin}}),t._v(" "),n("app-api")],1)],1)],1)],1)},staticRenderFns:[]};var rt=n("VU/8")(st,ot,!1,function(t){n("XnzV")},"data-v-04a30334",null);e.default=rt.exports},huWx:function(t,e){},mPxM:function(t,e){},rvON:function(t,e){},zWHF:function(t,e){}});
//# sourceMappingURL=7.f62f05f7092efa7f2825.js.map