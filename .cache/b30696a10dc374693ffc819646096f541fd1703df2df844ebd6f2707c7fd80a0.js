{"source":"webpackJsonp([42],{\"6I65\":function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=a(\"mvHQ\"),s=a.n(n),i=a(\"UzZq\"),o={name:\"FlowtaskAll\",data:function(){var a=this;return{columns:[{title:\"任务编号\",key:\"taskId\",width:90,render:function(e,t){var a=!0;return 1===t.row.type&&(a=!1),e(\"div\",[e(\"Badge\",{props:{dot:a},style:{marginRight:\"5px\",paddingBottom:\"8px\"}}),e(\"span\",{},t.row.taskId)])}},{title:\"交易号\",slot:\"businessKey\",width:160},{title:\"工作流节点名称\",key:\"nodeName\",width:140},{title:\"当前审批职位\",key:\"assigneeRoleName\",width:160},{title:\"当前审批人\",key:\"assigneeName\",width:160},{title:\"任务接收时间\",key:\"crtTime\",width:150},{title:\"已过小时数\",key:\"pastTimeHour\",width:100,render:function(e,t){return e(\"span\",{},a.calcLeadTime(t.row.crtTime,!0))}},{title:\"已过时间\",key:\"pastTime\",width:150,render:function(e,t){return e(\"span\",{},a.calcLeadTime(t.row.crtTime))}},{title:\"应用名称\",key:\"processName\",width:150},{title:\"经办人\",key:\"handlerName\",width:80},{title:\"发起人\",key:\"crtName\",width:80}],data:[],pageInfo:{limit:30,page:1,total:0,filter:[]},searchkeywords:\"\",tableHeight:1}},methods:{getFlowAllTasks:function(){var t=this;this.pageInfo.filter=s()([{operator:\"like\",value:this.searchkeywords,property:\"businessKey\"}]),Object(i.b)(this.pageInfo).then(function(e){t.data=e.tableContent,t.pageInfo.total=e.dataCount})},handlePageChange:function(e){this.pageInfo.page=e,this.getFlowAllTasks()},handlePageSizeChange:function(e){this.pageInfo.limit=e,this.getFlowAllTasks()},handleSearch:function(){this.pageInfo.page=1,this.getFlowAllTasks()},calcLeadTime:function(e,t){var a=new Date(e.replace(/-/g,\"/\")),n=(new Date).getTime()-a.getTime(),s=Math.floor(n/864e5),i=n%864e5,o=Math.floor(i/36e5),l=i%36e5,r=Math.floor(l/6e4),c=l%6e4,h=Math.round(c/1e3);return t?24*s+o+\"时\":s+\"天\"+o+\"时\"+r+\"分\"+h+\"秒\"},subscribeMessage:function(){var t=this;this.$deepstream.event.subscribe(\"taskChange/\"+this.$currentUser.userId,function(e){t.getFlowAllTasks()})}},mounted:function(){var e=this;this.getFlowAllTasks(),this.subscribeMessage(),this.tableHeight=document.body.clientHeight-200,window.onresize=function(){e.tableHeight=document.body.clientHeight-200}}},l=a(\"K5AW\"),r=a.n(l);var c=function(e){a(\"CkO8\")},h=a(\"VU/8\")(o,r.a,!1,c,\"data-v-2d7d994b\",null);t.default=h.exports},CkO8:function(e,t){},K5AW:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,n=a._self._c||e;return n(\"div\",{staticClass:\"alltask\"},[n(\"div\",{staticClass:\"alltask-header\"},[a._v(\"\\n        所有工作流任务\\n    \")]),a._v(\" \"),n(\"div\",{staticClass:\"alltask-content\"},[n(\"div\",{staticClass:\"alltask-content-container shadow\"},[n(\"div\",{staticClass:\"alltask-content-container-toolbar\"},[n(\"Input\",{staticClass:\"alltask-content-container-toolbar-search\",attrs:{search:\"\",placeholder:\"输入交易号查询\"},on:{\"on-enter\":a.handleSearch,\"on-change\":a.handleSearch},model:{value:a.searchkeywords,callback:function(e){a.searchkeywords=e},expression:\"searchkeywords\"}})],1),a._v(\" \"),n(\"Table\",{staticClass:\"alltask-content-table\",attrs:{columns:a.columns,data:a.data,height:a.tableHeight},scopedSlots:a._u([{key:\"businessKey\",fn:function(e){var t=e.row;return[n(\"a\",{attrs:{href:\"/Form/index.html?data=\"+t.businessKey,target:\"_blank\"}},[a._v(a._s(t.businessKey))])]}}])}),a._v(\" \"),n(\"Page\",{staticClass:\"alltask-content-page\",attrs:{total:a.pageInfo.total,\"page-size\":a.pageInfo.limit,current:a.pageInfo.page,\"show-total\":\"\",size:\"small\",\"show-elevator\":\"\",\"show-sizer\":\"\",\"prev-text\":\"上一页\",\"next-text\":\"下一页\"},on:{\"on-page-size-change\":a.handlePageSizeChange,\"on-change\":a.handlePageChange}})],1)])])},staticRenderFns:[]}}});"}