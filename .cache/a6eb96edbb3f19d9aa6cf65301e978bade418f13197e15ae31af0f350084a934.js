{"source":"webpackJsonp([7],{UeNA:function(e,t){},jdbd:function(e,t){e.exports={render:function(){var s=this,e=s.$createElement,o=s._self._c||e;return o(\"div\",{staticClass:\"knowledge\"},[o(\"Row\",{staticClass:\"knowledge-form\"},[o(\"Form\",{ref:\"formValidate\",attrs:{\"label-width\":120,model:s.knowledgeForm,rules:s.ruleValidate}},[o(\"FormItem\",{attrs:{label:\"\"}},[o(\"Row\",[o(\"Col\",{staticStyle:{\"margin-left\":\"-121px\"},attrs:{span:\"12\"}},[o(\"FormItem\",{attrs:{prop:\"title\",label:\"标题:\"}},[o(\"Input\",{staticStyle:{width:\"300px\"},model:{value:s.knowledgeForm.title,callback:function(e){s.$set(s.knowledgeForm,\"title\",e)},expression:\"knowledgeForm.title\"}})],1)],1),s._v(\" \"),o(\"Col\",{attrs:{span:\"12\"}},[o(\"FormItem\",{attrs:{prop:\"type\",label:\"分类:\"}},[o(\"Select\",{ref:\"typeSelect\",staticStyle:{width:\"300px\"},attrs:{transfer:!1},model:{value:s.knowledgeForm.type,callback:function(e){s.$set(s.knowledgeForm,\"type\",e)},expression:\"knowledgeForm.type\"}},[s._l(s.typeList,function(t,a){return o(\"Option\",{key:t.id,attrs:{value:t.value}},[s._v(\"\\n                          \"+s._s(t.name)+\"\\n                          \"),o(\"span\",{staticClass:\"type-edit\",on:{click:function(e){e.stopPropagation(),s.deleteType(t,a)}}},[o(\"Icon\",{attrs:{type:\"md-close\"}})],1)])}),s._v(\" \"),o(\"Option\",{attrs:{value:\"addType\"}},[o(\"span\",{staticClass:\"add-type\",on:{click:s.showAddTypeModal}},[o(\"Icon\",{attrs:{type:\"md-add\"}})],1)])],2)],1)],1)],1)],1),s._v(\" \"),o(\"FormItem\",{staticStyle:{\"margin-bottom\":\"65px\"},attrs:{label:\"内容:\",prop:\"content\"}},[o(\"div\",{ref:\"editor\",staticClass:\"knowledge-editor\"})])],1)],1),s._v(\" \"),o(\"Row\",{staticClass:\"knowledge-save\"},[o(\"span\",{staticClass:\"knowledge-save-btn\",on:{click:function(e){s.saveKnowledge(\"save\")}}},[s._v(\"保存\")]),s._v(\" \"),o(\"span\",{staticClass:\"knowledge-save-btn\",on:{click:s.saveKnowledge}},[s._v(\"保存并继续添加\")]),s._v(\" \"),o(\"span\",{staticClass:\"knowledge-save-btn\",on:{click:s.goBack}},[s._v(\"返回\")])]),s._v(\" \"),o(\"Modal\",{attrs:{title:\"添加分类\",styles:{top:\"20px\"},transfer:!1},model:{value:s.showModal,callback:function(e){s.showModal=e},expression:\"showModal\"}},[o(\"Form\",{ref:\"typeValidate\",attrs:{model:s.typeValidate,rules:s.typeRuleValidate,\"label-width\":80}},[o(\"FormItem\",{attrs:{label:\"名称\",prop:\"name\"}},[o(\"Input\",{attrs:{autofocus:\"\"},model:{value:s.typeValidate.name,callback:function(e){s.$set(s.typeValidate,\"name\",e)},expression:\"typeValidate.name\"}})],1)],1),s._v(\" \"),o(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"Button\",{attrs:{type:\"primary\"},on:{click:s.confirmAdd}},[s._v(\"确定\")]),s._v(\" \"),o(\"Button\",{attrs:{type:\"default\"},on:{click:s.cancelAdd}},[s._v(\"取消\")])],1)],1)],1)},staticRenderFns:[]}},psz9:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var s=a(\"JUNF\"),o=a(\"sYY+\"),n=a.n(o),i={name:\"KnowledgeDetail\",components:{},data:function(){return{knowledgeId:this.$route.params.id,isEdit:!1,showModal:!1,typeValidate:{name:\"\",value:\"\"},typeRuleValidate:{name:[{required:!0,message:\"请输入名称\",trigger:\"blur\"}]},knowledgeForm:{title:\"\",type:\"\",content:\"\"},typeList:[],ruleValidate:{title:[{required:!0,message:\"请输入标题\",trigger:\"blur\"}],type:[{required:!0,message:\"请选择分类\",trigger:\"change\"}],content:[{required:!0,message:\" \",trigger:\"blur\"}]}}},methods:{showAddTypeModal:function(){this.showModal=!0,this.$refs.typeValidate.resetFields(),this.typeValidate.edit=!1},cancelAdd:function(){this.showModal=!1},confirmAdd:function(){var t=this,a={};this.$refs.typeValidate.validate(function(e){e&&((a=t.typeValidate.edit?{name:t.typeValidate.name,value:\"KnowledgeBaseType\",id:t.typeValidate.id}:{name:t.typeValidate.name,value:\"KnowledgeBaseType\"})&&Object(s.g)(a).then(function(e){e.success&&(t.$Message.success(e.message),t.getAllKnowledgeTypeData())}).catch(function(e){t.$Message.error(e.data.message)}),t.showModal=!1)})},editType:function(e,t){this.$refs.typeSelect.hideMenu(),this.typeValidate.id=e.id,this.typeValidate.name=e.name,this.typeValidate.edit=!0,this.showModal=!0},deleteType:function(t,e){var a=this;this.$refs.typeSelect.hideMenu(),this.$Modal.confirm({title:\"确认\",content:\"确认删除<b style=color:#e4393c;>\"+t.name+\"</b>么？\",onOk:function(){Object(s.b)(t.id).then(function(e){e.success&&(a.$Message.success(e.message),a.knowledgeForm.type===t.value&&(a.knowledgeForm.type=\"\"),a.getAllKnowledgeTypeData())}).catch(function(e){a.$Message.error(e.data.message)})}})},goBack:function(){this.knowledgeId?this.$router.push({path:\"/knowledge/view/\"+this.knowledgeId}):this.$router.push({path:\"/knowledge/list\"})},saveKnowledge:function(t){var a=this;\"<p><br></p>\"===this.editor.txt.html()?this.$Message.error(\"必填项请输入！\"):this.knowledgeForm.content=this.editor.txt.html(),this.$refs.formValidate.validate(function(e){e&&(a.knowledgeId?(a.knowledgeForm.id=a.knowledgeId,Object(s.h)(a.knowledgeForm).then(function(e){e.success&&(a.$Message.success(e.message),\"save\"===t?a.$router.push({path:\"/knowledge/list\"}):(a.knowledgeId=!1,a.knowledgeForm.content=\"\",a.$refs.formValidate.resetFields(),a.editor.txt.html(\"<span></span>\")))}).catch(function(e){a.$Message.error(e.data.message)})):Object(s.f)(a.knowledgeForm).then(function(e){e.success&&(a.$Message.success(e.message),\"save\"===t?a.$router.push({path:\"/knowledge/list\"}):(a.knowledgeForm.content=\"\",a.$refs.formValidate.resetFields(),a.editor.txt.html(\"<span></span>\")))}).catch(function(e){a.$Message.error(e.data.message)}))})},getAllKnowledgeTypeData:function(){var t=this;Object(s.d)().then(function(e){t.typeList=e})},getKnowledgeDataById:function(){var t=this;this.knowledgeId&&Object(s.e)(this.knowledgeId).then(function(e){t.knowledgeForm.title=e.title,t.knowledgeForm.type=e.type,t.knowledgeForm.content=e.content,t.createEditor(e.content)})},createEditor:function(e){var t=this,a=e||\"\";this.editor=new n.a(this.$refs.editor),this.editor.customConfig.onchange=function(e){t.knowledgeForm.content=e},this.editor.customConfig.uploadImgShowBase64=!0,this.editor.customConfig.zIndex=100,this.editor.create(),this.editor.$textContainerElem[0].style.height=\"400px\",this.editor.txt.html(\"<span>\"+a+\"</span>\")}},mounted:function(){this.createEditor()},created:function(){this.getAllKnowledgeTypeData(),this.getKnowledgeDataById()}},l=a(\"jdbd\"),d=a.n(l);var r=function(e){a(\"UeNA\")},c=a(\"VU/8\")(i,d.a,!1,r,null,null);t.default=c.exports}});"}