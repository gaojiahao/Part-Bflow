{"version":3,"sources":["webpack:///src/components/Shape.vue","webpack:///./src/components/Shape.vue?86fa","webpack:///./src/components/Shape.vue","webpack:///src/views/flow/technologyGraph.vue","webpack:///./src/views/flow/technologyGraph.vue?ed4e","webpack:///./src/views/flow/technologyGraph.vue"],"names":["components_Shape","render","_h","this","$createElement","_self","_c","staticClass","attrs","width","height","rx","ry","x","xAxion","y","yAxion","stroke-width","fill","color","stroke","borderColor","on","click","changeLineStyle","staticRenderFns","src_components_Shape","__webpack_require__","normalizeComponent","data","methods","$emit","props","ssrContext","technologyGraph","name","components","Shape","processRouteCode","$route","params","spinShow","screenWidth","document","body","clientWidth","pointList","ProcessAndProcedureData","defaultxAxion","defaultyAxion","graphSpace","defaultShapeWidth","showNumber","watch","val","Math","floor","drawGraph","_this","yCount","xCount","nodePointXY","nextPoint","nextPointX","nextPointY","i","length","pointX","pointY","procedureCode","forEach","item","itemIndex","underProcedureCode","split","Number","push","id","value","getProcessAndProcedure","_this2","Object","flowService","then","res","catch","error","$Message","mounted","_this3","mainMaxHeight","clientHeight","window","getElementsByClassName","style","maxHeight","onresize","flow_technologyGraph","_vm","size","fix","_e","_v","xmlns","version","result","in","dx","dy","type","values","stdDeviation","in2","mode","markerUnits","markerWidth","markerHeight","viewBox","refX","refY","orient","staticStyle","d","x1","y1","x2","y2","stop-color","stop-opacity","offset","_l","key","xlink:href","photo","font-size","_s","spName","cx","cy","r","font-weight","line","index","points","marker-end","technologyGraph_Component","technologyGraph_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/10.a2dab2ea92fc8bc8417f.js","sourcesContent":["<template>\r\n   <rect :width=\"width\" :height=\"height\"\r\n        rx=\"8\" \r\n        ry='8'\r\n        :x=\"xAxion\" :y=\"yAxion\" stroke-width='2' \r\n        :fill=\"color\" \r\n        :stroke=\"borderColor\" \r\n        class='cirle'        \r\n        @click='changeLineStyle'\r\n        >\r\n    </rect>   \r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{}\r\n\r\n    },\r\n\r\n    methods:{\r\n        changeLineStyle:function(){\r\n            this.$emit('changeLineStyle')\r\n        }\r\n    },\r\n\r\n    props:['shape','xAxion','yAxion','color','borderColor','width','height']\r\n};\r\n</script>\r\n\r\n<style>\r\n/* .cirle:hover{\r\n    stroke:red;\r\n    cursor: pointer;\r\n} */\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Shape.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('rect',{staticClass:\"cirle\",attrs:{\"width\":_vm.width,\"height\":_vm.height,\"rx\":\"8\",\"ry\":\"8\",\"x\":_vm.xAxion,\"y\":_vm.yAxion,\"stroke-width\":\"2\",\"fill\":_vm.color,\"stroke\":_vm.borderColor},on:{\"click\":_vm.changeLineStyle}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-78e0458f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/Shape.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/.13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-78e0458f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/.13.7.2@vue-loader/lib/selector?type=styles&index=0!./Shape.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/.13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/.13.7.2@vue-loader/lib/selector?type=script&index=0!./Shape.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/.13.7.2@vue-loader/lib/selector?type=script&index=0!./Shape.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/.13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-78e0458f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/.13.7.2@vue-loader/lib/selector?type=template&index=0!./Shape.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Shape.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div class=\"rfd-tetechnology-warp\">\r\n        <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\r\n        <header class=\"rfd-tetechnology-warp-header\">\r\n        </header>\r\n        <main class=\"rfd-tetechnology-warp-main\">\r\n            <div class=\"svg-container\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">\r\n                    <defs>\r\n                        <filter id=\"f1\" x=\"0\" y=\"0\" width=\"200%\" height=\"200%\">\r\n                            <feOffset result=\"offOut\" in=\"SourceGraphic\" dx=\"0\" dy=\"0\" />\r\n                            <feColorMatrix result=\"matrixOut\" in=\"offOut\" type=\"matrix\" values=\"0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0\" />\r\n                            <feGaussianBlur result=\"blurOut\" in=\"matrixOut\" stdDeviation=\"5\" />\r\n                            <feBlend in=\"SourceGraphic\" in2=\"blurOut\" mode=\"normal\" />\r\n                        </filter>\r\n                    </defs>\r\n                    <defs>\r\n                        <marker id=\"arrow\" markerUnits=\"userSpaceOnUse\" markerWidth=\"15\" markerHeight=\"15\" viewBox=\"0 0 15 15\" refX=\"6\" refY=\"6\" orient=\"auto\">\r\n                            <path d=\"M2,0 L10,6 L2,12 L6,6 L2,0\" style=\"fill: #00ae9d;\" />\r\n                        </marker>\r\n                    </defs>\r\n                    <defs>\r\n                        <marker id=\"arrow1\" markerUnits=\"userSpaceOnUse\" markerWidth=\"15\" markerHeight=\"15\" viewBox=\"0 0 15 15\" refX=\"6\" refY=\"6\" orient=\"auto\">\r\n                            <path d=\"M2,0 L10,6 L2,12 L6,6 L2,0\" style=\"fill: #808695;\" />\r\n                        </marker>\r\n                    </defs>\r\n                    <defs>\r\n                        <marker id=\"arrow_hight_color\" markerUnits=\"userSpaceOnUse\" markerWidth=\"15\" markerHeight=\"15\" viewBox=\"0 0 15 15\" refX=\"6\" refY=\"6\" orient=\"auto\">\r\n                            <path d=\"M2,0 L10,6 L2,12 L6,6 L2,0\" style=\"fill: red;\" />\r\n                        </marker>\r\n                    </defs>\r\n                    <defs>\r\n                        <linearGradient id=\"orange_red\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n                            <stop offset=\"0%\" style=\"stop-color:#ffdfd9;stop-opacity:1\" />\r\n                            <stop offset=\"100%\" style=\"stop-color:#ff8069 stop-opacity:1\" />\r\n                        </linearGradient>\r\n                    </defs>\r\n\r\n                    <g v-for=\"(item) in ProcessAndProcedureData\" :key=\"item.procedureCode\">\r\n                        <!-- <shape :xAxion=\"item.pointX\" :yAxion=\"item.pointY\" color=\"#b9d3ef\" borderColor=\"#739cc3\" :width=\"defaultShapeWidth\" :height=\"defaultShapeWidth\"></shape> -->\r\n\r\n                        <image :x=\"item.pointX\" :y=\"item.pointY\" :width=\"defaultShapeWidth\" :height=\"defaultShapeWidth\" :xlink:href=\"item.photo\" rx=\"25\"></image>\r\n\r\n                        <text :x=\"item.pointX+defaultShapeWidth/2\" :y=\"item.pointY+defaultShapeWidth+5\" fill=\"#000\" style=\"font-size:14px\" class=\"svg-text-common-style\">\r\n                            {{item.spName}}\r\n                        </text>\r\n\r\n                        <!-- 所有待办 -->\r\n                        <circle :cx=\"item.pointX\" :cy=\"item.pointY\" r=\"12\" stroke-width=\"1\" fill=\"red\" />\r\n                        <text :x=\"item.pointX\" :y=\"item.pointY-4\" fill=\"#fff\" class=\"svg-text-common-style\" style=\"font-size:10px;font-weight:bold\">\r\n                            12\r\n                        </text>\r\n\r\n                    </g>\r\n                    <g v-for=\"(line,index) in pointList\" :key=\"index\">\r\n                        <polyline :points=\"line.value\" marker-end='url(#arrow1)' style=\"fill:none;stroke:#808695;stroke-width:2\" />\r\n                    </g>\r\n                </svg>\r\n            </div>\r\n        </main>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Shape from \"@/components/Shape\";\r\nimport {\r\n  getProcedureAndProcess,\r\n  getMockData,\r\n  getProcessRouteProcedureRel\r\n} from \"@/services/flowService\";\r\nexport default {\r\n  name: \"TechnologyGraph\",\r\n\r\n  components: {\r\n    Shape\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      processRouteCode: this.$route.params.processRouteCode,\r\n      spinShow: false,\r\n      screenWidth: document.body.clientWidth, // 这里是给到了一个默认值\r\n      xAxion: 50,\r\n      yAxion: 80,\r\n\r\n      pointList: [], //存放节点连线坐标\r\n      ProcessAndProcedureData: [],\r\n      defaultxAxion: 40,\r\n      defaultyAxion: 80,\r\n      graphSpace: 100,\r\n      defaultShapeWidth: 50,\r\n      showNumber: 9 //一行显示多少个\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    screenWidth(val) {\r\n      this.screenWidth = val;\r\n      this.showNumber = Math.floor(\r\n        val / (this.defaultShapeWidth + this.graphSpace)\r\n      );\r\n      this.pointList = [];\r\n      this.drawGraph();\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    drawGraph() {\r\n      let graphSpace = this.graphSpace,\r\n        defaultShapeWidth = this.defaultShapeWidth,\r\n        yCount = 0,\r\n        xCount = 0,\r\n        nodePointXY = {}, //存放所有节点坐标\r\n        nextPoint,\r\n        nextPointX,\r\n        nextPointY,\r\n        nextNode = {},\r\n        peerNode,\r\n        preNodeId = \"\",\r\n        consumeNode = 0,\r\n        data = this.ProcessAndProcedureData;\r\n\r\n      for (let i = 0; i < data.length; i++) {\r\n        if (i % this.showNumber === 0 && i !== 0) {\r\n          yCount++;\r\n        }\r\n        //判断当前节点顺序是从左往右还是从右往左\r\n        if (yCount % 2 === 0) {\r\n          //第一次从左往右\r\n          data[i].pointX =\r\n            this.defaultxAxion + xCount * (graphSpace + defaultShapeWidth);\r\n          data[i].pointY =\r\n            this.defaultyAxion + (this.defaultShapeWidth + graphSpace) * yCount;\r\n          nodePointXY[data[i].procedureCode] =\r\n            data[i].pointX + \",\" + data[i].pointY;\r\n          xCount++;\r\n        } else {\r\n          //从右往左\r\n          data[i].pointX =\r\n            this.defaultxAxion +\r\n            (xCount - 1) * (graphSpace + defaultShapeWidth);\r\n          data[i].pointY =\r\n            this.defaultyAxion + (this.defaultShapeWidth + graphSpace) * yCount;\r\n          nodePointXY[data[i].procedureCode] =\r\n            data[i].pointX + \",\" + data[i].pointY;\r\n          xCount--;\r\n        }\r\n      }\r\n\r\n      data.forEach((item, itemIndex) => {\r\n        if (item.underProcedureCode) {\r\n          if (item.underProcedureCode in nodePointXY) {\r\n            nextPoint = nodePointXY[item.underProcedureCode].split(\",\");\r\n            nextPointX = Number(nextPoint[0]);\r\n            nextPointY = Number(nextPoint[1]);\r\n            //线条从上指下\r\n            if (nextPointX === item.pointX) {\r\n              this.pointList.push({\r\n                id: item.procedureCode,\r\n                value:\r\n                  item.pointX +\r\n                  defaultShapeWidth / 2 +\r\n                  \",\" +\r\n                  (item.pointY + this.defaultShapeWidth + 20) +\r\n                  \" \" +\r\n                  (nextPointX + defaultShapeWidth / 2) +\r\n                  \",\" +\r\n                  (nextPointY - 4)\r\n              });\r\n            }\r\n            //线条从右指左\r\n            if (nextPointX < item.pointX && nextPointY === item.pointY) {\r\n              this.pointList.push({\r\n                id: item.procedureCode,\r\n                value:\r\n                  item.pointX +\r\n                  \",\" +\r\n                  (item.pointY + this.defaultShapeWidth / 2) +\r\n                  \" \" +\r\n                  (nextPointX + defaultShapeWidth + 4) +\r\n                  \",\" +\r\n                  (nextPointY + this.defaultShapeWidth / 2)\r\n              });\r\n            }\r\n            //线条从左指右\r\n            if (nextPointX > item.pointX && nextPointY === item.pointY) {\r\n              this.pointList.push({\r\n                id: item.procedureCode,\r\n                value:\r\n                  item.pointX +\r\n                  this.defaultShapeWidth +\r\n                  \",\" +\r\n                  (item.pointY + this.defaultShapeWidth / 2) +\r\n                  \" \" +\r\n                  (nextPointX - 4) +\r\n                  \",\" +\r\n                  (nextPointY + this.defaultShapeWidth / 2)\r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    //查询工艺和工序关系\r\n    getProcessAndProcedure(processRouteCode) {\r\n      this.spinShow = true;\r\n      getProcedureAndProcess(processRouteCode)\r\n        .then(res => {\r\n          this.ProcessAndProcedureData = res;\r\n          this.drawGraph();\r\n          this.spinShow = false;\r\n        })\r\n        .catch(error => {\r\n          this.$Message.error(error);\r\n        });\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    let mainMaxHeight = document.body.clientHeight - 45;\r\n    window.document.getElementsByClassName(\r\n      \"rfd-tetechnology-warp-main\"\r\n    )[0].style.height =\r\n      mainMaxHeight + \"px\";\r\n\r\n    window.document.getElementsByClassName(\r\n      \"rfd-tetechnology-warp-main\"\r\n    )[0].style.maxHeight =\r\n      mainMaxHeight + \"px\";\r\n\r\n    this.showNumber = Math.floor(\r\n      document.body.clientWidth / (this.defaultShapeWidth + this.graphSpace)\r\n    );\r\n    window.onresize = () => {\r\n      return (() => {\r\n        window.screenWidth = document.body.clientWidth;\r\n        this.screenWidth = window.screenWidth;\r\n      })();\r\n    };\r\n\r\n    this.getProcessAndProcedure(this.processRouteCode);\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" >\r\n.rfd-tetechnology-warp {\r\n  background-color: #fff;\r\n\r\n  &-header {\r\n    height: 44px;\r\n    line-height: 44px;\r\n    border-bottom: 1px solid #ddd;\r\n\r\n    .input-select {\r\n      width: 160px;\r\n      margin: 0 5px;\r\n    }\r\n  }\r\n\r\n  &-main {\r\n    background-color: #f8f8f9;\r\n    overflow: auto;\r\n\r\n    .svg-container {\r\n      position: relative;\r\n      height: 100%;\r\n      width: 100%;\r\n      margin: 0;\r\n      padding: 0;\r\n\r\n      svg {\r\n        height: 100%;\r\n        width: 100%;\r\n        position: absolute;\r\n        overflow: hidden;\r\n        left: 0;\r\n      }\r\n\r\n      .svg-text-common-style {\r\n        text-anchor: middle;\r\n        baseline-shift: sub;\r\n        font-size: 5px;\r\n        font-family: sans-serif;\r\n      }\r\n\r\n      .svg-text-common-style:hover {\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/flow/technologyGraph.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"rfd-tetechnology-warp\"},[(_vm.spinShow)?_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}}):_vm._e(),_vm._v(\" \"),_c('header',{staticClass:\"rfd-tetechnology-warp-header\"}),_vm._v(\" \"),_c('main',{staticClass:\"rfd-tetechnology-warp-main\"},[_c('div',{staticClass:\"svg-container\"},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\"}},[_c('defs',[_c('filter',{attrs:{\"id\":\"f1\",\"x\":\"0\",\"y\":\"0\",\"width\":\"200%\",\"height\":\"200%\"}},[_c('feOffset',{attrs:{\"result\":\"offOut\",\"in\":\"SourceGraphic\",\"dx\":\"0\",\"dy\":\"0\"}}),_vm._v(\" \"),_c('feColorMatrix',{attrs:{\"result\":\"matrixOut\",\"in\":\"offOut\",\"type\":\"matrix\",\"values\":\"0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0\"}}),_vm._v(\" \"),_c('feGaussianBlur',{attrs:{\"result\":\"blurOut\",\"in\":\"matrixOut\",\"stdDeviation\":\"5\"}}),_vm._v(\" \"),_c('feBlend',{attrs:{\"in\":\"SourceGraphic\",\"in2\":\"blurOut\",\"mode\":\"normal\"}})],1)]),_vm._v(\" \"),_c('defs',[_c('marker',{attrs:{\"id\":\"arrow\",\"markerUnits\":\"userSpaceOnUse\",\"markerWidth\":\"15\",\"markerHeight\":\"15\",\"viewBox\":\"0 0 15 15\",\"refX\":\"6\",\"refY\":\"6\",\"orient\":\"auto\"}},[_c('path',{staticStyle:{\"fill\":\"#00ae9d\"},attrs:{\"d\":\"M2,0 L10,6 L2,12 L6,6 L2,0\"}})])]),_vm._v(\" \"),_c('defs',[_c('marker',{attrs:{\"id\":\"arrow1\",\"markerUnits\":\"userSpaceOnUse\",\"markerWidth\":\"15\",\"markerHeight\":\"15\",\"viewBox\":\"0 0 15 15\",\"refX\":\"6\",\"refY\":\"6\",\"orient\":\"auto\"}},[_c('path',{staticStyle:{\"fill\":\"#808695\"},attrs:{\"d\":\"M2,0 L10,6 L2,12 L6,6 L2,0\"}})])]),_vm._v(\" \"),_c('defs',[_c('marker',{attrs:{\"id\":\"arrow_hight_color\",\"markerUnits\":\"userSpaceOnUse\",\"markerWidth\":\"15\",\"markerHeight\":\"15\",\"viewBox\":\"0 0 15 15\",\"refX\":\"6\",\"refY\":\"6\",\"orient\":\"auto\"}},[_c('path',{staticStyle:{\"fill\":\"red\"},attrs:{\"d\":\"M2,0 L10,6 L2,12 L6,6 L2,0\"}})])]),_vm._v(\" \"),_c('defs',[_c('linearGradient',{attrs:{\"id\":\"orange_red\",\"x1\":\"0%\",\"y1\":\"0%\",\"x2\":\"0%\",\"y2\":\"100%\"}},[_c('stop',{staticStyle:{\"stop-color\":\"#ffdfd9\",\"stop-opacity\":\"1\"},attrs:{\"offset\":\"0%\"}}),_vm._v(\" \"),_c('stop',{staticStyle:{\"stop-color\":\"#ff8069 stop-opacity:1\"},attrs:{\"offset\":\"100%\"}})],1)],1),_vm._v(\" \"),_vm._l((_vm.ProcessAndProcedureData),function(item){return _c('g',{key:item.procedureCode},[_c('image',{attrs:{\"x\":item.pointX,\"y\":item.pointY,\"width\":_vm.defaultShapeWidth,\"height\":_vm.defaultShapeWidth,\"xlink:href\":item.photo,\"rx\":\"25\"}}),_vm._v(\" \"),_c('text',{staticClass:\"svg-text-common-style\",staticStyle:{\"font-size\":\"14px\"},attrs:{\"x\":item.pointX+_vm.defaultShapeWidth/2,\"y\":item.pointY+_vm.defaultShapeWidth+5,\"fill\":\"#000\"}},[_vm._v(\"\\n                        \"+_vm._s(item.spName)+\"\\n                    \")]),_vm._v(\" \"),_c('circle',{attrs:{\"cx\":item.pointX,\"cy\":item.pointY,\"r\":\"12\",\"stroke-width\":\"1\",\"fill\":\"red\"}}),_vm._v(\" \"),_c('text',{staticClass:\"svg-text-common-style\",staticStyle:{\"font-size\":\"10px\",\"font-weight\":\"bold\"},attrs:{\"x\":item.pointX,\"y\":item.pointY-4,\"fill\":\"#fff\"}},[_vm._v(\"\\n                        12\\n                    \")])])}),_vm._v(\" \"),_vm._l((_vm.pointList),function(line,index){return _c('g',{key:index},[_c('polyline',{staticStyle:{\"fill\":\"none\",\"stroke\":\"#808695\",\"stroke-width\":\"2\"},attrs:{\"points\":line.value,\"marker-end\":\"url(#arrow1)\"}})])})],2)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-2d61b3c2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/views/flow/technologyGraph.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2d61b3c2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.13.7.2@vue-loader/lib/selector?type=styles&index=0!./technologyGraph.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/.13.7.2@vue-loader/lib/selector?type=script&index=0!./technologyGraph.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.13.7.2@vue-loader/lib/selector?type=script&index=0!./technologyGraph.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d61b3c2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.13.7.2@vue-loader/lib/selector?type=template&index=0!./technologyGraph.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/flow/technologyGraph.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}