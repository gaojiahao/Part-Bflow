webpackJsonp([3],{"29BB":function(e,t){},"8Gcc":function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("custom-table",{attrs:{apiUrl:"/ds/getUsersByGroupId",columns:t.memberInfoColumns,apiParams:t.memberInfoParams},on:{"on-selection-change":t.onSelectionChange,"on-refesh-change":t.onRefeshChange},model:{value:t.reload,callback:function(e){t.reload=e},expression:"reload"}},[a("div",{staticClass:"header-action",attrs:{slot:"header"},slot:"header"},[t.isPermission?a("div",{staticStyle:{display:"inline"}},[a("label",{on:{click:t.showMemberModal}},[t._v("添加成员")]),t._v(" "),a("span",[t._v("-添加成员")]),t._v(" "),a("label",{on:{click:t.deleteMemberInfo}},[t._v("移除成员")]),t._v(" "),a("span",[t._v("-移除成员")])]):t._e(),t._v(" "),a("div",{staticClass:"app-table-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索工号或名称"},on:{"on-search":t.userTableFilter},model:{value:t.searchTableValue,callback:function(e){t.searchTableValue=e},expression:"searchTableValue"}}),t._v(" "),a("a",{staticClass:"app-search-icon",on:{click:t.userTableFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[t._v("查询")])],1)],1)])]),t._v(" "),a("member-modal",{attrs:{width:"1000",footerBtnAlign:"right",title:"选择用户"},on:{"on-ok":t.saveSelectionUser},model:{value:t.isShowMemberModal,callback:function(e){t.isShowMemberModal=e},expression:"isShowMemberModal"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索工号或名称"},on:{"on-search":t.userFilter},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),a("a",{staticClass:"app-search-icon",on:{click:t.userFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[t._v("查询")])],1)],1),t._v(" "),a("Table",{ref:"selection",attrs:{height:"400",size:"small",loading:t.listUserLoading,columns:t.memberInfoColumnsModel,data:t.listUserData},on:{"on-select-all":t.onSelectAll,"on-selection-change":t.handerSelectionChange,"on-select-cancel":t.onSelectCancel}}),t._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.listUserPageTotal,current:t.listUserCurrentPage,"page-size":t.pageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-page-size-change":t.onPageSizeChange,"on-change":t.listUserChangePage}})],1)])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.onPageSelection[0],expression:"onPageSelection[0] "}],staticClass:"page-selection-box"},t._l(t.onPageSelection,function(e){return a("Tag",{key:e.userId,attrs:{userId:e.userId,closable:!0,type:"border",color:"primary",size:"small"},on:{"on-close":t.deletePageSelection}},[t._v("\n        "+t._s(e.nickname)+"\n      ")])}))])],1)},staticRenderFns:[]}},BKX9:function(e,t){},CsFM:function(e,t){},HMig:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("custom-table",{attrs:{apiUrl:"/ds/getAllGroup",columns:t.lowerOrgColumns,apiParams:t.lowOrganizationParams},on:{"on-refesh-change":t.onRefeshChange,"on-selection-change":t.onSelectionChange},model:{value:t.reload,callback:function(e){t.reload=e},expression:"reload"}},[t.isPermission?a("div",{staticClass:"header-action",attrs:{slot:"header"},slot:"header"},[a("label",{on:{click:t.showLoverOrgModal}},[t._v("添加下级组织")]),t._v(" "),a("span",[t._v("-添加下级组织")]),t._v(" "),a("label",{on:{click:t.deleteLoverOrg}},[t._v("删除下级组织")]),t._v(" "),a("span",[t._v("-删除下级组织")])]):t._e()]),t._v(" "),a("member-modal",{attrs:{width:"1000",footerBtnAlign:"right",title:"选择组织"},on:{"on-ok":t.saveSelectionLowerOrg},model:{value:t.isShowMemberModal,callback:function(e){t.isShowMemberModal=e},expression:"isShowMemberModal"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索组织名称"},on:{"on-search":t.orgFilter},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),a("a",{staticClass:"app-search-icon",on:{click:t.orgFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[t._v("查询")])],1)],1),t._v(" "),a("Table",{ref:"selection",attrs:{height:"400",loading:t.listUserLoading,columns:t.lowerOrgColumnsModel,data:t.listUserData,size:"small"},on:{"on-select-all":t.onSelectAll,"on-selection-change":t.handerSelectionChange,"on-select-cancel":t.onSelectCancel}}),t._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.listUserPageTotal,current:t.listUserCurrentPage,"page-size":t.pageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-page-size-change":t.onPageSizeChange,"on-change":t.listUserChangePage}})],1)])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.onPageSelection[0],expression:"onPageSelection[0] "}],staticClass:"page-selection-warp"},t._l(t.onPageSelection,function(e){return a("Tag",{key:e.groupId,attrs:{groupId:e.groupId,closable:!0,type:"border",color:"primary",size:"small"},on:{"on-close":t.deletePageSelection}},[t._v("\n        "+t._s(e.groupName)+"\n      ")])}))])],1)},staticRenderFns:[]}},HT0W:function(e,t){},MTfv:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"organization-wrap"},[i("header",{staticClass:"organization-wrap-header"},[i("span",{staticClass:"organization-wrap-header-org",on:{click:a.goOrgList}},[a._v("组织")]),a._v(" "),i("span",{staticClass:"organization-wrap-header-others"},[a._v("/")]),a._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:a.groupId,expression:"groupId"}],staticClass:"organization-wrap-header-others"},[a._v(a._s(a.name))]),a._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!a.groupId,expression:"!groupId"}],staticClass:"organization-wrap-header-others"},[a._v("创建")]),a._v(" "),i("Tag",{directives:[{name:"show",rawName:"v-show",value:a.groupId,expression:"groupId"},{name:"instanceStateDirective",rawName:"v-instanceStateDirective",value:{status:a.formItem.status},expression:"{status:formItem.status}"}],staticClass:"radius10 marlr10 color_fff",staticStyle:{"margin-bottom":"7px","padding-right":"13px"}})],1),a._v(" "),i("div",{staticClass:"organization-wrap-action"},[i("ul",a._l(a.actionBtn,function(e,t){return e.hidden?a._e():i("li",{key:t,staticClass:"organization-wrap-action-li",class:t===a.actionIndex?"organization-wrap-action-li-active":"",on:{click:function(e){a.handlerViewChange(t)}}},[i("div",[e.type?i("Icon",{staticClass:"icon",attrs:{type:e.type}}):i("img",{staticClass:"organization-wrap-action-li-img",attrs:{src:e.imgPath}}),a._v(" "),i("div",{staticClass:"left-content"},[i("span",{directives:[{name:"show",rawName:"v-show",value:"undefine"!==e.number,expression:"item.number!=='undefine'"}]},[a._v(a._s(e.number))]),a._v(" "),i("h3",[a._v(a._s(e.label))])])],1)])}))]),a._v(" "),i("div",{staticClass:"organization-wrap-tabs"},[5===a.actionIndex?i("section",{staticClass:"baseinfo-container rfd-tab-container-common"},[i("Form",{ref:"formItem",class:{"is-required":a.isEdit},staticStyle:{"background-color":"#fff"},attrs:{model:a.formItem,labelWidth:120,rules:a.ruleValidate}},[i("FormItem",{staticStyle:{"font-size":"16px"},attrs:{label:"组织名称:",prop:"groupName"}},[i("Input",{class:a.isEdit?"input-status-isedit":"",attrs:{readonly:a.isEdit},on:{"on-blur":a.onGroupNameOutBlur},model:{value:a.formItem.groupName,callback:function(e){a.$set(a.formItem,"groupName",e)},expression:"formItem.groupName"}})],1),a._v(" "),i("FormItem",{attrs:{label:"组织类型:",labelWidth:120,prop:"groupType"}},[i("Select",{class:a.isEdit?"input-status-isedit":"",attrs:{disabled:a.isEdit},model:{value:a.formItem.groupType,callback:function(e){a.$set(a.formItem,"groupType",e)},expression:"formItem.groupType"}},[i("Option",{attrs:{value:"M"}},[a._v("管理层")]),a._v(" "),i("Option",{attrs:{value:"A"}},[a._v("事业部")]),a._v(" "),i("Option",{attrs:{value:"O"}},[a._v("部门")]),a._v(" "),i("Option",{attrs:{value:"D"}},[a._v("直营店")]),a._v(" "),i("Option",{attrs:{value:"J"}},[a._v("加盟店")]),a._v(" "),i("Option",{attrs:{value:"G"}},[a._v("小组")])],1)],1),a._v(" "),i("FormItem",{attrs:{label:"组织职能:",labelWidth:120,prop:"depFunction"}},[i("Select",{class:a.isEdit?"input-status-isedit":"",attrs:{disabled:a.isEdit},model:{value:a.formItem.depFunction,callback:function(e){a.$set(a.formItem,"depFunction",e)},expression:"formItem.depFunction"}},[i("Option",{attrs:{value:"M"}},[a._v("管理")]),a._v(" "),i("Option",{attrs:{value:"S"}},[a._v("销售")]),a._v(" "),i("Option",{attrs:{value:"C"}},[a._v("制造")]),a._v(" "),i("Option",{attrs:{value:"R"}},[a._v("研发")]),a._v(" "),i("Option",{attrs:{value:"O"}},[a._v("运营")]),a._v(" "),i("Option",{attrs:{value:"E"}},[a._v("工程")])],1)],1),a._v(" "),i("div",{staticClass:"baseinfo-container-divider"}),a._v(" "),i("FormItem",{staticStyle:{"margin-top":"20px"},attrs:{label:"组织负责人:",labelWidth:120,prop:"principalName"}},[i("Input",{class:a.isEdit?"input-status-isedit":"",attrs:{icon:"md-arrow-dropdown",placeholder:"选择用户",readonly:a.isEdit},on:{"on-click":a.selectPrincipalModal},model:{value:a.formItem.principalName,callback:function(e){a.$set(a.formItem,"principalName",e)},expression:"formItem.principalName"}})],1),a._v(" "),i("FormItem",{staticStyle:{"margin-top":"20px"},attrs:{label:"上级组织:",labelWidth:120,prop:"highGroup"}},[i("Input",{class:a.isEdit?"input-status-isedit":"",attrs:{icon:"md-arrow-dropdown",placeholder:"选择上级组织",readonly:a.isEdit},on:{"on-click":a.selectHighOrgModal},model:{value:a.formItem.highGroup,callback:function(e){a.$set(a.formItem,"highGroup",e)},expression:"formItem.highGroup"}})],1),a._v(" "),a.hiddenInput?i("FormItem",{staticStyle:{"font-size":"16px"},attrs:{label:"上级组织parentId"}},[i("Input",{model:{value:a.formItem.parentId,callback:function(e){a.$set(a.formItem,"parentId",e)},expression:"formItem.parentId"}})],1):a._e(),a._v(" "),a.groupId&&a.isEdit?i("div",{staticClass:"baseinfo-container-divider"}):a._e(),a._v(" "),a.groupId&&a.isEdit?i("FormItem",{attrs:{label:"创建者:"}},[i("span",[a._v(a._s(a.tableContent.creator))])]):a._e(),a._v(" "),a.groupId&&a.isEdit?i("FormItem",{attrs:{label:"创建时间:"}},[i("span",[a._v(a._s(a.tableContent.crtTime))])]):a._e(),a._v(" "),a.groupId&&a.isEdit?i("FormItem",{attrs:{label:"修改者:"}},[i("span",[a._v(a._s(a.tableContent.modifier))])]):a._e(),a._v(" "),a.groupId&&a.isEdit?i("FormItem",{attrs:{label:"修改时间:"}},[i("span",[a._v(a._s(a.tableContent.modTime))])]):a._e()],1),a._v(" "),i("div",{staticClass:"baseinfo-container-action",on:{click:a.handleSubmitBoxs}},[i("input",{staticClass:"baseinfo-container-action-submit",staticStyle:{"background-color":"rgb(81, 90, 110)"},attrs:{type:"submit",value:"关闭",id:"close"}}),a._v(" "),a.groupId&&a.isPermission?i("input",{staticClass:"baseinfo-container-action-submit",attrs:{type:"submit",id:"edit"},domProps:{value:a.editBtnName}}):a._e(),a._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:!a.isEdit&&-2!==a.formItem.status,expression:"!isEdit && formItem.status !== -2"}],staticClass:"baseinfo-container-action-submit",attrs:{type:"submit",value:"保存",id:"save"}}),a._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:!a.isEdit&&1===a.formItem.status,expression:"!isEdit && formItem.status === 1"}],staticClass:"baseinfo-container-action-submit",staticStyle:{"background-color":"rgb(31, 94, 197)"},attrs:{type:"submit",value:"归档",id:"file"}}),a._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:!a.isEdit&&-2===a.formItem.status,expression:"!isEdit && formItem.status === -2"}],staticClass:"baseinfo-container-action-submit",staticStyle:{"background-color":"rgb(31, 94, 197)"},attrs:{type:"submit",value:"还原",id:"restore"}}),a._v(" "),a.groupId?a._e():i("input",{staticClass:"baseinfo-container-action-submit",attrs:{type:"submit",value:"保存并新建",id:"saveAndAdd"}}),a._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:!a.isEdit&&0===a.formItem.status||!a.groupId,expression:"(!isEdit && formItem.status === 0) || !groupId"}],staticClass:"baseinfo-container-action-submit",attrs:{type:"submit",value:"保存草稿",id:"draft"}})])],1):a._e(),a._v(" "),4===a.actionIndex?i("section",{staticClass:"memberinfo-container rfd-tab-container-common"},[i("high-organization",{attrs:{isPermission:a.isPermission,groupId:a.groupId,groupType:a.formItem.groupType},on:{"on-high-organization-change":a.handleChangeObjDetailsCount}})],1):a._e(),a._v(" "),3===a.actionIndex?i("section",{staticClass:"memberinfo-container rfd-tab-container-common"},[i("lower-organization",{attrs:{isPermission:a.isPermission,groupId:a.groupId,groupType:a.formItem.groupType},on:{"on-lower-organization-change":a.handleChangeObjDetailsCount}})],1):a._e(),a._v(" "),2===a.actionIndex?i("section",{staticClass:"memberinfo-container rfd-tab-container-common"},[i("principal",{attrs:{isPermission:a.isPermission,groupId:a.groupId},on:{"on-principal-change":a.handleChangeObjDetailsCount}})],1):a._e(),a._v(" "),1===a.actionIndex?i("section",{staticClass:"memberinfo-container rfd-tab-container-common"},[i("member-info",{attrs:{isPermission:a.isPermission,groupId:a.groupId},on:{"on-member-info-change":a.handleChangeObjDetailsCount}})],1):a._e(),a._v(" "),0===a.actionIndex?i("section",{staticClass:"permission-container"},[i("permission",{attrs:{isPermission:a.isPermission,target:a.target,groupId:a.groupId},on:{"on-permission-change":a.handleChangeObjDetailsCount}})],1):a._e()]),a._v(" "),i("member-modal",{attrs:{width:"700",footerBtnAlign:"right",title:"选择组织"},on:{"on-ok":a.saveSelectionHighOrg},model:{value:a.isShowMemberModal,callback:function(e){a.isShowMemberModal=e},expression:"isShowMemberModal"}},[i("div",{staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"app-search"},[i("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索组织名称"},on:{"on-search":a.orgFilter},model:{value:a.searchHighOrgValue,callback:function(e){a.searchHighOrgValue=e},expression:"searchHighOrgValue"}}),a._v(" "),i("a",{staticClass:"app-search-icon",on:{click:a.orgFilter}},[i("Button",{attrs:{type:"primary",size:"small"}},[a._v("查询")])],1)],1),a._v(" "),i("Table",{ref:"currentRowTable",staticClass:"rfd-table",attrs:{height:"400",loading:a.highOrgModalLoading,columns:a.highOrgColumnsModal,data:a.listUserData,size:"small","highlight-row":""},on:{"on-row-dblclick":a.handleHighOrgDblclick,"on-current-change":a.onSelectUserList}}),a._v(" "),i("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{attrs:{total:a.listUserPageTotal,current:a.listUserCurrentPage,"page-size":a.pageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-page-size-change":a.onHighOrgPageSizeChange,"on-change":a.listUserChangePage}})],1)])],1)]),a._v(" "),i("principal-modal",{attrs:{width:"700",footerBtnAlign:"right",title:"选择负责人"},on:{"on-ok":a.savaSelectPrincipal},model:{value:a.isShowPrincipalModal,callback:function(e){a.isShowPrincipalModal=e},expression:"isShowPrincipalModal"}},[i("div",[i("div",{staticClass:"app-search"},[i("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索工号或者名称"},on:{"on-search":a.userFilter},model:{value:a.searchPrincipalValue,callback:function(e){a.searchPrincipalValue=e},expression:"searchPrincipalValue"}}),a._v(" "),i("a",{staticClass:"app-search-icon",on:{click:a.userFilter}},[i("Button",{attrs:{type:"primary",size:"small"}},[a._v("查询")])],1)],1),a._v(" "),i("Table",{ref:"currentRowTable",staticClass:"rfd-table",attrs:{height:"400",loading:a.PrincipalModaLoading,columns:a.principalColumnsModel,data:a.principalData,size:"small","highlight-row":""},on:{"on-row-dblclick":a.handlePrinciplDblclick,"on-current-change":a.onSelectPrincipal}}),a._v(" "),i("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{attrs:{total:a.principalPageTotal,current:a.principalCurrentPage,"page-size":a.principalPageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-page-size-change":a.onPrincipalPageSizeChange,"on-change":a.principalChangePage}})],1)])],1)])],1)},staticRenderFns:[]}},U6mh:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("custom-table",{attrs:{apiUrl:"/ds/getPrincipalByGroupId",columns:t.principalColumns,apiParams:t.principalParams,isHiddenPage:!0},on:{"on-refesh-change":t.onRefeshChange},model:{value:t.reload,callback:function(e){t.reload=e},expression:"reload"}},[t.isPermission?a("div",{staticClass:"header-action",attrs:{slot:"header"},slot:"header"},[a("label",{on:{click:t.addPrincipal}},[t._v("添加负责人")]),t._v(" "),a("span",[t._v("-添加负责人")])]):t._e()]),t._v(" "),a("principal-modal",{attrs:{width:"1000",footerBtnAlign:"right",title:"选择负责人"},on:{"on-ok":t.savaSelectUser},model:{value:t.isShowPrincipalModal,callback:function(e){t.isShowPrincipalModal=e},expression:"isShowPrincipalModal"}},[a("div",[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索工号或者名称"},on:{"on-search":t.userFilter},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),a("a",{staticClass:"app-search-icon",on:{click:t.userFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[t._v("查询")])],1)],1),t._v(" "),a("Table",{ref:"currentRowTable",staticClass:"rfd-principal-table",attrs:{height:"400",loading:t.listUserLoading,columns:t.principalColumnsModel,data:t.listUserData,size:"small","highlight-row":""},on:{"on-row-dblclick":t.handleDblclick,"on-current-change":t.onSelectUserList}}),t._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.listUserPageTotal,current:t.listUserCurrentPage,"page-size":t.pageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.listUserChangePage,"on-page-size-change":t.onPageSizeChange}})],1)])],1)])],1)},staticRenderFns:[]}},Yo03:function(e,t){},ZGYE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),s=a("o32f"),r=a("lZCD"),n=a("pX3c"),l={name:"higher-organization",components:{CustomTable:n.a,MemberModal:r.a},props:{groupId:{type:String},groupType:{type:String},isPermission:{type:Boolean}},data:function(){return{highOrganizationParams:{groupId:this.groupId,page:1,limit:10},highOrgColumns:[{title:"组织名称",key:"groupName"},{title:"组织类型",key:"groupType",render:function(e,t){var a=t.row.groupType;switch(a){case"M":a="管理层";break;case"A":a="事业部";break;case"O":a="部门";break;case"D":a="直营店";break;case"J":a="加盟店";break;case"G":a="小组"}return e("span",a)}},{title:"组织职能",key:"depFunction",render:function(e,t){var a=t.row.depFunction;switch(a){case"M":a="管理";break;case"S":a="销售";break;case"C":a="制造";break;case"R":a="研发";break;case"O":a="运营";break;case"E":a="工程"}return e("span",a)}},{title:"组织状态",key:"status",render:function(e,t){var a=t.row.status,i="";switch(a){case-1:i="停用";break;case 1:i="使用中";break;case 2:i="未使用";break;case 3:i="草稿"}return e("span",{style:{color:a?"#0279f6":"#f03707",cursor:"default"}},i)}}],highOrgColumnsModal:[{title:"组织名称",key:"groupName"},{title:"组织类型",key:"groupType",render:function(e,t){var a=t.row.groupType;switch(a){case"M":a="管理层";break;case"A":a="事业部";break;case"O":a="部门";break;case"D":a="直营店";break;case"J":a="加盟店";break;case"G":a="小组"}return e("span",a)}},{title:"组织职能",key:"depFunction",render:function(e,t){var a=t.row.depFunction;switch(a){case"M":a="管理";break;case"S":a="销售";break;case"C":a="制造";break;case"R":a="研发";break;case"O":a="运营";break;case"E":a="工程"}return e("span",a)}},{title:"组织状态",key:"status",render:function(e,t){var a=t.row.status,i="";switch(a){case-1:i="停用";break;case 1:i="使用中";break;case 2:i="未使用";break;case 3:i="草稿"}return e("span",{style:{color:a?"#0279f6":"#f03707",cursor:"default"}},i)}}],isShowMemberModal:!1,listUserLoading:!1,listUserData:[],listUserPageTotal:0,listUserCurrentPage:1,pageSize:10,searchValue:"",reload:!1,onSelectionModal:[]}},methods:{listUserChangePage:function(e){var t=[{operator:"like",value:this.searchValue,property:"groupName"}];this.getAllHigherGroupByGroupType(e,this.pageSize,t)},onPageSizeChange:function(e){this.pageSize=e;var t=[{operator:"like",value:this.searchValue,property:"groupName"}];this.getAllHigherGroupByGroupType(1,e,t)},onSelectUserList:function(e,t){this.onSelectionModal=e},handleDblclick:function(e,t){var a=this,i={groupId:this.groupId,parentId:e.groupId};Object(s._0)(i).then(function(e){e.success?(a.$Message.success("更新成功"),a.isShowMemberModal=!1,a.reload=!0,a.$emit("on-high-organization-change",!0)):a.$Message.error(e.message)})},showMemberModal:function(){this.isShowMemberModal=!0,this.getListUsers(this.listUserCurrentPage,this.pageSize)},onRefeshChange:function(e){e||(this.reload=e)},showHighOrgModal:function(){this.isShowMemberModal=!0,this.searchValue="",this.getAllHigherGroupByGroupType(this.listUserCurrentPage,this.pageSize)},saveSelectionHighOrg:function(){var e,t=this;e=this.onSelectionModal.groupId;var a={};a.parentId=e,a.groupId=this.groupId,Object(s._0)(a).then(function(e){e.success?(t.$Message.success("更新成功"),t.isShowMemberModal=!1,t.reload=!0,t.$emit("on-high-organization-change",!0)):t.$Message.error(e.message)})},getAllHigherGroupByGroupType:function(e,t,a){var i=this;this.listUserLoading=!0;var r=a||[];Object(s.q)(e,t,this.groupType,o()(r)).then(function(e){i.listUserPageTotal=e.summary.total,i.listUserData=e.tableContent,i.listUserLoading=!1})},orgFilter:function(){var e=[{operator:"like",value:this.searchValue,property:"groupName"}];this.getAllHigherGroupByGroupType(this.listUserCurrentPage,this.pageSize,e)}}},c=a("xHvs"),u=a.n(c);var p=function(e){a("BKX9")},h=a("VU/8")(l,u.a,!1,p,"data-v-6fb0767d",null).exports,g=a("Gu7T"),d=a.n(g),m={name:"lower-organization",components:{CustomTable:n.a,MemberModal:r.a},props:{groupId:{type:String},groupType:{type:String},isPermission:{type:Boolean}},data:function(){var a=this;return{lowOrganizationParams:{filter:o()([{operator:"eq",value:this.groupId,property:"parentId"}]),page:1,limit:10},lowerOrgColumns:[{type:"selection",width:60,align:"center"},{title:"组织名称",key:"groupName"},{title:"组织类型",key:"groupType",render:function(e,t){var a=t.row.groupType;switch(a){case"M":a="管理层";break;case"A":a="事业部";break;case"O":a="部门";break;case"D":a="直营店";break;case"J":a="加盟店";break;case"G":a="小组"}return e("span",a)}},{title:"组织职能",key:"depFunction",render:function(e,t){var a=t.row.depFunction;switch(a){case"M":a="管理";break;case"S":a="销售";break;case"C":a="制造";break;case"R":a="研发";break;case"O":a="运营";break;case"E":a="工程"}return e("span",a)}},{title:"组织状态",key:"status",render:function(e,t){var a=t.row.status,i="";switch(a){case-1:i="停用";break;case 1:i="使用中";break;case 2:i="未使用";break;case 3:i="草稿"}return e("span",{style:{color:a?"#0279f6":"#f03707",cursor:"default"}},i)}},{title:"操作",key:"action",width:120,align:"center",render:function(e,t){return e("Button",{props:{type:"error",size:"small",disabled:!a.isPermission},style:{cursor:"pointer"},on:{click:function(){a.$Modal.confirm({title:"确认",content:"确认删除此组织？",onOk:function(){var e=[{groupId:t.row.groupId,parentId:""}];Object(s.j)(e).then(function(e){e.success&&(a.$Message.success("删除成功!"),a.reload=!0,a.$emit("on-lower-organization-change",!0))})}})}}},"删除")}}],lowerOrgColumnsModel:[{type:"selection",width:60,align:"center"},{title:"组织名称",key:"groupName"},{title:"组织类型",key:"groupType",render:function(e,t){var a=t.row.groupType;switch(a){case"M":a="管理层";break;case"A":a="事业部";break;case"O":a="部门";break;case"D":a="直营店";break;case"J":a="加盟店";break;case"G":a="小组"}return e("span",a)}},{title:"组织职能",key:"depFunction",render:function(e,t){var a=t.row.depFunction;switch(a){case"M":a="管理";break;case"S":a="销售";break;case"C":a="制造";break;case"R":a="研发";break;case"O":a="运营";break;case"E":a="工程"}return e("span",a)}},{title:"组织状态",key:"status",render:function(e,t){var a=t.row.status,i="";switch(a){case-1:i="停用";break;case 1:i="使用中";break;case 2:i="未使用";break;case 3:i="草稿"}return e("span",{style:{color:a?"#0279f6":"#f03707",cursor:"default"}},i)}}],isShowMemberModal:!1,listUserLoading:!1,listUserData:[],listUserPageTotal:0,listUserCurrentPage:1,pageSize:10,deleteBtnDisable:!0,reload:!1,onPageSelection:[],selectDeleteLowerOrg:[],searchValue:""}},methods:{listUserChangePage:function(e){var t=[{operator:"like",value:this.searchValue,property:"groupName"}];this.getAllLowerGroupByGroupType(e,t)},onPageSizeChange:function(e){this.pageSize=e;var t=[{operator:"like",value:this.searchValue,property:"groupName"}];this.getAllLowerGroupByGroupType(1,e,t)},onSelectAll:function(e){var t,a={};(t=this.onPageSelection).push.apply(t,d()(e)),this.onPageSelection=this.onPageSelection.reduce(function(e,t){return!a[t.groupId]&&(a[t.groupId]=e.push(t)),e},[])},handerSelectionChange:function(e){if(0===e.length){var t=this.$refs.selection.data,a=this.onPageSelection;t.map(function(t){a=a.filter(function(e){return e.groupId!==t.groupId})}),this.onPageSelection=a}else{var i,r={};(i=this.onPageSelection).push.apply(i,d()(e)),this.onPageSelection=this.onPageSelection.reduce(function(e,t){return!r[t.groupId]&&(r[t.groupId]=e.push(t)),e},[])}},deletePageSelection:function(e){var a=this,i=Number(e.target.parentElement.getAttribute("groupId"));this.onPageSelection=this.onPageSelection.filter(function(e){return e.groupId!==i}),this.$refs.selection.data.forEach(function(e,t){i===e.groupId&&a.$refs.selection.toggleSelect(t)})},onSelectCancel:function(e,t){this.onPageSelection=this.onPageSelection.filter(function(e){return e.groupId!==t.groupId})},onSelectionChange:function(e){0<e.length?(this.deleteBtnDisable=!1,this.selectDeleteLowerOrg=e):this.deleteBtnDisable=!0},onRefeshChange:function(e){e||(this.reload=e)},showLoverOrgModal:function(){this.isShowMemberModal=!0,this.searchValue="",this.onPageSelection=[],this.getAllLowerGroupByGroupType(this.listUserCurrentPage)},saveSelectionLowerOrg:function(){var t=this,a=[];this.onPageSelection.forEach(function(e){a.push(e.groupId)}),Object(s.U)(this.groupId,a.join(",")).then(function(e){e.success?(t.$Message.success("更新成功"),t.isShowMemberModal=!1,t.reload=!0,t.$emit("on-lower-organization-change",!0)):t.$Message.error(e.message)})},deleteLoverOrg:function(){var t=this,a=[];0<this.selectDeleteLowerOrg.length?(this.selectDeleteLowerOrg.forEach(function(e){a.push({groupId:e.groupId,parentId:""})}),a&&Object(s.j)(a).then(function(e){e.success&&(t.$Message.success("删除成功!"),t.reload=!0,t.$emit("on-lower-organization-change",!0))}).catch(function(e){t.$Message.error(e.data.message)})):this.$Message.info("请选择要删除的下级组织")},getAllLowerGroupByGroupType:function(e,t){var a=this;this.listUserLoading=!0;var i=t||[];Object(s.r)(e,this.pageSize,this.groupType,o()(i)).then(function(e){a.listUserPageTotal=e.summary.total,a.listUserData=e.tableContent,0<a.onPageSelection.length&&a.listUserData.map(function(t){a.onPageSelection.map(function(e){t.groupId===e.groupId&&(t._checked=!0)})}),a.listUserLoading=!1})},orgFilter:function(){var e=[{operator:"like",value:this.searchValue,property:"groupName"}];this.getAllLowerGroupByGroupType(this.listUserCurrentPage,e)}}},f=a("HMig"),v=a.n(f);var b=function(e){a("Yo03")},y=a("VU/8")(m,v.a,!1,b,"data-v-6f3cc3c8",null).exports,k={name:"member-info",components:{MemberModal:r.a,CustomTable:n.a},props:{groupId:{type:String},isPermission:{type:Boolean}},data:function(){var a=this;return{memberInfoLoading:!1,memberInfoParams:{groupId:this.groupId,page:1,limit:10},memberInfoColumns:[{type:"selection",width:60,align:"center"},{title:"头像",key:"photo",width:80,render:function(e,t){return e("div",[e("Avatar",{props:{src:t.row.photo?t.row.photo:"resources/images/icon/defaultUserPhoto.png"}})])}},{title:"工号",key:"userCode"},{title:"姓名",key:"nickname"},{title:"性别",key:"gender",render:function(e,t){var a=t.row.gender;return e("span",1===a?"男":0===a?"女":"未知")}},{title:"手机号",key:"mobile"},{title:"邮箱",key:"email"},{title:"操作",key:"action",width:100,align:"center",render:function(e,t){return e("Button",{props:{type:"error",size:"small",disabled:!a.isPermission},style:{cursor:"pointer"},on:{click:function(){a.$Modal.confirm({title:"确认",content:"确认删除该成员？",onOk:function(){Object(s.m)(a.groupId,t.row.userId,0).then(function(e){e.success&&(a.$Message.success("删除成功!"),a.reload=!0,a.$emit("on-member-info-change",!0))}).catch(function(e){a.$Message.error(e.data.message)})}})}}},"删除")}}],memberInfoColumnsModel:[{type:"selection",width:60,align:"center"},{title:"头像",key:"photo",width:80,render:function(e,t){return e("div",[e("Avatar",{props:{src:t.row.photo?t.row.photo:"resources/images/icon/defaultUserPhoto.png"}})])}},{title:"工号",key:"userCode"},{title:"姓名",key:"nickname"},{title:"性别",key:"gender",render:function(e,t){var a=t.row.gender;return e("span",1===a?"男":0===a?"女":"未知")}},{title:"手机号",key:"mobile"},{title:"邮箱",key:"email"}],searchTableValue:"",searchValue:"",isShowMemberModal:!1,listUserLoading:!1,listUserData:[],listUserPageTotal:0,listUserCurrentPage:1,pageSize:10,onPageSelection:[],selectDeleteMemberInfo:[],reload:!1}},methods:{onSelectionChange:function(e){0<e.length&&(this.selectDeleteMemberInfo=e)},onRefeshChange:function(e){e||(this.reload=e)},onSelectAll:function(e){var t,a={};(t=this.onPageSelection).push.apply(t,d()(e)),this.onPageSelection=this.onPageSelection.reduce(function(e,t){return!a[t.userId]&&(a[t.userId]=e.push(t)),e},[])},handerSelectionChange:function(e){if(0===e.length){var t=this.$refs.selection.data,a=this.onPageSelection;t.map(function(t){a=a.filter(function(e){return e.userId!==t.userId})}),this.onPageSelection=a}else{var i,r={};(i=this.onPageSelection).push.apply(i,d()(e)),this.onPageSelection=this.onPageSelection.reduce(function(e,t){return!r[t.userId]&&(r[t.userId]=e.push(t)),e},[])}},deletePageSelection:function(e){var a=this,i=Number(e.target.parentElement.getAttribute("userId"));this.onPageSelection=this.onPageSelection.filter(function(e){return e.userId!==i}),this.$refs.selection.data.forEach(function(e,t){i===e.userId&&a.$refs.selection.toggleSelect(t)})},onSelectCancel:function(e,t){this.onPageSelection=this.onPageSelection.filter(function(e){return e.userId!==t.userId})},saveSelectionUser:function(){var t=this,a=[];this.onPageSelection.forEach(function(e){a.push(e.userId)}),a&&Object(s.e)(this.groupId,a.join(","),1).then(function(e){e.success&&(t.$Message.success("更新成功"),t.reload=!0,t.isShowMemberModal=!1,t.$emit("on-member-info-change",!0))})},deleteMemberInfo:function(){var t=this,a=[];0<this.selectDeleteMemberInfo.length?(this.selectDeleteMemberInfo.forEach(function(e){a.push(e.userId)}),a&&Object(s.m)(this.groupId,a.join(","),0).then(function(e){e.success&&(t.$Message.success("删除成功!"),t.reload=!0,t.$emit("on-member-info-change",!0))})):this.$Message.info("请选择要删除的成员")},getListUsers:function(e,t,a){var i=this;this.listUserLoading=!0,Object(s.w)(t,e,a).then(function(e){i.listUserPageTotal=e.dataCount,i.listUserData=e.tableContent,i.listUserLoading=!1,0<i.onPageSelection.length&&i.listUserData.map(function(t){i.onPageSelection.map(function(e){t.userId===e.userId&&(t._checked=!0)})})})},listUserChangePage:function(e){var t=o()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getListUsers(e,this.pageSize,t)},onPageSizeChange:function(e){this.pageSize=e;var t=o()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getListUsers(1,e,t)},showMemberModal:function(){this.isShowMemberModal=!0,this.searchValue="",this.onPageSelection=[],this.getListUsers(this.listUserCurrentPage,this.pageSize)},userFilter:function(){var e=o()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getListUsers(this.listUserCurrentPage,this.pageSize,e)},userTableFilter:function(){var e=o()([{operator_1:"like",value_1:this.searchTableValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchTableValue,property_2:"userCode"}]);this.memberInfoParams.filter=e,this.reload=!0}}},I=a("8Gcc"),w=a.n(I);var S=function(e){a("CsFM")},_=a("VU/8")(k,w.a,!1,S,null,null).exports,P={name:"principal",components:{CustomTable:n.a,PrincipalModal:r.a},props:{groupId:{type:String},isPermission:{type:Boolean}},data:function(){var a=this;return{principalParams:{groupId:this.groupId,page:1,limit:10},searchValue:"",principalColumns:[{title:"头像",key:"photo",width:80,render:function(e,t){return e("div",[e("Avatar",{props:{src:t.row.photo?t.row.photo:"resources/images/icon/defaultUserPhoto.png"}})])}},{title:"工号",width:100,key:"USER_CODE"},{title:"名称",key:"nickname"},{title:"性别",key:"gender",render:function(e,t){var a=t.row.gender;return e("span",1===a?"男":0===a?"女":"未知")}},{title:"联系电话",key:"mobile"},{title:"邮箱",key:"email"},{title:"操作",key:"action",width:120,align:"center",render:function(e,t){return e("Button",{props:{type:"error",size:"small",disabled:!a.isPermission},style:{cursor:"pointer"},on:{click:function(){a.$Modal.confirm({title:"确认",content:"确认删除该负责人？",onOk:function(){var e={groupId:a.groupId,principal:""};a.savePrincipal(e,"删除成功！")}})}}},"删除")}}],principalColumnsModel:[{title:"头像",key:"photo",width:80,render:function(e,t){return e("div",[e("Avatar",{props:{src:t.row.photo?t.row.photo:"resources/images/icon/defaultUserPhoto.png"}})])}},{title:"工号",key:"userCode"},{title:"姓名",key:"nickname"},{title:"性别",key:"gender",render:function(e,t){var a=t.row.gender;return e("span",1===a?"男":0===a?"女":"未知")}},{title:"手机号",key:"mobile"},{title:"邮箱",key:"email"}],isShowPrincipalModal:!1,listUserLoading:!1,listUserData:[],listUserPageTotal:0,listUserCurrentPage:1,pageSize:10,onSelectionModal:[],selectDeleteMemberInfo:[],reload:!1}},methods:{addPrincipal:function(){this.isShowPrincipalModal=!0,this.searchValue="",this.getListUsers(this.listUserCurrentPage,this.pageSize)},getListUsers:function(e,t,a){var i=this;this.listUserLoading=!0,Object(s.w)(t,e,a).then(function(e){i.listUserPageTotal=e.summary.total,i.listUserData=e.tableContent,i.listUserLoading=!1})},listUserChangePage:function(e){var t=o()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getListUsers(e,this.pageSize,t)},onPageSizeChange:function(e){this.pageSize=e;var t=o()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getListUsers(1,e,t)},onRefeshChange:function(e){e||(this.reload=e)},onSelectUserList:function(e,t){this.onSelectionModal=e},handleDblclick:function(e,t){var a={groupId:this.groupId,principal:e.userId};this.savePrincipal(a)},savaSelectUser:function(){var e={groupId:this.groupId,principal:this.onSelectionModal.userId};this.savePrincipal(e)},savePrincipal:function(e,t){var a=this;Object(s.X)(e).then(function(e){e.success&&(a.$Message.success(t||"更新成功"),a.isShowPrincipalModal=!1,a.reload=!0,a.$emit("on-principal-change",!0))}).catch(function(e){a.$Message.error(e.data.message)})},userFilter:function(){var e=o()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getListUsers(this.listUserCurrentPage,this.pageSize,e)}}},C=a("U6mh"),M=a.n(C);var z=function(e){a("HT0W")},U=a("VU/8")(P,M.a,!1,z,"data-v-1690506e",null).exports,O=a("SsGY"),T={name:"organization",components:{MemberModal:r.a,HighOrganization:h,LowerOrganization:y,MemberInfo:_,Principal:U,Permission:O.a,PrincipalModal:r.a},data:function(){return{formItem:{groupName:"",groupType:"",depFunction:"",status:-3,principal:"",principalName:"",highGroup:"",parentId:""},tableContent:{},isEdit:!0,editBtnName:"编辑",hiddenInput:!1,actionBtn:[{label:"权限",type:"md-person",number:0,hidden:!1,id:"objectPermission"},{label:"成员信息",imgPath:"resources/images/icon/user.png",number:0,hidden:!1,id:"user"},{label:"负责人",imgPath:"resources/images/icon/user.png",number:0,hidden:!1,id:"groupPrincipal"},{label:"下级组织",imgPath:"resources/images/icon/organization.png",number:0,hidden:!1,id:"childGroup"},{label:"上级组织",imgPath:"resources/images/icon/organization.png",number:0,hidden:!1,id:"parentGroup"},{label:"基本信息",type:"ios-home",hidden:!1,id:"baseinfo"}],actionIndex:5,isShowMemberModal:!1,highOrgModalLoading:!0,editHighOrg:"",editHighOrgParentId:"",name:"",groupType:"",parentType:"",listUserData:[],highOrgColumnsModal:[{title:"组织名称",key:"groupName"},{title:"组织类型",key:"groupType",render:function(e,t){var a=t.row.groupType;switch(a){case"M":a="管理层";break;case"A":a="事业部";break;case"O":a="部门";break;case"D":a="直营店";break;case"J":a="加盟店";break;case"G":a="小组"}return e("span",a)}},{title:"组织职能",key:"depFunction",render:function(e,t){var a=t.row.depFunction;switch(a){case"M":a="管理";break;case"S":a="销售";break;case"C":a="制造";break;case"R":a="研发";break;case"O":a="运营";break;case"E":a="工程"}return e("span",a)}},{title:"组织状态",key:"status",render:function(e,t){var a=t.row.status,i="";switch(a){case-1:i="已失效";break;case 1:i="已生效";break;case 2:i="进行中";break;case 0:i="草稿";break;case-2:i="已归档"}return e("span",{style:{color:a?"#0279f6":"#f03707",cursor:"default"}},i)}}],listUserPageTotal:0,listUserCurrentPage:1,pageSize:10,searchHighOrgValue:"",onSelectionModal:[],isShowPrincipalModal:!1,PrincipalModaLoading:!1,principalData:[],principalPageTotal:0,principalCurrentPage:1,principalPageSize:10,searchPrincipalValue:"",onSelectionPrincipal:[],principalColumnsModel:[{title:"工号",key:"userCode"},{title:"姓名",key:"nickname"},{title:"性别",key:"gender",render:function(e,t){var a=t.row.gender;return e("span",1===a?"男":0===a?"女":"未知")}},{title:"手机号",key:"mobile"}],ruleValidate:{groupName:[{required:!0,message:"请输入组织名称",trigger:"blur"}],highGroup:[{required:!0,message:"请选择上级组织",trigger:"change"}],groupType:[{required:!0,message:"请选择组织类型",trigger:"change"}],depFunction:[{required:!0,message:"请选择组织职能",trigger:"change"}],principal:[{required:!0,message:"请选择负责人",trigger:"change"}]},checkout:!0,groupId:this.$route.params.groupId,isPermission:!0,target:{type:"group",targetId:this.$route.params.groupId}}},computed:{formItemGroupType:function(){return this.formItem.groupType}},watch:{formItemGroupType:function(e,t){e===t||this.isEdit||(this.formItem.highGroup="")}},methods:{goOrgList:function(){location.href="/Site/index.html#page/origanizations"},handlerViewChange:function(e){this.actionIndex=e},handleSubmitBoxs:function(e){var t=e.target||e.srcElement;if("input"===t.nodeName.toLocaleLowerCase())switch(t.id){case"close":this.$Modal.confirm({title:"提示",content:"是否关闭当前页面",closable:!0,onOk:function(){location.href="/Site/index.html#page/origanizations"}});break;case"edit":this.isEdit=!this.isEdit,this.editBtnName=this.isEdit?"编辑":"放弃编辑";break;case"save":this.formItem.status=1,this.save();break;case"saveAndAdd":this.formItem.status=1,this.saveAndAdd();break;case"file":this.formItem.status=-2,this.save();break;case"draft":this.formItem.status=0,this.save();break;case"restore":this.formItem.status=1,this.save()}},saveAndAdd:function(){var t=this;this.$refs.formItem.validate(function(e){e&&!t.groupId&&t.checkout&&(delete t.formItem.groupId,Object(s.T)(t.formItem).then(function(e){t.$Message.success("保存成功"),t.$refs.formItem.resetFields(),t.formItem={groupName:"",groupType:"",depFunction:"",status:-3}}).catch(function(e){t.$Message.error(e.data.message)})),t.checkout||t.$Message.error("名称已经存在!")})},save:function(){var t=this;this.$refs.formItem.validate(function(e){e&&(!t.groupId&&t.checkout?(delete t.formItem.groupId,Object(s.T)(t.formItem).then(function(e){e&&(t.$router.push({path:"/addressBook/organization/detail/"+e.groupId}),window.location.reload())}).catch(function(e){t.$Message.error(e.data.message)})):t.groupId&&t.checkout&&(t.formItem.groupId=t.groupId,Object(s._0)(t.formItem).then(function(e){e&&(t.$Message.success(e.message),window.location.reload())}).catch(function(e){t.$Message.error(e.data.message)})),t.checkout||t.$Message.error("名称已经存在!"))})},getObjDetailsCountByGroupId:function(e){var a=this;Object(s.J)(e).then(function(t){a.actionBtn.forEach(function(e){e.number=t[e.id]})})},handleChangeObjDetailsCount:function(e){e&&this.getObjDetailsCountByGroupId(this.groupId)},listUserChangePage:function(e){var t=[{operator:"like",value:this.searchHighOrgValue,property:"groupName"}];this.getAllHigherGroupByGroupType(e,this.pageSize,t)},orgFilter:function(){var e=[{operator:"like",value:this.searchHighOrgValue,property:"groupName"}];this.getAllHigherGroupByGroupType(this.listUserCurrentPage,this.pageSize,e)},onSelectUserList:function(e,t){this.onSelectionModal=e},onGroupNameOutBlur:function(){var t=this,e={};this.isEdit||(e=this.groupId?[{filedName:"groupName",value:this.formItem.groupName,symbol:"="},{filedName:"groupId",symbol:"<>",value:this.groupId}]:[{filedName:"groupName",value:this.formItem.groupName,symbol:"="}],e=o()(e),Object(s.i)("sys_group",e).then(function(e){0<e.result?(t.checkout=!1,t.$Message.error("名称已经存在!")):t.checkout=!0}).catch(function(e){t.$Message.error(e.data.message)}))},getAllHigherGroupByGroupType:function(e,t,a){var i=this;this.highOrgModalLoading=!0;var r=a||[];r=o()(r),Object(s.q)(e,t,this.formItem.groupType,r).then(function(e){i.listUserPageTotal=e.summary.total,i.listUserData=e.tableContent,i.highOrgModalLoading=!1})},selectHighOrgModal:function(){this.formItem.groupType?(this.isShowMemberModal=!0,this.searchHighOrgValue="",this.getAllHigherGroupByGroupType(this.listUserCurrentPage,this.pageSize)):this.$Message.info("组织类型不能为空！")},saveSelectionHighOrg:function(){this.formItem.highGroup=this.onSelectionModal.groupName,this.formItem.parentId=this.onSelectionModal.groupId,this.isShowMemberModal=!1},selectPrincipalModal:function(){this.isShowPrincipalModal=!0,this.searchPrincipalValue="",this.getListUsers(this.principalCurrentPage,this.principalPageSize)},getListUsers:function(e,t,a){var i=this;this.PrincipalModaLoading=!0,Object(s.w)(t,e,a).then(function(e){i.principalPageTotal=e.summary.total,i.principalData=e.tableContent,i.PrincipalModaLoading=!1})},principalChangePage:function(e){var t=o()([{operator_1:"like",value_1:this.searchPrincipalValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchPrincipalValue,property_2:"userCode"}]);this.getListUsers(e,this.principalPageSize,t)},onSelectPrincipal:function(e,t){this.onSelectionPrincipal=e},handlePrinciplDblclick:function(e,t){this.formItem.principalName=e.nickname,this.formItem.principal=e.userId,this.isShowPrincipalModal=!1},onPrincipalPageSizeChange:function(e){var t=o()([{operator_1:"like",value_1:this.searchPrincipalValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchPrincipalValue,property_2:"userCode"}]);this.principalPageSize=e,this.getListUsers(1,e,t)},handleHighOrgDblclick:function(e,t){this.formItem.highGroup=e.groupName,this.formItem.parentId=e.groupId,this.isShowMemberModal=!1},onHighOrgPageSizeChange:function(e){this.pageSize=e;var t=[{operator:"like",value:this.searchHighOrgValue,property:"groupName"}];this.getAllHigherGroupByGroupType(1,e,t)},savaSelectPrincipal:function(){this.formItem.principalName=this.onSelectionPrincipal.nickname,this.formItem.principal=this.onSelectionPrincipal.userId,this.isShowPrincipalModal=!1},userFilter:function(){var e=o()([{operator_1:"like",value_1:this.searchPrincipalValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchPrincipalValue,property_2:"userCode"}]);this.getListUsers(this.listUserCurrentPage,this.pageSize,e)}},mounted:function(){var a=this,e=document.body.clientHeight-95;window.document.getElementsByClassName("organization-wrap-tabs")[0].style.height=e+"px",window.document.getElementsByClassName("organization-wrap-tabs")[0].style.maxHeight=e+"px";var t=o()([{operator:"eq",value:this.groupId,property:"groupId"}]);this.groupId?(Object(s.L)(t).then(function(e){if(e.tableContent[0]){var t=e.tableContent[0];switch(a.formItem.groupName=t.groupName,a.name=t.groupName,a.formItem.groupType=t.groupType,a.formItem.depFunction=t.depFunction,a.formItem.status=t.status,a.formItem.principal=t.principal,a.formItem.principalName=t.principalName,a.formItem.highGroup=t.parentName,a.formItem.parentId=t.parentId,a.tableContent=t,a.parentType=t.parentType,a.editHighOrg=a.formItem.highGroup,a.editHighOrgParentId=a.formItem.parentId,t.groupType){case"M":a.groupType="管理层";break;case"A":a.groupType="事业部";break;case"O":a.groupType="部门";break;case"G":a.groupType="小组"}}}),this.getObjDetailsCountByGroupId(this.groupId)):this.groupId||"org-add"!=this.$route.name||(this.isEdit=!1,this.actionBtn.forEach(function(e){"baseinfo"!==e.id&&(e.hidden=!0)})),Object(s.H)("000002").then(function(e){e[0].action.update||(a.isPermission=!1)})}},x=a("MTfv"),V=a.n(x);var L=function(e){a("29BB")},G=a("VU/8")(T,V.a,!1,L,null,null);t.default=G.exports},xHvs:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("custom-table",{attrs:{apiUrl:"/ds/getParentGroupByGroupId",columns:t.highOrgColumns,apiParams:t.highOrganizationParams,isHiddenPage:!0},on:{"on-refesh-change":t.onRefeshChange},model:{value:t.reload,callback:function(e){t.reload=e},expression:"reload"}},[t.isPermission?a("div",{staticClass:"header-action",attrs:{slot:"header"},slot:"header"},[a("label",{on:{click:t.showHighOrgModal}},[t._v("上级组织")]),t._v(" "),a("span",[t._v("-选择上级组织")])]):t._e()]),t._v(" "),a("member-modal",{attrs:{width:"1000",footerBtnAlign:"right",title:"选择组织"},on:{"on-ok":t.saveSelectionHighOrg},model:{value:t.isShowMemberModal,callback:function(e){t.isShowMemberModal=e},expression:"isShowMemberModal"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索组织名称"},on:{"on-search":t.orgFilter},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),a("a",{staticClass:"app-search-icon",on:{click:t.orgFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[t._v("查询")])],1)],1),t._v(" "),a("Table",{ref:"currentRowTable",staticClass:"rfd-table",attrs:{height:"400",loading:t.listUserLoading,columns:t.highOrgColumnsModal,data:t.listUserData,size:"small","highlight-row":""},on:{"on-row-dblclick":t.handleDblclick,"on-current-change":t.onSelectUserList}}),t._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.listUserPageTotal,current:t.listUserCurrentPage,"page-size":t.pageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.listUserChangePage,"on-page-size-change":t.onPageSizeChange}})],1)])],1)])],1)},staticRenderFns:[]}}});