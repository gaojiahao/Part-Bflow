{"source":"webpackJsonp([1],{\"2FEj\":function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var s=a(\"mvHQ\"),o=a.n(s),r=a(\"fZjL\"),i=a.n(r),n=a(\"oAV5\"),l=a(\"o32f\"),c={name:\"userInfo\",components:{},props:{userInfo:{type:Object},isUpdate:{type:Boolean}},data:function(){return{httpHeaders:{Authorization:Object(n.c)()},logo:\"\",searchValue:\"\",userId:this.$route.params.userId,hiddenInput:!1,showCompanyModal:!1,visible:!1,checkout:!0,isEdit:!0,isAdd:!0,loading:!1,companyTable:{total:0,currentPage:1,pageSize:10},companyColumns:[{title:\"公司名称\",key:\"groupName\"},{title:\"公司简称\",key:\"groupShortName\"},{title:\"公司类型\",key:\"companyType\"},{title:\"创建者\",key:\"creator\"}],companyData:[],selectedCompanyData:{},formItem:{userCode:\"\",nickname:\"\",mobile:\"\",officePhone:\"\",email:\"\",status:-3,gender:\"1\",termOfValidity:\"\",userType:\"1\",entityId:\"\",entityName:\"\"},ruleValidate:{userCode:[{required:!0,message:\"用户工号只能包含字母或数字或汉字或下划线\",trigger:\"blur\",pattern:/^[a-zA-Z0-9_\\u4e00-\\u9fa5]+$/}],nickname:[{required:!0,message:\"用户名称只能包含字母或数字或汉字或下划线\",trigger:\"blur\",pattern:/^[a-zA-Z0-9_\\u4e00-\\u9fa5]+$/}],entityName:[{required:!0,message:\"请选择公司主体\",trigger:\"change\"}],termOfValidity:[{required:!0,message:\"请选择有效期\"}],mobile:[{required:!0,message:\"手机号输入不合法\",trigger:\"blur\",pattern:/^[1][3,4,5,7,8,9][0-9]{9}$/}],email:[{type:\"email\",message:\"邮箱输入不合法\",trigger:\"blur\"}],officePhone:[{message:\"座机输入不合法\",trigger:\"blur\",pattern:/^((0\\d{2,3})-)(\\d{7,8})(-(\\d{3,}))?$/}]}}},watch:{userInfo:function(){0<i()(this.userInfo).length&&(console.log(this.userInfo),this.formItem.userCode=this.userInfo.userCode,this.formItem.nickname=this.userInfo.nickname,this.formItem.mobile=this.userInfo.mobile,this.formItem.officePhone=this.userInfo.officePhone,this.formItem.email=this.userInfo.email,this.formItem.termOfValidity=this.userInfo.termOfValidity,this.formItem.gender=String(this.userInfo.gender),this.formItem.status=this.userInfo.status,this.formItem.userType=String(this.userInfo.userType),this.logo=this.userInfo.photo,this.formItem.entityId=this.userInfo.entityId,this.formItem.entityName=this.userInfo.entityName)},isUpdate:function(){this.isUpdate||(this.isAdd=!1)}},methods:{userCodeBlur:function(){var t=this,e=void 0;if(this.userId){var a=this.formItem.userCode;e=o()([{filedName:\"userCode\",symbol:\"=\",value:a},{filedName:\"userId\",symbol:\"<>\",value:this.userId}]),Object(l.i)(\"sys_user\",e).then(function(e){1===e.result?(t.checkout=!1,t.$Message.error(\"工号已存在，请重新输入！\")):t.checkout=!0})}else this.formItem.userCode&&(e=o()([{filedName:\"userCode\",symbol:\"=\",value:this.formItem.userCode}]),Object(l.i)(\"sys_user\",e).then(function(e){1===e.result?(t.checkout=!1,t.$Message.error(\"工号已存在，请重新输入！\")):t.checkout=!0}))},handleSuccess:function(e,t){this.logo=\"/H_roleplay-si/ds/download?width=128&height=128&url=\"+e.data[0].attacthment},handleView:function(){this.visible=!0},handleRemove:function(){this.logo=\"\",this.$refs.upload.fileList.splice(0,this.$refs.upload.fileList.length)},handleMaxSize:function(e){this.$Notice.warning({title:\"文件大小超出范围\",desc:\"文件大小最大为2M\"})},handleFormatError:function(e){this.$Notice.warning({title:\"文件格式不对\",desc:\"请上传格式为png 或者 jpg 的图片\"})},editUserInfo:function(){this.isEdit=!this.isEdit},updateUserData:function(t){var a=this;this.$refs.formItem.validate(function(e){e&&(a.checkout?(a.formItem.photo=a.logo,a.formItem.status=Number(a.formItem.status),a.formItem.status=\"draft\"===t?0:\"file\"===t?-2:1,a.formItem.termOfValidity&&(a.formItem.termOfValidity=a.formatDate(a.formItem.termOfValidity)),a.userInfo.userId?(a.formItem.userId=a.userInfo.userId,Object(l._4)(a.formItem).then(function(e){e.success&&(a.$Message.success(\"更新成功\"),window.location.reload())}).catch(function(e){a.$Message.error(e.data.message)})):Object(l.g)(a.formItem).then(function(e){e&&(a.$Message.success(\"保存成功\"),a.$router.push({path:\"/addressBook/user/detail/\"+e.user_id}),window.location.reload())}).catch(function(e){a.$Message.error(e.data.message)})):a.$Message.error(\"工号已存在，请重新输入！\"))})},selectCompanyModal:function(){this.showCompanyModal=!0},onDbClick:function(e,t){this.formItem.entityId=e.groupCode,this.formItem.entityName=e.groupName,this.showCompanyModal=!1},onRowClick:function(e,t){this.selectedCompanyData=e},onPageChange:function(e){this.companyTable.currentPage=e,this.getAllCompanysData(this.searchValue)},pageSizeChange:function(e){this.companyTable.pageSize=e,this.getAllCompanysData(this.searchValue)},companyFilter:function(){this.getAllCompanysData(this.searchValue)},getAllCompanysData:function(e){var t=this;this.loading=!0,Object(l.p)(this.companyTable.pageSize,this.companyTable.currentPage,e,4).then(function(e){t.companyData=e.tableContent,t.companyTable.total=e.dataCount,t.loading=!1})},selectCompany:function(){this.formItem.entityId=this.selectedCompanyData.groupCode,this.formItem.entityName=this.selectedCompanyData.groupName},saveAndAddUser:function(){var t=this;this.userCodeBlur(),this.$refs.formItem.validate(function(e){e&&t.checkout&&(t.formItem.photo=t.logo,t.formItem.status=1,t.formItem.termOfValidity&&(t.formItem.termOfValidity=t.formatDate(t.formItem.termOfValidity)),t.userInfo.userId?(t.formItem.userId=t.userInfo.userId,Object(l._4)(t.formItem).then(function(e){e.success&&(t.$Message.success(e.message),t.$router.push({path:\"/addressBook/user/add\"}),window.location.reload())}).catch(function(e){t.$Message.error(e.data.message)})):Object(l.g)(t.formItem).then(function(e){e&&(t.$Message.success(\"新增成功！\"),t.$refs.formItem.resetFields(),t.formItem.termOfValidity=\"\",t.logo=\"\",t.formItem.photo=\"\",t.formItem.gender=\"1\",t.formItem.status=-3,t.formItem.userType=\"1\",t.$refs.upload.fileList.splice(0,t.$refs.upload.fileList.length))}).catch(function(e){t.$Message.error(e.data.message)}))})},goUserList:function(){this.$Modal.confirm({title:\"系统提示\",content:\"确认要关闭当前页面吗？\",onOk:function(){location.href=\"/Site/index.html#page/users\"}})},formatDate:function(e){var t=new Date(e),a=t.getFullYear(),s=t.getMonth()+1;return 1<=s&&s<=9&&(s=\"0\"+s),a+\"-\"+s+\"-\"+t.getDate()}},mounted:function(){this.getAllCompanysData(),this.userId||(this.isAdd=!1,this.isEdit=!1)}},u=a(\"eHfy\"),d=a.n(u);var h=function(e){a(\"vqzf\")},p=a(\"VU/8\")(c,d.a,!1,h,null,null).exports,g={name:\"higherUser\",components:{},props:{isUpdate:{type:Boolean}},data:function(){var a=this;return{userId:this.$route.params.userId,highUser:{total:0,currentPage:1,usertotal:0,usercurrentPage:1,pageSize:10,allUserpageSize:10},searchValue:\"\",loading:!0,userLoading:!0,showModal:!1,columns:[{title:\"头像\",key:\"photo\",width:80,render:function(e,t){return e(\"div\",[e(\"Avatar\",{props:{src:t.row.photo?t.row.photo:\"resources/images/icon/defaultUserPhoto.jpg\"}})])}},{title:\"工号\",key:\"userCode\"},{title:\"姓名\",key:\"nickname\"},{title:\"性别\",key:\"gender\",render:function(e,t){return e(\"span\",{},1===t.row.gender?\"男\":\"女\")}},{title:\"手机号\",key:\"mobile\"},{title:\"邮箱\",key:\"email\",width:180},{title:\"操作\",key:\"action\",align:\"center\",render:function(e,t){return e(\"Button\",{props:{type:\"error\",size:\"small\",disabled:!a.isUpdate},on:{click:function(){a.$Modal.confirm({title:\"确认\",content:\"确认删除此用户？\",onOk:function(){Object(l.o)(a.userId).then(function(e){e.success&&(a.$Message.success(\"删除成功！\"),a.getHigherUserData(),a.$emit(\"changeInstance\"))}).catch(function(e){a.$Message.error(e.data.message)})}})}}},\"删除\")}}],userColumns:[{title:\"头像\",key:\"photo\",width:80,render:function(e,t){return e(\"div\",[e(\"Avatar\",{props:{src:t.row.photo?t.row.photo:\"resources/images/icon/defaultUserPhoto.jpg\"}})])}},{title:\"工号\",key:\"userCode\"},{title:\"姓名\",key:\"nickname\"},{title:\"性别\",key:\"gender\",render:function(e,t){return e(\"span\",{},1===t.row.gender?\"男\":\"女\")}},{title:\"手机号\",key:\"mobile\"},{title:\"邮箱\",key:\"email\",width:180}],higherUserData:[],userData:[],onRowClickSelectData:{}}},methods:{getHigherUserData:function(){var t=this;this.userId?(this.loading=!0,Object(l.D)(this.userId,this.highUser.pageSize,this.highUser.currentPage).then(function(e){t.higherUserData=e.tableContent,t.highUser.total=e.dataCount,t.loading=!1})):this.loading=!1},onPageChange:function(e){this.highUser.currentPage=e,this.getHigherUserData()},onPageSizeChange:function(e){this.highUser.pageSize=e,this.getHigherUserData()},onAllUserPageSizeChange:function(e){var t=o()([{operator_1:\"like\",value_1:this.searchValue,property_1:\"nickname\",link:\"or\",operator_2:\"like\",value_2:this.searchValue,property_2:\"userCode\"},{operator:\"ne\",value:this.userId,property:\"userId\"},{operator:\"ne\",value:0,property:\"status\"},{operator:\"ne\",value:-2,property:\"status\"}]);this.highUser.allUserpageSize=e,this.getAllUsersData(t)},onUserPageChange:function(e){var t=o()([{operator_1:\"like\",value_1:this.searchValue,property_1:\"nickname\",link:\"or\",operator_2:\"like\",value_2:this.searchValue,property_2:\"userCode\"},{operator:\"ne\",value:this.userId,property:\"userId\"},{operator:\"ne\",value:0,property:\"status\"},{operator:\"ne\",value:-2,property:\"status\"}]);this.highUser.usercurrentPage=e,this.getAllUsersData(t)},onDbClick:function(e,t){var a=this,s=e.userId;s&&this.userId&&Object(l._2)(this.userId,s).then(function(e){e.success&&(a.showModal=!1,a.$Message.success(\"更新成功\"),a.getHigherUserData(),a.$emit(\"changeInstance\"))}).catch(function(e){a.$Message.error(e.data.message)})},addHighUser:function(){var t=this,e=this.onRowClickSelectData.userId;e&&this.userId&&Object(l._2)(this.userId,e).then(function(e){e.success&&(t.$Message.success(\"更新成功\"),t.getHigherUserData(),t.$emit(\"changeInstance\"))})},onRowClick:function(e,t){this.onRowClickSelectData=e},showUserModal:function(){this.showModal=!0,this.searchValue=\"\",this.getAllUsersData()},getAllUsersData:function(e){var t=this,a=e||o()([{operator:\"ne\",value:this.userId,property:\"userId\"},{operator:\"ne\",value:0,property:\"status\"},{operator:\"ne\",value:-2,property:\"status\"}]);this.userLoading=!0,Object(l.w)(this.highUser.allUserpageSize,this.highUser.usercurrentPage,a).then(function(e){t.userData=e.tableContent,t.highUser.usertotal=e.dataCount,t.userLoading=!1})},userFilter:function(){var e=o()([{operator_1:\"like\",value_1:this.searchValue,property_1:\"nickname\",link:\"or\",operator_2:\"like\",value_2:this.searchValue,property_2:\"userCode\"},{operator:\"ne\",value:this.userId,property:\"userId\"},{operator:\"ne\",value:0,property:\"status\"},{operator:\"ne\",value:-2,property:\"status\"}]);highUser.usercurrentPage=1,this.getAllUsersData(e)}},mounted:function(){this.getHigherUserData()}},m=a(\"lYVs\"),f=a.n(m);var v=function(e){a(\"EOaB\")},w=a(\"VU/8\")(g,f.a,!1,v,null,null).exports,I=a(\"Gu7T\"),y=a.n(I),_={name:\"UserSelector\",components:{},props:{showUserSelector:{type:Boolean},userModalTitle:{type:String,default:\"用户选择\"}},data:function(){return{userId:this.$route.params.userId,user:{usertotal:0,usercurrentPage:1,allUserpageSize:10},searchValue:\"\",userLoading:!0,showUserModal:!1,onPageSelection:[],userColumns:[{type:\"selection\",width:60,align:\"center\"},{title:\"头像\",key:\"photo\",width:80,render:function(e,t){return e(\"div\",[e(\"Avatar\",{props:{src:t.row.photo?t.row.photo:\"resources/images/icon/defaultUserPhoto.jpg\"}})])}},{title:\"工号\",key:\"userCode\"},{title:\"姓名\",key:\"nickname\"},{title:\"性别\",key:\"gender\",render:function(e,t){return e(\"span\",{},1===t.row.gender?\"男\":\"女\")}},{title:\"手机号\",key:\"mobile\",width:130},{title:\"邮箱\",key:\"email\",width:180}],userData:[]}},watch:{showUserSelector:function(e){e&&(this.showUserModal=e,this.searchValue=\"\",this.onPageSelection=[],this.getAllUsersData())}},methods:{modalVisibleChange:function(e){e||this.$emit(\"changeUserModalStatus\",{modal:!1})},onAllUserPageSizeChange:function(e){var t=o()([{operator_1:\"like\",value_1:this.searchValue,property_1:\"nickname\",link:\"or\",operator_2:\"like\",value_2:this.searchValue,property_2:\"userCode\"},{operator:\"ne\",value:this.userId,property:\"userId\"},{operator:\"ne\",value:0,property:\"status\"},{operator:\"ne\",value:-2,property:\"status\"}]);this.user.allUserpageSize=e,this.getAllUsersData(t)},onUserPageChange:function(e){var t=o()([{operator_1:\"like\",value_1:this.searchValue,property_1:\"nickname\",link:\"or\",operator_2:\"like\",value_2:this.searchValue,property_2:\"userCode\"},{operator:\"ne\",value:this.userId,property:\"userId\"},{operator:\"ne\",value:0,property:\"status\"},{operator:\"ne\",value:-2,property:\"status\"}]);this.user.usercurrentPage=e,this.getAllUsersData(t)},deleteSelectUser:function(a,e){var s=this;this.onPageSelection.splice(e,1),this.$refs.selection.data.forEach(function(e,t){a.userId===e.userId&&s.$refs.selection.toggleSelect(t)})},addLowUser:function(){var t=this,a=[];0<this.onPageSelection.length&&this.onPageSelection.forEach(function(e){a.push(e.userId)}),0<a.length&&this.userId&&Object(l._2)(a.join(\",\"),this.userId).then(function(e){e.success&&(t.$Message.success(\"更新成功\"),t.$emit(\"addUserChange\"))}).catch(function(e){t.$Message.error(e.data.message)})},onSelectionChange:function(e){if(0===e.length){var t=this.$refs.selection.data,a=this.onPageSelection;t.map(function(t){a=a.filter(function(e){return e.userId!==t.userId})}),this.onPageSelection=a}else{var s,o={};(s=this.onPageSelection).push.apply(s,y()(e)),this.onPageSelection=this.onPageSelection.reduce(function(e,t){return!o[t.userId]&&(o[t.userId]=e.push(t)),e},[])}},onSelectAll:function(e){var t,a={};(t=this.onPageSelection).push.apply(t,y()(e)),this.onPageSelection=this.onPageSelection.reduce(function(e,t){return!a[t.userId]&&(a[t.userId]=e.push(t)),e},[])},onSelectCancel:function(e,t){this.onPageSelection=this.onPageSelection.filter(function(e){return e.userId!==t.userId})},getAllUsersData:function(e){var a=this,t=e||o()([{operator:\"ne\",value:this.userId,property:\"userId\"},{operator:\"ne\",value:0,property:\"status\"},{operator:\"ne\",value:-2,property:\"status\"}]);this.userLoading=!0,Object(l.w)(this.user.allUserpageSize,this.user.usercurrentPage,t).then(function(e){a.userData=e.tableContent,a.user.usertotal=e.dataCount,a.userLoading=!1,0<a.onPageSelection.length&&a.userData.map(function(t){a.onPageSelection.map(function(e){t.userId===e.userId&&(t._checked=!0)})})})},userFilter:function(){var e=o()([{operator_1:\"like\",value_1:this.searchValue,property_1:\"nickname\",link:\"or\",operator_2:\"like\",value_2:this.searchValue,property_2:\"userCode\"},{operator:\"ne\",value:this.userId,property:\"userId\"},{operator:\"ne\",value:0,property:\"status\"},{operator:\"ne\",value:-2,property:\"status\"}]);this.user.usercurrentPage=1,this.getAllUsersData(e)}},mounted:function(){}},k=a(\"H9uK\"),C=a.n(k);var b=function(e){a(\"urmH\")},D={name:\"lowerUser\",components:{UserSelector:a(\"VU/8\")(_,C.a,!1,b,\"data-v-b52af7b4\",null).exports},props:{isUpdate:{type:Boolean}},data:function(){var a=this;return{userId:this.$route.params.userId,lowUser:{total:0,currentPage:1,pageSize:10},loading:!0,showModal:!1,onPageSelection:[],columns:[{type:\"selection\",align:\"center\"},{title:\"头像\",key:\"photo\",width:80,render:function(e,t){return e(\"div\",[e(\"Avatar\",{props:{src:t.row.photo?t.row.photo:\"resources/images/icon/defaultUserPhoto.jpg\"}})])}},{title:\"工号\",key:\"userCode\"},{title:\"姓名\",key:\"nickname\"},{title:\"性别\",key:\"gender\",render:function(e,t){return e(\"span\",{},1===t.row.gender?\"男\":\"女\")}},{title:\"手机号\",key:\"mobile\"},{title:\"邮箱\",key:\"email\",width:180},{title:\"操作\",key:\"action\",align:\"center\",render:function(e,t){return e(\"Button\",{props:{type:\"error\",size:\"small\",disabled:!a.isUpdate},on:{click:function(){a.$Modal.confirm({title:\"确认\",content:\"确认删除此用户？\",onOk:function(){Object(l.o)(t.row.userId).then(function(e){a.$Message.success(\"删除成功！\"),a.getLowerUserData(),a.$emit(\"changeInstance\")}).catch(function(e){a.$Message.error(e.data.message)})}})}}},\"删除\")}}],lowerUserData:[],selectUserData:[],selectLowUserData:[]}},methods:{changeUserModalStatus:function(){this.showModal=!1},getLowerUserData:function(){var t=this;this.userId?(this.loading=!0,Object(l.I)(this.userId,this.lowUser.pageSize,this.lowUser.currentPage).then(function(e){t.lowerUserData=e.tableContent,t.lowUser.total=e.dataCount,t.loading=!1})):this.loading=!1},onPageChange:function(e){this.lowUser.currentPage=e,this.getLowerUserData()},onPageSizeChange:function(e){this.lowUser.pageSize=e,this.getLowerUserData()},selectLowUser:function(e){this.selectLowUserData=e},addUserChange:function(){this.getLowerUserData(),this.$emit(\"changeInstance\")},deleteLowUser:function(){var t=this,a=[];0===this.selectLowUserData.length?this.$Message.warning(\"请先选择要删除的用户！\"):(this.selectLowUserData.forEach(function(e){a.push(e.userId)}),this.$Modal.confirm({title:\"确认\",content:\"确认删除选择的用户？\",onOk:function(){Object(l.o)(a.join(\",\")).then(function(e){t.selectLowUserData=[],t.$Message.success(\"删除成功！\"),t.getLowerUserData(),t.$emit(\"changeInstance\")}).catch(function(e){t.$Message.error(e.data.message)})}}))},showUserModal:function(){this.showModal=!0}},mounted:function(){this.getLowerUserData()}},U=a(\"Z0op\"),S=a.n(U);var P=function(e){a(\"wtoM\")},M=a(\"VU/8\")(D,S.a,!1,P,\"data-v-6367b736\",null).exports,$={name:\"departmentMember\",components:{},props:{isUpdate:{type:Boolean}},data:function(){var s=this;return{userId:this.$route.params.userId,total:0,currentPage:1,pageSize:10,loading:!0,showModal:!1,columns:[{type:\"selection\",width:60,align:\"center\"},{title:\"类型\",key:\"groupType\",render:function(e,t){var a=\"\";switch(t.row.groupType){case\"M\":a=\"管理层\";break;case\"A\":a=\"事业部\";break;case\"O\":a=\"部门\";break;case\"G\":a=\"小组\";break;case\"D\":a=\"直营店\";break;case\"J\":a=\"加盟店\"}return e(\"span\",{},a)}},{title:\"名称\",key:\"groupName\",ellipsis:!0},{title:\"负责人\",key:\"principalName\"},{title:\"默认部门\",key:\"isDefault\",align:\"center\",render:function(e,t){var a=!1;return 1===t.row.isDefault&&(a=!0),e(\"Radio\",{props:{value:a,disabled:!s.isUpdate},on:{\"on-change\":function(e){s.onClickDefaultView(t)}}})}},{title:\"操作\",key:\"action\",maxWidth:120,align:\"center\",render:function(e,t){var a=!1;return 1===t.row.isDefault&&(a=!0),e(\"Button\",{props:{type:\"error\",size:\"small\",disabled:!s.isUpdate||a},on:{click:function(){s.$Modal.confirm({title:\"确认\",content:\"确认删除此部门？\",onOk:function(){Object(l.l)(\"sys_group_user\",t.row.groupId,s.userId).then(function(e){e.success&&(s.$Message.success(\"删除成功！\"),s.getDepartmentData(),s.$emit(\"changeInstance\"))}).catch(function(e){s.$Message.error(e.data.message)})}})}}},\"删除\")}}],departmentData:[],groupData:[],selectGroup:[],selectDeleteGroupData:[]}},methods:{onClickDefaultView:function(e){var t=this;this.$Modal.confirm({title:\"确认\",content:\"确认设置此部门为默认部门？\",onOk:function(){t.setDefaultViews(e)},onCancel:function(){t.reRenderDefaultView()}})},setDefaultViews:function(e){var t=this;Object(l.Z)(this.userId,\"group\",e.row.groupId).then(function(e){e.success&&(t.$Message.success(e.message),t.getDepartmentData())}).catch(function(e){t.$Message.error(e.data.message)})},reRenderDefaultView:function(){var s=this;this.columns[4].render=function(e,t){var a=!1;return 1===t.row.isDefault&&(a=!0),e(\"Radio\",{props:{value:a},on:{\"on-change\":function(){s.onClickDefaultView(t)}}})}},getDepartmentData:function(){var t=this;this.userId?(this.loading=!0,Object(l.z)(this.userId,this.pageSize,this.currentPage).then(function(e){t.departmentData=e.tableContent,t.departmentData.forEach(function(e){1===e.isDefault&&(e._disabled=!0)}),t.total=e.dataCount,t.loading=!1})):this.loading=!1},onPageChange:function(e){this.currentPage=e,this.getDepartmentData()},onPageSizeChange:function(e){this.pageSize=e,this.getDepartmentData()},showGroupModal:function(){this.showModal=!0,this.groupData=[],this.getAllGroupData(7)},deleteGroup:function(){var t=this,a=[];0===this.selectDeleteGroupData.length?this.$Message.warning(\"请先选择要删除的用户部门！\"):(this.selectDeleteGroupData.forEach(function(e){a.push(e.groupId)}),this.$Modal.confirm({title:\"确认\",content:\"确认删除选择的用户部门？\",onOk:function(){Object(l.l)(\"sys_group_user\",a.join(\",\"),t.userId).then(function(e){e.success&&(t.selectDeleteGroupData=[],t.$Message.success(\"删除成功！\"),t.getDepartmentData(),t.$emit(\"changeInstance\"))}).catch(function(e){t.$Message.error(e.data.message)})}}))},selectDeleteGroup:function(e){this.selectDeleteGroupData=e},addDepartment:function(){var t=this;if(0<this.selectGroup.length&&this.userId){var a=[];this.selectGroup.forEach(function(e){a.push(e.groupId)}),Object(l.d)(\"group\",a.join(\",\"),this.userId).then(function(e){e.success&&(t.selectGroup=[],t.$Message.success(\"更新成功\"),0===t.departmentData.length&&Object(l.Z)(t.userId,\"group\",a[0]).then(function(e){}),t.getDepartmentData(),t.$emit(\"changeInstance\"))}).catch(function(e){t.$Message.error(e.data.message)})}},getAllGroupData:function(e){var t=this,a=o()([{operator:\"ne\",value:0,property:\"status\"},{operator:\"ne\",value:-2,property:\"status\"}]);0===this.groupData.length&&Object(l.B)(e,a).then(function(e){e.tableContent.forEach(function(e){0===e.leaf?t.groupData.push({title:e.groupName,groupId:e.groupId,loading:!1,children:[]}):t.groupData.push({title:e.groupName,groupId:e.groupId})})})},loadData:function(e,a){var t=o()([{operator:\"ne\",value:0,property:\"status\"},{operator:\"ne\",value:-2,property:\"status\"}]);Object(l.B)(e.groupId,t).then(function(e){var t=[];e.tableContent.forEach(function(e){0===e.leaf?t.push({title:e.groupName,groupId:e.groupId,loading:!1,children:[]}):t.push({title:e.groupName,groupId:e.groupId})}),a(t)})},selectNode:function(e){this.selectGroup=e}},mounted:function(){this.getDepartmentData()}},z=a(\"on+k\"),R=a.n(z);var V=function(e){a(\"91zc\")},x=a(\"VU/8\")($,R.a,!1,V,\"data-v-2d6e990c\",null).exports,A={name:\"roleMember\",components:{},props:{isUpdate:{type:Boolean}},data:function(){var s=this;return{userId:this.$route.params.userId,rolePage:{total:0,roletotal:0,currentPage:1,rolecurrentPage:1,pageSize:10,allRolepageSize:10},searchValue:\"\",loading:!0,roleLoading:!0,showModal:!1,columns:[{type:\"selection\",width:60,align:\"center\"},{title:\"职位名称\",key:\"name\"},{title:\"职能类型\",key:\"functionType\"},{title:\"职能\",key:\"function\"},{title:\"职级通道\",key:\"rankPass\"},{title:\"职级\",key:\"rank\"},{title:\"小时成本\",key:\"hourCost\"},{title:\"职责描述\",key:\"describe\"},{title:\"默认职位\",key:\"isDefault\",align:\"center\",render:function(e,t){var a=!1;return 1===t.row.isDefault&&(a=!0),e(\"Radio\",{props:{value:a,disabled:!s.isUpdate},on:{\"on-change\":function(e){s.onClickDefaultView(t)}}})}},{title:\"操作\",key:\"action\",maxWidth:150,align:\"center\",render:function(e,t){var a=!1;return 1===t.row.isDefault&&(a=!0),e(\"Button\",{props:{type:\"error\",size:\"small\",disabled:!s.isUpdate||a},on:{click:function(){s.$Modal.confirm({title:\"确认\",content:\"确认删除此职位？\",onOk:function(){Object(l.l)(\"sys_user_role\",s.userId,t.row.id).then(function(e){e.success&&(s.$Message.success(\"删除成功！\"),s.getRoleData(),s.$emit(\"changeInstance\"))}).catch(function(e){s.$Message.error(e.data.message)})}})}}},\"删除\")}}],RoleColumns:[{type:\"selection\",width:60,align:\"center\"},{title:\"职位名称\",key:\"name\"},{title:\"职能类型\",key:\"functionType\"},{title:\"职责描述\",key:\"describe\"}],roleData:[],selectRoleData:[],allRoleData:[],selectDeleteRoleData:[]}},methods:{onClickDefaultView:function(e){var t=this;this.$Modal.confirm({title:\"确认\",content:\"确认设置此职位为默认职位？\",onOk:function(){t.setDefaultViews(e)},onCancel:function(){t.reRenderDefaultView()}})},setDefaultViews:function(e){var t=this;Object(l.Z)(this.userId,\"role\",e.row.id).then(function(e){e.success&&(t.$Message.success(e.message),t.getRoleData())}).catch(function(e){t.$Message.error(e.data.message)})},reRenderDefaultView:function(){var s=this;this.columns[4].render=function(e,t){var a=!1;return 1===t.row.isDefault&&(a=!0),e(\"Radio\",{props:{value:a},on:{\"on-change\":function(){s.onClickDefaultView(t)}}})}},getRoleData:function(){var t=this;this.userId?(this.loading=!0,Object(l.N)(this.userId,this.rolePage.pageSize,this.rolePage.currentPage).then(function(e){t.roleData=e.tableContent,t.roleData.forEach(function(e){1===e.isDefault&&(e._disabled=!0)}),t.rolePage.total=e.dataCount,t.loading=!1})):this.loading=!1},onPageChange:function(e){this.rolePage.currentPage=e,this.getRoleData()},onPageSizeChange:function(e){this.rolePage.pageSize=e,this.getRoleData()},onAllRolePageSizeChange:function(e){var t=o()([{operator:\"like\",value:this.searchValue,property:\"name\"},{operator:\"eq\",value:1,property:\"status\"}]);this.rolePage.allRolepageSize=e,this.getAllRoleData(t)},onRolePageChange:function(e){var t=o()([{operator:\"like\",value:this.searchValue,property:\"name\"},{operator:\"eq\",value:1,property:\"status\"}]);this.rolePage.rolecurrentPage=e,this.getAllRoleData(t)},selectDeleteRole:function(e){this.selectDeleteRoleData=e},deleteUserRole:function(){var t=this,a=[];0===this.selectDeleteRoleData.length?this.$Message.warning(\"请先选择要删除的用户职位！\"):(this.selectDeleteRoleData.forEach(function(e){a.push(e.id)}),this.$Modal.confirm({title:\"确认\",content:\"确认删除选择的用户职位？\",onOk:function(){Object(l.l)(\"sys_user_role\",t.userId,a.join(\",\")).then(function(e){e.success&&(t.selectDeleteRoleData=[],t.$Message.success(\"删除成功！\"),t.getRoleData(),t.$emit(\"changeInstance\"))}).catch(function(e){t.$Message.error(e.data.message)})}}))},addRole:function(){var t=this,a=[];0<this.selectRoleData.length&&this.selectRoleData.forEach(function(e){a.push(e.id)}),0<a.length&&this.userId&&Object(l.d)(\"role\",this.userId,a.join(\",\")).then(function(e){e.success&&(t.$Message.success(\"更新成功\"),0===t.roleData.length&&Object(l.Z)(t.userId,\"role\",a[0]).then(function(e){}),t.getRoleData(),t.$emit(\"changeInstance\"))}).catch(function(e){t.$Message.error(e.data.message)})},deleteSelectUser:function(a,e){var s=this;this.selectRoleData.splice(e,1),this.$refs.selection.data.forEach(function(e,t){a.id===e.id&&s.$refs.selection.toggleSelect(t)})},onSelectionChange:function(e){if(0===e.length){var t=this.$refs.selection.data,a=this.selectRoleData;t.map(function(t){a=a.filter(function(e){return e.id!==t.id})}),this.selectRoleData=a}else{var s,o={};(s=this.selectRoleData).push.apply(s,y()(e)),this.selectRoleData=this.selectRoleData.reduce(function(e,t){return!o[t.id]&&(o[t.id]=e.push(t)),e},[])}},onSelectAll:function(e){var t,a={};(t=this.selectRoleData).push.apply(t,y()(e)),this.selectRoleData=this.selectRoleData.reduce(function(e,t){return!a[t.id]&&(a[t.id]=e.push(t)),e},[])},onSelectCancel:function(e,t){this.selectRoleData=this.selectRoleData.filter(function(e){return e.id!==t.id})},showRoleModal:function(){this.showModal=!0,this.searchValue=\"\",this.selectRoleData=[],this.getAllRoleData()},getAllRoleData:function(e){var a=this,t=e||o()([{operator:\"eq\",value:1,property:\"status\"}]);this.roleLoading=!0,Object(l.u)(this.rolePage.allRolepageSize,this.rolePage.rolecurrentPage,t).then(function(e){a.allRoleData=e.tableContent,a.rolePage.roletotal=e.dataCount,a.roleLoading=!1,0<a.selectRoleData.length&&a.allRoleData.map(function(t){a.selectRoleData.map(function(e){t.id===e.id&&(t._checked=!0)})})})},roleFilter:function(){var e=o()([{operator:\"like\",value:this.searchValue,property:\"name\"},{operator:\"eq\",value:1,property:\"status\"}]);this.rolePage.rolecurrentPage=1,this.getAllRoleData(e)}},mounted:function(){this.getRoleData()}},O=a(\"MM93\"),N=a.n(O);var T=function(e){a(\"AAaI\")},E=a(\"VU/8\")(A,N.a,!1,T,\"data-v-4d82a52c\",null).exports,j=a(\"SsGY\"),F={name:\"indirectPermission\",data:function(){return{userId:this.$route.params.userId,loading:!1,searchValue:\"\",emptyText:\"\",data:[]}},methods:{getAllPermissionDatas:function(e,t){var a=this,s=[],o=e||\"root\";Object(l.E)(o,this.userId).then(function(e){0<e.length?(e.forEach(function(e){e.leaf?s.push({title:e.text,id:e.id,leaf:e.leaf,checked:e.check}):s.push({title:e.text,id:e.id,loading:!1,indeterminate:e.halfSelected,leaf:e.leaf,checked:e.check,children:[]})}),t?t(s):a.data=s):a.emptyText=\"暂无数据\"})},loadData:function(e,t){this.getAllPermissionDatas(e.id,t)},permissionFilter:function(){this.getAllPermissionDatas()}},mounted:function(){this.getAllPermissionDatas()}},L=a(\"wnZK\"),B=a.n(L);var H=function(e){a(\"fV3R\")},G=a(\"VU/8\")(F,B.a,!1,H,\"data-v-6ab3de35\",null).exports,q={name:\"workflowTask\",components:{},props:{},data:function(){var a=this;return{userId:this.$route.params.userId,total:0,currentPage:1,pageSize:10,loading:!0,columns:[{type:\"selection\",width:60,align:\"center\"},{title:\"任务编号\",key:\"taskId\",render:function(e,t){var a=!0;return 1===t.row.type&&(a=!1),e(\"div\",[e(\"Badge\",{props:{dot:a},style:{marginRight:\"5px\",paddingBottom:\"8px\"}}),e(\"span\",{},t.row.taskId)])}},{title:\"流程交易号\",key:\"businessKey\",render:function(e,t){return e(\"a\",{on:{click:function(){window.open(\"/Form/index.html?data=\"+t.row.businessKey)}}},t.row.businessKey)}},{title:\"操作名称\",key:\"nodeName\",render:function(e,t){return e(\"a\",{on:{click:function(){window.open(\"/Form/index.html?data=\"+t.row.businessKey)}}},t.row.nodeName)}},{title:\"应用名称\",key:\"processName\"},{title:\"经办人\",key:\"handlerName2\"},{title:\"发起人\",key:\"crtName\"},{title:\"部门\",key:\"handlerUnitName\",ellipsis:!0},{title:\"创建时间\",key:\"startTime\"},{title:\"表单状态\",key:\"status\"},{title:\"已过时间\",key:\"orig\",render:function(e,t){return e(\"span\",{},a.calcLeadTime(t.row.startTime))}}],worlflowTaskData:[]}},methods:{getWorkflowTaskData:function(){var t=this;this.userId?(this.loading=!0,Object(l.Q)(this.userId,this.currentPage,this.pageSize).then(function(e){t.worlflowTaskData=e.tableContent,t.total=e.dataCount,t.loading=!1})):this.loading=!1},onPageChange:function(e){this.currentPage=e,this.getWorkflowTaskData()},onPageSizeChange:function(e){this.pageSize=e,this.getWorkflowTaskData()},calcLeadTime:function(e){var t=new Date(e.replace(/-/g,\"/\")),a=(new Date).getTime()-t.getTime(),s=a%864e5,o=s%36e5,r=o%6e4;return Math.floor(a/864e5)+\"天\"+Math.floor(s/36e5)+\"时\"+Math.floor(o/6e4)+\"分\"+Math.round(r/1e3)+\"秒\"}},mounted:function(){this.getWorkflowTaskData()}},Z=a(\"GISL\"),K=a.n(Z);var W=function(e){a(\"q1fK\")},Y=a(\"VU/8\")(q,K.a,!1,W,\"data-v-0492cc5b\",null).exports,J={name:\"detail\",components:{UserInfo:p,HigherUser:w,LowerUser:M,DepartmentMember:x,RoleMember:E,DirectPermission:j.a,IndirectPermission:G,WorkfowTask:Y},props:{},data:function(){return{userId:this.$route.params.userId,showTag:!0,isUpdate:!0,whichShow:{userinfo:!0,highuser:!1,lowuser:!1,dep:!1,role:!1,dirper:!1,indirper:!1,workflow:!1},target:{type:\"user\",targetId:this.$route.params.userId},userInformation:{},relativeInstance:[{name:\"工作流任务\",showName:\"workflow\",isShow:!0,isShowAcive:!1,relativeNum:0,type:\"md-menu\"},{name:\"间接权限\",showName:\"indirper\",isShow:!0,isShowAcive:!1,relativeNum:0,type:\"ios-people\"},{name:\"直接权限\",showName:\"dirper\",isShow:!0,isShowAcive:!1,relativeNum:0,type:\"md-person\"},{name:\"职位\",showName:\"role\",isShow:!0,isShowAcive:!1,relativeNum:0,imgUrl:\"resources/images/icon/job.png\"},{name:\"组织\",showName:\"dep\",isShow:!0,isShowAcive:!1,relativeNum:0,imgUrl:\"resources/images/icon/organization.png\"},{name:\"下级用户\",showName:\"lowuser\",isShow:!0,isShowAcive:!1,relativeNum:0,imgUrl:\"resources/images/icon/user.png\"},{name:\"上级用户\",showName:\"highuser\",isShow:!0,isShowAcive:!1,relativeNum:0,imgUrl:\"resources/images/icon/user.png\"},{name:\"基本信息\",showName:\"userinfo\",isShow:!0,isShowAcive:!0,type:\"ios-home\"}]}},created:function(){},methods:{goUserList:function(){location.href=\"/Site/index.html#page/users\"},onClickTab:function(a){var s=this;this.relativeInstance.forEach(function(e,t){a===t?(e.isShowAcive=!0,s.whichShow[e.showName]=!0):(e.isShowAcive=!1,s.whichShow[e.showName]=!1)})},getUserInfoData:function(){var t=this;this.userId&&Object(l.P)(this.userId).then(function(e){t.userInformation=e.tableContent[0]})},getInstanceCount:function(){var t=this;this.userId&&Object(l.G)(this.userId).then(function(e){t.relativeInstance[0].relativeNum=e.workFlow,t.relativeInstance[1].relativeNum=e.SysPermission,t.relativeInstance[2].relativeNum=e.objectPermission,t.relativeInstance[3].relativeNum=e.role,t.relativeInstance[4].relativeNum=e.group,t.relativeInstance[5].relativeNum=e.subordinate,t.relativeInstance[6].relativeNum=e.superior})}},mounted:function(){var t=this;this.getUserInfoData(),this.getInstanceCount(),Object(l.H)(\"000001\").then(function(e){e[0].action.update||(t.isUpdate=!1)})}},Q=a(\"OMsr\"),X=a.n(Q);var ee=function(e){a(\"R6PI\")},te=a(\"VU/8\")(J,X.a,!1,ee,\"data-v-09a17abf\",null);t.default=te.exports},\"91zc\":function(e,t){},AAaI:function(e,t){},EOaB:function(e,t){},GISL:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"workflow\"},[a(\"div\",{staticClass:\"workflow-detail\"},[a(\"Table\",{ref:\"selection\",attrs:{columns:e.columns,loading:e.loading,data:e.worlflowTaskData}}),e._v(\" \"),a(\"div\",{staticClass:\"user-page\"},[a(\"div\",{staticStyle:{float:\"right\",\"padding-bottom\":\"5px\"}},[a(\"Page\",{attrs:{total:e.total,\"show-elevator\":\"\",\"show-sizer\":\"\",current:e.currentPage,\"page-size\":e.pageSize,size:\"small\",\"show-total\":\"\"},on:{\"on-page-size-change\":e.onPageSizeChange,\"on-change\":e.onPageChange}})],1)])],1)])},staticRenderFns:[]}},H9uK:function(e,t){e.exports={render:function(){var s=this,e=s.$createElement,o=s._self._c||e;return o(\"div\",{staticClass:\"lower-user\"},[o(\"Modal\",{attrs:{title:s.userModalTitle,styles:{top:\"15px\"},width:\"1000\"},on:{\"on-ok\":s.addLowUser,\"on-visible-change\":s.modalVisibleChange},model:{value:s.showUserModal,callback:function(e){s.showUserModal=e},expression:\"showUserModal\"}},[o(\"div\",{staticClass:\"app-search\"},[o(\"Input\",{staticStyle:{width:\"300px\"},attrs:{search:!0,placeholder:\"搜索工号或姓名\"},on:{\"on-search\":s.userFilter},model:{value:s.searchValue,callback:function(e){s.searchValue=e},expression:\"searchValue\"}}),s._v(\" \"),o(\"p\",{staticClass:\"app-search-icon\",on:{click:s.userFilter}},[o(\"Button\",{attrs:{type:\"primary\",size:\"small\"}},[s._v(\"查询\")])],1)],1),s._v(\" \"),o(\"Table\",{ref:\"selection\",attrs:{height:\"400\",loading:s.userLoading,columns:s.userColumns,data:s.userData},on:{\"on-selection-change\":s.onSelectionChange,\"on-select-all\":s.onSelectAll,\"on-select-cancel\":s.onSelectCancel}}),s._v(\" \"),o(\"div\",{staticClass:\"user-page\"},[o(\"div\",{staticStyle:{float:\"right\"}},[o(\"Page\",{attrs:{total:s.user.usertotal,\"show-elevator\":\"\",\"show-sizer\":\"\",current:s.user.usercurrentPage,\"page-size\":s.user.allUserpageSize,size:\"small\",\"show-total\":\"\"},on:{\"on-page-size-change\":s.onAllUserPageSizeChange,\"on-change\":s.onUserPageChange}})],1)]),s._v(\" \"),o(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:s.onPageSelection[0],expression:\"onPageSelection[0] \"}],staticClass:\"page-selection-warp\"},s._l(s.onPageSelection,function(t,a){return o(\"Tag\",{key:t.userId,attrs:{userId:t.userId,closable:\"\",type:\"border\",color:\"primary\",size:\"small\"},on:{\"on-close\":function(e){s.deleteSelectUser(t,a)}}},[s._v(\"\\n            \"+s._s(t.nickname)+\"\\n          \")])}))],1)],1)},staticRenderFns:[]}},MM93:function(e,t){e.exports={render:function(){var s=this,e=s.$createElement,o=s._self._c||e;return o(\"div\",{staticClass:\"role\"},[o(\"div\",{staticClass:\"role-detail\",attrs:{id:\"roleHeight\"}},[s.isUpdate?o(\"div\",{staticClass:\"role-header\"},[o(\"b\",{staticClass:\"role-detail-btn\",on:{click:s.showRoleModal}},[s._v(\"职位\")]),s._v(\" \"),o(\"span\",{staticStyle:{color:\"#7a7676\"}},[s._v(\"-添加职位\")]),s._v(\" \"),o(\"b\",{staticClass:\"role-detail-btn\",on:{click:s.deleteUserRole}},[s._v(\"删除\")]),s._v(\" \"),o(\"span\",{staticStyle:{color:\"#7a7676\"}},[s._v(\"-批量删除职位\")])]):s._e(),s._v(\" \"),o(\"div\",{staticClass:\"role-table\"},[o(\"Table\",{attrs:{columns:s.columns,loading:s.loading,data:s.roleData},on:{\"on-selection-change\":s.selectDeleteRole}}),s._v(\" \"),o(\"div\",{staticClass:\"user-page\"},[o(\"div\",{staticStyle:{float:\"right\",\"padding-bottom\":\"5px\"}},[o(\"Page\",{attrs:{total:s.rolePage.total,\"show-elevator\":\"\",\"show-sizer\":\"\",current:s.rolePage.currentPage,\"page-size\":s.rolePage.pageSize,size:\"small\",\"show-total\":\"\"},on:{\"on-page-size-change\":s.onPageSizeChange,\"on-change\":s.onPageChange}})],1)])],1)]),s._v(\" \"),o(\"Modal\",{attrs:{title:\"选择职位\",styles:{top:\"15px\"},width:\"1000\"},on:{\"on-ok\":s.addRole},model:{value:s.showModal,callback:function(e){s.showModal=e},expression:\"showModal\"}},[o(\"div\",{staticClass:\"app-search\"},[o(\"Input\",{staticStyle:{width:\"300px\"},attrs:{search:!0,placeholder:\"搜索职位名称\"},on:{\"on-search\":s.roleFilter},model:{value:s.searchValue,callback:function(e){s.searchValue=e},expression:\"searchValue\"}}),s._v(\" \"),o(\"p\",{staticClass:\"app-search-icon\",on:{click:s.roleFilter}},[o(\"Button\",{attrs:{type:\"primary\",size:\"small\"}},[s._v(\"查询\")])],1)],1),s._v(\" \"),o(\"Table\",{ref:\"selection\",attrs:{height:\"400\",loading:s.roleLoading,columns:s.RoleColumns,data:s.allRoleData},on:{\"on-selection-change\":s.onSelectionChange,\"on-select-all\":s.onSelectAll,\"on-select-cancel\":s.onSelectCancel}}),s._v(\" \"),o(\"div\",{staticClass:\"user-page\"},[o(\"div\",{staticStyle:{float:\"right\"}},[o(\"Page\",{attrs:{total:s.rolePage.roletotal,\"show-elevator\":\"\",\"show-sizer\":\"\",current:s.rolePage.rolecurrentPage,\"page-size\":s.rolePage.allRolepageSize,size:\"small\",\"show-total\":\"\"},on:{\"on-page-size-change\":s.onAllRolePageSizeChange,\"on-change\":s.onRolePageChange}})],1)]),s._v(\" \"),o(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:s.selectRoleData[0],expression:\"selectRoleData[0] \"}],staticClass:\"page-selection-warp\"},s._l(s.selectRoleData,function(t,a){return o(\"Tag\",{key:t.id,attrs:{userId:t.id,closable:\"\",type:\"border\",color:\"primary\",size:\"small\"},on:{\"on-close\":function(e){s.deleteSelectUser(t,a)}}},[s._v(\"\\n            \"+s._s(t.name)+\"\\n          \")])}))],1)],1)},staticRenderFns:[]}},OMsr:function(e,t){e.exports={render:function(){var a=this,e=a.$createElement,s=a._self._c||e;return s(\"Row\",{staticClass:\"detail\"},[s(\"Row\",{staticClass:\"detail-user-header\"},[s(\"div\",{staticClass:\"detail-header-bread\"},[s(\"span\",{staticClass:\"detail-user-header-bread-user\",on:{click:a.goUserList}},[a._v(\"用户\")]),a._v(\" \"),s(\"span\",{staticClass:\"detail-user-header-bread-others\"},[a._v(\"/\")]),a._v(\" \"),a.userInformation.nickname?s(\"span\",{staticClass:\"detail-user-header-bread-others\"},[a._v(\"\\n        \"+a._s(a.userInformation.nickname)+\"\\n      \")]):a._e(),a._v(\" \"),s(\"span\",{staticClass:\"detail-user-header-bread-others\"},[a._v(a._s(a.userInformation.userCode?\"\":\"创建\"))]),a._v(\" \"),s(\"Tag\",{directives:[{name:\"show\",rawName:\"v-show\",value:a.userId,expression:\"userId\"},{name:\"instanceStateDirective\",rawName:\"v-instanceStateDirective\",value:{status:a.userInformation.status},expression:\"{status:userInformation.status}\"}],staticClass:\"radius10 marlr10 color_fff\"})],1)]),a._v(\" \"),s(\"Row\",{staticClass:\"detail-tabs\"},a._l(a.relativeInstance,function(e,t){return(a.userInformation.userId?e.isShow:e.isShowAcive)?s(\"div\",{key:t,class:{\"detail-tabs-child\":!0,\"active-item\":e.isShowAcive},on:{click:function(e){a.onClickTab(t)}}},[e.type?s(\"Icon\",{staticClass:\"icon\",attrs:{type:e.type}}):s(\"img\",{attrs:{src:e.imgUrl}}),a._v(\" \"),s(\"div\",{staticClass:\"detail-tabs-child-right\"},[s(\"span\",[a._v(a._s(e.relativeNum))]),a._v(\" \"),s(\"p\",[a._v(a._s(e.name))])])],1):a._e()})),a._v(\" \"),s(\"Row\",{staticClass:\"detail-content-tabs\"},[s(\"user-info\",{directives:[{name:\"show\",rawName:\"v-show\",value:a.whichShow.userinfo,expression:\"whichShow.userinfo\"}],attrs:{userInfo:a.userInformation,isUpdate:a.isUpdate}}),a._v(\" \"),a.whichShow.highuser?s(\"higher-user\",{attrs:{isUpdate:a.isUpdate},on:{changeInstance:a.getInstanceCount}}):a._e(),a._v(\" \"),a.whichShow.lowuser?s(\"lower-user\",{attrs:{isUpdate:a.isUpdate},on:{changeInstance:a.getInstanceCount}}):a._e(),a._v(\" \"),a.whichShow.dep?s(\"department-member\",{attrs:{isUpdate:a.isUpdate},on:{changeInstance:a.getInstanceCount}}):a._e(),a._v(\" \"),a.whichShow.role?s(\"role-member\",{attrs:{isUpdate:a.isUpdate},on:{changeInstance:a.getInstanceCount}}):a._e(),a._v(\" \"),a.whichShow.dirper?s(\"direct-permission\",{attrs:{target:a.target,isUpdate:a.isUpdate},on:{changeInstance:a.getInstanceCount}}):a._e(),a._v(\" \"),a.whichShow.indirper?s(\"indirect-permission\"):a._e(),a._v(\" \"),a.whichShow.workflow?s(\"workfow-task\"):a._e()],1)],1)},staticRenderFns:[]}},R6PI:function(e,t){},Z0op:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"lower-user\"},[a(\"div\",{staticClass:\"lower-user-detail\",attrs:{id:\"lowHeight\"}},[e.isUpdate?a(\"div\",{staticClass:\"lower-user-header\"},[a(\"b\",{staticClass:\"lower-user-detail-btn\",on:{click:e.showUserModal}},[e._v(\"下级用户\")]),e._v(\" \"),a(\"span\",{staticStyle:{color:\"#7a7676\"}},[e._v(\"-添加下级用户\")]),e._v(\" \"),a(\"b\",{staticClass:\"lower-user-detail-btn\",on:{click:e.deleteLowUser}},[e._v(\"删除\")]),e._v(\" \"),a(\"span\",{staticStyle:{color:\"#7a7676\"}},[e._v(\"-批量删除下级用户\")])]):e._e(),e._v(\" \"),a(\"div\",{staticClass:\"lower-user-table\"},[a(\"Table\",{attrs:{columns:e.columns,loading:e.loading,data:e.lowerUserData},on:{\"on-selection-change\":e.selectLowUser}}),e._v(\" \"),a(\"div\",{staticClass:\"user-page\"},[a(\"div\",{staticStyle:{float:\"right\",\"padding-bottom\":\"5px\"}},[a(\"Page\",{attrs:{total:e.lowUser.total,\"show-elevator\":\"\",\"show-sizer\":\"\",current:e.lowUser.currentPage,\"page-size\":e.lowUser.pageSize,size:\"small\",\"show-total\":\"\"},on:{\"on-page-size-change\":e.onPageSizeChange,\"on-change\":e.onPageChange}})],1)])],1)]),e._v(\" \"),a(\"user-selector\",{attrs:{showUserSelector:e.showModal},on:{changeUserModalStatus:e.changeUserModalStatus,addUserChange:e.addUserChange}})],1)},staticRenderFns:[]}},eHfy:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"info\"},[a(\"Row\",{staticClass:\"info-detail\"},[a(\"Form\",{ref:\"formItem\",class:{\"is-required\":t.isEdit,\"info-form\":!0},attrs:{model:t.formItem,rules:t.ruleValidate,\"label-width\":107}},[a(\"FormItem\",{attrs:{label:\"头像：\"}},[t.isEdit?a(\"img\",{staticStyle:{width:\"128px\",height:\"128px\"},attrs:{src:!!t.logo&&t.logo}}):a(\"Upload\",{ref:\"upload\",staticClass:\"info-upload\",attrs:{\"show-upload-list\":!1,\"on-success\":t.handleSuccess,format:[\"jpg\",\"jpeg\",\"png\"],\"max-size\":2048,\"on-format-error\":t.handleFormatError,\"on-exceeded-size\":t.handleMaxSize,type:\"drag\",action:\"/H_roleplay-si/ds/upload\",headers:t.httpHeaders}},[t.logo?t._e():a(\"div\",{staticClass:\"info-upload-container\"},[t.logo?a(\"img\",{attrs:{src:t.logo}}):t._e(),t._v(\" \"),t.logo?t._e():a(\"i\",{staticClass:\"iconfont\"},[t._v(\"\")])]),t._v(\" \"),t.logo?a(\"div\",{staticClass:\"demo-upload-list info-upload-container\"},[a(\"img\",{attrs:{src:t.logo}}),t._v(\" \"),a(\"div\",{staticClass:\"demo-upload-list-cover\"},[a(\"Icon\",{attrs:{type:\"ios-eye-outline\",color:\"#fff\",size:\"30\"},on:{click:function(e){return e.stopPropagation(),t.handleView(e)}}}),t._v(\" \"),a(\"Icon\",{attrs:{type:\"ios-trash-outline\",color:\"#fff\",size:\"30\"},on:{click:function(e){return e.stopPropagation(),t.handleRemove(e)}}})],1)]):t._e()]),t._v(\" \"),a(\"Modal\",{attrs:{title:\"查看头像\"},model:{value:t.visible,callback:function(e){t.visible=e},expression:\"visible\"}},[t.visible?a(\"img\",{staticStyle:{width:\"100%\"},attrs:{src:t.logo}}):t._e()])],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"工号：\",prop:\"userCode\"}},[a(\"Input\",{class:{\"info-edit\":t.isAdd},staticStyle:{width:\"60%\"},attrs:{readonly:t.isAdd},on:{\"on-blur\":t.userCodeBlur},model:{value:t.formItem.userCode,callback:function(e){t.$set(t.formItem,\"userCode\",e)},expression:\"formItem.userCode\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"姓名：\",prop:\"nickname\"}},[a(\"Input\",{class:{\"info-edit\":t.isEdit},staticStyle:{width:\"60%\"},attrs:{readonly:t.isEdit},model:{value:t.formItem.nickname,callback:function(e){t.$set(t.formItem,\"nickname\",e)},expression:\"formItem.nickname\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"性别：\"}},[a(\"RadioGroup\",{model:{value:t.formItem.gender,callback:function(e){t.$set(t.formItem,\"gender\",e)},expression:\"formItem.gender\"}},[a(\"Radio\",{attrs:{disabled:t.isEdit,label:\"1\"}},[t._v(\"男\")]),t._v(\" \"),a(\"Radio\",{attrs:{disabled:t.isEdit,label:\"0\"}},[t._v(\"女\")])],1)],1),t._v(\" \"),a(\"div\",{staticClass:\"info-line\"}),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"手机：\",prop:\"mobile\"}},[a(\"Input\",{class:{\"info-edit\":t.isEdit},staticStyle:{width:\"60%\"},attrs:{readonly:t.isEdit},model:{value:t.formItem.mobile,callback:function(e){t.$set(t.formItem,\"mobile\",e)},expression:\"formItem.mobile\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"座机：\",prop:\"officePhone\"}},[a(\"Input\",{class:{\"info-edit\":t.isEdit},staticStyle:{width:\"60%\"},attrs:{readonly:t.isEdit},model:{value:t.formItem.officePhone,callback:function(e){t.$set(t.formItem,\"officePhone\",e)},expression:\"formItem.officePhone\"}})],1),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"公司：\",prop:\"entityName\"}},[a(\"Input\",{class:{\"info-edit\":t.isEdit},staticStyle:{width:\"60%\"},attrs:{icon:t.isEdit?\"\":\"md-arrow-dropdown\",readonly:t.isEdit},on:{\"on-click\":t.selectCompanyModal},model:{value:t.formItem.entityName,callback:function(e){t.$set(t.formItem,\"entityName\",e)},expression:\"formItem.entityName\"}})],1),t._v(\" \"),t.hiddenInput?a(\"FormItem\",{staticStyle:{width:\"60%\"},attrs:{label:\"公司主体id\"}},[a(\"Input\",{model:{value:t.formItem.entityId,callback:function(e){t.$set(t.formItem,\"entityId\",e)},expression:\"formItem.entityId\"}})],1):t._e(),t._v(\" \"),a(\"div\",{staticClass:\"info-line\"}),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"类型：\"}},[a(\"RadioGroup\",{model:{value:t.formItem.userType,callback:function(e){t.$set(t.formItem,\"userType\",e)},expression:\"formItem.userType\"}},[a(\"Radio\",{attrs:{disabled:t.isEdit,label:\"1\"}},[t._v(\"长期有效\")]),t._v(\" \"),a(\"Radio\",{attrs:{disabled:t.isEdit,label:\"0\"}},[t._v(\"临时账户\")])],1)],1),t._v(\" \"),\"0\"===t.formItem.userType?a(\"FormItem\",{attrs:{label:\"账户有效期：\",prop:\"termOfValidity\"}},[a(\"DatePicker\",{class:{\"info-edit\":t.isEdit},attrs:{readonly:t.isEdit,type:\"date\",placeholder:\"\"},model:{value:t.formItem.termOfValidity,callback:function(e){t.$set(t.formItem,\"termOfValidity\",e)},expression:\"formItem.termOfValidity\"}})],1):t._e(),t._v(\" \"),a(\"FormItem\",{attrs:{label:\"邮箱：\",prop:\"email\"}},[a(\"Input\",{class:{\"info-edit\":t.isEdit},staticStyle:{width:\"60%\"},attrs:{readonly:t.isEdit},model:{value:t.formItem.email,callback:function(e){t.$set(t.formItem,\"email\",e)},expression:\"formItem.email\"}})],1),t._v(\" \"),t.isAdd&&t.isEdit?a(\"div\",{staticClass:\"info-line\"}):t._e(),t._v(\" \"),t.isAdd&&t.isEdit?a(\"FormItem\",{attrs:{label:\"创建者：\"}},[a(\"span\",[t._v(t._s(t.userInfo.creatorName))])]):t._e(),t._v(\" \"),t.isAdd&&t.isEdit?a(\"FormItem\",{attrs:{label:\"创建时间：\"}},[a(\"span\",[t._v(t._s(t.userInfo.crtTime))])]):t._e(),t._v(\" \"),t.isAdd&&t.isEdit?a(\"FormItem\",{attrs:{label:\"修改者：\"}},[a(\"span\",[t._v(t._s(t.userInfo.modifierName))])]):t._e(),t._v(\" \"),t.isAdd&&t.isEdit?a(\"FormItem\",{attrs:{label:\"修改时间：\"}},[a(\"span\",[t._v(t._s(t.userInfo.modTime))])]):t._e()],1)],1),t._v(\" \"),a(\"Row\",{staticClass:\"info-btn\"},[a(\"Button\",{staticClass:\"radius0 close-user\",on:{click:t.goUserList}},[t._v(\"关闭\")]),t._v(\" \"),t.isAdd?a(\"Button\",{staticClass:\"radius0 add-btn\",on:{click:t.editUserInfo}},[t._v(t._s(t.isEdit?\"编辑\":\"放弃编辑\"))]):t._e(),t._v(\" \"),t.isEdit?t._e():a(\"Button\",{staticClass:\"radius0 add-btn\",on:{click:t.updateUserData}},[t._v(\"保存\")]),t._v(\" \"),t.isEdit||1!==t.formItem.status?t._e():a(\"Button\",{staticClass:\"radius0 add-btn\",on:{click:function(e){t.updateUserData(\"file\")}}},[t._v(\"归档\")]),t._v(\" \"),t.userId?t._e():a(\"Button\",{staticClass:\"radius0 add-btn\",on:{click:t.saveAndAddUser}},[t._v(\"保存并新建\")]),t._v(\" \"),t.isEdit&&t.userId?t._e():a(\"Button\",{staticClass:\"radius0 add-btn\",on:{click:function(e){t.updateUserData(\"draft\")}}},[t._v(\"保存草稿\")])],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"选择公司\",styles:{top:\"20px\"},width:\"800\"},on:{\"on-ok\":t.selectCompany},model:{value:t.showCompanyModal,callback:function(e){t.showCompanyModal=e},expression:\"showCompanyModal\"}},[a(\"div\",{staticClass:\"app-search\"},[a(\"Input\",{staticStyle:{width:\"300px\"},attrs:{search:!0,placeholder:\"搜索公司名称\"},on:{\"on-search\":t.companyFilter},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:\"searchValue\"}}),t._v(\" \"),a(\"p\",{staticClass:\"app-search-icon\",on:{click:t.companyFilter}},[a(\"Button\",{attrs:{type:\"primary\",size:\"small\"}},[t._v(\"查询\")])],1)],1),t._v(\" \"),a(\"Table\",{ref:\"selection\",staticClass:\"rfd-principal-table\",attrs:{\"highlight-row\":!0,height:\"400\",loading:t.loading,columns:t.companyColumns,data:t.companyData},on:{\"on-row-dblclick\":t.onDbClick,\"on-row-click\":t.onRowClick}}),t._v(\" \"),a(\"div\",{staticClass:\"user-page\"},[a(\"div\",{staticClass:\"fr\"},[a(\"Page\",{attrs:{total:t.companyTable.total,\"show-elevator\":\"\",\"show-sizer\":\"\",current:t.companyTable.currentPage,\"page-size\":t.companyTable.pageSize,size:\"small\",\"show-total\":\"\"},on:{\"on-page-size-change\":t.pageSizeChange,\"on-change\":t.onPageChange}})],1)])],1)],1)},staticRenderFns:[]}},fV3R:function(e,t){},lYVs:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"higher-user\"},[a(\"div\",{staticClass:\"higher-user-detail\",attrs:{id:\"cliHeight\"}},[t.isUpdate?a(\"div\",[a(\"b\",{staticClass:\"higher-user-detail-btn\",on:{click:t.showUserModal}},[t._v(\"上级用户\")]),t._v(\" \"),a(\"span\",{staticStyle:{color:\"#7a7676\"}},[t._v(\"-添加上级用户\")])]):t._e(),t._v(\" \"),a(\"Table\",{ref:\"selection\",attrs:{columns:t.columns,loading:t.loading,data:t.higherUserData}})],1),t._v(\" \"),a(\"Modal\",{attrs:{title:\"选择用户\",styles:{top:\"20px\"},width:\"1000\"},on:{\"on-ok\":t.addHighUser},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:\"showModal\"}},[a(\"div\",{staticClass:\"app-search\"},[a(\"Input\",{staticStyle:{width:\"300px\"},attrs:{search:!0,placeholder:\"搜索工号或名称\"},on:{\"on-search\":t.userFilter},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:\"searchValue\"}}),t._v(\" \"),a(\"p\",{staticClass:\"app-search-icon\",on:{click:t.userFilter}},[a(\"Button\",{attrs:{type:\"primary\",size:\"small\"}},[t._v(\"查询\")])],1)],1),t._v(\" \"),a(\"Table\",{ref:\"selection\",staticClass:\"rfd-principal-table\",attrs:{\"highlight-row\":!0,height:\"400\",loading:t.userLoading,columns:t.userColumns,data:t.userData},on:{\"on-row-dblclick\":t.onDbClick,\"on-row-click\":t.onRowClick}}),t._v(\" \"),a(\"div\",{staticClass:\"user-page\"},[a(\"div\",{staticClass:\"fr\",staticStyle:{\"padding-bottom\":\"5px\"}},[a(\"Page\",{attrs:{total:t.highUser.usertotal,\"show-elevator\":\"\",\"show-sizer\":\"\",current:t.highUser.usercurrentPage,\"page-size\":t.highUser.allUserpageSize,size:\"small\",\"show-total\":\"\"},on:{\"on-page-size-change\":t.onAllUserPageSizeChange,\"on-change\":t.onUserPageChange}})],1)])],1)],1)},staticRenderFns:[]}},\"on+k\":function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"department\"},[a(\"div\",{staticClass:\"department-detail\",attrs:{id:\"depHeight\"}},[t.isUpdate?a(\"div\",{staticClass:\"department-header\"},[a(\"b\",{staticClass:\"department-detail-btn\",attrs:{type:\"info\"},on:{click:t.showGroupModal}},[t._v(\"部门\")]),t._v(\" \"),a(\"span\",{staticStyle:{color:\"#7a7676\"}},[t._v(\"-添加部门\")]),t._v(\" \"),a(\"b\",{staticClass:\"department-detail-btn\",attrs:{type:\"info\"},on:{click:t.deleteGroup}},[t._v(\"删除\")]),t._v(\" \"),a(\"span\",{staticStyle:{color:\"#7a7676\"}},[t._v(\"-批量删除部门\")])]):t._e(),t._v(\" \"),a(\"div\",{staticClass:\"department-table\"},[a(\"Table\",{ref:\"selection\",attrs:{columns:t.columns,loading:t.loading,data:t.departmentData},on:{\"on-selection-change\":t.selectDeleteGroup}}),t._v(\" \"),a(\"div\",{staticClass:\"user-page\"},[a(\"div\",{staticStyle:{float:\"right\",\"padding-bottom\":\"5px\"}},[a(\"Page\",{attrs:{total:t.total,\"show-elevator\":\"\",\"show-sizer\":\"\",current:t.currentPage,\"page-size\":t.pageSize,size:\"small\",\"show-total\":\"\"},on:{\"on-page-size-change\":t.onPageSizeChange,\"on-change\":t.onPageChange}})],1)])],1)]),t._v(\" \"),a(\"Modal\",{attrs:{title:\"选择部门\",width:\"300\"},on:{\"on-ok\":t.addDepartment},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:\"showModal\"}},[a(\"Tree\",{staticClass:\"dep-tree\",attrs:{multiple:!0,data:t.groupData,\"load-data\":t.loadData},on:{\"on-select-change\":t.selectNode}})],1)],1)},staticRenderFns:[]}},q1fK:function(e,t){},urmH:function(e,t){},vqzf:function(e,t){},wnZK:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"direct\"},[a(\"div\",{staticClass:\"direct-detail\",attrs:{id:\"directHeight\"}},[a(\"div\",{staticClass:\"direct-table\"},[a(\"Tree\",{ref:\"permissionTree\",staticClass:\"permission-tree\",attrs:{data:e.data,\"load-data\":e.loadData,\"empty-text\":e.emptyText,\"show-checkbox\":\"\"}})],1)])])},staticRenderFns:[]}},wtoM:function(e,t){}});"}