webpackJsonp([25],{JUNF:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return a}),n.d(t,"e",function(){return l}),n.d(t,"f",function(){return i}),n.d(t,"a",function(){return d});var o=n("7B+g"),r=function(e,t,n){return Object(o.a)("/H_roleplay-si/kb/query",{page:e,limit:t,search:n})},s=function(){return Object(o.a)("/H_roleplay-si/base/dict/getListByValue",{value:"KnowledgeBaseType"})},a=function(e){return Object(o.a)("/H_roleplay-si/kb/queryById",{id:e})},l=function(e){return Object(o.a)("/H_roleplay-si/kb/save",{},"POST",e)},i=function(e){return Object(o.a)("/H_roleplay-si/kb/update",{},"POST",e)},d=function(e){return Object(o.a)("/H_roleplay-si/kb/delete",{},"POST",e)}},kej1:function(e,t){},psz9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("JUNF"),r=(n("oAV5"),n("Qr9p")),s=n.n(r),a={name:"KnowledgeDetail",components:{},data:function(){return{knowledgeId:this.$route.params.id,knowledgeForm:{title:"",type:"",content:""},typeList:[],ruleValidate:{title:[{required:!0,message:" ",trigger:"blur"}],type:[{required:!0,message:" ",trigger:"change"}],content:[{required:!0,message:" ",trigger:"blur"}]}}},methods:{saveKnowledge:function(e){var t=this;"<p><br></p>"===this.editor.txt.html()||""===this.knowledgeForm.title||""===this.knowledgeForm.type?this.$Message.error("必填项请输入！"):this.knowledgeForm.content=this.editor.txt.html(),this.$refs.formValidate.validate(function(n){n&&(t.knowledgeId?(t.knowledgeForm.id=t.knowledgeId,Object(o.f)(t.knowledgeForm).then(function(n){n.success&&(t.$Message.success(n.message),"save"===e?t.$router.push({path:"/knowledge/list"}):(t.knowledgeId=null,t.knowledgeForm.content="",t.$refs.formValidate.resetFields(),t.editor.txt.html("")))}).catch(function(e){t.$Message.error(e.data.message)})):Object(o.e)(t.knowledgeForm).then(function(n){n.success&&(t.$Message.success(n.message),"save"===e?t.$router.push({path:"/knowledge/list"}):(t.knowledgeForm.content="",t.$refs.formValidate.resetFields(),t.editor.txt.html("")))}).catch(function(e){t.$Message.error(e.data.message)}))})},getAllKnowledgeTypeData:function(){var e=this;Object(o.c)().then(function(t){e.typeList=t})},getKnowledgeDataById:function(){var e=this;Object(o.d)(this.knowledgeId).then(function(t){e.knowledgeForm.title=t.title,e.knowledgeForm.type=t.type,e.knowledgeForm.content=t.content,e.editor=new s.a(e.$refs.editor),e.editor.customConfig.onchange=function(t){e.knowledgeForm.content=t},e.editor.customConfig.uploadImgShowBase64=!0,e.editor.create(),e.editor.$textContainerElem[0].style.height="400px",e.editor.cmd.do("insertHTML",t.content)})}},created:function(){this.getAllKnowledgeTypeData(),this.getKnowledgeDataById()}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"knowledge"},[n("Row",{staticClass:"knowledge-form"},[n("Form",{ref:"formValidate",attrs:{"label-width":120,model:e.knowledgeForm,rules:e.ruleValidate}},[n("FormItem",{attrs:{label:""}},[n("Row",[n("Col",{staticStyle:{"margin-left":"-121px"},attrs:{span:"12"}},[n("FormItem",{attrs:{prop:"title",label:"标题:"}},[n("Input",{staticStyle:{width:"300px"},model:{value:e.knowledgeForm.title,callback:function(t){e.$set(e.knowledgeForm,"title",t)},expression:"knowledgeForm.title"}})],1)],1),e._v(" "),n("Col",{attrs:{span:"12"}},[n("FormItem",{attrs:{prop:"type",label:"分类:"}},[n("Select",{staticStyle:{width:"300px"},attrs:{transfer:!1},model:{value:e.knowledgeForm.type,callback:function(t){e.$set(e.knowledgeForm,"type",t)},expression:"knowledgeForm.type"}},e._l(e.typeList,function(t){return n("Option",{key:t.id,attrs:{value:t.value}},[e._v(e._s(t.name))])}))],1)],1)],1)],1),e._v(" "),n("FormItem",{staticStyle:{"margin-bottom":"65px"},attrs:{label:"内容:",prop:"content"}},[n("div",{ref:"editor",staticStyle:{height:"400px"}})])],1)],1),e._v(" "),n("Row",{staticClass:"knowledge-save"},[n("span",{staticClass:"knowledge-save-btn",on:{click:function(t){e.saveKnowledge("save")}}},[e._v("保存")]),e._v(" "),n("span",{staticClass:"knowledge-save-btn",on:{click:e.saveKnowledge}},[e._v("保存并继续添加")])])],1)},staticRenderFns:[]};var i=n("VU/8")(a,l,!1,function(e){n("kej1")},null,null);t.default=i.exports}});