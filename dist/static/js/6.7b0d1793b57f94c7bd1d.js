webpackJsonp([6],{ctm7:function(e,t){},psz9:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("JUNF"),s=o("Qr9p"),a=o.n(s),r={name:"KnowledgeDetail",components:{},data:function(){return{knowledgeId:this.$route.params.id,isEdit:!1,knowledgeForm:{title:"",type:"",content:""},typeList:[],ruleValidate:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],type:[{required:!0,message:"请选择分类",trigger:"change"}],content:[{required:!0,message:" ",trigger:"blur"}]}}},methods:{goBack:function(){this.$router.push({path:"/knowledge/list"})},saveKnowledge:function(e){var t=this;"<p><br></p>"===this.editor.txt.html()?this.$Message.error("必填项请输入！"):this.knowledgeForm.content=this.editor.txt.html(),this.$refs.formValidate.validate(function(o){o&&(t.knowledgeId?(t.knowledgeForm.id=t.knowledgeId,Object(n.f)(t.knowledgeForm).then(function(o){o.success&&(t.$Message.success(o.message),"save"===e?t.$router.push({path:"/knowledge/list"}):(t.knowledgeId=null,t.knowledgeForm.content="",t.$refs.formValidate.resetFields(),t.editor.txt.html("")))}).catch(function(e){t.$Message.error(e.data.message)})):Object(n.e)(t.knowledgeForm).then(function(o){o.success&&(t.$Message.success(o.message),"save"===e?t.$router.push({path:"/knowledge/list"}):(t.knowledgeForm.content="",t.$refs.formValidate.resetFields(),t.editor.txt.html("")))}).catch(function(e){t.$Message.error(e.data.message)}))})},getAllKnowledgeTypeData:function(){var e=this;Object(n.c)().then(function(t){e.typeList=t})},getKnowledgeDataById:function(){var e=this;this.knowledgeId&&Object(n.d)(this.knowledgeId).then(function(t){e.knowledgeForm.title=t.title,e.knowledgeForm.type=t.type,e.knowledgeForm.content=t.content,e.createEditor(t.content)})},createEditor:function(e){var t=this,o=e||"";this.editor=new a.a(this.$refs.editor),this.editor.customConfig.onchange=function(e){t.knowledgeForm.content=e},this.editor.customConfig.uploadImgShowBase64=!0,this.editor.create(),this.editor.$textContainerElem[0].style.height="400px",this.editor.txt.html(o)}},mounted:function(){this.createEditor()},created:function(){this.getAllKnowledgeTypeData(),this.getKnowledgeDataById()}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"knowledge"},[o("Row",{staticClass:"knowledge-form"},[o("Form",{ref:"formValidate",attrs:{"label-width":120,model:e.knowledgeForm,rules:e.ruleValidate}},[o("FormItem",{attrs:{label:""}},[o("Row",[o("Col",{staticStyle:{"margin-left":"-121px"},attrs:{span:"11"}},[o("FormItem",{attrs:{prop:"title",label:"标题:"}},[o("Input",{staticStyle:{width:"300px"},model:{value:e.knowledgeForm.title,callback:function(t){e.$set(e.knowledgeForm,"title",t)},expression:"knowledgeForm.title"}})],1)],1),e._v(" "),o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{prop:"type",label:"分类:"}},[o("Select",{staticStyle:{width:"300px"},attrs:{transfer:!1},model:{value:e.knowledgeForm.type,callback:function(t){e.$set(e.knowledgeForm,"type",t)},expression:"knowledgeForm.type"}},e._l(e.typeList,function(t){return o("Option",{key:t.id,attrs:{value:t.value}},[e._v(e._s(t.name))])}))],1)],1)],1)],1),e._v(" "),o("FormItem",{staticStyle:{"margin-bottom":"65px"},attrs:{label:"内容:",prop:"content"}},[o("div",{ref:"editor",staticStyle:{height:"400px"}})])],1)],1),e._v(" "),o("Row",{staticClass:"knowledge-save"},[o("span",{staticClass:"knowledge-save-btn",on:{click:function(t){e.saveKnowledge("save")}}},[e._v("保存")]),e._v(" "),o("span",{staticClass:"knowledge-save-btn",on:{click:e.saveKnowledge}},[e._v("保存并继续添加")]),e._v(" "),o("span",{staticClass:"knowledge-save-btn",on:{click:e.goBack}},[e._v("返回")])])],1)},staticRenderFns:[]};var l=o("VU/8")(r,i,!1,function(e){o("ctm7")},null,null);t.default=l.exports}});