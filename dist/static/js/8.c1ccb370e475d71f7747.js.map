{"version":3,"sources":["webpack:///src/components/discussion/childComments.vue","webpack:///./src/components/discussion/childComments.vue?dba3","webpack:///./src/components/discussion/childComments.vue","webpack:///src/components/discussion/thumbsup.vue","webpack:///./src/components/discussion/thumbsup.vue?2ad6","webpack:///./src/components/discussion/thumbsup.vue","webpack:///src/components/discussion/comments.vue","webpack:///./src/components/discussion/comments.vue?9c92","webpack:///./src/components/discussion/comments.vue","webpack:///src/views/form/instance-comments.vue","webpack:///./src/views/form/instance-comments.vue?59c9","webpack:///./src/views/form/instance-comments.vue","webpack:///src/components/discussion/publish.vue","webpack:///./src/components/discussion/publish.vue?ec93","webpack:///./src/components/discussion/publish.vue"],"names":["childComments","name","components","MyPopTip","commentPublish","publish","props","comments","type","Array","default","superComment","Object","data","userInfo","cmtsMap","methods","handlerShowThumbsUpInfo","comment","this","$forceUpdate","map","c","id","showPraises","showReply","handleThumbsUp","_this","commentId","appService","then","res","success","params","limit","page","sort","stringify_default","property","direction","isPraise","praises","tableContent","$Notice","warning","title","desc","handleShowReply","handleReplyPublish","content","uploadList","commentAndReply","_this2","relationKey","parentId","commentAttachments","getLowerComments","showUserInfo","userId","_this3","dataCount","childComment","childCommentNum","mounted","discussion_childComments","render","_vm","_h","$createElement","_c","_self","staticClass","_l","index","key","attrs","trigger","slot","on","click","$event","creator","_v","_s","creatorName","replyUserId","replyUserName","domProps","innerHTML","directives","rawName","value","time","crtTime","expression","class","comment-isPraise","size","length","_e","handlePublish","allowFile","ischild","p","onerror","src","photo","width","staticRenderFns","components_discussion_childComments","__webpack_require__","normalizeComponent","ssrContext","thumbsup","tempComment","refreshThumbaUps","message","created","discussion_thumbsup","nativeOn","components_discussion_thumbsup","thumbsup_normalizeComponent","components_discussion_comments","allowReply","Boolean","watch","showChilds","praiseNum","handleShowChilds","handleViewFile","file","window","open","attachment","discussion_comments","span","height","f","staticStyle","background-color","padding","border","comments_Component","comments_normalizeComponent","__webpack_exports__","instance_comments","transCode","$route","commentsCount","pageInfo","total","refreshComments","assign_default","handlePageChange","form_instance_comments","refreshRootComments","page-size","current","prev-text","next-text","on-change","Component","discContent","txt","Function","innerText","lock","httpHeaders","Authorization","utils","faces","defaultList","defaultFileList","imgName","visible","disabledSendBtn","handler","newValue","oldValue","deep","choice_face","n","changeTxt","e","target","send","imgs","img","url","files","uploadFileList","concat","$refs","upload","clearFiles","uploadFile","handleView","handleRemove","fileList","splice","indexOf","handleSuccess","attacthment","handleFileSuccess","handleFormatError","handleMaxSize","handleBeforeUpload","check","i","push","toString","discussion_publish","contenteditable","input","focus","blur","placement","float","margin","cursor","item","status","percent","percentage","hide-info","ref","display","show-upload-list","default-file-list","on-success","format","max-size","headers","on-format-error","on-exceeded-size","before-upload","multiple","action","line-height","model","callback","$$v","icon"],"mappings":"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","file":"static/js/8.c1ccb370e475d71f7747.js","sourcesContent":["<style lang=\"less\">\r\n@import \"./childComments.less\";\r\n</style>\r\n<template>\r\n    <div class=\"child-comments\">\r\n        <div class=\"child-comments-item\" v-for=\"(comment,index) in  comments\" :key=\"index\">\r\n            <p>\r\n                <my-pop-tip \r\n                :userInfo=\"userInfo\" \r\n                trigger=\"click\">\r\n                    <span \r\n                    class=\"child-comments-user\"\r\n                    @click=\"showUserInfo(comment.creator)\"\r\n                    slot=\"userCard\">{{comment.creatorName}}\r\n                </span>\r\n                </my-pop-tip>\r\n                \r\n                <span >:回复</span>\r\n                <span class=\"child-comments-user\">@</span>\r\n\r\n                <my-pop-tip \r\n                :userInfo=\"userInfo\" \r\n                trigger=\"click\">\r\n                    <span \r\n                    class=\"child-comments-user\"\r\n                    @click=\"showUserInfo(comment.replyUserId)\"\r\n                    slot=\"userCard\">{{comment.replyUserName}}\r\n                    </span>\r\n                </my-pop-tip>\r\n\r\n                <span>:</span>\r\n                <span v-html=\"comment.content\"></span>\r\n            </p>\r\n            <p >\r\n                <span v-overTimeDirective=\"{time:comment.crtTime}\"></span>\r\n                <span class=\"fr\">\r\n                    <span  class=\"cursor-pointer\" @click=\"handleShowReply(comment)\">回复</span>\r\n                    \r\n                    <span  class=\"cursor-pointer\" v-bind:class=\"{ 'comment-isPraise': comment.isPraise }\">\r\n                        <Icon \r\n                        type=\"md-thumbs-up\" \r\n                        size=18  \r\n                        @click=\"handleThumbsUp(comment)\"/>\r\n                        {{comment.praises.length}}\r\n                    </span>\r\n                    <span  class=\"cursor-pointer\" v-if=\"comment.praises.length>0\" >\r\n                        <Icon \r\n                        type=\"ios-arrow-down\" \r\n                        size=18 \r\n                        @click=\"handlerShowThumbsUpInfo(comment)\"  />\r\n                    </span>\r\n\r\n                </span>\r\n            </p>\r\n            <commentPublish \r\n                v-if=\"comment.showReply\" \r\n                :handlePublish=\"handleReplyPublish\" \r\n                :superComment=\"comment\" \r\n                :allowFile=\"false\"\r\n                :ischild=\"true\"></commentPublish>\r\n\r\n\r\n            <div class=\"list-content-item-praises\" v-if=\"comment.showPraises\">\r\n                <p>共<b>{{comment.praises.length}}</b>人点赞</p>\r\n                <div class=\"list-content-item-praises-content\">\r\n                    <my-pop-tip :userInfo=\"userInfo\" trigger=\"click\">\r\n                        <img \r\n                            @click=\"showUserInfo(p.creator)\"\r\n                            slot=\"userCard\"\r\n                            onerror=\"src='resources/images/icon/defaultUserPhoto.jpg'\"\r\n                            v-for=\"(p,index) in comment.praises\" \r\n                            :key=\"index\" \r\n                            :src=\"p.photo?p.photo:'resources/images/icon/defaultUserPhoto.jpg'\" \r\n                            width=40>\r\n                    </my-pop-tip>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { \r\n    commentThumbsUp,\r\n    getCommentThumbaUps,\r\n    saveComment,\r\n    getComments,\r\n    getCommentsByParentId,\r\n    getUserInfoByUserId\r\n    } from \"@/services/appService.js\";\r\n\r\nimport MyPopTip from \"@/components/poptip/MyPopTip\";\r\nimport commentPublish from \"@/components/discussion/publish\";\r\nexport default {\r\n    name:'childComments',\r\n    components:{\r\n        MyPopTip,\r\n        commentPublish\r\n    },\r\n    props:{\r\n        comments:{\r\n            type:Array,\r\n            default:function () {\r\n                return []\r\n            }\r\n        },\r\n        superComment:{\r\n            type:Object,\r\n            default:function () {\r\n                return {}\r\n            }\r\n        },\r\n    },\r\n     data() {\r\n        return {\r\n           userInfo:{},\r\n           cmtsMap:{}\r\n        };\r\n    },\r\n    methods:{\r\n         handlerShowThumbsUpInfo:function (comment) {\r\n            this.$forceUpdate();\r\n            this.comments.map(c=>{\r\n                (c.id != comment.id) && (c.showPraises = false);\r\n                comment.showReply = false;\r\n            });\r\n            comment.showPraises = !comment.showPraises;\r\n        },\r\n        handleThumbsUp:function (comment) {\r\n            let commentId = comment.id;\r\n            commentThumbsUp({commentId:commentId}).then(res=>{\r\n                if(!res.success){\r\n                    this.$Notice.warning({\r\n                        title: '系统提示',\r\n                        desc: '点赞,您可以尝试再次点赞或者联系企业管理员哦!'\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                var params = {\r\n                        commentId:commentId,  \r\n                        limit:50, \r\n                        page:1, \r\n                        sort:JSON.stringify([{property:\"crtTime\",direction:\"DESC\"}])\r\n                }\r\n                comment.isPraise = true;\r\n                getCommentThumbaUps(params).then(res=>{\r\n                    comment.praises = res.tableContent;\r\n                });\r\n                \r\n            });\r\n        },\r\n         handleShowReply:function (comment) {\r\n            this.$forceUpdate();\r\n            this.comments.map(c=>{\r\n                (c.id != comment.id) && (c.showReply = false);\r\n                comment.showPraises = false;\r\n            });\r\n\r\n            comment.showReply = !comment.showReply;\r\n        },\r\n        handleReplyPublish:function (content,uploadList,superComment,commentAndReply) {\r\n            let comment ={\r\n                type:superComment.type,       \r\n                content:content, \r\n                relationKey:superComment.relationKey,\r\n                parentId: superComment.id,\r\n                commentAttachments:uploadList,\r\n                commentAndReply:commentAndReply\r\n            };\r\n\r\n            saveComment(comment).then(res=>{\r\n                if(!res.success){\r\n                    this.$Notice.warning({\r\n                        title: '系统提示',\r\n                        desc: '添加回复,请联系企业管理员!'\r\n                    });\r\n                    return;\r\n                }\r\n                var params = {\r\n                    parentId:this.superComment.id,  \r\n                    limit:50, \r\n                    page:1, \r\n                    sort:JSON.stringify([{property:\"crtTime\",direction:\"DESC\"}])\r\n                };\r\n                this.getLowerComments(params,this.superComment);\r\n            });\r\n            \r\n           \r\n        },\r\n        showUserInfo(userId) {\r\n            getUserInfoByUserId(userId).then(res => {\r\n                if (res.dataCount) {\r\n                this.userInfo = res.tableContent[0];\r\n                }\r\n            });\r\n        },\r\n         getLowerComments:function (params,comment) {\r\n            getCommentsByParentId(params).then(res=>{\r\n                comment.childComment = res.tableContent;\r\n                comment.childCommentNum = res.dataCount;\r\n            });\r\n        }\r\n        \r\n    },\r\n    mounted(){\r\n       \r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/discussion/childComments.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"child-comments\"},_vm._l((_vm.comments),function(comment,index){return _c('div',{key:index,staticClass:\"child-comments-item\"},[_c('p',[_c('my-pop-tip',{attrs:{\"userInfo\":_vm.userInfo,\"trigger\":\"click\"}},[_c('span',{staticClass:\"child-comments-user\",attrs:{\"slot\":\"userCard\"},on:{\"click\":function($event){_vm.showUserInfo(comment.creator)}},slot:\"userCard\"},[_vm._v(_vm._s(comment.creatorName)+\"\\n            \")])]),_vm._v(\" \"),_c('span',[_vm._v(\":回复\")]),_vm._v(\" \"),_c('span',{staticClass:\"child-comments-user\"},[_vm._v(\"@\")]),_vm._v(\" \"),_c('my-pop-tip',{attrs:{\"userInfo\":_vm.userInfo,\"trigger\":\"click\"}},[_c('span',{staticClass:\"child-comments-user\",attrs:{\"slot\":\"userCard\"},on:{\"click\":function($event){_vm.showUserInfo(comment.replyUserId)}},slot:\"userCard\"},[_vm._v(_vm._s(comment.replyUserName)+\"\\n                \")])]),_vm._v(\" \"),_c('span',[_vm._v(\":\")]),_vm._v(\" \"),_c('span',{domProps:{\"innerHTML\":_vm._s(comment.content)}})],1),_vm._v(\" \"),_c('p',[_c('span',{directives:[{name:\"overTimeDirective\",rawName:\"v-overTimeDirective\",value:({time:comment.crtTime}),expression:\"{time:comment.crtTime}\"}]}),_vm._v(\" \"),_c('span',{staticClass:\"fr\"},[_c('span',{staticClass:\"cursor-pointer\",on:{\"click\":function($event){_vm.handleShowReply(comment)}}},[_vm._v(\"回复\")]),_vm._v(\" \"),_c('span',{staticClass:\"cursor-pointer\",class:{ 'comment-isPraise': comment.isPraise }},[_c('Icon',{attrs:{\"type\":\"md-thumbs-up\",\"size\":\"18\"},on:{\"click\":function($event){_vm.handleThumbsUp(comment)}}}),_vm._v(\"\\n                    \"+_vm._s(comment.praises.length)+\"\\n                \")],1),_vm._v(\" \"),(comment.praises.length>0)?_c('span',{staticClass:\"cursor-pointer\"},[_c('Icon',{attrs:{\"type\":\"ios-arrow-down\",\"size\":\"18\"},on:{\"click\":function($event){_vm.handlerShowThumbsUpInfo(comment)}}})],1):_vm._e()])]),_vm._v(\" \"),(comment.showReply)?_c('commentPublish',{attrs:{\"handlePublish\":_vm.handleReplyPublish,\"superComment\":comment,\"allowFile\":false,\"ischild\":true}}):_vm._e(),_vm._v(\" \"),(comment.showPraises)?_c('div',{staticClass:\"list-content-item-praises\"},[_c('p',[_vm._v(\"共\"),_c('b',[_vm._v(_vm._s(comment.praises.length))]),_vm._v(\"人点赞\")]),_vm._v(\" \"),_c('div',{staticClass:\"list-content-item-praises-content\"},[_c('my-pop-tip',{attrs:{\"userInfo\":_vm.userInfo,\"trigger\":\"click\"}},_vm._l((comment.praises),function(p,index){return _c('img',{key:index,attrs:{\"slot\":\"userCard\",\"onerror\":\"src='resources/images/icon/defaultUserPhoto.jpg'\",\"src\":p.photo?p.photo:'resources/images/icon/defaultUserPhoto.jpg',\"width\":\"40\"},on:{\"click\":function($event){_vm.showUserInfo(p.creator)}},slot:\"userCard\"})}))],1)]):_vm._e()],1)}))}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-54ca6f60\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/discussion/childComments.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-54ca6f60\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./childComments.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./childComments.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./childComments.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-54ca6f60\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./childComments.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/discussion/childComments.vue\n// module id = null\n// module chunks = ","<style lang=\"less\">\r\n    @import \"./thumbsup.less\";\r\n</style>\r\n<template>\r\n    <div class=\"thumbsup\">\r\n        <span v-if=\"comment.praises.length>0\" >\r\n            <Icon \r\n            type=\"ios-arrow-down\" \r\n            size=18 \r\n            @click.native=\"handlerShowThumbsUpInfo\"  />\r\n        </span>\r\n        <span v-bind:class=\"{ 'comment-isPraise': comment.isPraise }\">\r\n            <Icon \r\n            type=\"md-thumbs-up\" \r\n            size=18  \r\n            @click.native=\"handleThumbsUp\"/>\r\n            {{comment.praises.length}}\r\n        </span>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { commentThumbsUp,getCommentThumbaUps} from \"@/services/appService.js\";\r\nexport default {\r\n    name:'thumbsup',\r\n    props:{\r\n        comment:{\r\n            type:Object,\r\n            default:function () {\r\n                return {}\r\n            }\r\n        }\r\n    },\r\n    data(){\r\n        return {\r\n        };\r\n    },\r\n    methods: {\r\n        handlerShowThumbsUpInfo:function () {\r\n            this.$forceUpdate();\r\n            // this.comments.map(c=>{\r\n            //     (c.id != comment.id) && (c.showPraises = false);\r\n            //     comment.showReply = false;\r\n            // });\r\n            // this.$parent.$forceUpdate();\r\n            this.comment.showPraises = !this.comment.showPraises;\r\n\r\n            // this.refreshThumbaUps();\r\n        },\r\n        handleThumbsUp:function () {\r\n            let commentId = this.tempComment.id;\r\n            commentThumbsUp({commentId:commentId}).then(res=>{\r\n                if(!res.success){\r\n                    this.$Notice.warning({\r\n                        title: '系统提示',\r\n                        desc: res.message\r\n                    });\r\n                    return;\r\n                }\r\n\r\n            this.refreshThumbaUps();\r\n                \r\n            });\r\n        },\r\n\r\n        refreshThumbaUps:function () {\r\n            let params = {\r\n                commentId:this.tempComment.id,  \r\n                limit:50, \r\n                page:1, \r\n                sort:[{property:\"crtTime\",direction:\"DESC\"}]\r\n            }\r\n\r\n            this.tempComment.isPraise = true;\r\n            getCommentThumbaUps(params).then(res=>{\r\n                this.comment.praises = res.tableContent;\r\n            });\r\n        }\r\n    },\r\n    mounted(){\r\n        \r\n    },\r\n    created(){\r\n    }\r\n}\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/discussion/thumbsup.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"thumbsup\"},[(_vm.comment.praises.length>0)?_c('span',[_c('Icon',{attrs:{\"type\":\"ios-arrow-down\",\"size\":\"18\"},nativeOn:{\"click\":function($event){return _vm.handlerShowThumbsUpInfo($event)}}})],1):_vm._e(),_vm._v(\" \"),_c('span',{class:{ 'comment-isPraise': _vm.comment.isPraise }},[_c('Icon',{attrs:{\"type\":\"md-thumbs-up\",\"size\":\"18\"},nativeOn:{\"click\":function($event){return _vm.handleThumbsUp($event)}}}),_vm._v(\"\\n        \"+_vm._s(_vm.comment.praises.length)+\"\\n    \")],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1f1ff543\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/discussion/thumbsup.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1f1ff543\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./thumbsup.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./thumbsup.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./thumbsup.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1f1ff543\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./thumbsup.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/discussion/thumbsup.vue\n// module id = null\n// module chunks = ","<style lang=\"less\">\r\n@import \"./comments.less\";\r\n</style>\r\n<template>\r\n<div class=\"discussion\">\r\n    <div class=\"discussion-content\">\r\n        <Row class=\"list\">\r\n            <div class=\"list-content\">\r\n                <Row class=\"list-content-item\" \r\n                    v-for=\"(comment,index) in comments\" \r\n                    :key=\"index\">\r\n\r\n                    <Col span=\"2\" class=\"list-content-item-user\" >\r\n                     <my-pop-tip \r\n                        :userInfo=\"userInfo\" \r\n                        trigger=\"click\">\r\n                            <img   \r\n                            @click=\"showUserInfo(comment.creator)\" \r\n                            onerror=\"src='resources/images/icon/defaultUserPhoto.jpg'\"\r\n                            slot=\"userCard\" :src=\"comment.photo?comment.photo:'resources/images/icon/contactor.png'\">\r\n                    </my-pop-tip>\r\n                    </Col>\r\n\r\n                    <Col span=\"22\" class=\"list-content-item-content\">\r\n\r\n                        <p><b>{{comment.creatorName}}</b></p>\r\n\r\n                        <div class=\"list-content-item-content-text\" \r\n                            v-html=\"comment.content\">\r\n                        </div>\r\n\r\n                        <div class=\"list-content-item-img\" v-if=\"comment.commentAttachments.length>0\">\r\n                            <img \r\n                            v-for=\"(c,index) in comment.commentAttachments\" \r\n                            :key=\"index\" \r\n                            v-if=\"c.type==='image'\"\r\n                            :src=\"c.attachment?c.attachment:'resources/images/icon/defaultUserPhoto.png'\" \r\n                            width=100 \r\n                            height=100>\r\n                        </div>\r\n\r\n                         <div class=\"list-content-item-file\" v-if=\"comment.commentAttachments.length>0\">\r\n                            <p  v-for=\"(f,index) in comment.commentAttachments\" \r\n                                :key=\"index\"   \r\n                                v-if=\"f.type==='file'\" >\r\n                                <a @click=\"handleViewFile(f)\">{{f.name}}\r\n                                </a>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class=\"list-content-item-content-bar\" >\r\n                            <span  class=\"list-content-item-content-bar-left\">\r\n                                <span>\r\n                                    <span v-overTimeDirective=\"{time:comment.crtTime}\"></span>发布\r\n                                </span>\r\n                                <span \r\n                                    class=\"cursor-pointer\"\r\n                                    @click=\"handleShowChilds(comment)\" \r\n                                    v-if=\"comment.childCommentNum>0\">|&nbsp;查看{{comment.childCommentNum}}条回复\r\n                                    </span>\r\n                            </span>\r\n\r\n                            <span  class=\"list-content-item-content-bar-right\" >\r\n                                <span class=\"cursor-pointer\" @click=\"handleShowReply(comment)\"> 回复</span>\r\n                               \r\n                                <span v-bind:class=\"{ 'comment-isPraise': comment.isPraise }\">\r\n                                    <Icon type=\"md-thumbs-up\" size=18  \r\n                                    @click.native=\"handleThumbsUp(comment)\"/>\r\n                                    {{comment.praiseNum}}\r\n                                </span>\r\n\r\n                                 <span v-if=\"comment.praises.length>0\" >\r\n                                    <Icon type=\"ios-arrow-down\" size=18 \r\n                                    @click.native=\"handlerShowThumbsUpInfo(comment)\"  />\r\n                                </span>\r\n                            </span>\r\n                        </div>\r\n\r\n                      \r\n                        <div  v-if=\"comment.showReply || comment.showChilds\" style=\"background-color: rgb(240, 240, 240);padding: 10px;border: 1px solid #ddd;\">\r\n                            <commentPublish \r\n                                v-if=\"comment.showReply\" \r\n                                :handlePublish=\"handleReplyPublish\" \r\n                                :superComment=\"comment\" \r\n                                :ischild=\"true\"\r\n                                :allowFile=\"false\"></commentPublish>\r\n\r\n                            <child-comments \r\n                                v-if=\"comment.showChilds\" \r\n                                :superComment =\"comment\"\r\n                                :comments=\"comment.childComment\"></child-comments>\r\n                        </div>\r\n\r\n                        \r\n                        \r\n                        <div class=\"list-content-item-praises\" v-if=\"comment.showPraises\">\r\n                            <p>共<b>{{comment.praiseNum}}</b>人点赞</p>\r\n                            <div class=\"list-content-item-praises-content\">\r\n                                <my-pop-tip :userInfo=\"userInfo\" trigger=\"click\">\r\n                                    <img \r\n                                        @click=\"showUserInfo(p.creator)\"\r\n                                        slot=\"userCard\"\r\n                                        onerror=\"src='resources/images/icon/defaultUserPhoto.jpg'\"\r\n                                        v-for=\"(p,index) in comment.praises\" \r\n                                        :key=\"index\" \r\n                                        :src=\"p.photo?p.photo:'resources/images/icon/defaultUserPhoto.jpg'\" \r\n                                        width=40>\r\n                                </my-pop-tip>\r\n                            </div>\r\n                        </div>\r\n\r\n                        \r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n            \r\n        </Row>\r\n    </div>\r\n </div>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport { \r\n    commentThumbsUp,\r\n    getCommentThumbaUps,\r\n    saveComment,\r\n    getComments,\r\n    getCommentsByParentId,\r\n    getUserInfoByUserId\r\n    } from \"@/services/appService.js\";\r\n\r\nimport MyPopTip from \"@/components/poptip/MyPopTip\";\r\nimport commentPublish from \"@/components/discussion/publish\";\r\nimport childComments from \"@/components/discussion/childComments\";\r\nimport thumbsup from \"@/components/discussion/thumbsup\";\r\n\r\nimport comments from \"./comments\";\r\nexport default {\r\n    name:'comments',\r\n    components:{\r\n        commentPublish,\r\n        comments,\r\n        MyPopTip,\r\n        childComments,\r\n        thumbsup\r\n    },\r\n    props:{\r\n        comments:{\r\n            type:Array,\r\n            default:function () {\r\n                return [];\r\n            }\r\n        },\r\n        allowReply:{\r\n            type: Boolean,\r\n            default: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n           userInfo:{}\r\n        };\r\n    },\r\n    watch:{\r\n        \r\n    },\r\n    methods: {\r\n        handlerShowThumbsUpInfo:function (comment) {\r\n            this.$forceUpdate();\r\n            this.comments.map(c=>{\r\n                (c.id != comment.id) && (c.showPraises = false);\r\n                comment.showReply = false;\r\n                comment.showChilds = false;\r\n            });\r\n            comment.showPraises = !comment.showPraises;\r\n            var params = {\r\n                    commentId:comment.id,  \r\n                    limit:50, \r\n                    page:1, \r\n                    sort:JSON.stringify([{property:\"crtTime\",direction:\"DESC\"}])\r\n            }\r\n            comment.isPraise = true;\r\n            getCommentThumbaUps(params).then(res=>{\r\n                comment.praises = res.tableContent;\r\n                comment.praiseNum = res.dataCount;\r\n            });\r\n        },\r\n        handleThumbsUp:function (comment) {\r\n            commentThumbsUp({commentId:comment.id}).then(res=>{\r\n                if(!res.success){\r\n                    this.$Notice.warning({\r\n                        title: '系统提示',\r\n                        desc: '点赞,您可以尝试再次点赞或者联系企业管理员哦!'\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                var params = {\r\n                        commentId:comment.id,  \r\n                        limit:50, \r\n                        page:1, \r\n                        sort:JSON.stringify([{property:\"crtTime\",direction:\"DESC\"}])\r\n                }\r\n                comment.isPraise = true;\r\n                getCommentThumbaUps(params).then(res=>{\r\n                    comment.praises = res.tableContent;\r\n                    comment.praiseNum = res.dataCount;\r\n                });\r\n                \r\n            });\r\n        },\r\n        handleShowChilds:function (comment) {\r\n            this.$forceUpdate();\r\n            this.comments.map(c=>{\r\n                (c.id != comment.id) && (c.showReply = false);\r\n                comment.showPraises = false;\r\n            });\r\n\r\n            comment.showChilds = !comment.showChilds;\r\n\r\n             var params = {\r\n                parentId:comment.id,  \r\n                limit:50, \r\n                page:1, \r\n                sort:JSON.stringify([{property:\"crtTime\",direction:\"DESC\"}])\r\n            };\r\n           this.getLowerComments(params,comment);\r\n\r\n        },\r\n        handleShowReply:function (comment) {\r\n            this.$forceUpdate();\r\n            this.comments.map(c=>{\r\n                (c.id != comment.id) && (c.showReply = false);\r\n                c.showPraises = false;\r\n                c.showChilds = false;\r\n            });\r\n\r\n            comment.showReply = !comment.showReply;\r\n            \r\n            if(!comment.showReply || comment.childCommentNum===0) return;\r\n\r\n           \r\n        },\r\n        handleReplyPublish:function (content,uploadList,superComment,commentAndReply) {\r\n            this.$forceUpdate();\r\n            let comment ={\r\n                type:superComment.type,       \r\n                content:content, \r\n                relationKey:superComment.relationKey,\r\n                parentId: superComment.id,\r\n                commentAttachments:uploadList,\r\n                commentAndReply:commentAndReply\r\n            };\r\n\r\n            superComment.showChilds = true;\r\n\r\n            saveComment(comment).then(res=>{\r\n                if(!res.success){\r\n                    this.$Notice.warning({\r\n                        title: '系统提示',\r\n                        desc: '添加回复,请联系企业管理员!'\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                var params = {\r\n                    parentId:superComment.id,  \r\n                    limit:50, \r\n                    page:1, \r\n                    sort:JSON.stringify([{property:\"crtTime\",direction:\"DESC\"}])\r\n                };\r\n                this.getLowerComments(params,superComment);\r\n            });\r\n            \r\n           \r\n        },\r\n        handleViewFile:function (file) {\r\n          window.open(file.attachment)  \r\n        },\r\n        showUserInfo(userId) {\r\n            getUserInfoByUserId(userId).then(res => {\r\n                if (res.dataCount) {\r\n                this.userInfo = res.tableContent[0];\r\n                }\r\n            });\r\n        },\r\n        getLowerComments:function (params,comment) {\r\n            getCommentsByParentId(params).then(res=>{\r\n                comment.childComment = res.tableContent;\r\n                comment.childCommentNum = res.dataCount;\r\n            });\r\n        }\r\n    },\r\n    created(){\r\n       \r\n    },\r\n    mounted () {\r\n    }\r\n};\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/discussion/comments.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"discussion\"},[_c('div',{staticClass:\"discussion-content\"},[_c('Row',{staticClass:\"list\"},[_c('div',{staticClass:\"list-content\"},_vm._l((_vm.comments),function(comment,index){return _c('Row',{key:index,staticClass:\"list-content-item\"},[_c('Col',{staticClass:\"list-content-item-user\",attrs:{\"span\":\"2\"}},[_c('my-pop-tip',{attrs:{\"userInfo\":_vm.userInfo,\"trigger\":\"click\"}},[_c('img',{attrs:{\"slot\":\"userCard\",\"onerror\":\"src='resources/images/icon/defaultUserPhoto.jpg'\",\"src\":comment.photo?comment.photo:'resources/images/icon/contactor.png'},on:{\"click\":function($event){_vm.showUserInfo(comment.creator)}},slot:\"userCard\"})])],1),_vm._v(\" \"),_c('Col',{staticClass:\"list-content-item-content\",attrs:{\"span\":\"22\"}},[_c('p',[_c('b',[_vm._v(_vm._s(comment.creatorName))])]),_vm._v(\" \"),_c('div',{staticClass:\"list-content-item-content-text\",domProps:{\"innerHTML\":_vm._s(comment.content)}}),_vm._v(\" \"),(comment.commentAttachments.length>0)?_c('div',{staticClass:\"list-content-item-img\"},_vm._l((comment.commentAttachments),function(c,index){return (c.type==='image')?_c('img',{key:index,attrs:{\"src\":c.attachment?c.attachment:'resources/images/icon/defaultUserPhoto.png',\"width\":\"100\",\"height\":\"100\"}}):_vm._e()})):_vm._e(),_vm._v(\" \"),(comment.commentAttachments.length>0)?_c('div',{staticClass:\"list-content-item-file\"},_vm._l((comment.commentAttachments),function(f,index){return (f.type==='file')?_c('p',{key:index},[_c('a',{on:{\"click\":function($event){_vm.handleViewFile(f)}}},[_vm._v(_vm._s(f.name)+\"\\r\\n                                \")])]):_vm._e()})):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"list-content-item-content-bar\"},[_c('span',{staticClass:\"list-content-item-content-bar-left\"},[_c('span',[_c('span',{directives:[{name:\"overTimeDirective\",rawName:\"v-overTimeDirective\",value:({time:comment.crtTime}),expression:\"{time:comment.crtTime}\"}]}),_vm._v(\"发布\\r\\n                                \")]),_vm._v(\" \"),(comment.childCommentNum>0)?_c('span',{staticClass:\"cursor-pointer\",on:{\"click\":function($event){_vm.handleShowChilds(comment)}}},[_vm._v(\"| 查看\"+_vm._s(comment.childCommentNum)+\"条回复\\r\\n                                    \")]):_vm._e()]),_vm._v(\" \"),_c('span',{staticClass:\"list-content-item-content-bar-right\"},[_c('span',{staticClass:\"cursor-pointer\",on:{\"click\":function($event){_vm.handleShowReply(comment)}}},[_vm._v(\" 回复\")]),_vm._v(\" \"),_c('span',{class:{ 'comment-isPraise': comment.isPraise }},[_c('Icon',{attrs:{\"type\":\"md-thumbs-up\",\"size\":\"18\"},nativeOn:{\"click\":function($event){_vm.handleThumbsUp(comment)}}}),_vm._v(\"\\r\\n                                    \"+_vm._s(comment.praiseNum)+\"\\r\\n                                \")],1),_vm._v(\" \"),(comment.praises.length>0)?_c('span',[_c('Icon',{attrs:{\"type\":\"ios-arrow-down\",\"size\":\"18\"},nativeOn:{\"click\":function($event){_vm.handlerShowThumbsUpInfo(comment)}}})],1):_vm._e()])]),_vm._v(\" \"),(comment.showReply || comment.showChilds)?_c('div',{staticStyle:{\"background-color\":\"rgb(240, 240, 240)\",\"padding\":\"10px\",\"border\":\"1px solid #ddd\"}},[(comment.showReply)?_c('commentPublish',{attrs:{\"handlePublish\":_vm.handleReplyPublish,\"superComment\":comment,\"ischild\":true,\"allowFile\":false}}):_vm._e(),_vm._v(\" \"),(comment.showChilds)?_c('child-comments',{attrs:{\"superComment\":comment,\"comments\":comment.childComment}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),(comment.showPraises)?_c('div',{staticClass:\"list-content-item-praises\"},[_c('p',[_vm._v(\"共\"),_c('b',[_vm._v(_vm._s(comment.praiseNum))]),_vm._v(\"人点赞\")]),_vm._v(\" \"),_c('div',{staticClass:\"list-content-item-praises-content\"},[_c('my-pop-tip',{attrs:{\"userInfo\":_vm.userInfo,\"trigger\":\"click\"}},_vm._l((comment.praises),function(p,index){return _c('img',{key:index,attrs:{\"slot\":\"userCard\",\"onerror\":\"src='resources/images/icon/defaultUserPhoto.jpg'\",\"src\":p.photo?p.photo:'resources/images/icon/defaultUserPhoto.jpg',\"width\":\"40\"},on:{\"click\":function($event){_vm.showUserInfo(p.creator)}},slot:\"userCard\"})}))],1)]):_vm._e()])],1)}))])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3f3e60b7\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/discussion/comments.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3f3e60b7\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./comments.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./comments.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./comments.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3f3e60b7\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./comments.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/discussion/comments.vue\n// module id = null\n// module chunks = ","<style lang=\"less\" scoped>\r\n@import \"./instance-comments.less\";\r\n</style>\r\n\r\n<template>\r\n  <div class=\"bg_ff \">\r\n        <Row class=\"comments\">\r\n            <commentPublish :handlePublish=\"handlePublish\" ></commentPublish>\r\n\r\n            <div class=\"comments-header martop10\" v-if=\"comments.length>0\">\r\n                <strong>最新评论({{pageInfo.total}})</strong>\r\n            </div>\r\n\r\n            <comments :comments=\"comments\" :refreshRootComments=\"refreshComments\"></comments>\r\n\r\n            <Page \r\n            class=\"pad20\"\r\n            v-if=\"pageInfo.total>0\"\r\n            :total=\"pageInfo.total\" \r\n            :page-size=\"pageInfo.limit\"\r\n            :current=\"pageInfo.page\"\r\n            prev-text=\"上一页\" \r\n            next-text=\"下一页\" \r\n            @on-change=\"handlePageChange\"/>\r\n       </Row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { saveComment,getComments } from \"@/services/appService.js\";\r\nimport comments from \"@/components/discussion/comments\";\r\nimport commentPublish from \"@/components/discussion/publish\";\r\n\r\nexport default {\r\n  name: \"userComments\",\r\n  components: {\r\n    comments,\r\n    commentPublish\r\n  },\r\n  props: {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n        transCode:this.$route.params.transCode,\r\n        type:'instance',\r\n        comments:[],\r\n        commentsCount:0,\r\n        pageInfo:{\r\n            limit:10, \r\n            page:1, \r\n            total:0\r\n        }\r\n    };\r\n  },\r\n \r\n  methods: {\r\n    handlePublish:function (content,uploadList) {\r\n        let comment ={\r\n            type:this.type,       \r\n            content:content, \r\n            relationKey:this.transCode,\r\n            parentId: -1,\r\n            commentAndReply:false,\r\n            commentAttachments:uploadList\r\n        };\r\n        saveComment(comment).then(res=>{\r\n            if(!res.success){\r\n                this.$Notice.warning({\r\n                    title: '系统提示',\r\n                    desc: '添加评论失败,请联系企业管理员!'\r\n                });\r\n                return;\r\n            }\r\n            this.refreshComments();\r\n        });\r\n    },\r\n    refreshComments:function () {\r\n        var params = {\r\n                relationKey:this.transCode,\r\n                sort:JSON.stringify([{property:\"crtTime\",direction:\"DESC\"}])\r\n        }\r\n        params = Object.assign(params,this.pageInfo)\r\n\r\n        getComments(params).then(res=>{\r\n            this.comments = res.tableContent;\r\n          \r\n            this.pageInfo.total = res.dataCount;\r\n        });\r\n    },\r\n\r\n    handlePageChange:function (page) {\r\n        this.pageInfo.page = page;\r\n        this.refreshComments();\r\n    }\r\n  },\r\n  mounted(){\r\n        this.refreshComments();\r\n  }\r\n};\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/form/instance-comments.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bg_ff \"},[_c('Row',{staticClass:\"comments\"},[_c('commentPublish',{attrs:{\"handlePublish\":_vm.handlePublish}}),_vm._v(\" \"),(_vm.comments.length>0)?_c('div',{staticClass:\"comments-header martop10\"},[_c('strong',[_vm._v(\"最新评论(\"+_vm._s(_vm.pageInfo.total)+\")\")])]):_vm._e(),_vm._v(\" \"),_c('comments',{attrs:{\"comments\":_vm.comments,\"refreshRootComments\":_vm.refreshComments}}),_vm._v(\" \"),(_vm.pageInfo.total>0)?_c('Page',{staticClass:\"pad20\",attrs:{\"total\":_vm.pageInfo.total,\"page-size\":_vm.pageInfo.limit,\"current\":_vm.pageInfo.page,\"prev-text\":\"上一页\",\"next-text\":\"下一页\"},on:{\"on-change\":_vm.handlePageChange}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3927b783\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/form/instance-comments.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3927b783\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./instance-comments.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./instance-comments.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./instance-comments.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3927b783\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./instance-comments.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3927b783\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/form/instance-comments.vue\n// module id = null\n// module chunks = ","<style lang=\"less\">\r\n@import \"./publish.less\";\r\n</style>\r\n\r\n<template>\r\n <div class=\"publish\">\r\n    <Row class=\"publish-container\">\r\n        <div \r\n            class=\"publish-container-content\" \r\n            contenteditable=\"true\" \r\n            v-html=\"innerText\"\r\n            @input=\"changeTxt\" \r\n            @focus=\"lock=true\" \r\n            @blur=\"lock=false\"></div>\r\n    </Row>\r\n    <br>\r\n    <Row class=\"publish-bar\">\r\n        <Col class=\"publish-bar-left\" span=\"12\">\r\n            <Poptip \r\n            placement=\"bottom-start\" \r\n            width=\"400\">\r\n                <Icon \r\n                    class=\"choice-face\" \r\n                    type=\"ios-happy-outline\"  \r\n                    size=24 />表情\r\n                    <div class=\"api\" slot=\"content\">\r\n                        <img \r\n                            :src=\"n\" \r\n                            width=24 v-for=\"n in faces\" :key=\"n\" \r\n                            @click=\"choice_face(n)\"\r\n                            style=\"float:left;margin: 2px;cursor: pointer;\">\r\n                    </div>\r\n            </Poptip>\r\n\r\n            <Poptip \r\n                v-show=\"allowFile\"\r\n                placement=\"bottom-start\" \r\n                width=\"230\" >\r\n                    <Icon \r\n                    type=\"md-images\" \r\n                    class=\"choice-img\"  \r\n                    size=24 />图片\r\n                    <div class=\"api\" slot=\"content\" >\r\n                        <p class=\"lh25\">\r\n                            <span><b>本地上传</b></span>\r\n                            <span class=\"fr\">共{{uploadList.length}}张,还能上传{{9-uploadList.length}}张</span>\r\n                        </p>\r\n                        <div \r\n                        class=\"comment-upload-list\" \r\n                        v-for=\"(item,index) in uploadList\" \r\n                        :key=\"index\" >\r\n                            <template v-if=\"item.status === 'finished'\">\r\n                                <img :src=\"item.url\">\r\n                                <div class=\"comment-upload-list-cover\">\r\n                                    <Icon \r\n                                    type=\"ios-eye-outline\" \r\n                                    @click.native=\"handleView(item.name)\">\r\n                                    </Icon>\r\n                                    <Icon \r\n                                    type=\"ios-trash-outline\" \r\n                                    @click.native=\"handleRemove(item)\"></Icon>\r\n                                </div>\r\n                            </template>\r\n                            <template v-else>\r\n                                <Progress \r\n                                v-if=\"item.showProgress\" \r\n                                :percent=\"item.percentage\" \r\n                                hide-info></Progress>\r\n                            </template>\r\n                        </div>\r\n                        <Upload\r\n                            v-show=\"uploadList.length<9\"\r\n                            ref=\"upload\"\r\n                            :show-upload-list=\"false\"\r\n                            :default-file-list=\"defaultList\"\r\n                            :on-success=\"handleSuccess\"\r\n                            :format=\"['jpg','jpeg','png']\"\r\n                            :max-size=\"2048\"\r\n                            :headers=\"httpHeaders\"\r\n                            :on-format-error=\"handleFormatError\"\r\n                            :on-exceeded-size=\"handleMaxSize\"\r\n                            :before-upload=\"handleBeforeUpload\"\r\n                            multiple\r\n                            type=\"drag\"\r\n                            action=\"/H_roleplay-si/ds/upload\"\r\n                            style=\"display: table;width:58px;\">\r\n                            <div style=\"width: 58px;height:58px;line-height: 58px;\">\r\n                                <Icon type=\"ios-camera\" size=\"20\"></Icon>\r\n                            </div>\r\n                        </Upload>\r\n                        <Modal title=\"查看图片\" v-model=\"visible\">\r\n                            <img :src=\"'/H_roleplay-si/ds/download?url=' + imgName + ''\" v-if=\"visible\" style=\"width: 100%\">\r\n                        </Modal>\r\n                    </div>\r\n            </Poptip>\r\n\r\n            <Poptip \r\n                v-show=\"allowFile\"\r\n                placement=\"bottom-start\" >\r\n                <Icon type=\"md-attach\" size=24  class=\"choice-file\" />文件\r\n                <div slot=\"content\">\r\n                    <Upload\r\n                        multiple\r\n                        ref=\"uploadFile\"\r\n                        :headers=\"httpHeaders\"\r\n                        :on-success=\"handleFileSuccess\"\r\n                        :default-file-list=\"defaultFileList\"\r\n                        action=\"/H_roleplay-si/ds/upload\">\r\n                        <Button icon=\"ios-cloud-upload-outline\">上传文件</Button>\r\n                    </Upload>\r\n                </div>\r\n            </Poptip>\r\n            <span v-if=\"ischild\">\r\n                <Checkbox v-model=\"commentAndReply\">同时评论到此应用</Checkbox>\r\n            </span>\r\n        </Col>\r\n        <Col class=\"publish-bar-right\" span=\"12\">\r\n            <Button  @click.native=\"send\" >发送</Button>\r\n        </Col>\r\n    </Row>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { getToken } from \"@/utils/utils\";\r\nexport default {\r\n    name:\"coment-publish\",\r\n    props:{\r\n        discContent:{\r\n            type:Object,\r\n            default:function(){\r\n                return { txt:\"\"}\r\n            }\r\n        },\r\n        handlePublish:{\r\n            type:Function\r\n        },\r\n        comments:{\r\n            type:Array,\r\n            default:function () {\r\n                return [];\r\n            }\r\n        },\r\n        superComment:{\r\n            type:Object,\r\n            default:function () {\r\n                return {};\r\n            }\r\n        },\r\n        allowFile:{\r\n            type:Boolean,\r\n            default:true\r\n        },\r\n        ischild:{\r\n            type:Boolean,\r\n            default:false\r\n        },\r\n        \r\n    },\r\n    data() {\r\n        return {\r\n            innerText: this.discContent.txt,\r\n            lock:false,\r\n            httpHeaders: {\r\n                Authorization: getToken()\r\n            },\r\n            faces:[],\r\n            defaultList: [\r\n            ],\r\n            defaultFileList:[],\r\n            imgName: '',\r\n            visible: false,\r\n            uploadList: [],\r\n            disabledSendBtn:true,\r\n            commentAndReply:false\r\n        };\r\n    },\r\n    watch:{\r\n        discContent:{\r\n            handler(newValue, oldValue) {\r\n                if(!this.lock) {\r\n                    this.innerText=this.discContent.txt;\r\n                };\r\n                if(newValue.txt){\r\n                    this.disabledSendBtn = false;\r\n                }\r\n        　　　},\r\n        　　　deep:true\r\n        },\r\n    },\r\n    methods: {\r\n        choice_face: function(n) {\r\n            this.discContent.txt  =   this.discContent.txt + '<img src=\"'+ n+'\" width=\"20\">';\r\n        },\r\n        changeTxt:function(e){\r\n            this.discContent.txt=  e.target.innerHTML\r\n        },\r\n        send: function() {\r\n            let  imgs= this.uploadList.map(img=>{\r\n                    return {\r\n                        attachment:img.url,\r\n                        type:'image',\r\n                    }\r\n                }),files =  this.uploadFileList.map(img=>{\r\n                    return {\r\n                        attachment:img.url,\r\n                        type:'file',\r\n                    }\r\n                });\r\n\r\n            files = files.concat(imgs);\r\n\r\n\r\n            this.handlePublish(this.discContent.txt,files,this.superComment,this.commentAndReply);\r\n\r\n            this.innerText = '';\r\n            this.discContent.txt = '';\r\n\r\n            this.$refs.upload.clearFiles();\r\n            this.$refs.uploadFile.clearFiles()\r\n            this.uploadList = [];\r\n            this.uploadFileList = [];\r\n        },\r\n        handleView (name) {\r\n            this.imgName = name;\r\n            this.visible = true;\r\n        },\r\n        handleRemove (file) {\r\n            const fileList = this.$refs.upload.fileList;\r\n            this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\r\n        },\r\n        handleSuccess (res, file) {\r\n            file.url ='/H_roleplay-si/ds/download?url=' +  res.data[0].attacthment;\r\n            file.name  =res.data[0].attacthment;\r\n        },\r\n        handleFileSuccess(res, file){\r\n            file.url ='/H_roleplay-si/ds/download?url=' +  res.data[0].attacthment;\r\n        },\r\n        handleFormatError (file) {\r\n            this.$Notice.warning({\r\n                title: '系统提示',\r\n                desc: '图片 ' + file.name + '格式不支持, 请选择格式为jpg或者png的图片'\r\n            });\r\n        },\r\n        handleMaxSize (file) {\r\n            this.$Notice.warning({\r\n                title: '超过文件大小限制',\r\n                desc: '文件  ' + file.name + '太大,最多支持2M.'\r\n            });\r\n        },\r\n        handleBeforeUpload () {\r\n            const check = this.uploadList.length < 9;\r\n            if (!check) {\r\n                this.$Notice.warning({\r\n                    title: '最多可以上传九张图片。 '\r\n                });\r\n            }\r\n            return check;\r\n        }\r\n    },\r\n    created(){\r\n        var baseUrl = 'resources/images/face/';\r\n        for(var i=1;i<=141;i++){\r\n            if(i<10){\r\n                this.faces.push('resources/images/face/00'+i.toString()+'@2x.png');\r\n            }else if(i<=99){\r\n                this.faces.push('resources/images/face/0'+i.toString()+'@2x.png');\r\n            }else {\r\n               this.faces.push('resources/images/face/'+i.toString()+'@2x.png');\r\n            }\r\n        }\r\n    },\r\n    mounted () {\r\n        this.uploadList = this.$refs.upload.fileList;\r\n        this.uploadFileList = this.$refs.uploadFile.fileList;\r\n    }\r\n};\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/discussion/publish.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"publish\"},[_c('Row',{staticClass:\"publish-container\"},[_c('div',{staticClass:\"publish-container-content\",attrs:{\"contenteditable\":\"true\"},domProps:{\"innerHTML\":_vm._s(_vm.innerText)},on:{\"input\":_vm.changeTxt,\"focus\":function($event){_vm.lock=true},\"blur\":function($event){_vm.lock=false}}})]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('Row',{staticClass:\"publish-bar\"},[_c('Col',{staticClass:\"publish-bar-left\",attrs:{\"span\":\"12\"}},[_c('Poptip',{attrs:{\"placement\":\"bottom-start\",\"width\":\"400\"}},[_c('Icon',{staticClass:\"choice-face\",attrs:{\"type\":\"ios-happy-outline\",\"size\":\"24\"}}),_vm._v(\"表情\\n                    \"),_c('div',{staticClass:\"api\",attrs:{\"slot\":\"content\"},slot:\"content\"},_vm._l((_vm.faces),function(n){return _c('img',{key:n,staticStyle:{\"float\":\"left\",\"margin\":\"2px\",\"cursor\":\"pointer\"},attrs:{\"src\":n,\"width\":\"24\"},on:{\"click\":function($event){_vm.choice_face(n)}}})}))],1),_vm._v(\" \"),_c('Poptip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allowFile),expression:\"allowFile\"}],attrs:{\"placement\":\"bottom-start\",\"width\":\"230\"}},[_c('Icon',{staticClass:\"choice-img\",attrs:{\"type\":\"md-images\",\"size\":\"24\"}}),_vm._v(\"图片\\n                    \"),_c('div',{staticClass:\"api\",attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('p',{staticClass:\"lh25\"},[_c('span',[_c('b',[_vm._v(\"本地上传\")])]),_vm._v(\" \"),_c('span',{staticClass:\"fr\"},[_vm._v(\"共\"+_vm._s(_vm.uploadList.length)+\"张,还能上传\"+_vm._s(9-_vm.uploadList.length)+\"张\")])]),_vm._v(\" \"),_vm._l((_vm.uploadList),function(item,index){return _c('div',{key:index,staticClass:\"comment-upload-list\"},[(item.status === 'finished')?[_c('img',{attrs:{\"src\":item.url}}),_vm._v(\" \"),_c('div',{staticClass:\"comment-upload-list-cover\"},[_c('Icon',{attrs:{\"type\":\"ios-eye-outline\"},nativeOn:{\"click\":function($event){_vm.handleView(item.name)}}}),_vm._v(\" \"),_c('Icon',{attrs:{\"type\":\"ios-trash-outline\"},nativeOn:{\"click\":function($event){_vm.handleRemove(item)}}})],1)]:[(item.showProgress)?_c('Progress',{attrs:{\"percent\":item.percentage,\"hide-info\":\"\"}}):_vm._e()]],2)}),_vm._v(\" \"),_c('Upload',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.uploadList.length<9),expression:\"uploadList.length<9\"}],ref:\"upload\",staticStyle:{\"display\":\"table\",\"width\":\"58px\"},attrs:{\"show-upload-list\":false,\"default-file-list\":_vm.defaultList,\"on-success\":_vm.handleSuccess,\"format\":['jpg','jpeg','png'],\"max-size\":2048,\"headers\":_vm.httpHeaders,\"on-format-error\":_vm.handleFormatError,\"on-exceeded-size\":_vm.handleMaxSize,\"before-upload\":_vm.handleBeforeUpload,\"multiple\":\"\",\"type\":\"drag\",\"action\":\"/H_roleplay-si/ds/upload\"}},[_c('div',{staticStyle:{\"width\":\"58px\",\"height\":\"58px\",\"line-height\":\"58px\"}},[_c('Icon',{attrs:{\"type\":\"ios-camera\",\"size\":\"20\"}})],1)]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"查看图片\"},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[(_vm.visible)?_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"src\":'/H_roleplay-si/ds/download?url=' + _vm.imgName + ''}}):_vm._e()])],2)],1),_vm._v(\" \"),_c('Poptip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allowFile),expression:\"allowFile\"}],attrs:{\"placement\":\"bottom-start\"}},[_c('Icon',{staticClass:\"choice-file\",attrs:{\"type\":\"md-attach\",\"size\":\"24\"}}),_vm._v(\"文件\\n                \"),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('Upload',{ref:\"uploadFile\",attrs:{\"multiple\":\"\",\"headers\":_vm.httpHeaders,\"on-success\":_vm.handleFileSuccess,\"default-file-list\":_vm.defaultFileList,\"action\":\"/H_roleplay-si/ds/upload\"}},[_c('Button',{attrs:{\"icon\":\"ios-cloud-upload-outline\"}},[_vm._v(\"上传文件\")])],1)],1)],1),_vm._v(\" \"),(_vm.ischild)?_c('span',[_c('Checkbox',{model:{value:(_vm.commentAndReply),callback:function ($$v) {_vm.commentAndReply=$$v},expression:\"commentAndReply\"}},[_vm._v(\"同时评论到此应用\")])],1):_vm._e()],1),_vm._v(\" \"),_c('Col',{staticClass:\"publish-bar-right\",attrs:{\"span\":\"12\"}},[_c('Button',{nativeOn:{\"click\":function($event){return _vm.send($event)}}},[_vm._v(\"发送\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-60ef961c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/discussion/publish.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-60ef961c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./publish.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./publish.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./publish.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-60ef961c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./publish.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/discussion/publish.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}