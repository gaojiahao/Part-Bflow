webpackJsonp([6],{"/j90":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Gu7T"),a=n.n(s),i=n("7B+g"),r=(n("oAV5"),{name:"enterpriseInfo",components:{UserModal:n("lZCD").a},data:function(){return{enterpriseInfo:{logo:"",nickname:"",name:"",instruction:"",address:"",phone:"",admins:[]},editEnterpriseName:!1,edit:"修改",httpHeaders:{Authorization:"bc7cdfe127fc4c9183dff8633533ce91"},showAdminModal:!1,selectEnterPriseAdmin:[],columnsData:[],adminColumns:[{type:"selection",width:60,align:"center"},{title:"工号",key:"userCode"},{title:"姓名",key:"nickname"}]}},methods:{selectAdminModal:function(){this.showAdminModal=!0},selectAdmin:function(e,t){this.selectEnterPriseAdmin=e},confirmModal:function(){var e,t,n=this,s={},r=[];(e=this.enterpriseInfo.admins).push.apply(e,a()(this.selectEnterPriseAdmin)),this.enterpriseInfo.admins=this.enterpriseInfo.admins.reduce(function(e,t){return!s[t.userId]&&(s[t.userId]=e.push(t)),e},[]),this.selectEnterPriseAdmin.map(function(e){r.push(e.userId)}),(t=r.join(","),Object(i.a)("/H_roleplay-si/ps/updateRelation",{list:"sys_user_role",single:t,multi:1},"POST")).then(function(e){e.success?n.$Message.info("添加成功！"):n.$Message.error(e.message)}),this.selectEnterPriseAdmin=[],this.$refs.selection.selectAll(!1),this.showAdminModal=!1},deleteEnterpriseAdmin:function(e){var t,n=this,s=Number(e.target.parentElement.getAttribute("userid"));this.enterpriseInfo.admins=this.enterpriseInfo.admins.filter(function(e){return s!==e.userId}),(t=s,Object(i.a)("/H_roleplay-si/ps/deleteRelation",{list:"sys_user_role",single:t,multi:1},"POST")).then(function(e){e.success?n.$Message.info("删除成功！"):n.$Message.error(e.message)})},getAdmintrstorData:function(){var e=this;(function(e){return Object(i.a)("/H_roleplay-si/ds/getAllUsersByGroupId",{groupId:e})})(347).then(function(t){e.columnsData=t.tableContent}),Object(i.a)("/H_roleplay-si/app/getEnterpriseById").then(function(t){e.enterpriseInfo=t})},handleEditName:function(){this.edit=this.editEnterpriseName?"修改":"保存",this.editEnterpriseName,this.editEnterpriseName=!this.editEnterpriseName},handleSuccess:function(e,t){this.enterpriseInfo.logo="/H_roleplay-si/ds/download?width=128&height=128&specify=true&url="+e.data[0].attacthment},handleMaxSize:function(e){this.$Notice.warning({title:"文件大小超出范围",desc:"文件大小最大为2M"})},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不对",desc:"请上传格式为png 或者 jpg 的图片"})}},mounted:function(){this.getAdmintrstorData()}}),o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"info-warp"},[n("header",{staticClass:"info-warp-header"},[n("h3",[e._v("\n            企业信息\n            "),n("a",{on:{click:e.handleEditName}},[e._v(e._s(e.edit))])])]),e._v(" "),n("main",{staticClass:"info-warp-main"},[n("section",{staticClass:"info-warp-main-section"},[n("div",{staticClass:"select-logo"},[n("label",{staticClass:"left-leble"},[e._v("企业LOGO")]),e._v(" "),n("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"128px","vertical-align":"middle"},attrs:{"show-upload-list":!1,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,type:"drag",action:"/H_roleplay-si/ds/upload",headers:e.httpHeaders}},[n("div",{staticStyle:{width:"128px",height:"128px","line-height":"128px"}},[e.enterpriseInfo.logo?n("img",{attrs:{src:e.enterpriseInfo.logo}}):e._e(),e._v(" "),e.enterpriseInfo.logo?e._e():n("i",{staticClass:"iconfont"},[e._v("")])])])],1),e._v(" "),n("div",{staticClass:"select-explain"},[n("label",{staticClass:"left-leble"},[e._v("企业简称")]),e._v(" "),e.editEnterpriseName?e._e():n("span",[e._v(e._s(e.enterpriseInfo.nickname))]),e._v(" "),e.editEnterpriseName?n("input",{directives:[{name:"model",rawName:"v-model",value:e.enterpriseInfo.nickname,expression:"enterpriseInfo.nickname"}],staticClass:"input-common-att",attrs:{type:"text"},domProps:{value:e.enterpriseInfo.nickname},on:{input:function(t){t.target.composing||e.$set(e.enterpriseInfo,"nickname",t.target.value)}}}):e._e()]),e._v(" "),n("div",{staticClass:"select-explain"},[n("label",{staticClass:"left-leble"},[e._v("企业全称")]),e._v(" "),e.editEnterpriseName?e._e():n("span",[e._v(e._s(e.enterpriseInfo.name))]),e._v(" "),e.editEnterpriseName?n("input",{directives:[{name:"model",rawName:"v-model",value:e.enterpriseInfo.name,expression:"enterpriseInfo.name"}],staticClass:"input-common-att",attrs:{type:"text"},domProps:{value:e.enterpriseInfo.name},on:{input:function(t){t.target.composing||e.$set(e.enterpriseInfo,"name",t.target.value)}}}):e._e()]),e._v(" "),n("div",{staticClass:"select-explain-textarea"},[n("label",{staticClass:"left-leble"},[e._v("企业说明")]),e._v(" "),e.editEnterpriseName?e._e():n("span",[e._v(e._s(e.enterpriseInfo.instruction))]),e._v(" "),e.editEnterpriseName?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.enterpriseInfo.instruction,expression:"enterpriseInfo.instruction"}],staticClass:"select-explain-textarea-text",attrs:{rows:"3",cols:"20",type:"textarea"},domProps:{value:e.enterpriseInfo.instruction},on:{input:function(t){t.target.composing||e.$set(e.enterpriseInfo,"instruction",t.target.value)}}}):e._e()])]),e._v(" "),n("section",{staticClass:"info-warp-main-section"},[n("div",{staticClass:"select-explain"},[n("label",{staticClass:"left-leble"},[e._v("企业地址")]),e._v(" "),e.editEnterpriseName?e._e():n("span",[e._v(e._s(e.enterpriseInfo.address))]),e._v(" "),e.editEnterpriseName?n("input",{directives:[{name:"model",rawName:"v-model",value:e.enterpriseInfo.address,expression:"enterpriseInfo.address"}],staticClass:"input-common-att",attrs:{type:"text"},domProps:{value:e.enterpriseInfo.address},on:{input:function(t){t.target.composing||e.$set(e.enterpriseInfo,"address",t.target.value)}}}):e._e()]),e._v(" "),n("div",{staticClass:"select-explain"},[n("label",{staticClass:"left-leble"},[e._v("联系电话")]),e._v(" "),e.editEnterpriseName?e._e():n("span",[e._v(e._s(e.enterpriseInfo.phone))]),e._v(" "),e.editEnterpriseName?n("input",{directives:[{name:"model",rawName:"v-model",value:e.enterpriseInfo.phone,expression:"enterpriseInfo.phone"}],staticClass:"input-common-att",attrs:{type:"text"},domProps:{value:e.enterpriseInfo.phone},on:{input:function(t){t.target.composing||e.$set(e.enterpriseInfo,"phone",t.target.value)}}}):e._e()])]),e._v(" "),n("section",{staticClass:"info-warp-main-section"},[n("div",[n("label",{staticClass:"left-leble"},[e._v("\n                    企业管理员\n                    "),n("b",{on:{click:e.selectAdminModal}},[n("Tooltip",{attrs:{content:"编辑",placement:"top"}},[n("Icon",{staticClass:"app-edit-icon",attrs:{type:"compose"}})],1)],1)]),e._v(" "),n("div",{staticClass:"user-container"},e._l(e.enterpriseInfo.admins,function(t){return n("Tag",{key:t.userId,attrs:{userId:t.userId,type:"border",closable:"",color:"green",size:"small"},on:{"on-close":e.deleteEnterpriseAdmin}},[e._v("\n                        "+e._s(t.nickname)+"\n                    ")])}))])])]),e._v(" "),n("user-modal",{attrs:{title:"添加用户"},on:{"on-ok":e.confirmModal},model:{value:e.showAdminModal,callback:function(t){e.showAdminModal=t},expression:"showAdminModal"}},[n("Table",{ref:"selection",attrs:{height:"400",columns:e.adminColumns,size:"small",data:e.columnsData},on:{"on-selection-change":e.selectAdmin}})],1)],1)},staticRenderFns:[]};var l=n("VU/8")(r,o,!1,function(e){n("NO2L")},"data-v-1dadd78f",null);t.default=l.exports},"9RHl":function(e,t){},NO2L:function(e,t){},lZCD:function(e,t,n){"use strict";var s=n("woOf"),a=n.n(s);function i(e){return void 0===e&&(e=document.body),!0===e?document.body:e instanceof window.Node?e:document.querySelector(e)}var r={directives:{TransferDom:{inserted:function(e,t,n){var s=t.value;if("true"!==e.dataset.transfer)return!1;e.className=e.className?e.className+" v-transfer-dom":"v-transfer-dom";var a=e.parentNode;if(a){var r=document.createComment(""),o=!1;!1!==s&&(a.replaceChild(r,e),i(s).appendChild(e),o=!0),e.__transferDomData||(e.__transferDomData={parentNode:a,home:r,target:i(s),hasMovedOut:o})}},componentUpdated:function(e,t){var n=t.value;if("true"!==e.dataset.transfer)return!1;var s=e.__transferDomData;if(s){var r=s.parentNode,o=s.home,l=s.hasMovedOut;!l&&n?(r.replaceChild(o,e),i(n).appendChild(e),e.__transferDomData=a()({},e.__transferDomData,{hasMovedOut:!0,target:i(n)})):l&&!1===n?(r.replaceChild(e,o),e.__transferDomData=a()({},e.__transferDomData,{hasMovedOut:!1,target:i(n)})):n&&i(n).appendChild(e)}},unbind:function(e){if("true"!==e.dataset.transfer)return!1;e.className=e.className.replace("v-transfer-dom",""),e.__transferDomData&&(!0===e.__transferDomData.hasMovedOut&&e.__transferDomData.parentNode&&e.__transferDomData.parentNode.appendChild(e),e.__transferDomData=null)}}},props:{value:{type:Boolean,default:!1},width:{type:[Number,String],default:520},styles:{type:Object},maskClosable:{type:Boolean,default:!0},footerBtnAlign:{type:String,default:"right"},title:{type:String},transfer:{type:Boolean,default:!0}},data:function(){return{visible:this.value}},computed:{mainStyles:function(){var e={},t=parseInt(this.width),n={width:t<=100?t+"%":t+"px"},s=this.styles?this.styles:{};return a()(e,n,s),e},inputAlign:function(){return"input-align-"+this.footerBtnAlign}},methods:{close:function(){this.visible=!1,this.$emit("on-cancel"),this.$emit("input",!1)},mask:function(){this.maskClosable&&this.close()},handleWrapClick:function(e){var t=e.target.getAttribute("class");t&&t.indexOf("rfd-modal-warp")>-1&&this.mask()},cancel:function(){this.close()},ok:function(){this.$emit("on-ok")}},watch:{value:function(e){this.visible=e},visible:function(e){this.$emit("onVisibleChange",e)}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}],attrs:{"data-transfer":e.transfer}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"rfd-modal-mask",on:{click:e.mask}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"rfd-modal-warp",on:{click:e.handleWrapClick}},[n("div",{staticClass:"rfd-modal",style:e.mainStyles},[n("div",{staticClass:"rfd-modal-content"},[n("header",[n("div",{staticClass:"modal-content-header"},[e._t("header",[n("span",{staticClass:"modal-content-header-title"},[e._v(e._s(e.title))]),e._v(" "),n("i",{staticClass:"iconfont modal-content-header-close",on:{click:e.close}},[e._v("")])])],2)]),e._v(" "),n("main",[n("div",{staticClass:"modal-content-body"},[e._t("default")],2)]),e._v(" "),n("footer",{staticClass:"modal-content-footer",class:e.inputAlign},[e._t("footer",[n("input",{staticClass:"input-submit-cancel",attrs:{type:"submit",value:"取消"},on:{click:function(t){return t.preventDefault(),e.cancel(t)}}}),e._v(" "),n("input",{staticClass:"input-submit-ok",attrs:{type:"submit",value:"确定"},on:{click:function(t){return t.preventDefault(),e.ok(t)}}})])],2)])])])])},staticRenderFns:[]};var l=n("VU/8")(r,o,!1,function(e){n("9RHl")},"data-v-446ed484",null);t.a=l.exports}});
//# sourceMappingURL=6.f84211598192d98ee0e7.js.map