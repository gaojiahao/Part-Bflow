{"version":3,"sources":["webpack:///src/components/Shape.vue","webpack:///./src/components/Shape.vue?a425","webpack:///./src/components/Shape.vue","webpack:///src/views/flow/technologyGraph.vue","webpack:///./src/views/flow/technologyGraph.vue?1e08","webpack:///./src/views/flow/technologyGraph.vue"],"names":["components_Shape","render","_h","this","$createElement","_self","_c","staticClass","attrs","width","height","rx","ry","x","xAxion","y","yAxion","stroke-width","fill","color","stroke","borderColor","on","click","changeLineStyle","staticRenderFns","src_components_Shape","__webpack_require__","normalizeComponent","ssrContext","technologyGraph","Shape","processRouteCode","val","floor","defaultShapeWidth","graphSpace","drawGraph","_this","nextPoint","nextPointX","nextPointY","ProcessAndProcedureData","yCount","pointX","defaultxAxion","xCount","pointY","defaultyAxion","procedureCode","data","i","value","item","_this2","then","res","catch","error","_this3","getElementsByClassName","style","mainMaxHeight","maxHeight","document","body","clientWidth","screenWidth","flow_technologyGraph","_vm","class","prefixCls","size","fix","_e","_v","staticStyle","font-size","cascaderData","filterable","model","callback","$$v","cascaderValue","expression","xmlns","version","id","result","in","dx","dy","type","values","stdDeviation","in2","mode","markerUnits","markerWidth","markerHeight","viewBox","refX","refY","orient","d","x1","y1","x2","y2","stop-color","stop-opacity","offset","_l","key","xlink:href","photo","_s","procedureName","cx","cy","r","font-weight","num","line","index","points","marker-end","technologyGraph_Component","technologyGraph_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/13.7139d5f8d71a53a80c8c.js","sourcesContent":["<template>\r\n   <rect :width=\"width\" :height=\"height\"\r\n        rx=\"8\" \r\n        ry='8'\r\n        :x=\"xAxion\" :y=\"yAxion\" stroke-width='2' \r\n        :fill=\"color\" \r\n        :stroke=\"borderColor\" \r\n        class='cirle'        \r\n        @click='changeLineStyle'\r\n        >\r\n    </rect>   \r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{}\r\n\r\n    },\r\n\r\n    methods:{\r\n        changeLineStyle:function(){\r\n            this.$emit('changeLineStyle')\r\n        }\r\n    },\r\n\r\n    props:['shape','xAxion','yAxion','color','borderColor','width','height']\r\n};\r\n</script>\r\n\r\n<style>\r\n/* .cirle:hover{\r\n    stroke:red;\r\n    cursor: pointer;\r\n} */\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Shape.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('rect',{staticClass:\"cirle\",attrs:{\"width\":_vm.width,\"height\":_vm.height,\"rx\":\"8\",\"ry\":\"8\",\"x\":_vm.xAxion,\"y\":_vm.yAxion,\"stroke-width\":\"2\",\"fill\":_vm.color,\"stroke\":_vm.borderColor},on:{\"click\":_vm.changeLineStyle}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-78e0458f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Shape.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-78e0458f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Shape.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Shape.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Shape.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-78e0458f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Shape.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Shape.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div :class=\"[prefixCls+'-wrap']\">\r\n    <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\r\n    <header :class=\"[prefixCls+'-wrap-header']\">\r\n      <label style=\"font-size:14px\">任务过滤：</label>\r\n\r\n      <Cascader \r\n        v-model=\"cascaderValue\" \r\n        :data=\"cascaderData\" \r\n        :class=\"[prefixCls+'-cascader']\"\r\n        filterable>\r\n      </Cascader>\r\n      \r\n    </header>\r\n    <main  :class=\"[prefixCls+'-wrap-main']\">\r\n      <div class=\"svg-container\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">\r\n          <defs>\r\n            <filter id=\"f1\" x=\"0\" y=\"0\" width=\"200%\" height=\"200%\">\r\n              <feOffset result=\"offOut\" in=\"SourceGraphic\" dx=\"0\" dy=\"0\" />\r\n              <feColorMatrix result=\"matrixOut\" in=\"offOut\" type=\"matrix\" values=\"0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0\" />\r\n              <feGaussianBlur result=\"blurOut\" in=\"matrixOut\" stdDeviation=\"5\" />\r\n              <feBlend in=\"SourceGraphic\" in2=\"blurOut\" mode=\"normal\" />\r\n            </filter>\r\n          </defs>\r\n          <defs>\r\n            <marker id=\"arrow\" markerUnits=\"userSpaceOnUse\" markerWidth=\"15\" markerHeight=\"15\" viewBox=\"0 0 15 15\" refX=\"6\" refY=\"6\" orient=\"auto\">\r\n              <path d=\"M2,0 L10,6 L2,12 L6,6 L2,0\" style=\"fill: #00ae9d;\" />\r\n            </marker>\r\n          </defs>\r\n          <defs>\r\n            <marker id=\"arrow1\" markerUnits=\"userSpaceOnUse\" markerWidth=\"15\" markerHeight=\"15\" viewBox=\"0 0 15 15\" refX=\"6\" refY=\"6\" orient=\"auto\">\r\n              <path d=\"M2,0 L10,6 L2,12 L6,6 L2,0\" style=\"fill: #808695;\" />\r\n            </marker>\r\n          </defs>\r\n          <defs>\r\n            <marker id=\"arrow_hight_color\" markerUnits=\"userSpaceOnUse\" markerWidth=\"15\" markerHeight=\"15\" viewBox=\"0 0 15 15\" refX=\"6\" refY=\"6\" orient=\"auto\">\r\n              <path d=\"M2,0 L10,6 L2,12 L6,6 L2,0\" style=\"fill: red;\" />\r\n            </marker>\r\n          </defs>\r\n          <defs>\r\n            <linearGradient id=\"orange_red\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n              <stop offset=\"0%\" style=\"stop-color:#ffdfd9;stop-opacity:1\" />\r\n              <stop offset=\"100%\" style=\"stop-color:#ff8069 stop-opacity:1\" />\r\n            </linearGradient>\r\n          </defs>\r\n\r\n          <g v-for=\"(item) in ProcessAndProcedureData\" :key=\"item.procedureCode\">\r\n            <!-- <shape :xAxion=\"item.pointX\" :yAxion=\"item.pointY\" color=\"#b9d3ef\" borderColor=\"#739cc3\" :width=\"defaultShapeWidth\" :height=\"defaultShapeWidth\"></shape> -->\r\n\r\n            <image :x=\"item.pointX\" :y=\"item.pointY\" :width=\"defaultShapeWidth\" :height=\"defaultShapeWidth\" :xlink:href=\"item.photo\" rx=\"25\"></image>\r\n\r\n            <text :x=\"item.pointX+defaultShapeWidth/2\" :y=\"item.pointY+defaultShapeWidth+5\" fill=\"#000\" style=\"font-size:14px\" class=\"svg-text-common-style\">\r\n              {{item.procedureName}}\r\n            </text>\r\n\r\n            <!-- 所有待办 -->\r\n            <circle :cx=\"item.pointX\" :cy=\"item.pointY\" r=\"12\" stroke-width=\"1\" fill=\"red\" />\r\n            <text :x=\"item.pointX\" :y=\"item.pointY-4\" fill=\"#fff\" class=\"svg-text-common-style\" style=\"font-size:10px;font-weight:bold\">\r\n              {{item.num>99?'99+':item.num}}\r\n            </text>\r\n\r\n          </g>\r\n          <g v-for=\"(line,index) in pointList\" :key=\"index\">\r\n            <polyline :points=\"line.value\" marker-end='url(#arrow1)' style=\"fill:none;stroke:#808695;stroke-width:2\" />\r\n          </g>\r\n        </svg>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Shape from \"@/components/Shape\";\r\nimport {\r\n  getProcedureAndProcess,\r\n  getMockData,\r\n  getProcessRouteProcedureRel\r\n} from \"@/services/flowService\";\r\n\r\nconst prefixCls = 'rfd-technology';\r\n\r\nexport default {\r\n  name: \"TechnologyGraph\",\r\n\r\n  components: {\r\n    Shape\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      prefixCls: prefixCls,\r\n      processRouteCode: this.$route.params.processRouteCode,\r\n      spinShow: false,\r\n      screenWidth: document.body.clientWidth, // 这里是给到了一个默认值\r\n      xAxion: 50,\r\n      yAxion: 80,\r\n\r\n      pointList: [], //存放节点连线坐标\r\n      ProcessAndProcedureData: [],\r\n      defaultxAxion: 40,\r\n      defaultyAxion: 80,\r\n      graphSpace: 100,\r\n      defaultShapeWidth: 50,\r\n      showNumber: 9, //一行显示多少个\r\n\r\n      cascaderData: [\r\n        {\r\n          value: \"my\",\r\n          label: \"我的任务\",\r\n          children: [\r\n            {\r\n              value: \"done\",\r\n              label: \"已完成\",\r\n              children: [\r\n                {\r\n                  value: \"overdue\",\r\n                  label: \"逾期\"\r\n                },\r\n                {\r\n                  value: \"no-overdue\",\r\n                  label: \"未逾期\"\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              value: \"todo\",\r\n              label: \"未完成\",\r\n              children: [\r\n                {\r\n                  value: \"overdue\",\r\n                  label: \"逾期\"\r\n                },\r\n                {\r\n                  value: \"no-overdue\",\r\n                  label: \"未逾期\"\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          value: \"team\",\r\n          label: \"团队任务\",\r\n          children: [\r\n            {\r\n              value: \"done\",\r\n              label: \"已完成\",\r\n              children: [\r\n                {\r\n                  value: \"overdue\",\r\n                  label: \"逾期\"\r\n                },\r\n                {\r\n                  value: \"no-overdue\",\r\n                  label: \"未逾期\"\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              value: \"todo\",\r\n              label: \"未完成\",\r\n              children: [\r\n                {\r\n                  value: \"overdue\",\r\n                  label: \"逾期\"\r\n                },\r\n                {\r\n                  value: \"no-overdue\",\r\n                  label: \"未逾期\"\r\n                }\r\n              ]\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      cascaderValue:['my','done','overdue']\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    screenWidth(val) {\r\n      this.screenWidth = val;\r\n      this.showNumber = Math.floor(\r\n        val / (this.defaultShapeWidth + this.graphSpace)\r\n      );\r\n      this.pointList = [];\r\n      this.drawGraph();\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    drawGraph() {\r\n      let graphSpace = this.graphSpace,\r\n        defaultShapeWidth = this.defaultShapeWidth,\r\n        yCount = 0,\r\n        xCount = 0,\r\n        nodePointXY = {}, //存放所有节点坐标\r\n        nextPoint,\r\n        nextPointX,\r\n        nextPointY,\r\n        nextNode = {},\r\n        peerNode,\r\n        preNodeId = \"\",\r\n        consumeNode = 0,\r\n        data = this.ProcessAndProcedureData;\r\n\r\n      for (let i = 0; i < data.length; i++) {\r\n        if (i % this.showNumber === 0 && i !== 0) {\r\n          yCount++;\r\n        }\r\n        //判断当前节点顺序是从左往右还是从右往左\r\n        if (yCount % 2 === 0) {\r\n          //第一次从左往右\r\n          data[i].pointX =\r\n            this.defaultxAxion + xCount * (graphSpace + defaultShapeWidth);\r\n          data[i].pointY =\r\n            this.defaultyAxion + (this.defaultShapeWidth + graphSpace) * yCount;\r\n          nodePointXY[data[i].procedureCode] =\r\n            data[i].pointX + \",\" + data[i].pointY;\r\n          xCount++;\r\n        } else {\r\n          //从右往左\r\n          data[i].pointX =\r\n            this.defaultxAxion +\r\n            (xCount - 1) * (graphSpace + defaultShapeWidth);\r\n          data[i].pointY =\r\n            this.defaultyAxion + (this.defaultShapeWidth + graphSpace) * yCount;\r\n          nodePointXY[data[i].procedureCode] =\r\n            data[i].pointX + \",\" + data[i].pointY;\r\n          xCount--;\r\n        }\r\n      }\r\n\r\n      data.forEach((item, itemIndex) => {\r\n        if (item.underProcedure) {\r\n          if (item.underProcedure in nodePointXY) {\r\n            nextPoint = nodePointXY[item.underProcedure].split(\",\");\r\n            nextPointX = Number(nextPoint[0]);\r\n            nextPointY = Number(nextPoint[1]);\r\n            //线条从上指下\r\n            if (nextPointX === item.pointX) {\r\n              this.pointList.push({\r\n                id: item.procedureCode,\r\n                value:\r\n                  item.pointX +\r\n                  defaultShapeWidth / 2 +\r\n                  \",\" +\r\n                  (item.pointY + this.defaultShapeWidth + 20) +\r\n                  \" \" +\r\n                  (nextPointX + defaultShapeWidth / 2) +\r\n                  \",\" +\r\n                  (nextPointY - 4)\r\n              });\r\n            }\r\n            //线条从右指左\r\n            if (nextPointX < item.pointX && nextPointY === item.pointY) {\r\n              this.pointList.push({\r\n                id: item.procedureCode,\r\n                value:\r\n                  item.pointX +\r\n                  \",\" +\r\n                  (item.pointY + this.defaultShapeWidth / 2) +\r\n                  \" \" +\r\n                  (nextPointX + defaultShapeWidth + 4) +\r\n                  \",\" +\r\n                  (nextPointY + this.defaultShapeWidth / 2)\r\n              });\r\n            }\r\n            //线条从左指右\r\n            if (nextPointX > item.pointX && nextPointY === item.pointY) {\r\n              this.pointList.push({\r\n                id: item.procedureCode,\r\n                value:\r\n                  item.pointX +\r\n                  this.defaultShapeWidth +\r\n                  \",\" +\r\n                  (item.pointY + this.defaultShapeWidth / 2) +\r\n                  \" \" +\r\n                  (nextPointX - 4) +\r\n                  \",\" +\r\n                  (nextPointY + this.defaultShapeWidth / 2)\r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    //查询工艺和工序关系\r\n    getProcessAndProcedure(processRouteCode) {\r\n      this.spinShow = true;\r\n      getProcedureAndProcess(processRouteCode)\r\n        .then(res => {\r\n          this.ProcessAndProcedureData = res;\r\n          this.drawGraph();\r\n          this.spinShow = false;\r\n        })\r\n        .catch(error => {\r\n          this.$Message.error(error);\r\n        });\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    let mainMaxHeight = document.body.clientHeight - 45;\r\n    window.document.getElementsByClassName(\r\n      \"rfd-technology-wrap-main\"\r\n    )[0].style.height =\r\n      mainMaxHeight + \"px\";\r\n\r\n    window.document.getElementsByClassName(\r\n      \"rfd-technology-wrap-main\"\r\n    )[0].style.maxHeight =\r\n      mainMaxHeight + \"px\";\r\n\r\n    this.showNumber = Math.floor(\r\n      document.body.clientWidth / (this.defaultShapeWidth + this.graphSpace)\r\n    );\r\n    window.onresize = () => {\r\n      return (() => {\r\n        window.screenWidth = document.body.clientWidth;\r\n        this.screenWidth = window.screenWidth;\r\n      })();\r\n    };\r\n\r\n    this.getProcessAndProcedure(this.processRouteCode);\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" >\r\n.rfd-technology-wrap {\r\n  background-color: #fff;\r\n\r\n  &-header {\r\n    height: 44px;\r\n    line-height: 44px;\r\n    border-bottom: 1px solid #ddd;\r\n\r\n    .input-select {\r\n      width: 160px;\r\n      margin: 0 5px;\r\n    }\r\n\r\n    .rfd-technology-cascader{\r\n      width:300px;\r\n      display: inline-block;\r\n\r\n      .ivu-cascader-label{\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n\r\n  &-main {\r\n    background-color: #f8f8f9;\r\n    overflow: auto;\r\n\r\n    .svg-container {\r\n      position: relative;\r\n      height: 100%;\r\n      width: 100%;\r\n      margin: 0;\r\n      padding: 0;\r\n\r\n      svg {\r\n        height: 100%;\r\n        width: 100%;\r\n        position: absolute;\r\n        overflow: hidden;\r\n        left: 0;\r\n      }\r\n\r\n      .svg-text-common-style {\r\n        text-anchor: middle;\r\n        baseline-shift: sub;\r\n        font-size: 5px;\r\n        font-family: sans-serif;\r\n      }\r\n\r\n      .svg-text-common-style:hover {\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/flow/technologyGraph.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:[_vm.prefixCls+'-wrap']},[(_vm.spinShow)?_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}}):_vm._e(),_vm._v(\" \"),_c('header',{class:[_vm.prefixCls+'-wrap-header']},[_c('label',{staticStyle:{\"font-size\":\"14px\"}},[_vm._v(\"任务过滤：\")]),_vm._v(\" \"),_c('Cascader',{class:[_vm.prefixCls+'-cascader'],attrs:{\"data\":_vm.cascaderData,\"filterable\":\"\"},model:{value:(_vm.cascaderValue),callback:function ($$v) {_vm.cascaderValue=$$v},expression:\"cascaderValue\"}})],1),_vm._v(\" \"),_c('main',{class:[_vm.prefixCls+'-wrap-main']},[_c('div',{staticClass:\"svg-container\"},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\"}},[_c('defs',[_c('filter',{attrs:{\"id\":\"f1\",\"x\":\"0\",\"y\":\"0\",\"width\":\"200%\",\"height\":\"200%\"}},[_c('feOffset',{attrs:{\"result\":\"offOut\",\"in\":\"SourceGraphic\",\"dx\":\"0\",\"dy\":\"0\"}}),_vm._v(\" \"),_c('feColorMatrix',{attrs:{\"result\":\"matrixOut\",\"in\":\"offOut\",\"type\":\"matrix\",\"values\":\"0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0\"}}),_vm._v(\" \"),_c('feGaussianBlur',{attrs:{\"result\":\"blurOut\",\"in\":\"matrixOut\",\"stdDeviation\":\"5\"}}),_vm._v(\" \"),_c('feBlend',{attrs:{\"in\":\"SourceGraphic\",\"in2\":\"blurOut\",\"mode\":\"normal\"}})],1)]),_vm._v(\" \"),_c('defs',[_c('marker',{attrs:{\"id\":\"arrow\",\"markerUnits\":\"userSpaceOnUse\",\"markerWidth\":\"15\",\"markerHeight\":\"15\",\"viewBox\":\"0 0 15 15\",\"refX\":\"6\",\"refY\":\"6\",\"orient\":\"auto\"}},[_c('path',{staticStyle:{\"fill\":\"#00ae9d\"},attrs:{\"d\":\"M2,0 L10,6 L2,12 L6,6 L2,0\"}})])]),_vm._v(\" \"),_c('defs',[_c('marker',{attrs:{\"id\":\"arrow1\",\"markerUnits\":\"userSpaceOnUse\",\"markerWidth\":\"15\",\"markerHeight\":\"15\",\"viewBox\":\"0 0 15 15\",\"refX\":\"6\",\"refY\":\"6\",\"orient\":\"auto\"}},[_c('path',{staticStyle:{\"fill\":\"#808695\"},attrs:{\"d\":\"M2,0 L10,6 L2,12 L6,6 L2,0\"}})])]),_vm._v(\" \"),_c('defs',[_c('marker',{attrs:{\"id\":\"arrow_hight_color\",\"markerUnits\":\"userSpaceOnUse\",\"markerWidth\":\"15\",\"markerHeight\":\"15\",\"viewBox\":\"0 0 15 15\",\"refX\":\"6\",\"refY\":\"6\",\"orient\":\"auto\"}},[_c('path',{staticStyle:{\"fill\":\"red\"},attrs:{\"d\":\"M2,0 L10,6 L2,12 L6,6 L2,0\"}})])]),_vm._v(\" \"),_c('defs',[_c('linearGradient',{attrs:{\"id\":\"orange_red\",\"x1\":\"0%\",\"y1\":\"0%\",\"x2\":\"0%\",\"y2\":\"100%\"}},[_c('stop',{staticStyle:{\"stop-color\":\"#ffdfd9\",\"stop-opacity\":\"1\"},attrs:{\"offset\":\"0%\"}}),_vm._v(\" \"),_c('stop',{staticStyle:{\"stop-color\":\"#ff8069 stop-opacity:1\"},attrs:{\"offset\":\"100%\"}})],1)],1),_vm._v(\" \"),_vm._l((_vm.ProcessAndProcedureData),function(item){return _c('g',{key:item.procedureCode},[_c('image',{attrs:{\"x\":item.pointX,\"y\":item.pointY,\"width\":_vm.defaultShapeWidth,\"height\":_vm.defaultShapeWidth,\"xlink:href\":item.photo,\"rx\":\"25\"}}),_vm._v(\" \"),_c('text',{staticClass:\"svg-text-common-style\",staticStyle:{\"font-size\":\"14px\"},attrs:{\"x\":item.pointX+_vm.defaultShapeWidth/2,\"y\":item.pointY+_vm.defaultShapeWidth+5,\"fill\":\"#000\"}},[_vm._v(\"\\n            \"+_vm._s(item.procedureName)+\"\\n          \")]),_vm._v(\" \"),_c('circle',{attrs:{\"cx\":item.pointX,\"cy\":item.pointY,\"r\":\"12\",\"stroke-width\":\"1\",\"fill\":\"red\"}}),_vm._v(\" \"),_c('text',{staticClass:\"svg-text-common-style\",staticStyle:{\"font-size\":\"10px\",\"font-weight\":\"bold\"},attrs:{\"x\":item.pointX,\"y\":item.pointY-4,\"fill\":\"#fff\"}},[_vm._v(\"\\n            \"+_vm._s(item.num>99?'99+':item.num)+\"\\n          \")])])}),_vm._v(\" \"),_vm._l((_vm.pointList),function(line,index){return _c('g',{key:index},[_c('polyline',{staticStyle:{\"fill\":\"none\",\"stroke\":\"#808695\",\"stroke-width\":\"2\"},attrs:{\"points\":line.value,\"marker-end\":\"url(#arrow1)\"}})])})],2)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b3234df8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/flow/technologyGraph.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b3234df8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./technologyGraph.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./technologyGraph.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./technologyGraph.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b3234df8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./technologyGraph.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/flow/technologyGraph.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}