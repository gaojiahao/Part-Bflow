webpackJsonp([2],{"9RPD":function(e,t){},NDiX:function(e,t){},ZGYE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),i=a.n(r),o=a("o32f"),n=a("lZCD"),s=a("pX3c"),l={name:"higher-organization",components:{CustomTable:s.a,MemberModal:n.a},props:{groupId:{type:String},groupType:{type:String}},data:function(){return{highOrganizationParams:{groupId:this.groupId,page:1,limit:10},highOrgColumns:[{title:"组织名称",key:"groupName"},{title:"组织类型",key:"groupType",render:function(e,t){var a=t.row.groupType;switch(a){case"M":a="管理层";break;case"A":a="事业部";break;case"O":a="部门";break;case"G":a="小组"}return e("span",a)}},{title:"组织职能",key:"depFunction",render:function(e,t){var a=t.row.depFunction;switch(a){case"M":a="管理";break;case"S":a="销售";break;case"C":a="制造";break;case"R":a="研发"}return e("span",a)}},{title:"组织状态",key:"status",render:function(e,t){var a=t.row.status,r="";switch(a){case-1:r="停用";break;case 1:r="使用中";break;case 2:r="未使用";break;case 3:r="草稿"}return e("span",{style:{color:a?"#0279f6":"#f03707",cursor:"default"}},r)}}],highOrgColumnsModal:[{title:"组织名称",key:"groupName"},{title:"组织类型",key:"groupType",render:function(e,t){var a=t.row.groupType;switch(a){case"M":a="管理层";break;case"A":a="事业部";break;case"O":a="部门";break;case"G":a="小组"}return e("span",a)}},{title:"组织职能",key:"depFunction",render:function(e,t){var a=t.row.depFunction;switch(a){case"M":a="管理";break;case"S":a="销售";break;case"C":a="制造";break;case"R":a="研发"}return e("span",a)}},{title:"组织状态",key:"status",render:function(e,t){var a=t.row.status,r="";switch(a){case-1:r="停用";break;case 1:r="使用中";break;case 2:r="未使用";break;case 3:r="草稿"}return e("span",{style:{color:a?"#0279f6":"#f03707",cursor:"default"}},r)}}],isShowMemberModal:!1,listUserLoading:!1,listUserData:[],listUserPageTotal:0,listUserCurrentPage:1,pageSize:10,searchValue:"",reload:!1,onSelectionModal:[]}},methods:{listUserChangePage:function(e){var t=[{operator:"like",value:this.searchValue,property:"groupName"}];this.getAllGroup(e,this.pageSize,t)},onPageSizeChange:function(e){this.pageSize=e;var t=[{operator:"like",value:this.searchValue,property:"groupName"}];this.getAllGroup(1,e,t)},onSelectUserList:function(e,t){this.onSelectionModal=e},handleDblclick:function(e,t){var a=this,r={groupId:this.groupId,parentId:e.groupId};Object(o._3)(r).then(function(e){e.success?(a.$Message.success("保存成功"),a.isShowMemberModal=!1,a.reload=!0,a.$emit("on-high-organization-change",!0)):a.$Message.error(e.message)})},showMemberModal:function(){this.isShowMemberModal=!0,this.getListUsers(this.listUserCurrentPage,this.pageSize)},onRefeshChange:function(e){e||(this.reload=e)},showHighOrgModal:function(){this.isShowMemberModal=!0,this.searchValue="",this.getAllGroup(this.listUserCurrentPage,this.pageSize)},saveSelectionHighOrg:function(){var e,t=this;e=this.onSelectionModal.groupId;var a={};a.parentId=e,a.groupId=this.groupId,Object(o._3)(a).then(function(e){e.success?(t.$Message.success("保存成功"),t.isShowMemberModal=!1,t.reload=!0,t.$emit("on-high-organization-change",!0)):t.$Message.error(e.message)})},getAllGroup:function(e,t,a){var r=this;this.listUserLoading=!0;var n=a||[];if(this.groupType){switch(this.groupType){case"小组":n.push({operator:"ne",value:"岗位",property:"groupType"}),n.push({operator:"ne",value:"小组",property:"groupType"});break;case"部门":n.push({operator:"ne",value:"岗位",property:"groupType"}),n.push({operator:"ne",value:"小组",property:"groupType"}),n.push({operator:"ne",value:"部门",property:"groupType"});break;case"事业部":n.push({operator:"ne",value:"岗位",property:"groupType"}),n.push({operator:"ne",value:"小组",property:"groupType"}),n.push({operator:"ne",value:"部门",property:"groupType"}),n.push({operator:"ne",value:"事业部",property:"groupType"})}n=i()(n)}Object(o.v)(e,t,n).then(function(e){e.tableContent[0]&&(r.listUserPageTotal=e.summary.total,r.listUserData=e.tableContent,r.listUserLoading=!1)})},orgFilter:function(){var e=[{operator:"like",value:this.searchValue,property:"groupName"}];this.getAllGroup(this.listUserCurrentPage,this.pageSize,e)}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("custom-table",{attrs:{apiUrl:"/ds/getParentGroupByGroupId",columns:e.highOrgColumns,apiParams:e.highOrganizationParams,isHiddenPage:!0},on:{"on-refesh-change":e.onRefeshChange},model:{value:e.reload,callback:function(t){e.reload=t},expression:"reload"}},[a("div",{staticClass:"header-action",attrs:{slot:"header"},slot:"header"},[a("label",{on:{click:e.showHighOrgModal}},[e._v("上级组织")]),e._v(" "),a("span",[e._v("-选择上级组织")])])]),e._v(" "),a("member-modal",{attrs:{width:"1000",footerBtnAlign:"right",title:"选择组织"},on:{"on-ok":e.saveSelectionHighOrg},model:{value:e.isShowMemberModal,callback:function(t){e.isShowMemberModal=t},expression:"isShowMemberModal"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索组织名称"},on:{"on-search":e.orgFilter},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),e._v(" "),a("a",{staticClass:"app-search-icon",on:{click:e.orgFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[e._v("查询")])],1)],1),e._v(" "),a("Table",{ref:"currentRowTable",staticClass:"rfd-table",attrs:{height:"400",loading:e.listUserLoading,columns:e.highOrgColumnsModal,data:e.listUserData,size:"small","highlight-row":""},on:{"on-row-dblclick":e.handleDblclick,"on-current-change":e.onSelectUserList}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.listUserPageTotal,current:e.listUserCurrentPage,"page-size":e.pageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.listUserChangePage,"on-page-size-change":e.onPageSizeChange}})],1)])],1)])],1)},staticRenderFns:[]};var p=a("VU/8")(l,c,!1,function(e){a("cVKv")},null,null).exports,u=a("Gu7T"),h=a.n(u),g={name:"lower-organization",components:{CustomTable:s.a,MemberModal:n.a},props:{groupId:{type:String},groupType:{type:String}},data:function(){var e=this;return{lowOrganizationParams:{filter:i()([{operator:"eq",value:this.groupId,property:"parentId"}]),page:1,limit:10},lowerOrgColumns:[{type:"selection",width:60,align:"center"},{title:"组织名称",key:"groupName"},{title:"组织类型",key:"groupType",render:function(e,t){var a=t.row.groupType;switch(a){case"M":a="管理层";break;case"A":a="事业部";break;case"O":a="部门";break;case"G":a="小组"}return e("span",a)}},{title:"组织职能",key:"depFunction",render:function(e,t){var a=t.row.depFunction;switch(a){case"M":a="管理";break;case"S":a="销售";break;case"C":a="制造";break;case"R":a="研发"}return e("span",a)}},{title:"组织状态",key:"status",render:function(e,t){var a=t.row.status,r="";switch(a){case-1:r="停用";break;case 1:r="使用中";break;case 2:r="未使用";break;case 3:r="草稿"}return e("span",{style:{color:a?"#0279f6":"#f03707",cursor:"default"}},r)}},{title:"操作",key:"action",width:120,align:"center",render:function(t,a){return t("Button",{props:{type:"error",size:"small"},style:{cursor:"pointer"},on:{click:function(){e.$Modal.confirm({title:"确认",content:"确认删除此组织？",onOk:function(){var t=[{groupId:a.row.groupId,parentId:""}];Object(o.l)(t).then(function(t){t.success&&(e.$Message.success(t.message),e.reload=!0,e.$emit("on-lower-organization-change",!0))})}})}}},"删除")}}],lowerOrgColumnsModel:[{type:"selection",width:60,align:"center"},{title:"组织名称",key:"groupName"},{title:"组织类型",key:"groupType",render:function(e,t){var a=t.row.groupType;switch(a){case"M":a="管理层";break;case"A":a="事业部";break;case"O":a="部门";break;case"G":a="小组"}return e("span",a)}},{title:"组织职能",key:"depFunction",render:function(e,t){var a=t.row.depFunction;switch(a){case"M":a="管理";break;case"S":a="销售";break;case"C":a="制造";break;case"R":a="研发"}return e("span",a)}},{title:"组织状态",key:"status",render:function(e,t){var a=t.row.status,r="";switch(a){case-1:r="停用";break;case 1:r="使用中";break;case 2:r="未使用";break;case 3:r="草稿"}return e("span",{style:{color:a?"#0279f6":"#f03707",cursor:"default"}},r)}}],isShowMemberModal:!1,listUserLoading:!1,listUserData:[],listUserPageTotal:0,listUserCurrentPage:1,pageSize:10,deleteBtnDisable:!0,reload:!1,onPageSelection:[],selectDeleteLowerOrg:[],searchValue:""}},methods:{listUserChangePage:function(e){var t=[{operator:"like",value:this.searchValue,property:"groupName"}];this.getAllGroup(e,t)},onPageSizeChange:function(e){this.pageSize=e;var t=[{operator:"like",value:this.searchValue,property:"groupName"}];this.getAllGroup(1,e,t)},onSelectAll:function(e){var t,a={};(t=this.onPageSelection).push.apply(t,h()(e)),this.onPageSelection=this.onPageSelection.reduce(function(e,t){return!a[t.groupId]&&(a[t.groupId]=e.push(t)),e},[])},handerSelectionChange:function(e){if(0===e.length){var t=this.$refs.selection.data,a=this.onPageSelection;t.map(function(e){a=a.filter(function(t){return t.groupId!==e.groupId})}),this.onPageSelection=a}else{var r,i={};(r=this.onPageSelection).push.apply(r,h()(e)),this.onPageSelection=this.onPageSelection.reduce(function(e,t){return!i[t.groupId]&&(i[t.groupId]=e.push(t)),e},[])}},deletePageSelection:function(e){var t=this,a=Number(e.target.parentElement.getAttribute("groupId"));this.onPageSelection=this.onPageSelection.filter(function(e){return e.groupId!==a}),this.$refs.selection.data.forEach(function(e,r){a===e.groupId&&t.$refs.selection.toggleSelect(r)})},onSelectCancel:function(e,t){this.onPageSelection=this.onPageSelection.filter(function(e){return e.groupId!==t.groupId})},onSelectionChange:function(e){e.length>0?(this.deleteBtnDisable=!1,this.selectDeleteLowerOrg=e):this.deleteBtnDisable=!0},onRefeshChange:function(e){e||(this.reload=e)},showLoverOrgModal:function(){this.isShowMemberModal=!0,this.searchValue="",this.onPageSelection=[],this.getAllGroup(this.listUserCurrentPage)},saveSelectionLowerOrg:function(){var e=this,t=[];this.onPageSelection.forEach(function(e){t.push(e.groupId)}),Object(o.X)(this.groupId,t.join(",")).then(function(t){t.success?(e.$Message.success("保存成功"),e.isShowMemberModal=!1,e.reload=!0,e.$emit("on-lower-organization-change",!0)):e.$Message.error(t.message)})},deleteLoverOrg:function(){var e=this,t=[];this.selectDeleteLowerOrg.length>0?(this.selectDeleteLowerOrg.forEach(function(e){t.push({groupId:e.groupId,parentId:""})}),t&&Object(o.l)(t).then(function(t){t.success&&(e.$Message.success(t.message),e.reload=!0,e.$emit("on-lower-organization-change",!0))})):this.$Message.info("请选择要删除的下级组织")},getAllGroup:function(e,t){var a=this;this.listUserLoading=!0;var r=t||[];if(this.groupType){switch(this.groupType){case"小组":r.push({operator:"ne",value:"小组",property:"groupType"}),r.push({operator:"ne",value:"部门",property:"groupType"}),r.push({operator:"ne",value:"事业部",property:"groupType"}),r.push({operator:"ne",value:"管理层",property:"groupType"});break;case"部门":r.push({operator:"ne",value:"部门",property:"groupType"}),r.push({operator:"ne",value:"事业部",property:"groupType"}),r.push({operator:"ne",value:"管理层",property:"groupType"});break;case"事业部":r.push({operator:"ne",value:"事业部",property:"groupType"}),r.push({operator:"ne",value:"管理层",property:"groupType"})}r=i()(r)}Object(o.v)(e,this.pageSize,r).then(function(e){e.tableContent[0]&&(a.listUserPageTotal=e.summary.total,a.listUserData=e.tableContent,a.onPageSelection.length>0&&a.listUserData.map(function(e){a.onPageSelection.map(function(t){e.groupId===t.groupId&&(e._checked=!0)})})),a.listUserLoading=!1})},orgFilter:function(){var e=[{operator:"like",value:this.searchValue,property:"groupName"}];this.getAllGroup(this.listUserCurrentPage,e)}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("custom-table",{attrs:{apiUrl:"/ds/getAllGroup",columns:e.lowerOrgColumns,apiParams:e.lowOrganizationParams},on:{"on-refesh-change":e.onRefeshChange,"on-selection-change":e.onSelectionChange},model:{value:e.reload,callback:function(t){e.reload=t},expression:"reload"}},[a("div",{staticClass:"header-action",attrs:{slot:"header"},slot:"header"},[a("label",{on:{click:e.showLoverOrgModal}},[e._v("添加下级组织")]),e._v(" "),a("span",[e._v("-添加下级组织")]),e._v(" "),a("label",{on:{click:e.deleteLoverOrg}},[e._v("删除下级组织")]),e._v(" "),a("span",[e._v("-删除下级组织")])])]),e._v(" "),a("member-modal",{attrs:{width:"1000",footerBtnAlign:"right",title:"选择组织"},on:{"on-ok":e.saveSelectionLowerOrg},model:{value:e.isShowMemberModal,callback:function(t){e.isShowMemberModal=t},expression:"isShowMemberModal"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索组织名称"},on:{"on-search":e.orgFilter},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),e._v(" "),a("a",{staticClass:"app-search-icon",on:{click:e.orgFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[e._v("查询")])],1)],1),e._v(" "),a("Table",{ref:"selection",attrs:{height:"400",loading:e.listUserLoading,columns:e.lowerOrgColumnsModel,data:e.listUserData,size:"small"},on:{"on-select-all":e.onSelectAll,"on-selection-change":e.handerSelectionChange,"on-select-cancel":e.onSelectCancel}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.listUserPageTotal,current:e.listUserCurrentPage,"page-size":e.pageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-page-size-change":e.onPageSizeChange,"on-change":e.listUserChangePage}})],1)])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.onPageSelection[0],expression:"onPageSelection[0] "}],staticClass:"page-selection-warp"},e._l(e.onPageSelection,function(t){return a("Tag",{key:t.groupId,attrs:{groupId:t.groupId,closable:!0,type:"border",color:"primary",size:"small"},on:{"on-close":e.deletePageSelection}},[e._v("\n        "+e._s(t.groupName)+"\n      ")])}))])],1)},staticRenderFns:[]};var m=a("VU/8")(g,d,!1,function(e){a("uRtw")},"data-v-7a65464a",null).exports,f={name:"member-info",components:{MemberModal:n.a,CustomTable:s.a},props:{groupId:{type:String}},data:function(){var e=this;return{memberInfoLoading:!1,memberInfoParams:{groupId:this.groupId,page:1,limit:10},memberInfoColumns:[{type:"selection",width:60,align:"center"},{title:"头像",key:"photo",width:80,render:function(e,t){return e("div",[e("Avatar",{props:{src:t.row.photo}})])}},{title:"工号",key:"userCode"},{title:"姓名",key:"nickname"},{title:"性别",key:"gender",render:function(e,t){var a=t.row.gender;return e("span",1===a?"男":0===a?"女":"未知")}},{title:"手机号",key:"mobile"},{title:"邮箱",key:"email"},{title:"操作",key:"action",width:100,align:"center",render:function(t,a){return t("Button",{props:{type:"error",size:"small"},style:{cursor:"pointer"},on:{click:function(){e.$Modal.confirm({title:"确认",content:"确认删除该成员？",onOk:function(){Object(o.p)(e.groupId,a.row.userId,0).then(function(t){t.success&&(e.$Message.success(t.message),e.reload=!0,e.$emit("on-member-info-change",!0))})}})}}},"删除")}}],memberInfoColumnsModel:[{type:"selection",width:60,align:"center"},{title:"头像",key:"photo",width:80,render:function(e,t){return e("div",[e("Avatar",{props:{src:t.row.photo}})])}},{title:"工号",key:"userCode"},{title:"姓名",key:"nickname"},{title:"性别",key:"gender",render:function(e,t){var a=t.row.gender;return e("span",1===a?"男":0===a?"女":"未知")}},{title:"手机号",key:"mobile"},{title:"邮箱",key:"email"}],searchValue:"",isShowMemberModal:!1,listUserLoading:!1,listUserData:[],listUserPageTotal:0,listUserCurrentPage:1,pageSize:10,onPageSelection:[],selectDeleteMemberInfo:[],reload:!1}},methods:{onSelectionChange:function(e){e.length>0&&(this.selectDeleteMemberInfo=e)},onRefeshChange:function(e){e||(this.reload=e)},onSelectAll:function(e){var t,a={};(t=this.onPageSelection).push.apply(t,h()(e)),this.onPageSelection=this.onPageSelection.reduce(function(e,t){return!a[t.userId]&&(a[t.userId]=e.push(t)),e},[])},handerSelectionChange:function(e){if(0===e.length){var t=this.$refs.selection.data,a=this.onPageSelection;t.map(function(e){a=a.filter(function(t){return t.userId!==e.userId})}),this.onPageSelection=a}else{var r,i={};(r=this.onPageSelection).push.apply(r,h()(e)),this.onPageSelection=this.onPageSelection.reduce(function(e,t){return!i[t.userId]&&(i[t.userId]=e.push(t)),e},[])}},deletePageSelection:function(e){var t=this,a=Number(e.target.parentElement.getAttribute("userId"));this.onPageSelection=this.onPageSelection.filter(function(e){return e.userId!==a}),this.$refs.selection.data.forEach(function(e,r){a===e.userId&&t.$refs.selection.toggleSelect(r)})},onSelectCancel:function(e,t){this.onPageSelection=this.onPageSelection.filter(function(e){return e.userId!==t.userId})},saveSelectionUser:function(){var e=this,t=[];this.onPageSelection.forEach(function(e){t.push(e.userId)}),t&&Object(o.f)(this.groupId,t.join(","),1).then(function(t){t.success&&(e.$Message.success(t.message),e.reload=!0,e.isShowMemberModal=!1,e.$emit("on-member-info-change",!0))})},deleteMemberInfo:function(){var e=this,t=[];this.selectDeleteMemberInfo.length>0?(this.selectDeleteMemberInfo.forEach(function(e){t.push(e.userId)}),t&&Object(o.p)(this.groupId,t.join(","),0).then(function(t){t.success&&(e.$Message.success(t.message),e.reload=!0,e.$emit("on-member-info-change",!0))})):this.$Message.info("请选择要删除的成员")},getListUsers:function(e,t,a){var r=this;this.listUserLoading=!0,Object(o.A)(t,e,a).then(function(e){e.tableContent[0]&&(r.listUserPageTotal=e.dataCount,r.listUserData=e.tableContent,r.onPageSelection.length>0&&r.listUserData.map(function(e){r.onPageSelection.map(function(t){e.userId===t.userId&&(e._checked=!0)})}),r.listUserLoading=!1)})},listUserChangePage:function(e){var t=i()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getListUsers(e,this.pageSize,t)},onPageSizeChange:function(e){this.pageSize=e;var t=i()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getListUsers(1,e,t)},showMemberModal:function(){this.isShowMemberModal=!0,this.searchValue="",this.onPageSelection=[],this.getListUsers(this.listUserCurrentPage,this.pageSize)},userFilter:function(){var e=i()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getListUsers(this.listUserCurrentPage,this.pageSize,e)}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("custom-table",{attrs:{apiUrl:"/ds/getUsersByGroupId",columns:e.memberInfoColumns,apiParams:e.memberInfoParams},on:{"on-selection-change":e.onSelectionChange,"on-refesh-change":e.onRefeshChange},model:{value:e.reload,callback:function(t){e.reload=t},expression:"reload"}},[a("div",{staticClass:"header-action",attrs:{slot:"header"},slot:"header"},[a("label",{on:{click:e.showMemberModal}},[e._v("添加成员")]),e._v(" "),a("span",[e._v("-添加成员")]),e._v(" "),a("label",{on:{click:e.deleteMemberInfo}},[e._v("移除成员")]),e._v(" "),a("span",[e._v("-移除成员")])])]),e._v(" "),a("member-modal",{attrs:{width:"1000",footerBtnAlign:"right",title:"选择用户"},on:{"on-ok":e.saveSelectionUser},model:{value:e.isShowMemberModal,callback:function(t){e.isShowMemberModal=t},expression:"isShowMemberModal"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索工号或名称"},on:{"on-search":e.userFilter},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),e._v(" "),a("a",{staticClass:"app-search-icon",on:{click:e.userFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[e._v("查询")])],1)],1),e._v(" "),a("Table",{ref:"selection",attrs:{height:"400",loading:e.listUserLoading,columns:e.memberInfoColumnsModel,data:e.listUserData,size:"small"},on:{"on-select-all":e.onSelectAll,"on-selection-change":e.handerSelectionChange,"on-select-cancel":e.onSelectCancel}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.listUserPageTotal,current:e.listUserCurrentPage,"page-size":e.pageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-page-size-change":e.onPageSizeChange,"on-change":e.listUserChangePage}})],1)])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.onPageSelection[0],expression:"onPageSelection[0] "}],staticClass:"page-selection-warp"},e._l(e.onPageSelection,function(t){return a("Tag",{key:t.userId,attrs:{userId:t.userId,closable:!0,type:"border",color:"primary",size:"small"},on:{"on-close":e.deletePageSelection}},[e._v("\n        "+e._s(t.nickname)+"\n      ")])}))])],1)},staticRenderFns:[]};var b=a("VU/8")(f,v,!1,function(e){a("rwfF")},null,null).exports,y={name:"principal",components:{CustomTable:s.a,PrincipalModal:n.a},props:{groupId:{type:String}},data:function(){var e=this;return{principalParams:{groupId:this.groupId,page:1,limit:10},searchValue:"",principalColumns:[{title:"头像",key:"photo",width:80,render:function(e,t){return e("div",[e("Avatar",{props:{src:t.row.photo}})])}},{title:"工号",width:100,key:"USER_CODE"},{title:"名称",key:"nickname"},{title:"性别",key:"gender",render:function(e,t){var a=t.row.gender;return e("span",1===a?"男":0===a?"女":"未知")}},{title:"联系电话",key:"mobile"},{title:"邮箱",key:"email"},{title:"操作",key:"action",width:120,align:"center",render:function(t,a){return t("Button",{props:{type:"error",size:"small"},style:{cursor:"pointer"},on:{click:function(){e.$Modal.confirm({title:"确认",content:"确认删除该负责人？",onOk:function(){var t={groupId:e.groupId,principal:""};e.savePrincipal(t)}})}}},"删除")}}],principalColumnsModel:[{title:"头像",key:"photo",width:80,render:function(e,t){return e("div",[e("Avatar",{props:{src:t.row.photo}})])}},{title:"工号",key:"userCode"},{title:"姓名",key:"nickname"},{title:"性别",key:"gender",render:function(e,t){var a=t.row.gender;return e("span",1===a?"男":0===a?"女":"未知")}},{title:"手机号",key:"mobile"},{title:"邮箱",key:"email"}],isShowPrincipalModal:!1,listUserLoading:!1,listUserData:[],listUserPageTotal:0,listUserCurrentPage:1,pageSize:10,onSelectionModal:[],selectDeleteMemberInfo:[],reload:!1}},methods:{addPrincipal:function(){this.isShowPrincipalModal=!0,this.searchValue="",this.getListUsers(this.listUserCurrentPage,this.pageSize)},getListUsers:function(e,t,a){var r=this;this.listUserLoading=!0,Object(o.A)(t,e,a).then(function(e){e.tableContent[0]&&(r.listUserPageTotal=e.summary.total,r.listUserData=e.tableContent,r.listUserLoading=!1)})},listUserChangePage:function(e){var t=i()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getListUsers(e,this.pageSize,t)},onPageSizeChange:function(e){this.pageSize=e;var t=i()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getListUsers(1,e,t)},onRefeshChange:function(e){e||(this.reload=e)},onSelectUserList:function(e,t){this.onSelectionModal=e},handleDblclick:function(e,t){var a={groupId:this.groupId,principal:e.userId};this.savePrincipal(a)},savaSelectUser:function(){var e={groupId:this.groupId,principal:this.onSelectionModal.userId};this.savePrincipal(e)},savePrincipal:function(e){var t=this;Object(o._0)(e).then(function(e){e.success&&(t.$Message.success("保存成功"),t.isShowPrincipalModal=!1,t.reload=!0,t.$emit("on-principal-change",!0))}).catch(function(e){t.$Message.error(e.data.message)})},userFilter:function(){var e=i()([{operator_1:"like",value_1:this.searchValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchValue,property_2:"userCode"}]);this.getListUsers(this.listUserCurrentPage,this.pageSize,e)}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("custom-table",{attrs:{apiUrl:"/ds/getPrincipalByGroupId",columns:e.principalColumns,apiParams:e.principalParams,isHiddenPage:!0},on:{"on-refesh-change":e.onRefeshChange},model:{value:e.reload,callback:function(t){e.reload=t},expression:"reload"}},[a("div",{staticClass:"header-action",attrs:{slot:"header"},slot:"header"},[a("label",{on:{click:e.addPrincipal}},[e._v("添加负责人")]),e._v(" "),a("span",[e._v("-添加负责人")])])]),e._v(" "),a("principal-modal",{attrs:{width:"1000",footerBtnAlign:"right",title:"选择负责人"},on:{"on-ok":e.savaSelectUser},model:{value:e.isShowPrincipalModal,callback:function(t){e.isShowPrincipalModal=t},expression:"isShowPrincipalModal"}},[a("div",[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索工号或者名称"},on:{"on-search":e.userFilter},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),e._v(" "),a("a",{staticClass:"app-search-icon",on:{click:e.userFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[e._v("查询")])],1)],1),e._v(" "),a("Table",{ref:"currentRowTable",staticClass:"rfd-principal-table",attrs:{height:"400",loading:e.listUserLoading,columns:e.principalColumnsModel,data:e.listUserData,size:"small","highlight-row":""},on:{"on-row-dblclick":e.handleDblclick,"on-current-change":e.onSelectUserList}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.listUserPageTotal,current:e.listUserCurrentPage,"page-size":e.pageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.listUserChangePage,"on-page-size-change":e.onPageSizeChange}})],1)])],1)])],1)},staticRenderFns:[]};var k=a("VU/8")(y,I,!1,function(e){a("NDiX")},null,null).exports,S={name:"principal",components:{CustomTable:s.a,MemberModal:n.a},props:{groupId:{type:String}},data:function(){var e=this;return{permissionParams:{objectName:"group",objectId:this.groupId,page:1,limit:10,start:0},permissionColumns:[{type:"selection",width:60,align:"center"},{title:"id",key:"id",hidden:!0},{title:"名称",key:"name"},{title:"操作",key:"action",width:120,align:"center",render:function(t,a){return t("Button",{props:{type:"error",size:"small"},style:{cursor:"pointer"},on:{click:function(){e.$Modal.confirm({title:"确认",content:"确认删除该权限？",onOk:function(){Object(o.q)(e.groupId,a.row.id).then(function(t){t.success&&(e.$Message.success(t.message),e.reload=!0,e.isShowModal=!1,e.$emit("on-permission-change",!0))})}})}}},"删除")}}],isShowModal:!1,allPermissionData:[],selectPermissionNode:[],selectDeletePermission:[],reload:!1}},methods:{listUserChangePage:function(e){this.getListUsers(e,this.pageSize)},addPermission:function(){this.isShowModal=!0,this.getAllPermissionData()},deletePermission:function(){var e=this,t=this,a=[];this.selectDeletePermission.forEach(function(e){a.push(e.id)}),a&&Object(o.q)(this.groupId,a.join(",")).then(function(a){a.success&&(t.$Message.success(a.message),t.reload=!0,t.isShowModal=!1,e.$emit("on-permission-change",!0))})},onSelectionChange:function(e){e.length>0&&(this.selectDeletePermission=e)},onRefeshChange:function(e){e||(this.reload=e)},onCheckChange:function(e){this.selectPermissionNode=e},savePermission:function(){var e=this,t=[];this.selectPermissionNode.forEach(function(e){t.push(e.id)}),t&&Object(o.g)(this.groupId,t.join(",")).then(function(t){t.success&&(e.$Message.success(t.message),e.selectPermissionNode=[],e.reload=!0,e.isShowModal=!1,e.$emit("on-permission-change",!0))})},getAllPermissionData:function(){var e=this;0===this.allPermissionData.length&&Object(o.w)(0).then(function(t){t.tableContent.forEach(function(t){e.allPermissionData.push({title:t.name,id:t.id,loading:!1,children:[]})})})},loadData:function(e,t){Object(o.w)(e.id).then(function(e){var a=[];e.tableContent.forEach(function(e){"false"===e.leaf?a.push({title:e.name,id:e.id,loading:!1,children:[]}):a.push({title:e.name,id:e.id})}),t(a)})}}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("custom-table",{attrs:{apiUrl:"/ds/getObjectPermission2Oneself",columns:e.permissionColumns,apiParams:e.permissionParams},on:{"on-selection-change":e.onSelectionChange,"on-refesh-change":e.onRefeshChange},model:{value:e.reload,callback:function(t){e.reload=t},expression:"reload"}},[a("div",{staticClass:"header-action",attrs:{slot:"header"},slot:"header"},[a("label",{on:{click:e.addPermission}},[e._v("添加权限")]),e._v(" "),a("span",[e._v("-添加权限")]),e._v(" "),a("label",{on:{click:e.deletePermission}},[e._v("移除权限")]),e._v(" "),a("span",[e._v("-移除权限")])])]),e._v(" "),a("member-modal",{attrs:{width:"600",footerBtnAlign:"right",title:"权限列表"},on:{"on-ok":e.savePermission},model:{value:e.isShowModal,callback:function(t){e.isShowModal=t},expression:"isShowModal"}},[a("div",{staticStyle:{"max-height":"350px",overflow:"auto"}},[a("Tree",{attrs:{data:e.allPermissionData,multiple:!0,"load-data":e.loadData},on:{"on-select-change":e.onCheckChange}})],1)])],1)},staticRenderFns:[]};var w=a("VU/8")(S,P,!1,function(e){a("wMP/")},"data-v-f10ee940",null).exports,C={name:"organization",components:{MemberModal:n.a,HighOrganization:p,LowerOrganization:m,MemberInfo:b,Principal:k,Permission:w,PrincipalModal:n.a},data:function(){return{formItem:{groupName:"",groupType:"",depFunction:"",status:1,principal:"",principalName:"",highGroup:"",parentId:""},isEdit:!0,editBtnName:"编辑",hiddenInput:!1,statusRadio:[{name:"停用",value:-1},{name:"使用中",value:1},{name:"未使用",value:2},{name:"草稿",value:3}],actionBtn:[{label:"权限",type:"md-person",number:0,hidden:!1,id:"objectPermission"},{label:"成员信息",imgPath:"resources/images/icon/user.png",number:0,hidden:!1,id:"user"},{label:"负责人",imgPath:"resources/images/icon/user.png",number:0,hidden:!1,id:"groupPrincipal"},{label:"下级组织",imgPath:"resources/images/icon/organization.png",number:0,hidden:!1,id:"childGroup"},{label:"上级组织",imgPath:"resources/images/icon/organization.png",number:0,hidden:!1,id:"parentGroup"},{label:"基本信息",type:"ios-home",hidden:!1,id:"baseinfo"}],actionIndex:5,isShowMemberModal:!1,highOrgModalLoading:!0,editHighOrg:"",editHighOrgParentId:"",name:"",groupType:"",parentType:"",listUserData:[],highOrgColumnsModal:[{title:"组织名称",key:"groupName"},{title:"组织类型",key:"groupType",render:function(e,t){var a=t.row.groupType;switch(a){case"M":a="管理层";break;case"A":a="事业部";break;case"O":a="部门";break;case"G":a="小组"}return e("span",a)}},{title:"组织职能",key:"depFunction",render:function(e,t){var a=t.row.depFunction;switch(a){case"M":a="管理";break;case"S":a="销售";break;case"C":a="制造";break;case"R":a="研发"}return e("span",a)}},{title:"组织状态",key:"status",render:function(e,t){var a=t.row.status,r="";switch(a){case-1:r="停用";break;case 1:r="使用中";break;case 2:r="未使用";break;case 3:r="草稿"}return e("span",{style:{color:a?"#0279f6":"#f03707",cursor:"default"}},r)}}],listUserPageTotal:0,listUserCurrentPage:1,pageSize:10,searchHighOrgValue:"",onSelectionModal:[],isShowPrincipalModal:!1,PrincipalModaLoading:!1,principalData:[],principalPageTotal:0,principalCurrentPage:1,principalPageSize:10,searchPrincipalValue:"",onSelectionPrincipal:[],principalColumnsModel:[{title:"工号",key:"userCode"},{title:"姓名",key:"nickname"},{title:"性别",key:"gender",render:function(e,t){var a=t.row.gender;return e("span",1===a?"男":0===a?"女":"未知")}},{title:"手机号",key:"mobile"}],ruleValidate:{groupName:[{required:!0,message:"请输入组织名称",trigger:"blur"}],highGroup:[{required:!0,message:"请选择上级组织",trigger:"change"}],groupType:[{required:!0,message:"请选择组织类型",trigger:"change"}],depFunction:[{required:!0,message:"请选择组织职能",trigger:"change"}],principal:[{required:!0,message:"请选择负责人",trigger:"change"}]},checkout:!0,groupId:this.$route.params.groupId}},methods:{handlerViewChange:function(e){this.actionIndex=e},cancle:function(){this.$Modal.confirm({title:"提示",content:"是否关闭当前页面",closable:!0,onOk:function(){location.href="/Site/index.html#page/origanizations"}})},edit:function(){this.isEdit=!this.isEdit,this.editBtnName=this.isEdit?"编辑":"放弃编辑"},saveAndAdd:function(){var e=this;this.$refs.formItem.validate(function(t){t&&!e.groupId&&e.checkout&&(delete e.formItem.groupId,Object(o.W)(e.formItem).then(function(t){t&&(e.$Message.success("保存成功"),e.$refs.formItem.resetFields(),e.formItem={groupName:"",groupType:"",depFunction:"",status:1})})),e.checkout||e.$Message.error("名称已经存在!")})},save:function(){var e=this;this.$refs.formItem.validate(function(t){t&&(!e.groupId&&e.checkout?(delete e.formItem.groupId,Object(o.W)(e.formItem).then(function(t){t&&(e.$Message.success("保存成功"),e.$router.push({path:"/addressBook/organization/detail/"+t.groupId}),window.location.reload())})):e.groupId&&e.checkout&&(e.formItem.groupId=e.groupId,Object(o._3)(e.formItem).then(function(t){t&&(e.$Message.success("保存成功"),window.location.reload())})),e.checkout||e.$Message.error("名称已经存在!"))})},getObjDetailsCountByGroupId:function(e){var t=this;Object(o.M)(e).then(function(e){t.actionBtn.forEach(function(t){t.number=e[t.id]})})},handleChangeObjDetailsCount:function(e){e&&this.getObjDetailsCountByGroupId(this.groupId)},listUserChangePage:function(e){var t=[{operator:"like",value:this.searchHighOrgValue,property:"groupName"}];this.getAllGroup(e,this.pageSize,t)},orgFilter:function(){var e=[{operator:"like",value:this.searchHighOrgValue,property:"groupName"}];this.getAllGroup(this.listUserCurrentPage,this.pageSize,e)},onSelectUserList:function(e,t){this.onSelectionModal=e},onGroupNameOutBlur:function(){var e=this,t={};this.isEdit||(t=this.groupId?[{filedName:"groupName",value:this.formItem.groupName,symbol:"="},{filedName:"groupId",symbol:"<>",value:this.groupId}]:[{filedName:"groupName",value:this.formItem.groupName,symbol:"="}],t=i()(t),Object(o.k)("sys_group",t).then(function(t){t.result>0?(e.checkout=!1,e.$Message.error("名称已经存在!")):e.checkout=!0}).catch(function(t){e.$Message.error(t.data.message)}))},getAllGroup:function(e,t,a){var r=this;this.highOrgModalLoading=!0;var n=a||[];if(this.formItem.groupType)switch(this.formItem.groupType){case"小组":n.push({operator:"ne",value:"岗位",property:"groupType"}),n.push({operator:"ne",value:"小组",property:"groupType"});break;case"部门":n.push({operator:"ne",value:"岗位",property:"groupType"}),n.push({operator:"ne",value:"小组",property:"groupType"}),n.push({operator:"ne",value:"部门",property:"groupType"});break;case"事业部":n.push({operator:"ne",value:"岗位",property:"groupType"}),n.push({operator:"ne",value:"小组",property:"groupType"}),n.push({operator:"ne",value:"部门",property:"groupType"}),n.push({operator:"ne",value:"事业部",property:"groupType"})}n=i()(n),Object(o.v)(e,t,n).then(function(e){e.tableContent[0]&&(r.listUserPageTotal=e.summary.total,r.listUserData=e.tableContent,r.highOrgModalLoading=!1)})},selectHighOrgModal:function(){this.isShowMemberModal=!0,this.searchHighOrgValue="",this.getAllGroup(this.listUserCurrentPage,this.pageSize)},saveSelectionHighOrg:function(){this.formItem.highGroup=this.onSelectionModal.groupName,this.formItem.parentId=this.onSelectionModal.groupId,this.isShowMemberModal=!1},changeGroupType:function(e){this.groupId&&("小组"===this.groupType?"M"===e?"A"===this.parentType?(this.formItem.highGroup="",this.formItem.parentId=""):"O"===this.parentType?(this.formItem.highGroup="",this.formItem.parentId=""):(this.formItem.highGroup=this.editHighOrg,this.formItem.parentId=this.editHighOrgParentId):"A"===e?"A"===this.parentType?(this.formItem.highGroup="",this.formItem.parentId=""):"O"===this.parentType?(this.formItem.highGroup="",this.formItem.parentId=""):(this.formItem.highGroup=this.editHighOrg,this.formItem.parentId=this.editHighOrgParentId):"O"===e&&"O"===this.parentType?(this.formItem.highGroup="",this.formItem.parentId=""):(this.formItem.highGroup=this.editHighOrg,this.formItem.parentId=this.editHighOrgParentId):"部门"===this.groupType&&("M"===e?"A"===this.parentType?(this.formItem.highGroup="",this.formItem.parentId=""):(this.formItem.highGroup=this.editHighOrg,this.formItem.parentId=this.editHighOrgParentId):"A"===e&&"A"===this.parentType?(this.formItem.highGroup="",this.formItem.parentId=""):(this.formItem.highGroup=this.editHighOrg,this.formItem.parentId=this.editHighOrgParentId)))},selectPrincipalModal:function(){this.isShowPrincipalModal=!0,this.searchPrincipalValue="",this.getListUsers(this.principalCurrentPage,this.principalPageSize)},getListUsers:function(e,t,a){var r=this;this.PrincipalModaLoading=!0,Object(o.A)(t,e,a).then(function(e){e.tableContent[0]&&(r.principalPageTotal=e.summary.total,r.principalData=e.tableContent,r.PrincipalModaLoading=!1)})},principalChangePage:function(e){var t=i()([{operator_1:"like",value_1:this.searchPrincipalValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchPrincipalValue,property_2:"userCode"}]);this.getListUsers(e,this.principalPageSize,t)},onSelectPrincipal:function(e,t){this.onSelectionPrincipal=e},handlePrinciplDblclick:function(e,t){this.formItem.principalName=e.nickname,this.formItem.principal=e.userId,this.isShowPrincipalModal=!1},onPrincipalPageSizeChange:function(e){var t=i()([{operator_1:"like",value_1:this.searchPrincipalValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchPrincipalValue,property_2:"userCode"}]);this.principalPageSize=e,this.getListUsers(1,e,t)},handleHighOrgDblclick:function(e,t){this.formItem.highGroup=e.groupName,this.formItem.parentId=e.groupId,this.isShowMemberModal=!1},onHighOrgPageSizeChange:function(e){this.pageSize=e;var t=[{operator:"like",value:this.searchHighOrgValue,property:"groupName"}];this.getAllGroup(1,e,t)},savaSelectPrincipal:function(){this.formItem.principalName=this.onSelectionPrincipal.nickname,this.formItem.principal=this.onSelectionPrincipal.userId,this.isShowPrincipalModal=!1},userFilter:function(){var e=i()([{operator_1:"like",value_1:this.searchPrincipalValue,property_1:"nickname",link:"or",operator_2:"like",value_2:this.searchPrincipalValue,property_2:"userCode"}]);this.getListUsers(this.listUserCurrentPage,this.pageSize,e)}},mounted:function(){var e=this,t=document.body.clientHeight-95;window.document.getElementsByClassName("organization-wrap-tabs")[0].style.height=t+"px",window.document.getElementsByClassName("organization-wrap-tabs")[0].style.maxHeight=t+"px";var a=i()([{operator:"eq",value:this.groupId,property:"groupId"}]);this.groupId?(Object(o.O)(a).then(function(t){if(t.tableContent[0]){var a=t.tableContent[0];switch(e.formItem.groupName=a.groupName,e.name=a.groupName,e.formItem.groupType=a.groupType,e.formItem.depFunction=a.depFunction,e.formItem.status=a.status,e.formItem.principal=a.principal,e.formItem.principalName=a.principalName,e.formItem.highGroup=a.parentName,e.formItem.parentId=a.parentId,e.parentType=a.parentType,e.editHighOrg=e.formItem.highGroup,e.editHighOrgParentId=e.formItem.parentId,a.groupType){case"M":e.groupType="管理层";break;case"A":e.groupType="事业部";break;case"O":e.groupType="部门";break;case"G":e.groupType="小组"}}}),this.getObjDetailsCountByGroupId(this.groupId)):this.groupId||"add"!=this.$route.name||(this.isEdit=!1,this.actionBtn.forEach(function(e){"baseinfo"!==e.id&&(e.hidden=!0)}))}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"organization-wrap"},[a("header",{staticClass:"organization-wrap-header"},[a("span",{staticClass:"organization-wrap-header-org"},[e._v("组织")]),e._v(" "),a("span",{staticClass:"organization-wrap-header-others"},[e._v("/")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.groupId,expression:"groupId"}],staticClass:"organization-wrap-header-others"},[e._v(e._s(e.name))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.groupId,expression:"!groupId"}],staticClass:"organization-wrap-header-others"},[e._v("创建")]),e._v(" "),a("Tag",{directives:[{name:"show",rawName:"v-show",value:e.groupId,expression:"groupId"},{name:"instanceStateDirective",rawName:"v-instanceStateDirective",value:{status:e.formItem.status},expression:"{status:formItem.status}"}],staticClass:"radius10 marlr10 color_fff",staticStyle:{"margin-bottom":"7px"}})],1),e._v(" "),a("div",{staticClass:"organization-wrap-action"},[a("ul",e._l(e.actionBtn,function(t,r){return t.hidden?e._e():a("li",{key:r,staticClass:"organization-wrap-action-li",class:r===e.actionIndex?"organization-wrap-action-li-active":"",on:{click:function(t){e.handlerViewChange(r)}}},[a("div",[t.type?a("Icon",{staticClass:"icon",attrs:{type:t.type}}):a("img",{staticClass:"organization-wrap-action-li-img",attrs:{src:t.imgPath}}),e._v(" "),a("div",{staticClass:"left-content"},[a("span",{directives:[{name:"show",rawName:"v-show",value:"undefine"!==t.number,expression:"item.number!=='undefine'"}]},[e._v(e._s(t.number))]),e._v(" "),a("h3",[e._v(e._s(t.label))])])],1)])}))]),e._v(" "),a("div",{staticClass:"organization-wrap-tabs"},[5===e.actionIndex?a("section",{staticClass:"baseinfo-container rfd-tab-container-common"},[a("Form",{ref:"formItem",class:{"is-required":e.isEdit},attrs:{model:e.formItem,labelWidth:120,rules:e.ruleValidate}},[a("FormItem",{staticStyle:{"font-size":"16px"},attrs:{label:"组织名称:",prop:"groupName"}},[a("Input",{class:e.isEdit?"input-status-isedit":"",attrs:{readonly:e.isEdit},on:{"on-blur":e.onGroupNameOutBlur},model:{value:e.formItem.groupName,callback:function(t){e.$set(e.formItem,"groupName",t)},expression:"formItem.groupName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"组织类型",labelWidth:120,prop:"groupType"}},[a("Select",{class:e.isEdit?"input-status-isedit":"",attrs:{disabled:e.isEdit},on:{"on-change":e.changeGroupType},model:{value:e.formItem.groupType,callback:function(t){e.$set(e.formItem,"groupType",t)},expression:"formItem.groupType"}},[a("Option",{attrs:{value:"M"}},[e._v("管理层")]),e._v(" "),a("Option",{attrs:{value:"A"}},[e._v("事业部")]),e._v(" "),a("Option",{attrs:{value:"O"}},[e._v("部门")]),e._v(" "),a("Option",{attrs:{value:"G"}},[e._v("小组")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"组织职能",labelWidth:120,prop:"depFunction"}},[a("Select",{class:e.isEdit?"input-status-isedit":"",attrs:{disabled:e.isEdit},model:{value:e.formItem.depFunction,callback:function(t){e.$set(e.formItem,"depFunction",t)},expression:"formItem.depFunction"}},[a("Option",{attrs:{value:"M"}},[e._v("管理")]),e._v(" "),a("Option",{attrs:{value:"S"}},[e._v("销售")]),e._v(" "),a("Option",{attrs:{value:"C"}},[e._v("制造")]),e._v(" "),a("Option",{attrs:{value:"R"}},[e._v("研发")])],1)],1),e._v(" "),a("div",{staticClass:"baseinfo-container-divider"}),e._v(" "),a("FormItem",{staticStyle:{"margin-top":"20px"},attrs:{label:"组织负责人",labelWidth:120,prop:"principalName"}},[a("Input",{class:e.isEdit?"input-status-isedit":"",attrs:{icon:"md-arrow-dropdown",placeholder:"选择用户",readonly:e.isEdit},on:{"on-click":e.selectPrincipalModal},model:{value:e.formItem.principalName,callback:function(t){e.$set(e.formItem,"principalName",t)},expression:"formItem.principalName"}})],1),e._v(" "),a("FormItem",{staticStyle:{"margin-top":"20px"},attrs:{label:"上级组织",labelWidth:120,prop:"highGroup"}},[a("Input",{class:e.isEdit?"input-status-isedit":"",attrs:{icon:"md-arrow-dropdown",placeholder:"选择上级组织",readonly:e.isEdit},on:{"on-click":e.selectHighOrgModal},model:{value:e.formItem.highGroup,callback:function(t){e.$set(e.formItem,"highGroup",t)},expression:"formItem.highGroup"}})],1),e._v(" "),e.hiddenInput?a("FormItem",{staticStyle:{"font-size":"16px"},attrs:{label:"上级组织parentId"}},[a("Input",{model:{value:e.formItem.parentId,callback:function(t){e.$set(e.formItem,"parentId",t)},expression:"formItem.parentId"}})],1):e._e(),e._v(" "),a("div",{staticClass:"baseinfo-container-divider"}),e._v(" "),a("FormItem",{staticStyle:{"margin-top":"20px"},attrs:{label:"组织状态",labelWidth:120}},[a("Select",{class:e.isEdit?"input-status-isedit":"",attrs:{disabled:e.isEdit},model:{value:e.formItem.status,callback:function(t){e.$set(e.formItem,"status",t)},expression:"formItem.status"}},e._l(e.statusRadio,function(t,r){return a("Option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.name))])}))],1)],1),e._v(" "),a("div",{staticClass:"baseinfo-container-action"},[a("input",{staticClass:"baseinfo-container-action-submit",attrs:{type:"submit",value:"关闭"},on:{click:e.cancle}}),e._v(" "),e.groupId?a("input",{staticClass:"baseinfo-container-action-submit",attrs:{type:"submit"},domProps:{value:e.editBtnName},on:{click:e.edit}}):e._e(),e._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],staticClass:"baseinfo-container-action-submit",attrs:{type:"submit",value:"保存"},on:{click:e.save}}),e._v(" "),e.groupId?e._e():a("input",{staticClass:"baseinfo-container-action-submit",attrs:{type:"submit",value:"保存并新建"},on:{click:e.saveAndAdd}})])],1):e._e(),e._v(" "),4===e.actionIndex?a("section",{staticClass:"memberinfo-container rfd-tab-container-common"},[a("high-organization",{attrs:{groupId:e.groupId,groupType:e.formItem.groupType},on:{"on-high-organization-change":e.handleChangeObjDetailsCount}})],1):e._e(),e._v(" "),3===e.actionIndex?a("section",{staticClass:"memberinfo-container rfd-tab-container-common"},[a("lower-organization",{attrs:{groupId:e.groupId,groupType:e.formItem.groupType},on:{"on-lower-organization-change":e.handleChangeObjDetailsCount}})],1):e._e(),e._v(" "),2===e.actionIndex?a("section",{staticClass:"memberinfo-container rfd-tab-container-common"},[a("principal",{attrs:{groupId:e.groupId},on:{"on-principal-change":e.handleChangeObjDetailsCount}})],1):e._e(),e._v(" "),1===e.actionIndex?a("section",{staticClass:"memberinfo-container rfd-tab-container-common"},[a("member-info",{attrs:{groupId:e.groupId},on:{"on-member-info-change":e.handleChangeObjDetailsCount}})],1):e._e(),e._v(" "),0===e.actionIndex?a("section",{staticClass:"permission-container rfd-tab-container-common"},[a("permission",{attrs:{groupId:e.groupId},on:{"on-permission-change":e.handleChangeObjDetailsCount}})],1):e._e()]),e._v(" "),a("member-modal",{attrs:{width:"700",footerBtnAlign:"right",title:"选择组织"},on:{"on-ok":e.saveSelectionHighOrg},model:{value:e.isShowMemberModal,callback:function(t){e.isShowMemberModal=t},expression:"isShowMemberModal"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索组织名称"},on:{"on-search":e.orgFilter},model:{value:e.searchHighOrgValue,callback:function(t){e.searchHighOrgValue=t},expression:"searchHighOrgValue"}}),e._v(" "),a("a",{staticClass:"app-search-icon",on:{click:e.orgFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[e._v("查询")])],1)],1),e._v(" "),a("Table",{ref:"currentRowTable",attrs:{height:"400",loading:e.highOrgModalLoading,columns:e.highOrgColumnsModal,data:e.listUserData,size:"small","highlight-row":""},on:{"on-row-dblclick":e.handleHighOrgDblclick,"on-current-change":e.onSelectUserList}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.listUserPageTotal,current:e.listUserCurrentPage,"page-size":e.pageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-page-size-change":e.onHighOrgPageSizeChange,"on-change":e.listUserChangePage}})],1)])],1)]),e._v(" "),a("principal-modal",{attrs:{width:"700",footerBtnAlign:"right",title:"选择负责人"},on:{"on-ok":e.savaSelectPrincipal},model:{value:e.isShowPrincipalModal,callback:function(t){e.isShowPrincipalModal=t},expression:"isShowPrincipalModal"}},[a("div",[a("div",{staticClass:"app-search"},[a("Input",{staticStyle:{width:"300px"},attrs:{search:!0,placeholder:"搜索工号或者名称"},on:{"on-search":e.userFilter},model:{value:e.searchPrincipalValue,callback:function(t){e.searchPrincipalValue=t},expression:"searchPrincipalValue"}}),e._v(" "),a("a",{staticClass:"app-search-icon",on:{click:e.userFilter}},[a("Button",{attrs:{type:"primary",size:"small"}},[e._v("查询")])],1)],1),e._v(" "),a("Table",{ref:"currentRowTable",attrs:{height:"400",loading:e.PrincipalModaLoading,columns:e.principalColumnsModel,data:e.principalData,size:"small","highlight-row":""},on:{"on-row-dblclick":e.handlePrinciplDblclick,"on-current-change":e.onSelectPrincipal}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.principalPageTotal,current:e.principalCurrentPage,"page-size":e.principalPageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-page-size-change":e.onPrincipalPageSizeChange,"on-change":e.principalChangePage}})],1)])],1)])],1)},staticRenderFns:[]};var M=a("VU/8")(C,_,!1,function(e){a("9RPD")},null,null);t.default=M.exports},btDP:function(e,t){},cVKv:function(e,t){},pX3c:function(e,t,a){"use strict";var r=a("o32f"),i={name:"CustomTable",props:{columns:{type:Array},apiUrl:{type:String},apiParams:{type:Object},value:{type:Boolean,default:!1},isHiddenPage:{type:Boolean,default:!1}},data:function(){return{pageTotal:0,currentPage:1,pageSize:10,loading:!1,columnsData:[]}},watch:{value:function(e){e&&this.getTableData(this.apiParams)}},methods:{changeCurrentPage:function(e){var t=this.apiParams;t.page=e,this.getTableData(t)},onSelectionChange:function(e){this.$emit("on-selection-change",e)},onPageSizeChange:function(e){var t=this.apiParams;t.limit=e,this.getTableData(t)},getTableData:function(e){var t=this;this.loading=!0,Object(r.R)(this.apiUrl,e).then(function(e){t.pageTotal=e.dataCount?e.dataCount:e.summary.total,t.columnsData=e.tableContent,t.value&&t.$emit("on-refesh-change",!1),t.loading=!1})}},mounted:function(){this.getTableData(this.apiParams)}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rfd-cs"},[a("header",{staticClass:"rfd-cs-header"},[e._t("header")],2),e._v(" "),a("div",{staticClass:"rfd-cs-table"},[a("Table",{ref:"selection",attrs:{loading:e.loading,columns:e.columns,data:e.columnsData},on:{"on-selection-change":e.onSelectionChange}})],1),e._v(" "),e.isHiddenPage?e._e():a("div",{staticClass:"rfd-cs-table"},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.pageTotal,current:e.currentPage,"page-size":e.pageSize,size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changeCurrentPage,"on-page-size-change":e.onPageSizeChange}})],1)]),e._v(" "),a("footer",{staticClass:"rfd-cs-footer"},[e._t("footer")],2)])},staticRenderFns:[]};var n=a("VU/8")(i,o,!1,function(e){a("btDP")},null,null);t.a=n.exports},rwfF:function(e,t){},uRtw:function(e,t){},"wMP/":function(e,t){}});
//# sourceMappingURL=2.82ec6188a9fa2d475c60.js.map