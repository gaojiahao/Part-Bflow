{"source":"webpackJsonp([28],{\"3C4C\":function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n(\"div\",{staticClass:\"app-details\"},[n(\"app-info\",{attrs:{listId:this.$route.params.listId,enforData:t.enforData,isAdmin:t.isAdmin,isCompanyAdmin:t.isCompanyAdmin,appData:t.appData},on:{reloadData:t.reloadData,changeAdmin:t.changeAdmin,enabledForbiddenAppPermission:t.enabledForbiddenAppPermission}}),t._v(\" \"),n(\"Menu\",{attrs:{mode:\"horizontal\",theme:\"light\",\"active-name\":t.$route.name}},[n(\"router-link\",{attrs:{to:{name:\"change-log\"}}},[n(\"MenuItem\",{attrs:{name:\"change-log\"}},[t._v(\"\\n        更新日志\\n      \")])],1),t._v(\" \"),n(\"router-link\",{attrs:{to:{name:\"analysis\"}}},[n(\"MenuItem\",{attrs:{name:\"analysis\"}},[t._v(\"\\n        数据分析\\n      \")])],1),t._v(\" \"),n(\"router-link\",{attrs:{to:{name:\"interaction\"}}},[n(\"MenuItem\",{attrs:{name:\"interaction\"}},[t._v(\"\\n        互动评论\\n      \")])],1),t._v(\" \"),n(\"router-link\",{attrs:{to:{name:\"permission\"}}},[n(\"MenuItem\",{attrs:{name:\"permission\"}},[t._v(\"\\n        资源授权\\n      \")])],1),t._v(\" \"),n(\"router-link\",{attrs:{to:{name:\"connection\",params:{appTransType:t.appTransType}}}},[n(\"MenuItem\",{attrs:{name:\"connection\"}},[t._v(\"\\n        连接&API\\n      \")])],1)],1),t._v(\" \"),n(\"div\",{staticClass:\"detail-content\"},[n(\"router-view\",{attrs:{listId:this.$route.params.listId,isAdmin:t.isAdmin,isAddress:t.isAddress,appType:t.appType,appTransType:t.appTransType,isCompanyAdmin:t.isCompanyAdmin,enabledForbidden:t.enabledForbidden}})],1)],1)},staticRenderFns:[]}},\"75EL\":function(t,a,n){\"use strict\";Object.defineProperty(a,\"__esModule\",{value:!0});var o=n(\"GIAq\"),i=n(\"mvHQ\"),p=n.n(i),e=n(\"sYY+\"),s=n.n(e),r={name:\"appInfo\",components:{},props:{listId:String,appData:Object,isAdmin:Boolean,isCompanyAdmin:Boolean},data:function(){return{showEditAppInfo:!0,showAppEditAdmin:!0,showEditBtn:!0,adminLoading:!0,showAdminModal:!1,searchValue:\"\",total:0,currentPage:1,pageSize:10,adminColumns:[{title:\"头像\",key:\"photo\",width:80,render:function(t,a){return t(\"div\",[t(\"img\",{attrs:{src:a.row.photo?a.row.photo:\"/resources/images/icon/defaultUserPhoto.jpg\"},style:{borderRadius:\"50%\",height:\"32px\",width:\"32px\"}})])}},{title:\"工号\",key:\"userCode\"},{title:\"姓名\",key:\"nickname\"},{title:\"手机\",key:\"mobile\"},{title:\"邮箱\",key:\"email\"}],adminData:[],selectAdminData:{}}},methods:{goList:function(){\"000001\"===this.appData.uniqueId?window.top.location.href=\"/Site/index.html#page/users\":\"000002\"===this.appData.uniqueId?window.top.location.href=\"/Site/index.html#page/origanizations\":\"000003\"===this.appData.uniqueId?window.top.location.href=\"/Site/index.html#page/jobs\":\"000004\"===this.appData.uniqueId?window.top.location.href=\"/Site/index.html#page/companys\":window.top.location.href=\"/Site/index.html#list/\"+this.appData.uniqueId},clearAdmintrstor:function(){\"\"===this.appData.administrator&&(this.appData.userId=\"\")},childHasPublished:function(t){this.appData.publish=1},editAppinfo:function(){var a=this;if(this.isAdmin&&(this.showEditAppInfo=!this.showEditAppInfo),this.isCompanyAdmin&&(this.showAppEditAdmin=!1),!this.showEditBtn){var t={uniqueId:this.appData.uniqueId,title:this.appData.title,administrator:this.appData.userId,comment:this.appData.comment.replace(/\\r\\n/g,\"<br>\").replace(/\\n/g,\"<br>\").replace(/\\s/g,\" \")};Object(o._2)(t).then(function(t){t.success&&(a.$Message.success(\"更新成功!\"),a.showAppEditAdmin=!0,a.$emit(\"reloadData\"),a.$emit(\"changeAdmin\"))})}this.showEditBtn=!this.showEditBtn},selectAdminModal:function(){this.showAdminModal=!0,this.searchValue=\"\",this.getAdmintrstorData()},confirmModal:function(){this.appData.administrator=this.selectAdminData.nickname,this.appData.userId=this.selectAdminData.userId},dbclickConfirmModal:function(t){this.appData.administrator=t.nickname,this.appData.userId=t.userId,this.showAdminModal=!1},selectAdmin:function(t,a){this.selectAdminData=t},getAdmintrstorData:function(t){var a=this;this.adminLoading=!0,Object(o.r)(t,this.currentPage,this.pageSize).then(function(t){a.adminData=t.tableContent,a.total=t.dataCount,a.adminLoading=!1,a.infoeditor})},changeAppStatus:function(a){var n=this,t=this.listId,i=p()([{operator:\"eq\",value:\"操作\",property:\"type\"}]),e=[],s=[];Object(o.u)(t,i).then(function(t){t.tableContent.forEach(function(t){e.push(t.id),\"查看\"!=t.name&&s.push(t.id)}),\"enabled\"===a?Object(o.o)(e.join(\",\")).then(function(t){t.success&&(n.$Message.success(t.message),n.$emit(\"enabledForbiddenAppPermission\"))}):Object(o.o)(null,s.join(\",\")).then(function(t){t.success&&(n.$Message.success(t.message),n.$emit(\"enabledForbiddenAppPermission\"))})})},onPageChange:function(t){this.currentPage=t;var a=p()([{operator_1:\"like\",value_1:this.searchValue,property_1:\"nickname\",link:\"or\",operator_2:\"like\",value_2:this.searchValue,property_2:\"userCode\"}]);this.getAdmintrstorData(a)},adminFilter:function(){var t=p()([{operator_1:\"like\",value_1:this.searchValue,property_1:\"nickname\",link:\"or\",operator_2:\"like\",value_2:this.searchValue,property_2:\"userCode\"}]);this.getAdmintrstorData(t)},createEditor:function(){var a=this;this.infoeditor=new s.a(this.$refs.infoeditor),this.infoeditor.customConfig.onchange=function(t){a.appData.comment=t},this.infoeditor.customConfig.zIndex=100,this.infoeditor.customConfig.menus=[\"head\",\"bold\",\"fontSize\",\"fontName\",\"italic\",\"underline\",\"strikeThrough\",\"foreColor\",\"backColor\",\"link\",\"list\",\"justify\",\"quote\",\"emoticon\",\"code\",\"undo\",\"redo\"],this.infoeditor.create(),this.infoeditor.txt.html(\"<div></div>\")}},mounted:function(){this.listId;this.getAdmintrstorData()}},d=n(\"ntfx\"),c=n.n(d);var l=function(t){n(\"zFVQ\")},m={name:\"detail\",components:{AppInfo:n(\"VU/8\")(r,c.a,!1,l,\"data-v-01391d3e\",null).exports},data:function(){return{listId:this.$route.params.listId,appData:{},enforData:[],isAdmin:!1,isCompanyAdmin:!1,isAddress:!1,appType:\"\",appTransType:\"\",enabledForbidden:-1}},methods:{enabledForbiddenAppPermission:function(){this.enabledForbidden++},changeAdmin:function(){this.getAppInfoDatas()},getAppInfoDatas:function(){var a=this,t=this.listId,n=this.$currentUser,i=[];Object(o.Q)(t).then(function(t){a.appData=t[0],a.appData.comment=a.appData.comment.replace(/<br>/g,\"\\r\\n\"),a.appType=a.appData.type,a.appTransType=a.appData.transType,n.isSysRoleList.forEach(function(t){i.push(t.id)}),a.appData.administrator?n.nickname===a.appData.administrator&&-1<i.indexOf(1)?(a.isAdmin=!0,a.isCompanyAdmin=!0):n.nickname==a.appData.administrator?a.isAdmin=!0:-1<i.indexOf(1)?(a.isCompanyAdmin=!0,a.isAdmin=!1):(a.isAdmin=!1,a.isCompanyAdmin=!1):-1<i.indexOf(1)?(a.isAdmin=!0,a.isCompanyAdmin=!0):(a.isAdmin=!1,a.isCompanyAdmin=!1),\"hr\"===a.appData.type&&(a.isAddress=!0)})},reloadData:function(){this.getAppInfoDatas()}},created:function(){this.getAppInfoDatas()}},h=n(\"3C4C\"),u=n.n(h);var f=function(t){n(\"ghD6\")},v=n(\"VU/8\")(m,u.a,!1,f,\"data-v-2bd5a26c\",null);a.default=v.exports},ghD6:function(t,a){},ntfx:function(t,a){t.exports={render:function(){var a=this,t=a.$createElement,n=a._self._c||t;return n(\"div\",{staticClass:\"app-card\"},[n(\"header\",{staticClass:\"app-header\"},[n(\"Breadcrumb\",[n(\"BreadcrumbItem\",[a._v(\"首页\")]),a._v(\" \"),n(\"BreadcrumbItem\",[a._v(\"应用列表\")]),a._v(\" \"),n(\"BreadcrumbItem\",[a._v(a._s(a.appData.title))])],1)],1),a._v(\" \"),n(\"Row\",{staticClass:\"font14\"},[n(\"Col\",{staticClass:\"pad15\",attrs:{span:\"2\"}},[n(\"img\",{staticClass:\"appIcon\",attrs:{src:a.appData.icon}})]),a._v(\" \"),n(\"Col\",{staticClass:\"pad15\",attrs:{span:\"21\"}},[n(\"h3\",[n(\"span\",{staticClass:\"app-detail-title\",on:{click:a.goList}},[a._v(a._s(a.appData.title?a.appData.title:\"待加载\")+\"\\n          \")]),a._v(\"  - 应用详情\\n        \")]),a._v(\" \"),n(\"Row\",{staticClass:\"pad5\"},[n(\"Col\",{attrs:{span:\"6\"}},[a._v(\"应用名称： \\n            \"),a.showAppEditAdmin?n(\"span\",[a._v(a._s(a.appData.title))]):n(\"Input\",{staticStyle:{width:\"120px\"},model:{value:a.appData.title,callback:function(t){a.$set(a.appData,\"title\",t)},expression:\"appData.title\"}}),a._v(\" \"),a.isCompanyAdmin?n(\"b\",{on:{click:a.editAppinfo}},[a.showEditBtn?n(\"Tooltip\",{attrs:{content:\"编辑\",placement:\"top\"}},[n(\"Icon\",{staticClass:\"app-edit-icon\",attrs:{type:\"ios-create-outline\"}})],1):n(\"Tooltip\",{attrs:{content:\"保存\",placement:\"top\"}},[n(\"b\",{staticClass:\"app-save-icon\"},[a._v(\"保存\")])])],1):a._e()],1),a._v(\" \"),n(\"Col\",{attrs:{span:\"6\"}},[a._v(\"应用类型： \"),n(\"span\",[a._v(a._s(a.appData.TRANS_NAME))])]),a._v(\" \"),n(\"Col\",{attrs:{span:\"6\"}},[a._v(\"应用管理员： \\n            \"),a.showAppEditAdmin?n(\"span\",[n(\"Icon\",{attrs:{type:\"person\"}}),a._v(a._s(a.appData.administrator)+\"\\n            \")],1):n(\"Input\",{staticStyle:{width:\"100px\"},attrs:{icon:\"md-arrow-dropdown\"},on:{\"on-click\":a.selectAdminModal,\"on-change\":a.clearAdmintrstor},model:{value:a.appData.administrator,callback:function(t){a.$set(a.appData,\"administrator\",t)},expression:\"appData.administrator\"}})],1)],1),a._v(\" \"),n(\"Row\",{staticClass:\"pad5\"},[n(\"Col\",{attrs:{span:\"6\"}},[a._v(\"创建者： \"),n(\"span\",[a._v(a._s(a.appData.creator))])]),a._v(\" \"),n(\"Col\",{attrs:{span:\"6\"}},[a._v(\"创建时间： \"),n(\"span\",[a._v(a._s(a.appData.crtTime))])]),a._v(\" \"),n(\"Col\",{attrs:{span:\"6\"}},[a._v(\"修改者：\"+a._s(a.appData.modifer))]),a._v(\" \"),n(\"Col\",{attrs:{span:\"6\"}},[a._v(\"修改时间： \"),n(\"span\",[a._v(a._s(a.appData.modTime))])])],1),a._v(\" \"),n(\"Row\",{staticClass:\"pad5\"},[n(\"Col\",{attrs:{span:\"24\"}},[a._v(\"说明：\\n            \"),a.showAppEditAdmin?n(\"pre\",[a._v(a._s(a.appData.comment))]):a._e(),a._v(\" \"),n(\"Input\",{directives:[{name:\"show\",rawName:\"v-show\",value:!a.showAppEditAdmin,expression:\"!showAppEditAdmin\"}],attrs:{type:\"textarea\"},model:{value:a.appData.comment,callback:function(t){a.$set(a.appData,\"comment\",t)},expression:\"appData.comment\"}})],1)],1)],1),a._v(\" \"),n(\"Col\",{attrs:{span:\"1\"}},[n(\"Dropdown\",{staticClass:\"app-dropdown\",on:{\"on-click\":a.changeAppStatus}},[n(\"a\",{attrs:{href:\"javascript:void(0)\"}},[a._v(\"\\n                  操作\\n                  \"),n(\"Icon\",{attrs:{type:\"ios-arrow-down\"}})],1),a._v(\" \"),a.isAdmin?n(\"DropdownMenu\",{attrs:{slot:\"list\"},slot:\"list\"},[n(\"DropdownItem\",{attrs:{name:\"enabled\"}},[a._v(\"启用\")]),a._v(\" \"),n(\"DropdownItem\",{attrs:{name:\"forbidden\"}},[a._v(\"停用\")])],1):a._e()],1)],1)],1),a._v(\" \"),n(\"Modal\",{attrs:{title:\"请选择管理员\",width:\"800\"},on:{\"on-ok\":a.confirmModal},model:{value:a.showAdminModal,callback:function(t){a.showAdminModal=t},expression:\"showAdminModal\"}},[n(\"div\",{staticClass:\"app-search\"},[n(\"Input\",{staticStyle:{width:\"300px\"},attrs:{search:!0,placeholder:\"搜索名称或工号\"},on:{\"on-search\":a.adminFilter},model:{value:a.searchValue,callback:function(t){a.searchValue=t},expression:\"searchValue\"}}),a._v(\" \"),n(\"p\",{staticClass:\"app-search-icon\",on:{click:a.adminFilter}},[n(\"Button\",{attrs:{type:\"primary\",size:\"small\"}},[a._v(\"查询\")])],1)],1),a._v(\" \"),n(\"Table\",{attrs:{\"highlight-row\":!0,loading:a.adminLoading,height:\"300\",stripe:\"\",columns:a.adminColumns,size:\"small\",data:a.adminData},on:{\"on-row-dblclick\":a.dbclickConfirmModal,\"on-row-click\":a.selectAdmin}}),a._v(\" \"),n(\"div\",{staticClass:\"user-page\"},[n(\"div\",{staticStyle:{float:\"right\"}},[n(\"Page\",{attrs:{total:a.total,current:a.currentPage,\"page-size\":a.pageSize,size:\"small\",\"show-total\":\"\"},on:{\"on-change\":a.onPageChange}})],1)])],1)],1)},staticRenderFns:[]}},zFVQ:function(t,a){}});"}