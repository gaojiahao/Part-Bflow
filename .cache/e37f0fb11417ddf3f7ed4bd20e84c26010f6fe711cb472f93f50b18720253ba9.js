{"source":"webpackJsonp([29],{YA7J:function(t,e){},ie1I:function(t,e){t.exports={render:function(){var i=this,t=i.$createElement,s=i._self._c||t;return s(\"div\",{staticClass:\"file\"},[i._m(0),i._v(\" \"),s(\"div\",{staticClass:\"toolbar\"},[s(\"span\",{staticClass:\"toolbar-bread\"},[s(\"span\",{staticClass:\"toolbar-subarea\",on:{click:i.goSubarea}},[i._v(\"分区\")]),i._v(\" \"),s(\"span\",[i._v(\" > \")]),i._v(\" \"),i._l(i.breadHeader,function(e,a){return s(\"span\",{key:a},[i.breadHeader.length-1!==a?s(\"span\",{staticClass:\"bread-title\",on:{click:function(t){i.goClickFile(e,a)}}},[i._v(\" \"+i._s(e.name)+\" \")]):s(\"span\",{staticClass:\"current-title\"},[i._v(\" \"+i._s(e.name)+\" \")]),i._v(\" \"),i.breadHeader.length-1!==a?s(\"span\",[i._v(\" > \")]):i._e()])})],2),i._v(\" \"),s(\"Button\",{staticClass:\"toolbar-btn\",on:{click:i.addNewFile}},[i._v(\"新建文件夹\")]),i._v(\" \"),s(\"Upload\",{staticClass:\"toolbar-btn\",attrs:{action:\"/H_roleplay-si/filing/upload?directory=\"+i.subareaPath+\"&cover=false\",\"show-upload-list\":!1,\"on-success\":i.handleSuccess,headers:i.httpHeaders}},[s(\"Button\",{attrs:{type:\"info\",icon:\"ios-cloud-upload-outline\"}},[i._v(\"上传\")])],1)],1),i._v(\" \"),s(\"div\",{staticClass:\"subarea\"},[s(\"Table\",{attrs:{columns:i.columns,data:i.data},on:{\"on-row-dblclick\":i.openfile},scopedSlots:i._u([{key:\"name\",fn:function(t){var e=t.row;return[e.isFile?i._e():s(\"Icon\",{staticClass:\"subarea-icon\",attrs:{type:\"md-albums\"}}),i._v(\" \"),e.isFile&&null===e.suffix?s(\"Icon\",{staticClass:\"subarea-icon\",attrs:{type:\"md-document\"}}):i._e(),i._v(\" \"),e.isFile&&\"xls\"===e.suffix?s(\"img\",{attrs:{src:\"resources/images/file/excel.png\"}}):i._e(),i._v(\" \"),e.isFile&&\"xlsx\"===e.suffix?s(\"img\",{attrs:{src:\"resources/images/file/excel.png\"}}):i._e(),i._v(\" \"),e.isFile&&\"doc\"===e.suffix?s(\"img\",{attrs:{src:\"resources/images/file/word.png\"}}):i._e(),i._v(\" \"),e.isFile&&\"docx\"===e.suffix?s(\"img\",{attrs:{src:\"resources/images/file/word.png\"}}):i._e(),i._v(\" \"),e.isFile&&\"txt\"===e.suffix?s(\"img\",{attrs:{src:\"resources/images/file/txt.png\"}}):i._e(),i._v(\" \"),s(\"label\",[i._v(i._s(e.name))]),i._v(\" \"),s(\"Poptip\",{ref:\"popMenu\",staticStyle:{float:\"right\",width:\"25px\"},attrs:{trigger:\"hover\",placement:\"right-start\"}},[s(\"span\",{staticClass:\"subarea-more\"},[s(\"Icon\",{attrs:{type:\"ios-arrow-dropright-circle\"}})],1),i._v(\" \"),s(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[s(\"ul\",{staticClass:\"subarea-menu\"},[e.isFile?i._e():s(\"li\",{on:{click:function(t){i.openfile(e)}}},[i._v(\"打开\")]),i._v(\" \"),s(\"li\",{on:{click:function(t){i.downloadFiles(e)}}},[i._v(\"下载\")]),i._v(\" \"),s(\"li\",{on:{click:function(t){i.copyFiles(e)}}},[i._v(\"复制到...\")]),i._v(\" \"),s(\"li\",{on:{click:function(t){i.renameFile(e)}}},[i._v(\"重命名\")]),i._v(\" \"),s(\"li\",{on:{click:function(t){i.moveFiles(e)}}},[i._v(\"移动到...\")]),i._v(\" \"),s(\"li\",{on:{click:function(t){i.deleteFiles(e)}}},[i._v(\"删除\")])])])]),i._v(\" \"),s(\"div\",{staticClass:\"subarea-download\",on:{click:function(t){i.downloadFiles(e)}}},[s(\"Icon\",{attrs:{type:\"md-cloud-download\"}})],1)]}}])})],1),i._v(\" \"),s(\"Modal\",{attrs:{title:i.modalTitle,styles:{top:\"20px\"}},on:{\"on-ok\":i.confirmAddNewFile},model:{value:i.showModal,callback:function(t){i.showModal=t},expression:\"showModal\"}},[s(\"span\",[s(\"b\",{staticStyle:{color:\"#e4393c\"}},[i._v(\"*\")]),i._v(\"名称：\")]),i._v(\" \"),s(\"Input\",{staticStyle:{width:\"300px\"},attrs:{placeholder:\"请输入名称\",autofocus:\"\"},model:{value:i.fileName,callback:function(t){i.fileName=t},expression:\"fileName\"}})],1),i._v(\" \"),s(\"Modal\",{attrs:{title:i.actionModalTitle,styles:{top:\"20px\"},height:\"600\",width:\"300\"},on:{\"on-ok\":i.copyMoveFile},model:{value:i.showActionModal,callback:function(t){i.showActionModal=t},expression:\"showActionModal\"}},[s(\"Tree\",{staticClass:\"file-tree\",attrs:{data:i.actionData,\"load-data\":i.loadData},on:{\"on-select-change\":i.onSelectChange}})],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"file-header\"},[a(\"span\",[t._v(\"文件柜\")])])}]}},jZLQ:function(t,e,a){\"use strict\";a.d(e,\"d\",function(){return s}),a.d(e,\"e\",function(){return n}),a.d(e,\"g\",function(){return o}),a.d(e,\"b\",function(){return l}),a.d(e,\"c\",function(){return c}),a.d(e,\"a\",function(){return r}),a.d(e,\"f\",function(){return u});var i=a(\"7B+g\"),s=function(t,e){return Object(i.a)(\"/H_roleplay-si/filing/query\",{folderPath:t,dir:e})},n=function(t){return Object(i.a)(\"/H_roleplay-si/filing/info\",{id:t})},o=function(t,e){return Object(i.a)(\"/H_roleplay-si/filing/rename\",{srcPath:t,newName:e},\"POST\")},l=function(t){return Object(i.a)(\"/H_roleplay-si/filing/mkdir\",{folderPath:t},\"POST\")},c=function(t){return Object(i.a)(\"/H_roleplay-si/filing/delete\",{path:t},\"POST\")},r=function(t,e){return Object(i.a)(\"/H_roleplay-si/filing/copy\",{path:t,toPath:e},\"POST\")},u=function(t,e){return Object(i.a)(\"/H_roleplay-si/filing/move\",{path:t,toPath:e},\"POST\")}},qIEu:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=a(\"jZLQ\"),i=a(\"oAV5\"),n={name:\"fileCabinetList\",data:function(){return{subareaId:this.$route.params.id,subareaPath:\"\",searchValue:\"\",httpHeaders:{Authorization:Object(i.c)()},showModal:!1,showActionModal:!1,isCopy:!0,fileName:\"\",filePath:\"\",waitPath:\"\",modalTitle:\"新建文件夹\",actionModalTitle:\"复制\",isAdd:!0,columns:[{title:\"名称\",slot:\"name\",width:400},{title:\"大小\",key:\"size\",render:function(t,e){return e.row.size?t(\"span\",{},e.row.size):t(\"span\",{},\"- -\")}},{title:\"来源\",key:\"creator\"},{title:\"时间\",key:\"crtTime\"}],data:[],actionData:[],breadHeader:[],selectTreeItem:{}}},methods:{fileFilter:function(){},handleSuccess:function(t,e){t.success&&(this.$Message.success(t.message),this.getAllFileData(this.subareaPath))},goSubarea:function(){this.$router.push({path:\"/fileCabinet/list\"})},openfile:function(t){t.isFile||(this.breadHeader.push({path:t.path,name:t.name}),this.getAllFileData(t.path),this.subareaPath=t.path)},goClickFile:function(t,e){this.breadHeader.splice(e+1,this.breadHeader.length-1),this.getAllFileData(t.path),this.subareaPath=t.path},renameFile:function(t){this.showModal=!0,this.isAdd=!1,this.fileName=t.name,this.modalTitle=\"重命名\",this.filePath=t.path},addNewFile:function(){this.showModal=!0,this.isAdd=!0,this.fileName=\"\",this.modalTitle=\"新建文件夹\"},confirmAddNewFile:function(){var e=this;this.fileName&&(this.isAdd?Object(s.b)(this.subareaPath+\"/\"+this.fileName).then(function(t){t.success&&(e.$Message.success(t.message),e.getAllFileData())}).catch(function(t){e.$Message.error(t.data.message)}):Object(s.g)(this.filePath,this.fileName).then(function(t){t.success&&(e.$Message.success(t.message),e.getAllFileData())}).catch(function(t){e.$Message.error(t.data.message)}))},deleteFiles:function(t){var e=this;t.path&&this.$Modal.confirm({title:\"确认\",content:\"确认删除<b>\"+t.name+\"</b>？\",onOk:function(){Object(s.c)(t.path).then(function(t){t.success&&(e.$Message.success(t.message),e.getAllFileData())}).catch(function(t){e.$Message.error(t.data.message)})}})},downloadFiles:function(t){t.path&&window.open(\"/H_roleplay-si/filing/download?path=\"+t.path)},copyFiles:function(t){this.showActionModal=!0,this.selectTreeItem={},this.getActionFileData(\"root\"),this.isCopy=!0,this.waitPath=t.path},moveFiles:function(t){this.showActionModal=!0,this.selectTreeItem={},this.getActionFileData(\"root\"),this.isCopy=!1,this.waitPath=t.path},copyMoveFile:function(){var e=this;this.selectTreeItem.path&&(this.isCopy?Object(s.a)(this.waitPath,this.selectTreeItem.path).then(function(t){t.success&&e.$Message.success(t.message)}).catch(function(t){e.$Message.error(t.data.message)}):Object(s.f)(this.waitPath,this.selectTreeItem.path).then(function(t){t.success&&(e.$Message.success(t.message),e.getAllFileData())}).catch(function(t){e.$Message.error(t.data.message)}))},getAllFileData:function(t){var e=this,a=t||this.subareaPath;Object(s.d)(a).then(function(t){e.data=t})},getActionFileData:function(t,e){var a=this,i=[];Object(s.d)(t,!0).then(function(t){t.forEach(function(t){i.push({title:t.name,path:t.path,loading:!1,children:[]})}),e?e(i):a.actionData=i})},loadData:function(t,e){this.getActionFileData(t.path,e)},onSelectChange:function(t,e){this.selectTreeItem=e},getCurrentFileByPath:function(){var e=this;Object(s.e)(this.subareaId).then(function(t){e.subareaPath=t.path,e.breadHeader.push({path:e.subareaPath,name:e.subareaPath}),e.getAllFileData()})}},mounted:function(){},created:function(){this.getCurrentFileByPath()}},o=a(\"ie1I\"),l=a.n(o);var c=function(t){a(\"YA7J\")},r=a(\"VU/8\")(n,l.a,!1,c,\"data-v-43da348c\",null);e.default=r.exports}});"}