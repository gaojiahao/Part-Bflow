webpackJsonp([24],{"4HqH":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),s=a.n(n),i=a("UzZq"),o={name:"FlowtaskAll",data:function(){var e=this;return{columns:[{title:"任务编号",key:"taskId",width:90,render:function(e,t){var a=!0;return 1===t.row.type&&(a=!1),e("div",[e("Badge",{props:{dot:a},style:{marginRight:"5px",paddingBottom:"8px"}}),e("span",{},t.row.taskId)])}},{title:"交易号",key:"businessKey",width:130,render:function(e,t){return e("a",{on:{click:function(){window.open("/Form/index.html?data="+t.row.businessKey)}}},t.row.businessKey)}},{title:"操作名称",key:"nodeName",width:120},{title:"应用名称",key:"processName",width:140},{title:"经办人",key:"handlerName2",width:80},{title:"发起人",key:"crtName",width:80},{title:"待办创建时间",key:"crtTime",width:150},{title:"已过时间",key:"crtTime",width:150,render:function(t,a){return t("span",{},e.calcLeadTime(a.row.startTime))}}],data:[],pageInfo:{limit:30,page:1,total:0,filter:[]},searchkeywords:"",tableHeight:1}},methods:{getFlowAllTasks:function(){var e=this;Object(i.b)(this.pageInfo).then(function(t){e.data=t.tableContent,e.pageInfo.total=t.dataCount})},handlePageChange:function(e){this.pageInfo.page=e,this.getFlowAllTasks()},handlePageSizeChange:function(e){this.pageInfo.limit=e,this.getFlowAllTasks()},handleSearch:function(){this.pageInfo.filter=s()([{operator:"like",value:this.searchkeywords,property:"businessKey"}]),this.getFlowAllTasks()},calcLeadTime:function(e){var t=new Date(e.replace(/-/g,"/")),a=(new Date).getTime()-t.getTime(),n=a%864e5,s=n%36e5,i=s%6e4;return Math.floor(a/864e5)+"天"+Math.floor(n/36e5)+"时"+Math.floor(s/6e4)+"分"+Math.round(i/1e3)+"秒"},subscribeMessage:function(){var e=this;this.$deepstream.event.subscribe("taskChange/"+this.$currentUser.userId,function(t){e.getFlowAllTasks()})}},mounted:function(){var e=this;this.getFlowAllTasks(),this.subscribeMessage(),this.tableHeight=document.body.clientHeight-200,window.onresize=function(){e.tableHeight=document.body.clientHeight-200}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alltask"},[a("div",{staticClass:"alltask-header"},[e._v("\n        所有任务\n    ")]),e._v(" "),a("div",{staticClass:"alltask-content"},[a("div",{staticClass:"alltask-content-container shadow"},[a("div",{staticClass:"alltask-content-container-toolbar"},[a("Input",{staticClass:"alltask-content-container-toolbar-search",attrs:{search:"",placeholder:"输入交易号查询"},on:{"on-enter":e.handleSearch,"on-change":e.handleSearch},model:{value:e.searchkeywords,callback:function(t){e.searchkeywords=t},expression:"searchkeywords"}})],1),e._v(" "),a("Table",{staticClass:"alltask-content-table",attrs:{columns:e.columns,data:e.data,height:e.tableHeight}}),e._v(" "),a("Page",{staticClass:"alltask-content-page",attrs:{total:e.pageInfo.total,"page-size":e.pageInfo.limit,current:e.pageInfo.page,"show-total":"",size:"small","show-elevator":"","show-sizer":"","prev-text":"上一页","next-text":"下一页"},on:{"on-page-size-change":e.handlePageSizeChange,"on-change":e.handlePageChange}})],1)])])},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(e){a("sSw/")},"data-v-d7448d96",null);t.default=r.exports},"sSw/":function(e,t){}});